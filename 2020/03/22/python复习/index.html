<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="python复习"><meta name="keywords" content="python"><meta name="author" content="TYH"><meta name="copyright" content="TYH"><title>python复习 | 21号避难所</title><link rel="shortcut icon" href="/images/yuhangyuanfeixiang.png"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.0.0/css/font-awesome.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">基本类型和变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-计算"><span class="toc-text">1.计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-字符串"><span class="toc-text">2. 字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-格式化"><span class="toc-text">3. 格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-python里的四大集合"><span class="toc-text">4. python里的四大集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-List"><span class="toc-text">1. [] -List</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-tuple"><span class="toc-text">2. () -tuple</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-dict"><span class="toc-text">4. {} -dict</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-set"><span class="toc-text">5. ([]) - set</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#返回值"><span class="toc-text">返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五大参数"><span class="toc-text">五大参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#必选参数"><span class="toc-text">必选参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#默认参数"><span class="toc-text">默认参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可变参数-arg"><span class="toc-text">可变参数 *arg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关键字参数-args"><span class="toc-text">关键字参数 **args</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#命名关键字参数"><span class="toc-text">命名关键字参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参数组合"><span class="toc-text">参数组合</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-切片"><span class="toc-text">1. 切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-迭代"><span class="toc-text">2. 迭代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-列表生成器"><span class="toc-text">3. 列表生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-生成器"><span class="toc-text">4. 生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-迭代器"><span class="toc-text">5. 迭代器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">函数式编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#高阶函数"><span class="toc-text">高阶函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匿名函数-Lambda"><span class="toc-text">匿名函数 Lambda</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#好处："><span class="toc-text">好处：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用函数"><span class="toc-text">常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回函数"><span class="toc-text">返回函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#装饰器"><span class="toc-text">装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#偏函数"><span class="toc-text">偏函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#作用域"><span class="toc-text">作用域</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2904152762,521104362&amp;fm=16&amp;gp=0.jpg"></div><div class="author-info__name text-center">TYH</div><div class="author-info__description text-center">反复敲打，登峰造极</div><div class="follow-button"><a href="https://github.com/noonett" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">153</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">51</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://pic.netbian.com/uploads/allimg/200710/220558-1594389958b5b5.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">21号避难所</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">文章</a><a class="site-page" href="/tags">标签</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">python复习</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-03-22</time><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.7k</span><span class="post-meta__separator">|</span><span>阅读时长: 10 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><pre><code>再过一遍python语法，记点有趣的。
</code></pre>
<a id="more"></a>
<h1>基本类型和变量</h1>
<h3 id="1-计算"><a class="header-anchor" href="#1-计算"></a>1.计算</h3>
<p>除法：/（无论怎么除结果都是浮点型）；//（地板除，无论怎么除结果都是整数）<br>
乘法：*，** 乘方</p>
<h3 id="2-字符串"><a class="header-anchor" href="#2-字符串"></a>2. 字符串</h3>
<p>unicode编码，encode()编成指定bytes，decode()编成unicode。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = <span class="string">b'ABC'</span> <span class="comment">#以bytes形式存，占内存大小不一样。</span></span><br></pre></td></tr></table></figure>
<p>纯英文的str可以用ASCII编码为bytes，内容是一样的，含有中文的str可以用UTF-8编码为bytes。含有中文的str无法用ASCII编码，因为中文编码的范围超过了ASCII编码的范围，Python会报错。（含参数errors='ignore’可以无视一部分报错）</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  #提示操作系统是python可执行文件</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*- #提示编码方式</span></span><br><span class="line"></span><br><span class="line">str1.replace(<span class="string">'a'</span>,<span class="string">'A'</span>) <span class="comment">#换字符</span></span><br></pre></td></tr></table></figure>
<h3 id="3-格式化"><a class="header-anchor" href="#3-格式化"></a>3. 格式化</h3>
<p>%s可以把其他数强制转换成字符串。<br>
%%：表示%</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">'Hi, %s, you have $%d.'</span> % (<span class="string">'Michael'</span>, <span class="number">1000000</span>)</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right">占位符</th>
<th style="text-align:left">替换内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">%d</td>
<td style="text-align:left">整数</td>
</tr>
<tr>
<td style="text-align:right">%f</td>
<td style="text-align:left">浮点数</td>
</tr>
<tr>
<td style="text-align:right">%s</td>
<td style="text-align:left">字符串</td>
</tr>
<tr>
<td style="text-align:right">%x</td>
<td style="text-align:left">十六进制整数</td>
</tr>
</tbody>
</table>
<h3 id="4-python里的四大集合"><a class="header-anchor" href="#4-python里的四大集合"></a>4. python里的四大集合</h3>
<h5 id="1-List"><a class="header-anchor" href="#1-List"></a>1. [] -List</h5>
<pre><code>如果一个list中一个元素也没有，就是一个空的list，它的长度为0。
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#添加元素</span></span><br><span class="line">classmates.append(<span class="string">'Adam'</span>)</span><br><span class="line"><span class="comment">#插入特定位置</span></span><br><span class="line">classmates.insert(<span class="number">1</span>, <span class="string">'Jack'</span>)</span><br><span class="line"><span class="comment">#删除末尾元素</span></span><br><span class="line">classmates.pop()</span><br><span class="line"><span class="comment">#删除特定位置</span></span><br><span class="line">classmates.pop(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h5 id="2-tuple"><a class="header-anchor" href="#2-tuple"></a>2. () -tuple</h5>
<ul>
<li>tuple一旦初始化就不能修改, 这里是指指向不变，所以如果元素中有List，是可以改变List中的内容的。</li>
<li>只有1个元素的tuple定义时必须加一个逗号‘,’，来消除歧义, 否则表示数字1</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t = (<span class="number">1</span>,)</span><br></pre></td></tr></table></figure>
<h5 id="4-dict"><a class="header-anchor" href="#4-dict"></a>4. {} -dict</h5>
<ul>
<li>key无重复。</li>
<li>dict内部是无序的，key必须是不可变对象，list就是可变的</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#dict创建</span></span><br><span class="line">d = &#123;&#125;</span><br><span class="line"><span class="comment">#dict添加元素</span></span><br><span class="line">d[<span class="string">'Adam'</span>] = <span class="number">10</span></span><br><span class="line"><span class="comment">#dict查找元素, 第二个参数表示没找到，默认返回值None，可以自定义</span></span><br><span class="line">d.get(<span class="string">'Tomas'</span>, <span class="number">-1</span>)</span><br><span class="line"><span class="comment">#删除元素</span></span><br><span class="line">d.pop(<span class="string">'bob'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="5-set"><a class="header-anchor" href="#5-set"></a>5. ([]) - set</h5>
<p>数学意义上无重复，无序的集合。</p>
<ul>
<li>无value版的dict，内部无序，key不可变</li>
<li>同样key无重复</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建</span></span><br><span class="line">s = set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">#添加元素</span></span><br><span class="line">s.add(<span class="number">4</span>)</span><br><span class="line"><span class="comment">#删除元素</span></span><br><span class="line">s.remove(<span class="number">4</span>)</span><br><span class="line"><span class="comment">#集合操作</span></span><br><span class="line">s1 &amp; s2</span><br><span class="line">s1 | s2</span><br></pre></td></tr></table></figure>
<h1>函数</h1>
<h2 id="返回值"><a class="header-anchor" href="#返回值"></a>返回值</h2>
<p>可以返回多个值，其原理其实是返回一个tuple，按位置传给特定的参数。</p>
<h2 id="五大参数"><a class="header-anchor" href="#五大参数"></a>五大参数</h2>
<h3 id="必选参数"><a class="header-anchor" href="#必选参数"></a>必选参数</h3>
<p>按位置匹配，不可不填。</p>
<h3 id="默认参数"><a class="header-anchor" href="#默认参数"></a>默认参数</h3>
<p>如果默认参数是类似list可变的，多次调用可能达不到想要的效果，因为每一次调用都会修改同一个list。所以一般默认参数指向不可变对象。</p>
<ul>
<li>一般来说不可变对象可以规避修改数据倒置的错误，由于对象不变，多任务的环境下，同时读取对象不需要加锁。</li>
</ul>
<h3 id="可变参数-arg"><a class="header-anchor" href="#可变参数-arg"></a>可变参数 *arg</h3>
<p>如果想直接传入不定数的参数，一种方式是定义list[],或者tuple()。<br>
还可以定义可变参数：可以不传</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*nums)</span>:</span></span><br><span class="line">   sum = <span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">      sum += n;</span><br><span class="line">   <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">calc(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#当传入list或者tuple时，在其前面加个*</span></span><br><span class="line">calc(*nums1)</span><br></pre></td></tr></table></figure>
<p>可变参数在函数调用时，自动封装成tuple。</p>
<h3 id="关键字参数-args"><a class="header-anchor" href="#关键字参数-args"></a>关键字参数 **args</h3>
<p>可以传入不定数的含参数名的参数，这些关键字参数会被自动封装成dict。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name,city,**kw)</span>:</span></span><br><span class="line">   print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br><span class="line"><span class="comment">#可以做判断：</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'city'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有city参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'job'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># 有job参数</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br><span class="line"></span><br><span class="line">person(<span class="string">'Bob'</span>, <span class="number">35</span>, city=<span class="string">'Beijing'</span>)</span><br><span class="line">name: Bob age: <span class="number">35</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>&#125;</span><br></pre></td></tr></table></figure>
<p>调用该函数可以只传必选参数。<br>
可以直接传入dict：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">extra = &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br><span class="line">person(<span class="string">'Jack'</span>, <span class="number">24</span>, **extra)</span><br><span class="line"><span class="comment"># name: Jack age: 24 other: &#123;'city': 'Beijing', 'job': 'Engineer'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="命名关键字参数"><a class="header-anchor" href="#命名关键字参数"></a>命名关键字参数</h3>
<p>顾名思义，规定传入关键字参数的名字，用<em>隔开必选参数.<br>
如果前面紧跟可变参数，可以省略</em>。<br>
可以有缺省值：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, *, city=<span class="string">'Beijing'</span>, job)</span>:</span></span><br><span class="line">    print(name, age, city, job)</span><br><span class="line"></span><br><span class="line"><span class="comment">#调用必须使用关键字，否则会默认为位置参数。</span></span><br><span class="line">person(<span class="string">'Jack'</span>, <span class="number">24</span>, job=<span class="string">'Engineer'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="参数组合"><a class="header-anchor" href="#参数组合"></a>参数组合</h3>
<p>五大参数组合一起用时，要按照既定顺序：必选参数，默认参数，可变参数，关键字参数，命名关键字参数。</p>
<h1>特性</h1>
<h3 id="1-切片"><a class="header-anchor" href="#1-切片"></a>1. 切片</h3>
<p>抽取部分值<br>
切片操作基本表达式：object[start_index:end_index:step]<br>
负数为反向</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">100</span>)[<span class="number">2</span>::<span class="number">3</span>][<span class="number">-5</span>:]: </span><br><span class="line">       print(i)</span><br><span class="line">n[::<span class="number">-1</span>] <span class="comment">#逆序切片</span></span><br></pre></td></tr></table></figure>
<p>[:]和.copy()都属于“浅拷贝”，只拷贝最外层元素，内层嵌套元素则通过引用方式共享，而非独立分配内存，如果需要彻底拷贝则需采用“深拷贝”方式，deepcopy().</p>
<h3 id="2-迭代"><a class="header-anchor" href="#2-迭代"></a>2. 迭代</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">isinstance(<span class="string">'abc'</span>, Iterable) <span class="comment"># str是否可迭代</span></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">9</span>)]:</span><br><span class="line">   print(x, y)</span><br><span class="line"><span class="comment">#enumerate函数可以把一个list变成索引-元素对</span></span><br><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]):</span><br><span class="line">   print(i, value)</span><br></pre></td></tr></table></figure>
<h3 id="3-列表生成器"><a class="header-anchor" href="#3-列表生成器"></a>3. 列表生成器</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"><span class="comment">#还可以做判断</span></span><br><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment">#两层循环</span></span><br><span class="line">[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'XYZ'</span>]</span><br><span class="line"><span class="comment">#循环dict的key-value pair</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">   print(k, <span class="string">'='</span>, v)</span><br><span class="line">[k + <span class="string">'='</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line"><span class="comment">#把list所有的str转成小写</span></span><br><span class="line">[s.lower() <span class="keyword">for</span> s <span class="keyword">in</span> L]</span><br><span class="line"><span class="comment">#后面if是筛选条件</span></span><br><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment">#if..else是表达式</span></span><br><span class="line">[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="4-生成器"><a class="header-anchor" href="#4-生成器"></a>4. 生成器</h3>
<p>记录的是算法，只有在调用的时候才开始计算结果。<br>
next(g)返回一次计算值。for i in g</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">g = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>))</span><br><span class="line">next(g) <span class="comment"># 0</span></span><br></pre></td></tr></table></figure>
<p>如果一个函数定义中包含yield关键字，那么这个函数就不再是一个普通函数，而是一个generator，<br>
每次调用next()的时候执行，遇到yield语句返回.<br>
再次执行时从上次返回的yield语句处继续执行。</p>
<h3 id="5-迭代器"><a class="header-anchor" href="#5-迭代器"></a>5. 迭代器</h3>
<p>Iterator甚至可以表示一个无限大的数据流，可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator。生成器都是Iterator对象，但list、dict、str虽然是Iterable，却不是Iterator。</p>
<p>把list、dict、str等Iterable变成Iterator可以使用iter()函数：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">isinstance(iter([]), Iterator)</span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<h1>函数式编程</h1>
<h3 id="高阶函数"><a class="header-anchor" href="#高阶函数"></a>高阶函数</h3>
<p>函数是一个变量，函数名可以看作变量能被当作参数传入函数：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = abs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y,f)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> f(x) + f(y)</span><br></pre></td></tr></table></figure>
<h3 id="匿名函数-Lambda"><a class="header-anchor" href="#匿名函数-Lambda"></a>匿名函数 Lambda</h3>
<p>关键字lambda表示匿名函数，冒号前面的n表示函数参数，可以有多个参数。<br>
匿名函数有个限制，就是只能有一个表达式，不用写return，返回值就是该表达式的结果。</p>
<h5 id="好处："><a class="header-anchor" href="#好处："></a>好处：</h5>
<ol>
<li>不必担心函数名冲突。匿名函数也是一个函数对象，也可以把匿名函数赋值给一个变量，再利用变量来调用该函数：</li>
<li>有些函数在代码中只用一次，使用匿名函数可以减少代码量</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x**y</span><br><span class="line"><span class="comment">#换成匿名函数</span></span><br><span class="line">calc = <span class="keyword">lambda</span> x,y:x**y</span><br><span class="line">print(calc(<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; y:</span><br><span class="line">        <span class="keyword">return</span> x*y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x / y    </span><br><span class="line"><span class="comment">#三元运算换成匿名函数</span></span><br><span class="line">calc = <span class="keyword">lambda</span> x,y:x * y <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> x / y</span><br><span class="line">print(calc(<span class="number">2</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h3 id="常用函数"><a class="header-anchor" href="#常用函数"></a>常用函数</h3>
<ol>
<li>map(f,Iterable)<br>
映射，将结果作为新的Iterator返回。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list[map(str,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])]</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>reduce(f,Iterable)<br>
叠加调用，重复的对上一次调用函数的结果与下一个序列调用函数计算结果。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">reduce(add,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])<span class="comment"># 1+2+3+4+5</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>filter(f,Iterable)<br>
筛选，f的返回值应该会true或false，最后生成一个全为true的Iterator。</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在一个list中，删掉偶数，只保留奇数</span></span><br><span class="line">li = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>]</span><br><span class="line">print(list(filter(<span class="keyword">lambda</span> x:x % <span class="number">2</span>==<span class="number">1</span>,li)))  <span class="comment"># [1, 5, 9, 15]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 回数是指从左向右读和从右向左读都是一样的数，例如12321，909。请利用filter()筛选出回数</span></span><br><span class="line">li = list(range(<span class="number">1</span>, <span class="number">200</span>))</span><br><span class="line">print(list(filter(<span class="keyword">lambda</span> x:int(str(x))==int(str(x)[::<span class="number">-1</span>]),li)))</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>, <span class="number">88</span>, <span class="number">99</span>, <span class="number">101</span>, <span class="number">111</span>, <span class="number">121</span>, <span class="number">131</span>, <span class="number">141</span>, <span class="number">151</span>, <span class="number">161</span>, <span class="number">171</span>, <span class="number">181</span>, <span class="number">191</span>]</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>sorted(Iterable, key = None, reverse = false)<br>
对一个Iterable自定义排序：</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对列表按照绝对值进行排序</span></span><br><span class="line">li= [<span class="number">-21</span>, <span class="number">-12</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">36</span>]</span><br><span class="line">print(sorted(li, key = <span class="keyword">lambda</span> x:abs(x)))</span><br><span class="line"><span class="comment"># [5, 9, -12, -21, 36]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把下面单词以首字母排序</span></span><br><span class="line">li = [<span class="string">'bad'</span>, <span class="string">'about'</span>, <span class="string">'Zoo'</span>, <span class="string">'Credit'</span>]</span><br><span class="line">print(sorted(li, key = <span class="keyword">lambda</span> x : x[<span class="number">0</span>]))</span><br><span class="line"><span class="comment"># 输出['Credit', 'Zoo', 'about', 'bad']</span></span><br></pre></td></tr></table></figure>
<h3 id="返回函数"><a class="header-anchor" href="#返回函数"></a>返回函数</h3>
<p>函数可以返回一个闭包，只有在调用这个函数的时候，闭包才会执行。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>返回函数不要引用任何循环变量，或者后续会发生变化的变量。</p>
<h3 id="装饰器"><a class="header-anchor" href="#装饰器"></a>装饰器</h3>
<p>在代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span> <span class="comment">#装饰器传入参数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">        @functools.wraps(func) #装饰器会将传入的函数改名，这句改回来</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span> </span><br><span class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</span><br><span class="line">            temp = func(*args, **kw)  <span class="comment">#在这个位置执行</span></span><br><span class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</span><br><span class="line">            <span class="keyword">return</span> temp <span class="comment">#返回执行传入的函数</span></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'2015-3-25'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="偏函数"><a class="header-anchor" href="#偏函数"></a>偏函数</h3>
<p>为函数的参数设定默认值，返回一个新函数。仍然可以传入这个参数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> functools</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2 = functools.partial(int, base=<span class="number">2</span>) <span class="comment">#表示int传入的str是二进制，转回十进制</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1000000'</span>)</span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1010101'</span>)</span><br><span class="line"><span class="number">85</span></span><br></pre></td></tr></table></figure>
<p>创建偏函数时，可以接收函数对象、*args和**kw这3个参数。</p>
<h1>模块</h1>
<p>将py文件放入文件夹下，文件夹名即是包名。<br>
只要顶层的包名不与别人冲突，那所有模块都不会与别人冲突。现在，abc.py模块的名字就变成了mycompany.abc</p>
<p>每一个包目录下面都会有一个__init__.py的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录，而不是一个包。<strong>init</strong>.py可以是空文件。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">' a test module '</span> <span class="comment">#模块注释</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">'Michael Liao'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    args = sys.argv</span><br><span class="line">    <span class="keyword">if</span> len(args)==<span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'Hello, world!'</span>)</span><br><span class="line">    <span class="keyword">elif</span> len(args)==<span class="number">2</span>:</span><br><span class="line">        print(<span class="string">'Hello, %s!'</span> % args[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'Too many arguments!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>: <span class="comment">#用于测试，其他地方导入这个模块时则不会执行</span></span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>
<h3 id="作用域"><a class="header-anchor" href="#作用域"></a>作用域</h3>
<p>默认是public的，可以被直接引用。<br>
<strong>xxx__这样的变量是特殊变量，可以被直接引用，但是有特殊用途，比如上面的__author</strong>，__name__就是特殊变量，hello模块定义的文档注释也可以用特殊变量__doc__访问，我们自己的变量一般不要用这种变量名；<br>
类似_xxx和__xxx这样的函数或变量就是非公开的（private），不应该被直接引用，比如_abc，__abc等。<br>
Python并没有一种方法可以完全限制访问private函数或变量。</p>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/23/%E6%A0%88%E7%9A%84%E5%8E%8B%E5%85%A5%E3%80%81%E5%BC%B9%E5%87%BA%E5%BA%8F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/"><i class="fa fa-chevron-left">  </i><span>栈的压入、弹出序列｜《剑指offer》</span></a></div><div class="next-post pull-right"><a href="/2020/03/22/%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/"><span>包含min函数的栈｜《剑指offer》</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(http://pic.netbian.com/uploads/allimg/200710/220558-1594389958b5b5.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 By TYH</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>