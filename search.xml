<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä»Šæœé…’</title>
    <url>/9999/01/01/top/</url>
    <content><![CDATA[<p>é¡¹ç›®ç¼“ä¸€ç¼“ï¼Œå…ˆæ‰“åŸºç¡€ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Leetcodeæ•°æ®ç»“æ„åˆè¾‘</title>
    <url>/2020/05/30/Leetcode%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%90%88%E8%BE%91/</url>
    <content><![CDATA[<pre><code>ä¸€äº›æ•°æ®ç»“æ„åœ¨ç®—æ³•ä¸Šçš„å¦™ç”¨ã€‚
</code></pre>
<a id="more"></a>
<h1>å•è°ƒæ ˆ</h1>
<h3 id="84-æŸ±çŠ¶å›¾çš„æœ€å¤§é¢ç§¯"><a class="header-anchor" href="#84-æŸ±çŠ¶å›¾çš„æœ€å¤§é¢ç§¯">Â¶</a>84.æŸ±çŠ¶å›¾çš„æœ€å¤§é¢ç§¯</h3>
<pre><code>é¢˜ç›®ï¼šç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚
æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚
</code></pre>
<p>ä¿å­˜å„ä¸ªä½ç½®å·¦è¾¹å’Œå³è¾¹å°äºå®ƒçš„ç¬¬ä¸€ä¸ªæ•°ä»è€Œæ ˆä¸­å‰©ä¸‹çš„æ ˆé¡¶çš„æ•°å°±æ˜¯å·¦è¾¹æœ€åä¸€ä¸ªå¤§äºå®ƒçš„æ•°ï¼Œä»è€Œè®¡ç®—å‡ºå®½åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = heights.length;</span><br><span class="line">        Deque&lt;Integer&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] left = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span>[] right = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)&#123;</span><br><span class="line">            <span class="keyword">while</span>((!stack.isEmpty())&amp;&amp; (heights[stack.peek()]&gt;=heights[i]))&#123;</span><br><span class="line">                stack.pollFirst();</span><br><span class="line">            &#125;</span><br><span class="line">            left[i] = stack.isEmpty()? -<span class="number">1</span>: stack.peek();</span><br><span class="line">            stack.offerFirst(i);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.clear();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)&#123;</span><br><span class="line">            <span class="keyword">while</span>((!stack.isEmpty())&amp;&amp; (heights[stack.peek()]&gt;=heights[i]))&#123;</span><br><span class="line">                stack.pollFirst();</span><br><span class="line">            &#125;</span><br><span class="line">            right[i] =stack.isEmpty()? len: stack.peek();</span><br><span class="line">            stack.offerFirst(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i)&#123;</span><br><span class="line">            max = Math.max((right[i] - left[i]-<span class="number">1</span>)* heights[i], max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootä¸Šæ‰‹è®°å½•</title>
    <url>/2020/05/26/SpringBoot%E4%B8%8A%E6%89%8B%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<pre><code>è®°å½•ä¸€ä¸‹åŸºç¡€æ¦‚å¿µå’Œdemoå•¥çš„ã€‚
</code></pre>
<a id="more"></a>
<h1>SpringBootæ˜¯å•¥</h1>
<p>ç¬¬ä¸‰æ–¹åº“å¼€ç®±å³ç”¨ï¼Œæä¾›äº†ä¸€ç³»åˆ—å¤§å‹é¡¹ç›®å¸¸ç”¨çš„éåŠŸèƒ½æ€§ç‰¹å¾ï¼Œé›¶é…ç½®ï¼ˆçº¦å®šå¤§äºé…ç½®ï¼‰ã€‚</p>
<h2 id="hello-world"><a class="header-anchor" href="#hello-world">Â¶</a>hello-world</h2>
<ol>
<li>initial-starterå¯ä»¥æ•´ä¸ªæ¨¡ç‰ˆä¸‹æ¥å¤åˆ¶ã€‚</li>
<li>ä¿®æ”¹ä¾èµ–åœ¨ build.gradle æ–‡ä»¶é‡Œï¼Œå¯ä»¥æ›¿æ¢mavenä»“åº“ï¼Œé»˜è®¤æ˜¯ä¸­å¤®ä»“åº“ï¼Œæ›¿æ¢åˆ°maven.aliyun.comçš„é•œåƒåº“ã€‚</li>
<li>é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ gradle buildç¼–è¯‘é¡¹ç›®ã€‚1</li>
<li>è¿è¡ŒjaråŒ…æ¥å¯åŠ¨é¡¹ç›®ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar build/libs/initializr-start-1.0.0.jar</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>Springå¼€å‘åŸºç¡€</title>
    <url>/2020/05/26/Spring%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<pre><code>Webå¼€å‘æ¡†æ¶ã€‚
</code></pre>
<a id="more"></a>
<h1>IOCå®¹å™¨</h1>
<p>å®¹å™¨æ˜¯ä¸€ç§ä¸ºæŸç§ç‰¹å®šç»„ä»¶çš„è¿è¡Œæä¾›å¿…è¦æ”¯æŒçš„ä¸€ä¸ªè½¯ä»¶ç¯å¢ƒã€‚<br>
IoCå®¹å™¨ï¼Œå®ƒå¯ä»¥ç®¡ç†æ‰€æœ‰è½»é‡çº§çš„JavaBeanç»„ä»¶ï¼Œæä¾›çš„åº•å±‚æœåŠ¡åŒ…æ‹¬ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€é…ç½®å’Œç»„è£…æœåŠ¡ã€AOPæ”¯æŒï¼Œä»¥åŠå»ºç«‹åœ¨AOPåŸºç¡€ä¸Šçš„å£°æ˜å¼äº‹åŠ¡æœåŠ¡ç­‰ã€‚</p>
<h3 id="IoCåŸç†-Inversion-of-Control-æ§åˆ¶åè½¬"><a class="header-anchor" href="#IoCåŸç†-Inversion-of-Control-æ§åˆ¶åè½¬">Â¶</a>IoCåŸç† Inversion of Control æ§åˆ¶åè½¬</h3>
<p>å¦‚æœä¸€ä¸ªç³»ç»Ÿæœ‰å¤§é‡çš„ç»„ä»¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸå’Œç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»å¦‚æœç”±ç»„ä»¶è‡ªèº«æ¥ç»´æŠ¤ï¼Œä¸ä½†å¤§å¤§å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œè€Œä¸”ä¼šå¯¼è‡´ç»„ä»¶ä¹‹é—´æä¸ºç´§å¯†çš„è€¦åˆï¼Œç»§è€Œç»™æµ‹è¯•å’Œç»´æŠ¤å¸¦æ¥äº†æå¤§çš„å›°éš¾ã€‚<br>
ä¼ ç»Ÿçš„åº”ç”¨ç¨‹åºä¸­ï¼Œæ§åˆ¶æƒåœ¨ç¨‹åºæœ¬èº«ï¼Œç¨‹åºçš„æ§åˆ¶æµç¨‹å®Œå…¨ç”±å¼€å‘è€…æ§åˆ¶ã€‚<br>
åœ¨IoCæ¨¡å¼ä¸‹ï¼Œæ§åˆ¶æƒå‘ç”Ÿäº†åè½¬ï¼Œå³ä»åº”ç”¨ç¨‹åºè½¬ç§»åˆ°äº†IoCå®¹å™¨ï¼Œæ‰€æœ‰ç»„ä»¶ä¸å†ç”±åº”ç”¨ç¨‹åºè‡ªå·±åˆ›å»ºå’Œé…ç½®ï¼Œè€Œæ˜¯ç”±IoCå®¹å™¨è´Ÿè´£ï¼Œè¿™æ ·ï¼Œåº”ç”¨ç¨‹åºåªéœ€è¦ç›´æ¥ä½¿ç”¨å·²ç»åˆ›å»ºå¥½å¹¶ä¸”é…ç½®å¥½çš„ç»„ä»¶ã€‚ä¸ºäº†èƒ½è®©ç»„ä»¶åœ¨IoCå®¹å™¨ä¸­è¢«â€œè£…é…â€å‡ºæ¥ï¼Œéœ€è¦æŸç§â€œæ³¨å…¥â€æœºåˆ¶ï¼Œä¾‹å¦‚ï¼ŒBookServiceè‡ªå·±å¹¶ä¸ä¼šåˆ›å»ºDataSourceï¼Œè€Œæ˜¯ç­‰å¾…å¤–éƒ¨é€šè¿‡setDataSource()æ–¹æ³•æ¥æ³¨å…¥ä¸€ä¸ªDataSourceã€‚ä»¥å¾€å¯¹å¯¹è±¡çš„åˆ›å»ºæ˜¯newã€‚</p>
<h6 id="IoCå°†ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½®-ä¸-ä½¿ç”¨é¡¹åˆ†ç¦»"><a class="header-anchor" href="#IoCå°†ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½®-ä¸-ä½¿ç”¨é¡¹åˆ†ç¦»">Â¶</a>IoCå°†ç»„ä»¶çš„åˆ›å»ºå’Œé…ç½® ä¸ ä½¿ç”¨é¡¹åˆ†ç¦»</h6>
<p>IoCåˆç§°ä¸ºä¾èµ–æ³¨å…¥ï¼ˆDIï¼šDependency Injectionï¼‰ï¼Œå®ƒè§£å†³äº†ä¸€ä¸ªæœ€ä¸»è¦çš„é—®é¢˜ï¼šå°†ç»„ä»¶çš„åˆ›å»º+é…ç½®ä¸ç»„ä»¶çš„ä½¿ç”¨ç›¸åˆ†ç¦»ï¼Œå¹¶ä¸”ï¼Œç”±IoCå®¹å™¨è´Ÿè´£ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚<br>
å› ä¸ºIoCå®¹å™¨è¦è´Ÿè´£å®ä¾‹åŒ–æ‰€æœ‰çš„ç»„ä»¶ï¼Œå› æ­¤ï¼Œæœ‰å¿…è¦å‘Šè¯‰å®¹å™¨å¦‚ä½•åˆ›å»ºç»„ä»¶ï¼Œä»¥åŠå„ç»„ä»¶çš„ä¾èµ–å…³ç³»ã€‚ä¸€ç§æœ€ç®€å•çš„é…ç½®æ˜¯é€šè¿‡XMLæ–‡ä»¶æ¥å®ç°ã€‚</p>
<h6 id="xmlå±æ€§æ³¨å…¥å®ç°å„ç»„ä»¶ä¾èµ–å…³ç³»"><a class="header-anchor" href="#xmlå±æ€§æ³¨å…¥å®ç°å„ç»„ä»¶ä¾èµ–å…³ç³»">Â¶</a>xmlå±æ€§æ³¨å…¥å®ç°å„ç»„ä»¶ä¾èµ–å…³ç³»</h6>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"HikariDataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"BookService"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"UserService"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Springçš„IoCå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰ç»„ä»¶ç»Ÿç§°ä¸ºJavaBeanï¼Œå³é…ç½®ä¸€ä¸ªç»„ä»¶å°±æ˜¯é…ç½®ä¸€ä¸ªBeanã€‚</p>
<h3 id="ä¾èµ–æ³¨å…¥"><a class="header-anchor" href="#ä¾èµ–æ³¨å…¥">Â¶</a>ä¾èµ–æ³¨å…¥</h3>
<ol>
<li>xmlå±æ€§æ³¨å…¥</li>
<li>æ„é€ æ–¹æ³•æ³¨å…¥</li>
</ol>
<h3 id="æ— ä¾µå…¥å®¹å™¨"><a class="header-anchor" href="#æ— ä¾µå…¥å®¹å™¨">Â¶</a>æ— ä¾µå…¥å®¹å™¨</h3>
<p>æ— ä¾µå…¥ï¼Œæ˜¯æŒ‡åº”ç”¨ç¨‹åºçš„ç»„ä»¶æ— éœ€å®ç°Springçš„ç‰¹å®šæ¥å£ï¼Œæˆ–è€…è¯´ï¼Œç»„ä»¶æ ¹æœ¬ä¸çŸ¥é“è‡ªå·±åœ¨Springçš„å®¹å™¨ä¸­è¿è¡Œã€‚</p>
<ol>
<li>åº”ç”¨ç¨‹åºç»„ä»¶æ—¢å¯ä»¥åœ¨Springçš„IoCå®¹å™¨ä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™ä»£ç è‡ªè¡Œç»„è£…é…ç½®ï¼›</li>
<li>æµ‹è¯•çš„æ—¶å€™å¹¶ä¸ä¾èµ–Springå®¹å™¨ï¼Œå¯å•ç‹¬è¿›è¡Œæµ‹è¯•ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</li>
</ol>
<h1>AOP Aspect Oriented Programming</h1>
<p>é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚OOPæŠŠç³»ç»Ÿçœ‹ä½œå¤šä¸ªå¯¹è±¡çš„äº¤äº’ï¼ŒAOPæŠŠç³»ç»Ÿåˆ†è§£ä¸ºä¸åŒçš„å…³æ³¨ç‚¹ï¼Œæˆ–è€…ç§°ä¹‹ä¸ºåˆ‡é¢ï¼ˆAspectï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ">Â¶</a>ä¸ºä»€ä¹ˆä¼šå‡ºç°ï¼Ÿ</h3>
<p>è€ƒå¯Ÿä¸šåŠ¡æ¨¡å‹å¯ä»¥å‘ç°ï¼ŒBookServiceå…³ç³»çš„æ˜¯è‡ªèº«çš„æ ¸å¿ƒé€»è¾‘ï¼Œä½†æ•´ä¸ªç³»ç»Ÿè¿˜è¦æ±‚å…³æ³¨å®‰å…¨æ£€æŸ¥ã€æ—¥å¿—ã€äº‹åŠ¡ç­‰åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å®é™…ä¸Šâ€œæ¨ªè·¨â€å¤šä¸ªä¸šåŠ¡æ–¹æ³•ï¼Œä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œä¸å¾—ä¸åœ¨æ¯ä¸ªä¸šåŠ¡æ–¹æ³•ä¸Šé‡å¤ç¼–å†™ä»£ç ã€‚<br>
å¯ä»¥é€šè¿‡ä»£ç†è®¾è®¡æ¨¡å¼å®ç°æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<p>è€Œå¦‚æœæˆ‘ä»¬ä»¥AOPçš„è§†è§’æ¥ç¼–å†™ä¸Šè¿°ä¸šåŠ¡ï¼Œå¯ä»¥ä¾æ¬¡å®ç°ï¼š</p>
<ol>
<li>æ ¸å¿ƒé€»è¾‘ï¼Œå³BookServiceï¼›</li>
<li>åˆ‡é¢é€»è¾‘ï¼Œå³ï¼š<br>
æƒé™æ£€æŸ¥çš„Aspectï¼›<br>
æ—¥å¿—çš„Aspectï¼›<br>
äº‹åŠ¡çš„Aspectã€‚<br>
ç„¶åï¼Œä»¥æŸç§æ–¹å¼ï¼Œè®©æ¡†æ¶æ¥æŠŠä¸Šè¿°3ä¸ªAspectä»¥Proxyçš„æ–¹å¼â€œç»‡å…¥â€åˆ°BookServiceä¸­ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±ä¸å¿…ç¼–å†™å¤æ‚è€Œå†—é•¿çš„Proxyæ¨¡å¼ã€‚</li>
</ol>
<h3 id="AOPåŸç†"><a class="header-anchor" href="#AOPåŸç†">Â¶</a>AOPåŸç†</h3>
<p>Javaä¸ŠAOPçš„ç»‡å…¥æœ‰ä¸‰ç§</p>
<ol>
<li>ç¼–è¯‘æœŸï¼šåœ¨ç¼–è¯‘æ—¶ï¼Œç”±ç¼–è¯‘å™¨æŠŠåˆ‡é¢è°ƒç”¨ç¼–è¯‘è¿›å­—èŠ‚ç ï¼Œè¿™ç§æ–¹å¼éœ€è¦å®šä¹‰æ–°çš„å…³é”®å­—å¹¶æ‰©å±•ç¼–è¯‘å™¨ï¼ŒAspectJå°±æ‰©å±•äº†Javaç¼–è¯‘å™¨ï¼Œä½¿ç”¨å…³é”®å­—aspectæ¥å®ç°ç»‡å…¥ï¼›</li>
<li>ç±»åŠ è½½å™¨ï¼šåœ¨ç›®æ ‡ç±»è¢«è£…è½½åˆ°JVMæ—¶ï¼Œé€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œå¯¹ç›®æ ‡ç±»çš„å­—èŠ‚ç é‡æ–°â€œå¢å¼ºâ€ï¼›</li>
<li>è¿è¡ŒæœŸï¼šç›®æ ‡å¯¹è±¡å’Œåˆ‡é¢éƒ½æ˜¯æ™®é€šJavaç±»ï¼Œé€šè¿‡JVMçš„åŠ¨æ€ä»£ç†åŠŸèƒ½æˆ–è€…ç¬¬ä¸‰æ–¹åº“å®ç°è¿è¡ŒæœŸåŠ¨æ€ç»‡å…¥ã€‚</li>
</ol>
<p>Springä½¿ç”¨çš„å°±æ˜¯åŸºäºJVMçš„åŠ¨æ€ä»£ç†ï¼Œç”±äºJVMçš„åŠ¨æ€ä»£ç†è¦æ±‚å¿…é¡»å®ç°æ¥å£ï¼Œå¦‚æœä¸€ä¸ªæ™®é€šç±»æ²¡æœ‰ä¸šåŠ¡æ¥å£ï¼Œå°±éœ€è¦é€šè¿‡CGLIBæˆ–è€…Javassistè¿™äº›ç¬¬ä¸‰æ–¹åº“å®ç°ã€‚<br>
AOPå¯¹äºè§£å†³ç‰¹å®šé—®é¢˜ï¼Œä¾‹å¦‚äº‹åŠ¡ç®¡ç†éå¸¸æœ‰ç”¨ï¼Œè¿™æ˜¯å› ä¸ºåˆ†æ•£åœ¨å„å¤„çš„äº‹åŠ¡ä»£ç å‡ ä¹æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œå¹¶ä¸”å®ƒä»¬éœ€è¦çš„å‚æ•°ï¼ˆJDBCçš„Connectionï¼‰ä¹Ÿæ˜¯å›ºå®šçš„ã€‚å¦ä¸€äº›ç‰¹å®šé—®é¢˜ï¼Œå¦‚æ—¥å¿—ï¼Œå°±ä¸é‚£ä¹ˆå®¹æ˜“å®ç°ï¼Œå› ä¸ºæ—¥å¿—è™½ç„¶ç®€å•ï¼Œä½†æ‰“å°æ—¥å¿—çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦æ•è·å±€éƒ¨å˜é‡ï¼Œå¦‚æœä½¿ç”¨AOPå®ç°æ—¥å¿—ï¼Œæˆ‘ä»¬åªèƒ½è¾“å‡ºå›ºå®šæ ¼å¼çš„æ—¥å¿—ï¼Œå› æ­¤ï¼Œä½¿ç”¨AOPæ—¶ï¼Œå¿…é¡»é€‚åˆç‰¹å®šçš„åœºæ™¯ã€‚</p>
]]></content>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>LRUCacheå®ç°</title>
    <url>/2020/05/25/LRUCache%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<pre><code>å®ç°LRUç¼“å­˜ã€‚
</code></pre>
<a id="more"></a>
<h2 id="1-Javaå†…ç½®ç±»LinkedHashMap"><a class="header-anchor" href="#1-Javaå†…ç½®ç±»LinkedHashMap">Â¶</a>1. Javaå†…ç½®ç±»LinkedHashMap</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">Integer</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> capacity;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(capacity, <span class="number">0.75F</span>, <span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getOrDefault(key, - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">removeEldestEntry</span><span class="params">(Map.Entry&lt;Integer, Integer&gt; eldest)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size() &gt; capacity; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h2 id="2-è‡ªæˆ‘å®ç°åŒå‘é“¾è¡¨"><a class="header-anchor" href="#2-è‡ªæˆ‘å®ç°åŒå‘é“¾è¡¨">Â¶</a>2. è‡ªæˆ‘å®ç°åŒå‘é“¾è¡¨</h2>
<p>åŒå‘é“¾è¡¨æŒ‰ç…§è¢«ä½¿ç”¨çš„é¡ºåºå­˜å‚¨äº†è¿™äº›é”®å€¼å¯¹ï¼Œé è¿‘å¤´éƒ¨çš„é”®å€¼å¯¹æ˜¯æœ€è¿‘ä½¿ç”¨çš„ï¼Œè€Œé è¿‘å°¾éƒ¨çš„é”®å€¼å¯¹æ˜¯æœ€ä¹…æœªä½¿ç”¨çš„ã€‚<br>
å“ˆå¸Œè¡¨å³ä¸ºæ™®é€šçš„å“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ï¼Œé€šè¿‡ç¼“å­˜æ•°æ®çš„é”®æ˜ å°„åˆ°å…¶åœ¨åŒå‘é“¾è¡¨ä¸­çš„ä½ç½®ã€‚</p>
<p>å°†ä¸€ä¸ªèŠ‚ç‚¹ç§»åˆ°åŒå‘é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¯ä»¥åˆ†æˆã€Œåˆ é™¤è¯¥èŠ‚ç‚¹ã€å’Œã€Œåœ¨åŒå‘é“¾è¡¨çš„å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹ã€ä¸¤æ­¥æ“ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">Integer</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    DoubleListNode head;</span><br><span class="line">    DoubleListNode tail;</span><br><span class="line">    HashMap&lt;Integer, DoubleListNode&gt; cache;</span><br><span class="line">    <span class="keyword">int</span> capacity;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DoubleListNode</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key;</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        DoubleListNode pre = <span class="keyword">null</span>;</span><br><span class="line">        DoubleListNode next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">DoubleListNode</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">DoubleListNode</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">this</span>.head = <span class="keyword">new</span> DoubleListNode();</span><br><span class="line">        <span class="keyword">this</span>.tail = <span class="keyword">new</span> DoubleListNode();</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.pre = head;</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        DoubleListNode node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            moveToHead(node);</span><br><span class="line">            <span class="keyword">return</span> node.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        DoubleListNode node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cache.size()==capacity)&#123;</span><br><span class="line">                DoubleListNode removedNode = removeTail();</span><br><span class="line">                cache.remove(removedNode.key);</span><br><span class="line">            &#125;</span><br><span class="line">            node = <span class="keyword">new</span> DoubleListNode(key, value);</span><br><span class="line">            cache.put(key, node);</span><br><span class="line">            addToHead(node);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            node.value = value;</span><br><span class="line">            moveToHead(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addToHead</span><span class="params">(DoubleListNode node)</span></span>&#123;</span><br><span class="line">        node.next = head.next;</span><br><span class="line">        head.next.pre = node;</span><br><span class="line">        head.next = node;</span><br><span class="line">        node.pre = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeNode</span><span class="params">(DoubleListNode node)</span></span>&#123;</span><br><span class="line">        node.next.pre = node.pre;</span><br><span class="line">        node.pre.next = node.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DoubleListNode <span class="title">removeTail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DoubleListNode res = tail.pre;</span><br><span class="line">        removeNode(res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moveToHead</span><span class="params">(DoubleListNode node)</span></span>&#123;</span><br><span class="line">        removeNode(node);</span><br><span class="line">        addToHead(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å“ˆå¸Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeä½è¿ç®—åˆè¾‘</title>
    <url>/2020/05/24/Leetcode%E4%BD%8D%E8%BF%90%E7%AE%97%E5%90%88%E8%BE%91/</url>
    <content><![CDATA[<pre><code>è¿™é‡Œè®°å½•æœ‰ç‚¹æ„æ€çš„ä½è¿ç®—æ‰“å¼€æ–¹å¼ğŸ˜Šã€‚
</code></pre>
<a id="more"></a>
<h3 id="5418-äºŒå‰æ ‘ä¸­çš„å›æ–‡åºåˆ—"><a class="header-anchor" href="#5418-äºŒå‰æ ‘ä¸­çš„å›æ–‡åºåˆ—">Â¶</a>5418. äºŒå‰æ ‘ä¸­çš„å›æ–‡åºåˆ—</h3>
<p>è¿™é‡Œç»“ç‚¹çš„æ•°æ®èŒƒå›´åªæœ‰1ï½9ï¼Œåˆ™å¯ä»¥åˆ©ç”¨ä¸€ä¸ªintçš„å„ä½æ¥ç»Ÿè®¡å„ä¸ªæ•°å­—å‡ºç°çš„å¥‡å¶æ¬¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pseudoPalindromicPaths</span> <span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        dfs(root, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode root, <span class="keyword">int</span> temp)</span></span>&#123;</span><br><span class="line">        <span class="comment">//æŒ‰ä½è®°å½•å„ä¸ªæ•°å­—å‡ºç°å¥‡æ•°æ¬¡å¶æ•°æ¬¡</span></span><br><span class="line">        temp ^= (<span class="number">1</span>&lt;&lt;root.val);</span><br><span class="line">        <span class="keyword">if</span>(root.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            dfs(root.left, temp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            dfs(root.right, temp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(root.left==<span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>&amp;&amp;(temp==<span class="number">0</span>||(temp&amp;(temp - <span class="number">1</span>))==<span class="number">0</span>))&#123; <span class="comment">//temp - 1, å¯¹ä¸€ä¸ªåªæœ‰ä¸€ä¸ªä½ä¸º1çš„ç›¸å½“äºæŒ‰ä½å–å</span></span><br><span class="line">            ++res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>ä½è¿ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode1271.åå…­è¿›åˆ¶è½¬æ¢</title>
    <url>/2020/05/20/Leetcode1271-%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šä½ æœ‰ä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼Œè¯·æŒ‰ç…§æ­¤è§„åˆ™å°†å®ƒå˜æˆã€Œåå…­è¿›åˆ¶é­”æœ¯æ•°å­—ã€ï¼šé¦–å…ˆå°†å®ƒå˜æˆå­—æ¯å¤§å†™çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œç„¶åå°†æ‰€æœ‰çš„æ•°å­—Â 0 å˜æˆå­—æ¯Â O ï¼Œå°†æ•°å­—Â 1 Â å˜æˆå­—æ¯Â I ã€‚
å¦‚æœä¸€ä¸ªæ•°å­—åœ¨è½¬æ¢ååªåŒ…å«Â {&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;I&quot;, &quot;O&quot;}Â ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªè½¬æ¢æ˜¯æœ‰æ•ˆçš„ã€‚
ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â num ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªåè¿›åˆ¶æ•° Nï¼Œå¦‚æœå®ƒçš„åå…­è¿›åˆ¶é­”æœ¯æ•°å­—è½¬æ¢æ˜¯æœ‰æ•ˆçš„ï¼Œè¯·è¿”å›è½¬æ¢åçš„ç»“æœï¼Œå¦åˆ™è¿”å›Â &quot;ERROR&quot; ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toHexspeak</span><span class="params">(String num)</span> </span>&#123;</span><br><span class="line">        Long number = Long.valueOf(num);</span><br><span class="line">        String str = number.toHexString(number);</span><br><span class="line">        HashMap&lt;Character, Character&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">'1'</span>,<span class="string">'I'</span>);map.put(<span class="string">'0'</span>,<span class="string">'O'</span>);</span><br><span class="line">        map.put(<span class="string">'a'</span>,<span class="string">'A'</span>);map.put(<span class="string">'b'</span>,<span class="string">'B'</span>);</span><br><span class="line">        map.put(<span class="string">'c'</span>,<span class="string">'C'</span>);map.put(<span class="string">'d'</span>,<span class="string">'D'</span>);</span><br><span class="line">        map.put(<span class="string">'e'</span>,<span class="string">'E'</span>); map.put(<span class="string">'f'</span>,<span class="string">'F'</span>);</span><br><span class="line">        StringBuilder res = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); ++i)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = str.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(c))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"ERROR"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res.append(map.get(c));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Apendixï¼š 10è¿›åˆ¶è½¬16è¿›åˆ¶å®ç°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toHexString</span><span class="params">(String num)</span> </span>&#123;</span><br><span class="line">        Long n = Long.valueOf(num);</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"0"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder helper = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            Long t = n % <span class="number">16</span>;</span><br><span class="line">            <span class="keyword">if</span> (t &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                helper.append((<span class="keyword">char</span>)(t + <span class="string">'0'</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                helper.append((<span class="keyword">char</span>)(t - <span class="number">10</span> + <span class="string">'A'</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            n /= <span class="number">16</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> helper.reverse().toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å­—ç¬¦ä¸²</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode1371.æ¯ä¸ªå…ƒéŸ³åŒ…å«å¶æ•°æ¬¡çš„æœ€é•¿å­å­—ç¬¦ä¸²</title>
    <url>/2020/05/20/Leetcode1371-%E6%AF%8F%E4%B8%AA%E5%85%83%E9%9F%B3%E5%8C%85%E5%90%AB%E5%81%B6%E6%95%B0%E6%AC%A1%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â sÂ ï¼Œè¯·ä½ è¿”å›æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ï¼šæ¯ä¸ªå…ƒéŸ³å­—æ¯ï¼Œå³Â 'a'ï¼Œ'e'ï¼Œ'i'ï¼Œ'o'ï¼Œ'u' ï¼Œåœ¨å­å­—ç¬¦ä¸²ä¸­éƒ½æ°å¥½å‡ºç°äº†å¶æ•°æ¬¡ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼šå‰ç¼€å’Œ+çŠ¶æ€å‹ç¼©</h1>
<p>5ä¸ªå…ƒéŸ³å­—æ¯ï¼Œå…¶ç»“æœçš„å¥‡å¶å…±æœ‰2^5ä¸ªçŠ¶æ€ï¼š</p>
<ol>
<li>æŒ‰ä½è¡¨å¾å„ä¸ªå­—æ¯å¥‡å¶çš„çŠ¶æ€ï¼Œå¼‚æˆ–å¯æŒ‰ä½ç”±0ç½®1ç”±1ç½®0ï¼ˆæ²¡æœ‰è¿›ä½çš„åŠ æ³•ï¼‰</li>
<li>å¥‡æ•° - å¥‡æ•° = å¶æ•°ï¼Œå¶æ•° - å¶æ•° = å¶æ•°ï¼Œ åˆ™å¯ä»¥è®°å½•ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæ‰¾å‡ºåŒä¸€çŠ¶æ€çš„åŒºé—´ï¼Œå³å¯å¾—åˆ°æœ€å¤§é•¿åº¦ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[] count = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">5</span>];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTheLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span>[] pos = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</span><br><span class="line">        <span class="keyword">int</span> status = <span class="number">0</span>; <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;<span class="number">32</span>; ++i)&#123;</span><br><span class="line">            pos[i] = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pos[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chars.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = chars[i];</span><br><span class="line">            <span class="keyword">if</span>(c == <span class="string">'a'</span>)&#123;</span><br><span class="line">                status ^= (<span class="number">1</span>&lt;&lt;<span class="number">0</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c ==<span class="string">'e'</span>)&#123;</span><br><span class="line">                status ^= (<span class="number">1</span>&lt;&lt;<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">'i'</span>)&#123;</span><br><span class="line">                status ^= (<span class="number">1</span>&lt;&lt;<span class="number">2</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">'o'</span>)&#123;</span><br><span class="line">                status ^= (<span class="number">1</span>&lt;&lt;<span class="number">3</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">'u'</span>)&#123;</span><br><span class="line">                status ^= (<span class="number">1</span>&lt;&lt;<span class="number">4</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(pos[status]&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                res = Math.max(res, i - pos[status] + <span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                pos[status] = i + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å‰ç¼€å’Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode874.æ¨¡æ‹Ÿè¡Œèµ°</title>
    <url>/2020/05/19/Leetcode874-%E6%A8%A1%E6%8B%9F%E8%A1%8C%E8%B5%B0/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæœºå™¨äººåœ¨ä¸€ä¸ªæ— é™å¤§å°çš„ç½‘æ ¼ä¸Šè¡Œèµ°ï¼Œä»ç‚¹Â (0, 0) å¤„å¼€å§‹å‡ºå‘ï¼Œé¢å‘åŒ—æ–¹ã€‚
1. è¯¥æœºå™¨äººå¯ä»¥æ¥æ”¶ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„å‘½ä»¤ï¼š
    -2ï¼šå‘å·¦è½¬Â 90 åº¦
    -1ï¼šå‘å³è½¬ 90 åº¦
    1 &lt;= x &lt;= 9ï¼šå‘å‰ç§»åŠ¨Â xÂ ä¸ªå•ä½é•¿åº¦
2. åœ¨ç½‘æ ¼ä¸Šæœ‰ä¸€äº›æ ¼å­è¢«è§†ä¸ºéšœç¢ç‰©ã€‚ ç¬¬ iÂ ä¸ªéšœç¢ç‰©ä½äºç½‘æ ¼ç‚¹ Â (obstacles[i][0], obstacles[i][1])

3. æœºå™¨äººæ— æ³•èµ°åˆ°éšœç¢ç‰©ä¸Šï¼Œå®ƒå°†ä¼šåœç•™åœ¨éšœç¢ç‰©çš„å‰ä¸€ä¸ªç½‘æ ¼æ–¹å—ä¸Šï¼Œä½†ä»ç„¶å¯ä»¥ç»§ç»­è¯¥è·¯çº¿çš„å…¶ä½™éƒ¨åˆ†ã€‚
è¿”å›ä»åŸç‚¹åˆ°æœºå™¨äººçš„æœ€å¤§æ¬§å¼è·ç¦»çš„å¹³æ–¹ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// hashcodeè‡ªå·±è®¡ç®—ã€‚è¿™é‡Œæ•°æ®ä¸Šçº¿æ˜¯-30000 - 30000ï¼Œ</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">for (int[] obstacle: obstacles) &#123;</span></span><br><span class="line"><span class="comment">            long ox = (long) obstacle[0] + 30000;</span></span><br><span class="line"><span class="comment">            long oy = (long) obstacle[1] + 30000;</span></span><br><span class="line"><span class="comment">            obstacleSet.add((ox &lt;&lt; 16) + oy);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] direction = &#123;&#123;-<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>,<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;,&#123;<span class="number">0</span>, -<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">robotSim</span><span class="params">(<span class="keyword">int</span>[] commands, <span class="keyword">int</span>[][] obstacles)</span> </span>&#123;</span><br><span class="line">        HashSet&lt;Long&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] i: obstacles)&#123;</span><br><span class="line">            <span class="keyword">long</span> code = (<span class="keyword">long</span>)i[<span class="number">0</span>] * <span class="number">30000</span> + (<span class="keyword">long</span>)i[<span class="number">1</span>];</span><br><span class="line">            set.add(code);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] pos = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>]; <span class="keyword">int</span> d = <span class="number">1</span>; <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: commands)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i == -<span class="number">2</span>)&#123;</span><br><span class="line">                d = (d+<span class="number">3</span>) % <span class="number">4</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i == -<span class="number">1</span>)&#123;</span><br><span class="line">                d = (d+<span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;i; ++j)&#123;</span><br><span class="line">                <span class="keyword">int</span> nx = pos[<span class="number">0</span>] + direction[d][<span class="number">0</span>];</span><br><span class="line">                <span class="keyword">int</span> ny = pos[<span class="number">1</span>] + direction[d][<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">long</span> code = (<span class="keyword">long</span>) nx * <span class="number">30000</span> + (<span class="keyword">long</span>)ny;</span><br><span class="line">                <span class="keyword">if</span>(!set.contains(code))&#123;</span><br><span class="line">                    pos[<span class="number">0</span>] = nx;</span><br><span class="line">                    pos[<span class="number">1</span>] = ny;</span><br><span class="line">                    res = Math.max(nx * nx + ny * ny, res);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å“ˆå¸Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeæ‹“æ‰‘æ’åº</title>
    <url>/2020/05/17/Leetcode%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<a id="more"></a>
<h1>è¯¾ç¨‹è¡¨II</h1>
<p>è¿™é‡Œç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼šå…ˆè®°å½•å…¥åº¦ä¸º0çš„ç»“ç‚¹ï¼Œç„¶åå°†ç»“æœç¿»è½¬å³å¯ã€‚</p>
<ol>
<li>ç”¨ä¸€ä¸ªmapè®°å½•ä¿®å®Œè¿™é—¨è¯¾å¯¹åº”çš„å¯ä»¥ä¿®çš„ä¸‹ä¸€ä¸ªèŠ‚è¯¾ã€‚</li>
<li>ç”¨vistitedæ•°ç»„è®°å½•æŸé—¨è¯¾æ˜¯å¦ä¿®è¿‡ï¼Œè¿™é‡Œæœ‰3ä¸ªçŠ¶æ€ï¼Œvisited==0è¯´æ˜æŸé—¨è¯¾æ²¡æœ‰ç”¨è¿‡ï¼Œvisited==1è¯´æ˜æŸé—¨è¯¾è¿›äº†é€’å½’ï¼Œvisited==2è¯´æ˜æŸé—¨è¯¾å·²ç»ä¿®è¿‡äº†ï¼Œé€šè¿‡visited==1è¿™ä¸ªæ ‡å¿—å¯ä»¥åˆ¤æ–­é€’å½’é‡Œæ˜¯å¦æœ‰ç¯</li>
<li>æ¯æ¬¡æŒ‘é€‰ä¸€ä¸ªæœªæœç´¢è¿‡çš„è¯¾è¿›å…¥æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä»ä¸€é—¨è¯¾é¡ºç€é€’å½’æ ‘å¾€ä¸‹æ‰¾åˆ°æ‰€æœ‰è¿™æœ¬è¯¾ä½¿ä¿®å­¦æ¡ä»¶æ»¡è¶³çš„è¯¾ï¼Œè¿”å›é€’å½’æ ‘çš„æ—¶å€™ç»™resæ•°ç»„èµ‹å€¼ï¼Œè¿™æ ·é€šè¿‡æ·±åº¦æœç´¢çš„åŸç†å°±èƒ½ä¿è¯æ‹“æ‰‘çš„é¡ºåºã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">boolean</span> invalid;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] findOrder(<span class="keyword">int</span> numCourses, <span class="keyword">int</span>[][] prerequisites) &#123;</span><br><span class="line">        <span class="keyword">int</span> len = prerequisites.length;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">        HashMap&lt;Integer, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> pre = prerequisites[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(pre))&#123;</span><br><span class="line">                map.put(pre, <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">            &#125;</span><br><span class="line">            map.get(pre).add(prerequisites[i][<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] visited = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">        cur = numCourses - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;numCourses; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i]==<span class="number">0</span>)&#123;</span><br><span class="line">                findCourse(map, res, i, visited);</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(invalid)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">findCourse</span><span class="params">(HashMap&lt;Integer, List&lt;Integer&gt;&gt; map, <span class="keyword">int</span>[] res, <span class="keyword">int</span> course, <span class="keyword">int</span>[] visited)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(visited[course]==<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        visited[course] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(course))&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i : map.get(course))&#123;</span><br><span class="line">                <span class="keyword">if</span>(visited[i] == <span class="number">1</span>)&#123;</span><br><span class="line">                    invalid = <span class="keyword">true</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    findCourse(map, res, i, visited);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        visited[course] = <span class="number">2</span>;</span><br><span class="line">        res[cur--] = course;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®½åº¦ä¼˜å…ˆæœç´¢çš„æ€è·¯"><a class="header-anchor" href="#å®½åº¦ä¼˜å…ˆæœç´¢çš„æ€è·¯">Â¶</a>å®½åº¦ä¼˜å…ˆæœç´¢çš„æ€è·¯</h3>
<p>ä¸æ·±åº¦ä¼˜å…ˆæœç´¢çš„æ€è·¯ç›¸åï¼Œ è¿™é‡Œæ˜¯å…ˆè®°å½•å‡ºåº¦ä¸º0çš„ç»“ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] findOrder(<span class="keyword">int</span> numCourses, <span class="keyword">int</span>[][] prerequisites) &#123;</span><br><span class="line">        <span class="keyword">int</span> len = prerequisites.length;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses]; <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] indeg = <span class="keyword">new</span> <span class="keyword">int</span>[numCourses];</span><br><span class="line">        HashMap&lt;Integer, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> course = prerequisites[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(course))&#123;</span><br><span class="line">                map.put(course, <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">            &#125;</span><br><span class="line">            map.get(course).add(prerequisites[i][<span class="number">0</span>]);</span><br><span class="line">            ++indeg[prerequisites[i][<span class="number">0</span>]];</span><br><span class="line">        &#125;</span><br><span class="line">        Deque&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numCourses; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (indeg[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                queue.offerFirst(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> course = queue.pollLast();</span><br><span class="line">            res[cur++] = course;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(course))&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> next: map.get(course))&#123;</span><br><span class="line">                    --indeg[next];</span><br><span class="line">                    <span class="keyword">if</span>(indeg[next]==<span class="number">0</span>)&#123;</span><br><span class="line">                        queue.offerFirst(next);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cur!=numCourses)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ‹“æ‰‘æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeæ•°å­¦åˆé›†</title>
    <url>/2020/05/13/Leetcode%E6%95%B0%E5%AD%A6%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<h1>204. è®¡ç®—è´¨æ•°çš„ä¸ªæ•°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countPrimes</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">boolean</span>[] b = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];   <span class="comment">// åˆå§‹åŒ–é»˜è®¤å€¼éƒ½ä¸º falseï¼Œä¸ºè´¨æ•°æ ‡è®°</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">2</span> &lt; n) result++; <span class="comment">// å¦‚æœå¤§äº 2 åˆ™ä¸€å®šæ‹¥æœ‰ 2 è¿™ä¸ªè´¨æ•°</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt; n; i += <span class="number">2</span>)&#123;  <span class="comment">// ä» 3 å¼€å§‹éå†ï¼Œä¸”åªéå†å¥‡æ•°</span></span><br><span class="line">            <span class="keyword">if</span>(!b[i])&#123;  <span class="comment">// æ˜¯è´¨æ•°</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">3</span>; i * j &lt; n; j += <span class="number">2</span>)&#123;</span><br><span class="line">                    b[i * j] = <span class="keyword">true</span>;    <span class="comment">// å°†å½“å‰è´¨æ•°çš„å¥‡æ•°å€éƒ½è®¾ç½®æˆéè´¨æ•°æ ‡è®° true</span></span><br><span class="line">                &#125;</span><br><span class="line">                result++;   <span class="comment">// è´¨æ•°ä¸ªæ•° +1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ•°å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode221.æœ€å¤§æ­£æ–¹å½¢</title>
    <url>/2020/05/08/Leetcode221-%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼š
</code></pre>
<a id="more"></a>
<h1>1. æš´åŠ›æ³•</h1>
<p>æ¨ªç«–æ‰«æï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximalSquare</span><span class="params">(<span class="keyword">char</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> maxSide = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> maxSide;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rows = matrix.length, columns = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (matrix[i][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(maxSide == <span class="number">0</span>)&#123;</span><br><span class="line">                        maxSide = <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">int</span> maxPossibleSize = Math.min(rows - i, columns - j);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">1</span>; k &lt; maxPossibleSize; ++k)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(matrix[i + k][j + k]==<span class="string">'0'</span>)&#123;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> m = <span class="number">0</span>; m&lt;k; ++m)&#123;</span><br><span class="line">                            <span class="keyword">if</span>(matrix[i + k][j + m]==<span class="string">'0'</span>||matrix[i + m][j + k]==<span class="string">'0'</span>)&#123;</span><br><span class="line">                                flag = <span class="keyword">false</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                            maxSide = Math.max(maxSide, k + <span class="number">1</span>);  </span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxSide * maxSide;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>2. åŠ¨æ€è§„åˆ’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maximalSquare</span><span class="params">(<span class="keyword">char</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> maxSide = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (matrix == <span class="keyword">null</span> || matrix.length == <span class="number">0</span> || matrix[<span class="number">0</span>].length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> maxSide;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rows = matrix.length, columns = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[rows][columns];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (matrix[i][j] == <span class="string">'1'</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(i == <span class="number">0</span>||j == <span class="number">0</span>)&#123;</span><br><span class="line">                        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[i][j] = Math.min(Math.min(dp[i-<span class="number">1</span>][j], dp[i][j-<span class="number">1</span>]), dp[i-<span class="number">1</span>][j-<span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    maxSide = Math.max(dp[i][j], maxSide);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxSide * maxSide;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ç±»ä¼¼é¢˜ç›® 1277. ç»Ÿè®¡å…¨ä¸º1çš„æ­£æ–¹å½¢å­çŸ©é˜µ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countSquares</span><span class="params">(<span class="keyword">int</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rows = matrix.length; <span class="keyword">int</span> columns = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp =<span class="keyword">new</span> <span class="keyword">int</span>[rows][columns];</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rows; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; columns; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(matrix[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i==<span class="number">0</span>||j==<span class="number">0</span>)&#123;</span><br><span class="line">                        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        dp[i][j] = Math.min(Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]), dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    res += dp[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode983.æœ€ä½ç¥¨ä»·</title>
    <url>/2020/05/06/Leetcode983-%E6%9C%80%E4%BD%8E%E7%A5%A8%E4%BB%B7/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªç«è½¦æ—…è¡Œå¾ˆå—æ¬¢è¿çš„å›½åº¦ï¼Œä½ æå‰ä¸€å¹´è®¡åˆ’äº†ä¸€äº›ç«è½¦æ—…è¡Œã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸€å¹´é‡Œï¼Œä½ è¦æ—…è¡Œçš„æ—¥å­å°†ä»¥ä¸€ä¸ªåä¸ºÂ daysÂ çš„æ•°ç»„ç»™å‡ºã€‚æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªä»Â 1Â åˆ°Â 365Â çš„æ•´æ•°ã€‚
ç«è½¦ç¥¨æœ‰ä¸‰ç§ä¸åŒçš„é”€å”®æ–¹å¼ï¼š
    ä¸€å¼ ä¸ºæœŸä¸€å¤©çš„é€šè¡Œè¯å”®ä»·ä¸ºÂ costs[0] ç¾å…ƒï¼›
    ä¸€å¼ ä¸ºæœŸä¸ƒå¤©çš„é€šè¡Œè¯å”®ä»·ä¸ºÂ costs[1] ç¾å…ƒï¼›
    ä¸€å¼ ä¸ºæœŸä¸‰åå¤©çš„é€šè¡Œè¯å”®ä»·ä¸ºÂ costs[2] ç¾å…ƒã€‚
é€šè¡Œè¯å…è®¸æ•°å¤©æ— é™åˆ¶çš„æ—…è¡Œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¬¬ 2 å¤©è·å¾—ä¸€å¼ ä¸ºæœŸ 7 å¤©çš„é€šè¡Œè¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿ç€æ—…è¡Œ 7 å¤©ï¼šç¬¬ 2 å¤©ã€ç¬¬ 3 å¤©ã€ç¬¬ 4 å¤©ã€ç¬¬ 5 å¤©ã€ç¬¬ 6 å¤©ã€ç¬¬ 7 å¤©å’Œç¬¬ 8 å¤©ã€‚
è¿”å›ä½ æƒ³è¦å®Œæˆåœ¨ç»™å®šçš„åˆ—è¡¨Â daysÂ ä¸­åˆ—å‡ºçš„æ¯ä¸€å¤©çš„æ—…è¡Œæ‰€éœ€è¦çš„æœ€ä½æ¶ˆè´¹ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mincostTickets</span><span class="params">(<span class="keyword">int</span>[] days, <span class="keyword">int</span>[] costs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = days.length, maxDay = days[len - <span class="number">1</span>], minDay = days[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[maxDay + <span class="number">31</span>]; <span class="comment">// å¤šæ‰©å‡ å¤©ï¼Œçœå¾—åˆ¤æ–­ 365 çš„é™åˆ¶</span></span><br><span class="line">        <span class="comment">// åªéœ€çœ‹ maxDay -&gt; minDayï¼Œæ­¤åŒºé—´å¤–éƒ½ä¸éœ€è¦å‡ºé—¨ï¼Œä¸ä¼šå¢åŠ è´¹ç”¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d = maxDay, i = len - <span class="number">1</span>; d &gt;= minDay; d--) &#123;</span><br><span class="line">            <span class="comment">// i è¡¨ç¤º days çš„ç´¢å¼•</span></span><br><span class="line">            <span class="comment">// ä¹Ÿå¯æå‰å°†æ‰€æœ‰ days æ”¾å…¥ Setï¼Œå†é€šè¿‡ set.contains() åˆ¤æ–­</span></span><br><span class="line">            <span class="keyword">if</span> (d == days[i]) &#123;</span><br><span class="line">                dp[d] = Math.min(dp[d + <span class="number">1</span>] + costs[<span class="number">0</span>], dp[d + <span class="number">7</span>] + costs[<span class="number">1</span>]);</span><br><span class="line">                dp[d] = Math.min(dp[d], dp[d + <span class="number">30</span>] + costs[<span class="number">2</span>]);</span><br><span class="line">                i--; <span class="comment">// åˆ«å¿˜äº†é€’å‡ä¸€å¤©</span></span><br><span class="line">            &#125; <span class="keyword">else</span> dp[d] = dp[d + <span class="number">1</span>]; <span class="comment">// ä¸éœ€è¦å‡ºé—¨</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[minDay]; <span class="comment">// ä»åå‘å‰éå†ï¼Œè¿”å›æœ€å‰çš„ minDay</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>Titanic-survival-prediction</title>
    <url>/2020/05/04/Titanic-survival-prediction/</url>
    <content><![CDATA[<h2 id="What-is-Titanic"><a class="header-anchor" href="#What-is-Titanic">Â¶</a>What is Titanic?</h2>
<pre><code> The worst maritime disaster ever.
</code></pre>
<p>About a century ago, a great cruise was under constructing. After few years, it was ready to sail. Millions of people considered it the dream ship and the apex of ocean technology. Thousands of people were lucky enough to get one ticket on board. 4 days later, it sank.</p>
<h2 id="What-we-want-to-do"><a class="header-anchor" href="#What-we-want-to-do">Â¶</a>What we want to do?</h2>
<pre><code>Bulid a classification prediction model.
</code></pre>
<p>By unlocking the inner association of these information, it is possible to find out what factors could make a passenger to survive from an ocean disaster. And build a classification model to predict if a passenger giving certain information can survive on Titanic.</p>
<h2 id="What-about-datas"><a class="header-anchor" href="#What-about-datas">Â¶</a>What about datas?</h2>
<pre><code>It contains information of every passenger including name, sex, age, survived or not and so on.
</code></pre>
<ul>
<li>Dataset source: Kaggle</li>
<li>Data dimension: 891 rows, 12 columns</li>
</ul>
<h2 id="How-to-do-it"><a class="header-anchor" href="#How-to-do-it">Â¶</a>How to do it?</h2>
<ul>
<li>
<p>Step 1: Define variable â€˜Survivedâ€™ as the target variable.</p>
</li>
<li>
<p>Step 2: Data treatment. By this step, it is expected to eliminate factor which is not correlated or less correlated to the target variable and null data in valuable column will be filled in fair way. Dummy encoding for nominal data, data split for train/test set will be implemented.</p>
</li>
<li>
<p>Step 3: Model selection. The target variable is in Boolean type. Classification model such as Decision tree, Random forest and Logistic regression will be implemented. Naive Bayes method will be set up as baseline test. GridSearchCV will be implemented on each model to find the best parameter pair of each model in this data set. The best score and parameter pair of each model will be recorded.</p>
</li>
<li>
<p>Step 4: Ensemble model will be implemented; it consists of all classification models above. We will use â€˜softâ€™ voting mode. The weight of each model will be adjusted by F1-score they hold. Also, accuracy and F1-score of ensemble model will be recorded.</p>
</li>
<li>
<p>Step 5: Conduct ROC and AUC of baseline model and the best model we got. McNemarâ€™s test on the best model and the baseline.</p>
</li>
</ul>
<h2 id="Outcome"><a class="header-anchor" href="#Outcome">Â¶</a>Outcome:</h2>
<ul>
<li>Kaggle score: 0.785</li>
<li>Analysis report.</li>
</ul>
<h2 id="Remarks"><a class="header-anchor" href="#Remarks">Â¶</a>Remarks:</h2>
<p>5310assignment2.ipynb: code.<br>
5310Assignment2.pdf: report.<br>
assignment_presentation.pptx: slides.<br>
test.csv: test data.<br>
titanic.csv: training data.</p>
]]></content>
      <tags>
        <tag>Kaggle</tag>
        <tag>Machine Learing</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetcodeåŠ¨æ€è§„åˆ’åˆé›†</title>
    <url>/2020/04/30/Leetcode%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<pre><code>çŠ¶æ€çš„ä¼ é€’ã€‚
</code></pre>
<a id="more"></a>
<h1>æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»å‹</h1>
<p>çŠ¶æ€çš„ä¼ é€’ï¼Œä½¿ç”¨ä¸€å®šæ•°é‡çš„å˜é‡å»ä¿å­˜å‰é¢çš„å˜é‡ç”¨äºæ¨ç®—ä¸‹ä¸€ä¸ªå€¼ã€‚æ¯æ¬¡è¿­ä»£æ›´æ–°å˜é‡å€¼ã€‚</p>
<h3 id="70-çˆ¬æ¥¼æ¢¯"><a class="header-anchor" href="#70-çˆ¬æ¥¼æ¢¯">Â¶</a>70. çˆ¬æ¥¼æ¢¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">climbStairs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> prev = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>;i&lt;=n; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> next = prev + cur;</span><br><span class="line">            prev = cur;</span><br><span class="line">            cur = next; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="213-æ‰“å®¶åŠ«èˆII"><a class="header-anchor" href="#213-æ‰“å®¶åŠ«èˆII">Â¶</a>213. æ‰“å®¶åŠ«èˆII</h3>
<p>éš¾ç‚¹åœ¨äºæˆ¿å­æ˜¯ç¯å½¢æ’åˆ—ï¼Œ è¾¹ç•Œä¸å¥½å¤„ç†ï¼Œåˆ†ä¸¤æ¬¡åŠ¨æ€è§„åˆ’å°±å¥½äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums==<span class="keyword">null</span>||nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(getMax(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>), getMax(nums, <span class="number">1</span>, nums.length));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;      </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i&lt;end; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> next = Math.max(prev + nums[i], cur);</span><br><span class="line">            prev = cur;</span><br><span class="line">            cur = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>çŸ©é˜µè·¯å¾„</h1>
<h3 id="64-æœ€å°è·¯å¾„å’Œ"><a class="header-anchor" href="#64-æœ€å°è·¯å¾„å’Œ">Â¶</a>64. æœ€å°è·¯å¾„å’Œ</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’ï¼ŒäºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minPathSum</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;        </span><br><span class="line">        <span class="keyword">if</span>(grid==<span class="keyword">null</span>||grid.length==<span class="number">0</span>||grid[<span class="number">0</span>].length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n =  grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[m][n];</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j&lt; n ; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span>||j==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j!=<span class="number">0</span>)&#123;</span><br><span class="line">                        dp[i][j] = dp[i][j - <span class="number">1</span>] + grid[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(i!=<span class="number">0</span>)&#123;</span><br><span class="line">                        dp[i][j] = dp[i - <span class="number">1</span>][j] + grid[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                dp[i][j] = Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]) + grid[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥ä¼˜åŒ–, è¿˜æœªæ›´æ–°çš„dp[j]å¯ä»¥è¡¨ç¤ºä¸Šä¸€è¡Œå¯¹åº”åˆ—çš„çŠ¶æ€ï¼Œå¯ä»¥çœæ‰ä¸€ç»´ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minPathSum</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;        </span><br><span class="line">        <span class="keyword">if</span>(grid==<span class="keyword">null</span>||grid.length==<span class="number">0</span>||grid[<span class="number">0</span>].length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> m = grid.length;</span><br><span class="line">        <span class="keyword">int</span> n =  grid[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span> [n];</span><br><span class="line">        dp[<span class="number">0</span>] = grid[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j&lt; n ; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span>||j==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j!=<span class="number">0</span>)&#123;</span><br><span class="line">                        dp[j] = dp[j - <span class="number">1</span>] + grid[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(i!=<span class="number">0</span>)&#123;</span><br><span class="line">                        dp[j] = dp[j] + grid[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                dp[j] = Math.min(dp[j], dp[j - <span class="number">1</span>]) + grid[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="62-çŸ©é˜µçš„æ€»è·¯å¾„æ•°"><a class="header-anchor" href="#62-çŸ©é˜µçš„æ€»è·¯å¾„æ•°">Â¶</a>62. çŸ©é˜µçš„æ€»è·¯å¾„æ•°</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">uniquePaths</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[m][n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;n;++i)&#123;</span><br><span class="line">            dp[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m;++i)&#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;n; ++j)&#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ ·å¯ä»¥åŒç†ä¼˜åŒ–</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">uniquePaths</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n;++j)&#123;</span><br><span class="line">            dp[j] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;n; ++j)&#123;</span><br><span class="line">                dp[j] = dp[j - <span class="number">1</span>] + dp[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ•°å­¦å…¬å¼æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">//è¿™æ˜¯ä¸€ä¸ªç»„åˆé—®é¢˜ã€‚æœºå™¨äººæ€»å…±ç§»åŠ¨çš„æ¬¡æ•° S=m+n-2ï¼Œå‘ä¸‹ç§»åŠ¨çš„æ¬¡æ•° D=m-1ï¼Œé‚£ä¹ˆé—®é¢˜å¯ä»¥çœ‹æˆä» S ä¸­å–å‡º D ä¸ªä½ç½®çš„ç»„åˆæ•°é‡ï¼Œè¿™ä¸ªé—®é¢˜çš„è§£ä¸º C(S, D)ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">uniquePaths</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> S = m + n - <span class="number">2</span>;  <span class="comment">// æ€»å…±çš„ç§»åŠ¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">int</span> D = m - <span class="number">1</span>;      <span class="comment">// å‘ä¸‹çš„ç§»åŠ¨æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">long</span> ret = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= D; i++) &#123;</span><br><span class="line">        ret = ret * (S - D + i) / i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ•°ç»„åŒºé—´</h1>
<h2 id="1-æ•°ç»„åŒºé—´å’Œ"><a class="header-anchor" href="#1-æ•°ç»„åŒºé—´å’Œ">Â¶</a>1. æ•°ç»„åŒºé—´å’Œ</h2>
<h3 id="303-åŒºåŸŸå’Œæ£€ç´¢"><a class="header-anchor" href="#303-åŒºåŸŸå’Œæ£€ç´¢">Â¶</a>303. åŒºåŸŸå’Œæ£€ç´¢</h3>
<h2 id="2-æ•°ç»„ä¸­ç­‰å·®é€’å¢å­åŒºé—´çš„ä¸ªæ•°"><a class="header-anchor" href="#2-æ•°ç»„ä¸­ç­‰å·®é€’å¢å­åŒºé—´çš„ä¸ªæ•°">Â¶</a>2. æ•°ç»„ä¸­ç­‰å·®é€’å¢å­åŒºé—´çš„ä¸ªæ•°</h2>
<h3 id="413-ç­‰å·®æ•°åˆ—åˆ’åˆ†"><a class="header-anchor" href="#413-ç­‰å·®æ•°åˆ—åˆ’åˆ†">Â¶</a>413. ç­‰å·®æ•°åˆ—åˆ’åˆ†</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfArithmeticSlices</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = A.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; len; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(A[i] - A[i-<span class="number">1</span>] == A[i-<span class="number">1</span>] - A[i-<span class="number">2</span>])&#123;</span><br><span class="line">                dp[i] = dp[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: dp)&#123;</span><br><span class="line">            res += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>åˆ†å‰²æ•´æ•°</h1>
<h3 id="1-åˆ†å‰²æ•´æ•°çš„æœ€å¤§ä¹˜ç§¯"><a class="header-anchor" href="#1-åˆ†å‰²æ•´æ•°çš„æœ€å¤§ä¹˜ç§¯">Â¶</a>1. åˆ†å‰²æ•´æ•°çš„æœ€å¤§ä¹˜ç§¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">integerBreak</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp= <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;=n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;i; ++j)&#123;</span><br><span class="line">                dp[i] = Math.max(Math.max(dp[i - j] * j, dp[i]), (i - j)*j); <span class="comment">//è¿™é‡Œ ï¼ˆi - jï¼‰ * jæ˜¯åº”å¯¹2ï¼Œ3ï¼Œ4çš„æƒ…å†µ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•2: æ‰¾è§„å¾‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">integerBreak</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(n &gt; <span class="number">4</span>)&#123;</span><br><span class="line">            res *= <span class="number">3</span>;</span><br><span class="line">            n -= <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res * n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="91-åˆ†å‰²æ•´æ•°æ„æˆçš„å­—æ¯å­—ç¬¦ä¸²"><a class="header-anchor" href="#91-åˆ†å‰²æ•´æ•°æ„æˆçš„å­—æ¯å­—ç¬¦ä¸²">Â¶</a>91. åˆ†å‰²æ•´æ•°æ„æˆçš„å­—æ¯å­—ç¬¦ä¸²</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDecodings</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> n = s.length();</span><br><span class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">1</span>] = s.charAt(<span class="number">0</span>) == <span class="string">'0'</span> ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> one = Integer.valueOf(s.substring(i - <span class="number">1</span>, i));</span><br><span class="line">        <span class="keyword">if</span> (one != <span class="number">0</span>) &#123;</span><br><span class="line">            dp[i] += dp[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s.charAt(i - <span class="number">2</span>) == <span class="string">'0'</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> two = Integer.valueOf(s.substring(i - <span class="number">2</span>, i));</span><br><span class="line">        <span class="keyword">if</span> (two &lt;= <span class="number">26</span>) &#123;</span><br><span class="line">            dp[i] += dp[i - <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æœ€é•¿é€’å¢å­åºåˆ—</h1>
<h3 id="300-æœ€é•¿é€’å¢å­åºåˆ—"><a class="header-anchor" href="#300-æœ€é•¿é€’å¢å­åºåˆ—">Â¶</a>300. æœ€é•¿é€’å¢å­åºåˆ—</h3>
<h3 id="646-ä¸€ç»„æ•´æ•°å¯¹èƒ½å¤Ÿæ„æˆçš„æœ€é•¿é“¾"><a class="header-anchor" href="#646-ä¸€ç»„æ•´æ•°å¯¹èƒ½å¤Ÿæ„æˆçš„æœ€é•¿é“¾">Â¶</a>646. ä¸€ç»„æ•´æ•°å¯¹èƒ½å¤Ÿæ„æˆçš„æœ€é•¿é“¾</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLongestChain</span><span class="params">(<span class="keyword">int</span>[][] pairs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[pairs.length];</span><br><span class="line">        Arrays.sort(pairs, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[]a, <span class="keyword">int</span>[]b)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> a[<span class="number">1</span>] - b[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Arrays.fill(dp, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pairs.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j&lt; pairs.length; ++j)&#123; </span><br><span class="line">                <span class="keyword">if</span>(pairs[j][<span class="number">0</span>]&gt;pairs[i][<span class="number">1</span>])&#123;</span><br><span class="line">                    dp[j] = Math.max(dp[i] + <span class="number">1</span>, dp[j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.stream(dp).max().orElse(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›´æ¥è´ªå¿ƒæ›´èˆ’æœ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findLongestChain</span><span class="params">(<span class="keyword">int</span>[][] pairs)</span> </span>&#123;</span><br><span class="line">        Arrays.sort(pairs, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[]a, <span class="keyword">int</span>[]b)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> a[<span class="number">1</span>] - b[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> cur = Integer.MIN_VALUE; <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] pair: pairs)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pair[<span class="number">0</span>]&gt;cur)&#123;</span><br><span class="line">                ++res;</span><br><span class="line">                cur = pair[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="376-æ‘†åŠ¨å­åºåˆ—"><a class="header-anchor" href="#376-æ‘†åŠ¨å­åºåˆ—">Â¶</a>376. æ‘†åŠ¨å­åºåˆ—</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è´ªå¿ƒ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">wiggleMaxLength</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length &lt; <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> prev = nums[<span class="number">1</span>] - nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> max = prev==<span class="number">0</span>? <span class="number">1</span>: <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; nums.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> cur = nums[i] - nums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(cur&gt;<span class="number">0</span>&amp;&amp;prev&lt;=<span class="number">0</span>||cur&lt;<span class="number">0</span>&amp;&amp;prev&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                ++max;</span><br><span class="line">                prev = cur;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¤ä¸ªæ•°ç»„ï¼Œç›¸äº’æˆå…¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">wiggleMaxLength</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">        <span class="keyword">int</span>[] up = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        <span class="keyword">int</span>[] down = <span class="keyword">new</span> <span class="keyword">int</span>[nums.length];</span><br><span class="line">        up[<span class="number">0</span>] = down[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                up[i] = down[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                down[i] = down[i - <span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i] &lt; nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                down[i] = up[i - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                up[i] = up[i - <span class="number">1</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                down[i] = down[i - <span class="number">1</span>];</span><br><span class="line">                up[i] = up[i - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(down[nums.length - <span class="number">1</span>], up[nums.length - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">wiggleMaxLength</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">        <span class="keyword">int</span> down = <span class="number">1</span>, up = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] &gt; nums[i - <span class="number">1</span>])</span><br><span class="line">                up = down + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (nums[i] &lt; nums[i - <span class="number">1</span>])</span><br><span class="line">                down = up + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(down, up);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>0-1èƒŒåŒ…é—®é¢˜</h1>
<h3 id="416-åˆ†å‰²ç­‰å’Œå­é›†"><a class="header-anchor" href="#416-åˆ†å‰²ç­‰å’Œå­é›†">Â¶</a>416. åˆ†å‰²ç­‰å’Œå­é›†</h3>
<p>å¯ä»¥çœ‹ä½œ Wä¸ºå’Œä¸€åŠçš„ 0-1 èƒŒåŒ…é—®é¢˜ã€‚dpä¸­å­˜æ˜¯å¦èƒ½åˆ†å‰²ã€‚<br>
çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ dp[i][j] = dp[i - 1][j - nums[i - 1]]||dp[i - 1][j]; è®°å½•æ˜¯å¦è¦ç¬¬iä¸ªæ•°ã€‚<br>
åˆå§‹çŠ¶æ€ dp[i][0]ä¸ºtrueï¼Œæ„ä¸ºèƒ½åˆ†æ‰æ‰€æœ‰Wï¼Œå®Œæˆä»»åŠ¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: nums)&#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(sum%<span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> W = sum/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n + <span class="number">1</span>][W + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = nums[i - <span class="number">1</span>]; j &lt;= W; ++j)&#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - nums[i - <span class="number">1</span>]]||dp[i - <span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n][W];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç©ºé—´ä¼˜åŒ–</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è½¬åŒ–ä¸ºç»å…¸çš„01èƒŒåŒ…é—®é¢˜</span></span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : nums) &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> target = sum / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">boolean</span>[] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[target + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//å»ºç«‹dpæ•°ç»„ï¼Œdp[i]è¡¨ç¤ºèƒ½å¦æ‰¾åˆ°å’Œä¸ºiçš„æ•°ç»„å…ƒç´ é›†åˆ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = target; i &gt;= num; i--) &#123;</span><br><span class="line">                dp[i] = dp[i]||dp[i - num];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> dp[target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//DFS æ•°æ®é‡ä¸å¤§æ—¶å¯ä»¥ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ¶‰åŠåˆ°å‰ªæçš„é—®é¢˜ï¼Œå…ˆæ’ä¸ªåº</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//ç®—å‡ºSUM(S)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> n : nums)&#123;</span><br><span class="line">            sum += n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¥‡æ•°è‚¯å®šä¸è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> ((sum &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sum &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//æœç´¢</span></span><br><span class="line">        <span class="keyword">return</span> canPartition(nums, nums.length-<span class="number">1</span>, sum, sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//DFS idxä¸ºå½“å‰å…ƒç´ ï¼Œhadä¸ºå¾…æ¥å—ä¸Šé™ï¼Œpassä¸ºå¾…ä¸¢å¼ƒä¸Šé™</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">canPartition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> idx, <span class="keyword">int</span> had, <span class="keyword">int</span> pass)</span></span>&#123;</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°å¯è¡Œè§£</span></span><br><span class="line">        <span class="keyword">if</span> (had == <span class="number">0</span> || pass == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‰ªæ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (had &lt; <span class="number">0</span> || pass &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç»§ç»­æœç´¢</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> canPartition(nums, idx-<span class="number">1</span>, had-nums[idx], pass) || canPartition(nums, idx-<span class="number">1</span>, had, pass-nums[idx]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="494-ç›®æ ‡å’Œ"><a class="header-anchor" href="#494-ç›®æ ‡å’Œ">Â¶</a>494. ç›®æ ‡å’Œ</h3>
<p>è¯¥é—®é¢˜å¯ä»¥è½¬æ¢ä¸º Subset Sum é—®é¢˜ï¼Œä»è€Œä½¿ç”¨ 0-1 èƒŒåŒ…çš„æ–¹æ³•æ¥æ±‚è§£ã€‚</p>
<p>å¯ä»¥å°†è¿™ç»„æ•°çœ‹æˆä¸¤éƒ¨åˆ†ï¼ŒP å’Œ Nï¼Œå…¶ä¸­ P ä½¿ç”¨æ­£å·ï¼ŒN ä½¿ç”¨è´Ÿå·ï¼Œæœ‰ä»¥ä¸‹æ¨å¯¼ï¼š</p>
<pre><code>              sum(P) - sum(N) = target
</code></pre>
<p>sumÂ§ + sum(N) + sumÂ§ - sum(N) = target + sumÂ§ + sum(N)<br>
2 * sumÂ§ = target + sum(nums)</p>
<p>å› æ­¤åªè¦æ‰¾åˆ°ä¸€ä¸ªå­é›†ï¼Œä»¤å®ƒä»¬éƒ½å–æ­£å·ï¼Œå¹¶ä¸”å’Œç­‰äº (target + sum(nums))/2ï¼Œå°±è¯æ˜å­˜åœ¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTargetSumWays</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = computeArraySum(nums);</span><br><span class="line">    <span class="keyword">if</span> (sum &lt; S || (sum + S) % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> W = (sum + S) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[W + <span class="number">1</span>];</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = W; i &gt;= num; i--) &#123;</span><br><span class="line">            dp[i] = dp[i] + dp[i - num];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[W];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">computeArraySum</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">        sum += num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//DFS</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTargetSumWays</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> S)</span> </span>&#123;</span><br><span class="line">        calculate(nums, <span class="number">0</span>, <span class="number">0</span>, S);</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> sum, <span class="keyword">int</span> S)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == nums.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sum == S)</span><br><span class="line">                count++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            calculate(nums, i + <span class="number">1</span>, sum + nums[i], S);</span><br><span class="line">            calculate(nums, i + <span class="number">1</span>, sum - nums[i], S);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>474.01å­—ç¬¦ä¸²</h1>
<p>dp[]è®°å½•å½“å‰æˆæœ¬ä¸‹æœ€å¤šçš„01å­—ç¬¦ä¸²æ•°ç»„æ•°é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMaxForm</span><span class="params">(String[] strs, <span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(String str: strs)&#123;</span><br><span class="line">            <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> zeros = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); ++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(str.charAt(i)== <span class="string">'0'</span>)&#123;</span><br><span class="line">                    ++zeros;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    ++ones;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = m; i &gt;= zeros; --i)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = n; j &gt;= ones; --j)&#123;</span><br><span class="line">                    dp[i][j] = Math.max(<span class="number">1</span> + dp[i - zeros][j - ones], dp[i][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="518-é›¶é’±å…‘æ¢II"><a class="header-anchor" href="#518-é›¶é’±å…‘æ¢II">Â¶</a>518. é›¶é’±å…‘æ¢II</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> amount, <span class="keyword">int</span>[] coins)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(amount==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[amount + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: coins)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= amount; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j == i)&#123;</span><br><span class="line">                    dp[j] += <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j - i&gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    dp[j] += dp[j - i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="139-å•è¯æ‹†åˆ†II"><a class="header-anchor" href="#139-å•è¯æ‹†åˆ†II">Â¶</a>139. å•è¯æ‹†åˆ†II</h3>
<p>æ‰«æå­—ç¬¦ä¸²ï¼ŒåŒ¹é…å•è¯ï¼ŒåŒ¹é…ä¸Šåˆ™ä¼ é€’å…ˆå‰çŠ¶æ€ã€‚ç‚¹ç›ä¹‹ç¬”dp[0] = 1;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">wordBreak</span><span class="params">(String s, List&lt;String&gt; wordDict)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = wordDict.size();</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">if</span>(m==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span>[] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[n + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;=n; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(String word: wordDict)&#123;</span><br><span class="line">                <span class="keyword">int</span> len = word.length();</span><br><span class="line">                <span class="keyword">if</span>(len&lt;=i&amp;&amp;word.equals(s.substring(i - len, i)))&#123;</span><br><span class="line">                    dp[i] = dp[i] || dp[i - len];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="377-ç»„åˆæ€»å’ŒIV"><a class="header-anchor" href="#377-ç»„åˆæ€»å’ŒIV">Â¶</a>377.ç»„åˆæ€»å’ŒIV</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">combinationSum4</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[target + <span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;= target; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> num: nums)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i - num&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                    dp[i] += dp[i - num];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è‚¡ç¥¨é—®é¢˜</h1>
<p>ä¸‰ç»´DP<br>
å…³é”®å°±åœ¨äºåˆ—ä¸¾å‡ºæ‰€æœ‰å¯èƒ½çš„ã€ŒçŠ¶æ€ã€ï¼Œç„¶åæƒ³æƒ³æ€ä¹ˆç©·ä¸¾æ›´æ–°è¿™äº›ã€ŒçŠ¶æ€ã€ã€‚ä¸€èˆ¬ç”¨ä¸€ä¸ªå¤šç»´ dp æ•°ç»„å‚¨å­˜è¿™äº›çŠ¶æ€ï¼Œä» base case å¼€å§‹å‘åæ¨è¿›ï¼Œæ¨è¿›åˆ°æœ€åçš„çŠ¶æ€ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆã€‚</p>
<h3 id="123-è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºIII"><a class="header-anchor" href="#123-è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºIII">Â¶</a>123.è‚¡ç¥¨ä¹°å–çš„æœ€ä½³æ—¶æœºIII</h3>
<p>ç¬¬å‡ æ¬¡çš„ä¹°å’Œå–ï¼Œ çŠ¶æ€ä¼ é€’ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] firstBuy = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span>[] firstSell = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span>[] secondBuy = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span>[] secondSell = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        firstBuy[<span class="number">0</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        secondBuy[<span class="number">0</span>] = Integer.MIN_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;len; ++i)&#123;</span><br><span class="line">            firstBuy[i] =Math.max(firstBuy[i - <span class="number">1</span>], -prices[i]);</span><br><span class="line">            firstSell[i] =Math.max(firstSell[i - <span class="number">1</span>], firstBuy[i - <span class="number">1</span>] + prices[i]);</span><br><span class="line">            secondBuy[i] =Math.max(secondBuy[i - <span class="number">1</span>], firstSell[i - <span class="number">1</span>] - prices[i]);</span><br><span class="line">            secondSell[i] =Math.max(secondSell[i - <span class="number">1</span>], secondBuy[i - <span class="number">1</span>] + prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(firstSell[len - <span class="number">1</span>],secondSell[len - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="714-å«æ‰‹ç»­è´¹çš„è‚¡ç¥¨äº¤æ˜“"><a class="header-anchor" href="#714-å«æ‰‹ç»­è´¹çš„è‚¡ç¥¨äº¤æ˜“">Â¶</a>714. å«æ‰‹ç»­è´¹çš„è‚¡ç¥¨äº¤æ˜“</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices, <span class="keyword">int</span> fee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] buy = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span>[] sell = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        buy[<span class="number">0</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        sell[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; ++i)&#123;</span><br><span class="line">            buy[i] = Math.max(sell[i - <span class="number">1</span>] - prices[i], buy[i - <span class="number">1</span>]);</span><br><span class="line">            sell[i] = Math.max(buy[i - <span class="number">1</span>] + prices[i] - fee, sell[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell[len - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices, <span class="keyword">int</span> fee)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = prices.length;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> buy = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> sell = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> preBuy = buy;</span><br><span class="line">            buy = Math.max(sell - prices[i], buy);</span><br><span class="line">            sell = Math.max(preBuy + prices[i] - fee, sell);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sell;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åªèƒ½è¿›è¡Œkæ¬¡çš„è‚¡ç¥¨äº¤æ˜“"><a class="header-anchor" href="#åªèƒ½è¿›è¡Œkæ¬¡çš„è‚¡ç¥¨äº¤æ˜“">Â¶</a>åªèƒ½è¿›è¡Œkæ¬¡çš„è‚¡ç¥¨äº¤æ˜“</h3>
<p>æ²¡æ‡‚ï¼šï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = prices.length;</span><br><span class="line">    <span class="keyword">if</span> (k &gt;= n / <span class="number">2</span>) &#123;   <span class="comment">// è¿™ç§æƒ…å†µä¸‹è¯¥é—®é¢˜é€€åŒ–ä¸ºæ™®é€šçš„è‚¡ç¥¨äº¤æ˜“é—®é¢˜</span></span><br><span class="line">        <span class="keyword">int</span> maxProfit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (prices[i] &gt; prices[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                maxProfit += prices[i] - prices[i - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxProfit;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span>[][] maxProfit = <span class="keyword">new</span> <span class="keyword">int</span>[k + <span class="number">1</span>][n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> localMax = maxProfit[i - <span class="number">1</span>][<span class="number">0</span>] - prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            maxProfit[i][j] = Math.max(maxProfit[i][j - <span class="number">1</span>], prices[j] + localMax);</span><br><span class="line">            localMax = Math.max(localMax, maxProfit[i - <span class="number">1</span>][j] - prices[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxProfit[k][n - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å­—ç¬¦ä¸²</h1>
<h3 id="583-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ"><a class="header-anchor" href="#583-ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ">Â¶</a>583.ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. è½¬åŒ–ä¸ºLCSé—®é¢˜</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = word1.length(); <span class="keyword">int</span> len2 = word2.length();</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len1 + <span class="number">1</span>][len2 + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=len1;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= len2;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(word1.charAt(i - <span class="number">1</span>)==word2.charAt(j - <span class="number">1</span>))&#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[i][j] = Math.max(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> len1 + len2 - <span class="number">2</span>*dp[len1][len2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. ä¸ç”¨LCSåŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="comment">//è¿™é‡Œè®°å¾—åˆå§‹æ¡ä»¶ï¼Œå¦‚æœä¸¤å­—ç¬¦ä¸²ä»»æ„ä¸€ä¸ªä¸ºç©ºï¼Œåˆ™dp[i][j]åº”ä¸ºä¸ä¸ºç©ºçš„é‚£ä¸ªä¸²çš„é•¿åº¦ï¼Œè¿™æ ·æ‰èƒ½è®©ä¸¤è€…ç›¸ç­‰ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minDistance</span><span class="params">(String word1, String word2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = word1.length(); <span class="keyword">int</span> len2 = word2.length();</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len1 + <span class="number">1</span>][len2 + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i &lt;=len1;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= len2;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i == <span class="number">0</span>||j == <span class="number">0</span>)&#123;</span><br><span class="line">                    dp[i][j] = i + j;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(word1.charAt(i - <span class="number">1</span>)==word2.charAt(j - <span class="number">1</span>))&#123;</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dp[i][j] = Math.min(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[len1][len2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-æœ€é•¿å›æ–‡å­—ä¸²"><a class="header-anchor" href="#5-æœ€é•¿å›æ–‡å­—ä¸²">Â¶</a>5.æœ€é•¿å›æ–‡å­—ä¸²</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’ï¼šdp[i][j]è®°å½•ä»iåˆ°jæœ€å¤§çš„å›æ–‡ä¸²é•¿åº¦ã€‚ </span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š dp[i][j] = dp[i + 1][j - 1] + 2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å‰æï¼š   1. s(iï¼‰== s(j)ï¼Œä¸¤æ•°å¾—ç›¸ç­‰</span></span><br><span class="line"><span class="comment">        2. å‰ä¸€çŠ¶æ€dp[i + 1][j - 1]ä¸ä¸º0ï¼Œä¸º0åˆ™è¯´æ˜åœ¨æ­¤ä¹‹å‰ä¸æ„æˆå›æ–‡ä¸²ï¼Œå½“å‰ä¸¤å­—æ¯ç›¸ç­‰ä¹Ÿæ²¡ç”¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">åˆå€¼ï¼š   i == jï¼Œä¸€ä¸ªå­—æ¯æ„æˆå›æ–‡ä¸²ä¸”é•¿åº¦ä¸º1ã€‚</span></span><br><span class="line"><span class="comment">        j-i = 1ï¼Œä¸¤ä¸ªå­—æ¯ä¸”è¿™é‡Œä¸¤å­—æ¯ç›¸ç­‰åˆ™é•¿åº¦ä¸º2ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[len][len];</span><br><span class="line">        String res = <span class="string">""</span>; <span class="keyword">int</span> reslen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; len; ++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i == j)&#123;</span><br><span class="line">                    dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(j - i == <span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(s.charAt(i)==s.charAt(j))&#123;</span><br><span class="line">                        dp[i][j] = <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(dp[i+<span class="number">1</span>][j-<span class="number">1</span>]!=<span class="number">0</span> &amp;&amp; s.charAt(i)==s.charAt(j))&#123;</span><br><span class="line">                        dp[i][j] = dp[i + <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">if</span>(dp[i][j]&gt;res.length())&#123;</span><br><span class="line">                    res = s.substring(i, j + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸­å¿ƒæ‹“å±•ï¼šä»ä¸€ä¸ªå­—ç¬¦æˆ–ä¸¤ä¸ªå­—ç¬¦ä¸­å¿ƒå‘ä¸¤è¾¹æ‹“å±•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = expandAroundCenter(s, i, i);</span><br><span class="line">        <span class="keyword">int</span> len2 = expandAroundCenter(s, i, i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> len = Math.max(len1, len2);</span><br><span class="line">        <span class="keyword">if</span> (len &gt; end - start) &#123;</span><br><span class="line">            start = i - (len - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            end = i + len / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.substring(start, end + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">expandAroundCenter</span><span class="params">(String s, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> L = left, R = right;</span><br><span class="line">    <span class="keyword">while</span> (L &gt;= <span class="number">0</span> &amp;&amp; R &lt; s.length() &amp;&amp; s.charAt(L) == s.charAt(R)) &#123;</span><br><span class="line">        L--;</span><br><span class="line">        R++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R - L - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Manacherâ€˜s ç®—æ³•</span></span><br><span class="line"><span class="comment">//è¿™ä¸ªç®—æ³•çš„ç²¾å¦™ä¹‹å¤„åœ¨äºå……åˆ†åˆ©ç”¨äº†å›æ–‡ä¸²å¯¹ç§°çš„ç‰¹ç‚¹ï¼Œå‰©å»äº†iåœ¨Rå†…æƒ…å†µçš„è®¡ç®—ã€‚</span></span><br><span class="line"><span class="comment">//éº»çƒ¦ä¹‹å¤„åœ¨äºè¾¹ç•Œè¦å¤„ç†å¥½ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é¢„å¤„ç†ï¼Œ è§£å†³å¥‡å¶æ€§é—®é¢˜</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">preProcess</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = s.length();</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"^$"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    String ret = <span class="string">"^"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        ret += <span class="string">"#"</span> + s.charAt(i);</span><br><span class="line">    ret += <span class="string">"#$"</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é©¬æ‹‰è½¦ç®—æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        String T = preProcess(s);</span><br><span class="line">        <span class="keyword">int</span> len = T.length();</span><br><span class="line">        <span class="keyword">int</span>[] P = <span class="keyword">new</span> <span class="keyword">int</span>[len];</span><br><span class="line">        <span class="keyword">int</span> C = <span class="number">0</span>; <span class="keyword">int</span> R = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;len - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> i_mirror = <span class="number">2</span> * C - i;</span><br><span class="line">            <span class="keyword">if</span> (R &gt; i) &#123;                  <span class="comment">//iåœ¨Rå†…çš„æƒ…å†µï¼Œæ­¤æ—¶ï¼š</span></span><br><span class="line">                P[i] = Math.min(R - i, P[i_mirror]);<span class="comment">// ç“¶é¢ˆåœ¨äºRè¾¹ç•Œå’Œé•œåƒçš„åŠå¾„</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                P[i] = <span class="number">0</span>;                 <span class="comment">// ç­‰äº R çš„æƒ…å†µï¼Œæ­¤æ—¶æ— æ³•åˆ¤æ–­æ˜¯å¦åŠå¾„ï¼Œéœ€è¦å°è¯•æ‰©å……è¾¹ç•Œã€‚</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (T.charAt(i + <span class="number">1</span> + P[i]) == T.charAt(i - <span class="number">1</span> - P[i])) &#123; <span class="comment">//å°è¯•æ‰©å……è¾¹ç•Œï¼Œiåœ¨Rå†…çš„æƒ…å†µåŸºæœ¬åˆ¤æ–­ä¹‹åå°±ç»“æŸäº†</span></span><br><span class="line">                P[i]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i + P[i]&gt;R)&#123;</span><br><span class="line">                R = i + P[i];</span><br><span class="line">                C = i;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(P[i]&gt; max)&#123;</span><br><span class="line">                mid = i;</span><br><span class="line">                max = P[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> s.substring((mid - max)/<span class="number">2</span>, (mid + max)/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeå›æº¯æ³•åˆé›†</title>
    <url>/2020/04/28/Leetcode%E5%9B%9E%E6%BA%AF%E6%B3%95%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<a id="more"></a>
<h1>17.ç”µè¯å·ç çš„æ•°å­—ç»„åˆ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    String[] map = <span class="keyword">new</span> String[]&#123;<span class="string">""</span>,<span class="string">""</span>,<span class="string">"abc"</span>,<span class="string">"def"</span>,<span class="string">"ghi"</span>,<span class="string">"jkl"</span>,<span class="string">"mno"</span>,<span class="string">"pqrs"</span>,<span class="string">"tuv"</span>,<span class="string">"wxyz"</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">letterCombinations</span><span class="params">(String digits)</span> </span>&#123;   </span><br><span class="line">        List&lt;String&gt; combinations = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (digits == <span class="keyword">null</span> || digits.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> combinations;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">char</span>[] chars = digits.toCharArray();</span><br><span class="line">        dfs(chars, <span class="keyword">new</span> StringBuilder(), combinations, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> combinations;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[] chars, StringBuilder resi,List&lt;String&gt; combinations, <span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == chars.length)&#123;</span><br><span class="line">            combinations.add(resi.toString());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> cur:map[chars[i]-<span class="string">'0'</span>].toCharArray())&#123;</span><br><span class="line">            resi.append(cur);</span><br><span class="line">            dfs(chars, resi, combinations, i + <span class="number">1</span>);</span><br><span class="line">            resi.deleteCharAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>93. IPåœ°å€</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">restoreIpAddresses</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(s.length()&lt;<span class="number">4</span>||s.length()&gt;<span class="number">12</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        backTracing(res, s, <span class="keyword">new</span> StringBuilder(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backTracing</span><span class="params">(List&lt;String&gt; res, String s, StringBuilder str,  <span class="keyword">int</span> count)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">4</span>||s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(count==<span class="number">4</span>&amp;&amp;s.length()==<span class="number">0</span>)&#123;</span><br><span class="line">                res.add(str.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;s.length() - <span class="number">1</span> )&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>&amp;&amp;s.charAt(<span class="number">0</span>)==<span class="string">'0'</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            String part = s.substring(<span class="number">0</span>,i + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(Integer.valueOf(part)&gt;<span class="number">255</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(str.length()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                part = <span class="string">'.'</span> + part;</span><br><span class="line">            &#125;</span><br><span class="line">            str.append(part);</span><br><span class="line">            backTracing(res, s.substring(i+<span class="number">1</span>),str,count + <span class="number">1</span>);</span><br><span class="line">            str.delete(str.length() - part.length(),str.length());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>79. åœ¨çŸ©é˜µä¸­å¯»æ‰¾å­—ç¬¦ä¸²</h1>
<p>ç”¨ä¸€ä¸ªçŸ©é˜µæ¥æ ‡è®°å•å…ƒæ ¼æ˜¯å¦è¢«ä½¿ç”¨è¿‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] direction = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exist</span><span class="params">(<span class="keyword">char</span>[][] board, String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(word.length() == <span class="number">0</span>||board.length == <span class="number">0</span>||board[<span class="number">0</span>].length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[board.length][board[<span class="number">0</span>].length]; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;board.length;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;board[<span class="number">0</span>].length;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(board[i][j] == word.charAt(<span class="number">0</span>))&#123;  </span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span>(backTracing(board, word, <span class="number">0</span>, i, j, visited))&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">backTracing</span><span class="params">(<span class="keyword">char</span>[][] board, String word, <span class="keyword">int</span> cur, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">boolean</span>[][] visited)</span></span>&#123;</span><br><span class="line">        visited[i][j] = <span class="keyword">true</span>; </span><br><span class="line">        <span class="keyword">if</span>(cur == word.length() - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] d: direction)&#123;</span><br><span class="line">            <span class="keyword">int</span> ni = i + d[<span class="number">0</span>]; <span class="keyword">int</span> nj = j + d[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(ni&lt;<span class="number">0</span>||nj&lt;<span class="number">0</span>||ni&gt;board.length - <span class="number">1</span>||nj&gt;board[<span class="number">0</span>].length - <span class="number">1</span>||board[ni][nj]!=word.charAt(cur + <span class="number">1</span>)||visited[ni][nj] == <span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(backTracing(board, word, cur + <span class="number">1</span>, ni, nj, visited))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        visited[i][j] = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>257. è¾“å‡ºäºŒå‰æ ‘ä¸­ä»æ ¹åˆ°å¶å­çš„è·¯å¾„</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">binaryTreePaths</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(res, <span class="keyword">new</span> StringBuilder(), root);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;String&gt; res, StringBuilder str, TreeNode node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> curlen = str.length();</span><br><span class="line">        <span class="keyword">if</span>(curlen!=<span class="number">0</span>)&#123;</span><br><span class="line">            str.append(<span class="string">"-&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        str.append(node.val);</span><br><span class="line">        <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            dfs(res, str, node.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            dfs(res, str, node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.left==<span class="keyword">null</span>&amp;&amp;node.right==<span class="keyword">null</span>)&#123;   </span><br><span class="line">            res.add(str.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        str.delete(curlen, str.length());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>46. å…¨æ’åˆ—(æ— é‡å¤)</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; permute(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        dfs(res, nums, <span class="keyword">new</span> Integer[nums.length], <span class="keyword">new</span> <span class="keyword">boolean</span>[nums.length], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; res, <span class="keyword">int</span>[] nums, Integer[] temp, <span class="keyword">boolean</span>[] visited, <span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rank == nums.length)&#123;</span><br><span class="line">            res.add(Arrays.asList(Arrays.copyOf(temp, temp.length)));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nums.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i]==<span class="keyword">false</span>)&#123;</span><br><span class="line">                temp[rank] = nums[i];</span><br><span class="line">                visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                dfs(res, nums, temp, visited, rank + <span class="number">1</span>);</span><br><span class="line">                visited[i] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>47. å…¨æ’åˆ—II(æœ‰é‡å¤)</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; permuteUnique(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        dfs(res, nums, <span class="keyword">new</span> <span class="keyword">boolean</span>[nums.length], <span class="keyword">new</span> ArrayList&lt;Integer&gt;(), <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; res, <span class="keyword">int</span>[] nums, <span class="keyword">boolean</span>[] visited, List&lt;Integer&gt; temp, <span class="keyword">int</span> rank)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rank == nums.length)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; nums.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i != <span class="number">0</span> &amp;&amp; nums[i - <span class="number">1</span>] == nums[i] &amp;&amp; !visited[i - <span class="number">1</span>])&#123; </span><br><span class="line">                <span class="comment">//é¿å…é‡å¤ï¼Œ å½“å‰ä¸€ä¸ªå’Œåä¸€ä¸ªç›¸ç­‰ï¼Œ ä¸”æ˜¯iå…ˆè¢«è®¿é—®çš„æƒ…å†µã€‚</span></span><br><span class="line">                <span class="comment">//iå…ˆè¢«è®¿é—®äº†ï¼šè¯´æ˜é‡å¤äº†ï¼Œå› ä¸ºi-1ä¸€å®šå…ˆå‡ºç°è¿™ç§ç»“æœï¼Œå·²ç»æœ‰çš„ç»“æœï¼Œåº”è¯¥é¿å…é‡å¤ã€‚</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(visited[i])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            visited[i] = <span class="keyword">true</span>;</span><br><span class="line">            temp.add(nums[i]);</span><br><span class="line">            dfs(res, nums, visited, temp, rank + <span class="number">1</span>);</span><br><span class="line">            temp.remove(rank);</span><br><span class="line">            visited[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>77. ç»„åˆ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; combine(<span class="keyword">int</span> n, <span class="keyword">int</span> k) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>||k==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(n, k, res, <span class="keyword">new</span> ArrayList&lt;&gt;(), <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k, List&lt;List&lt;Integer&gt;&gt; res, List&lt;Integer&gt; temp, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>==k)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i&lt;=n - k + <span class="number">1</span>; ++i)&#123;  <span class="comment">//å‰ªæï¼Œå‰ç¬¬kä¸ªæ•°æœ€å¤šåªä¼šå–åˆ°n - k + 1ï¼Œ ä¸ç„¶å°±é‡å¤äº†ã€‚</span></span><br><span class="line">            temp.add(i);</span><br><span class="line">            dfs(n, k - <span class="number">1</span>, res, temp, i + <span class="number">1</span>);</span><br><span class="line">            temp.remove(temp.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>39. ç»„åˆæ€»å’Œ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; combinationSum(<span class="keyword">int</span>[] candidates, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        find(res, <span class="keyword">new</span> ArrayList&lt;Integer&gt;(), candidates, target, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; res, ArrayList&lt;Integer&gt; temp, <span class="keyword">int</span>[] candidates, <span class="keyword">int</span> target, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">0</span>)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i &lt; candidates.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(candidates[i]&gt;target)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            temp.add(candidates[i]);</span><br><span class="line">            find(res, temp, candidates, target - candidates[i], i);</span><br><span class="line">            temp.remove(temp.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>40. ç»„åˆæ€»å’ŒII</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; combinationSum2(<span class="keyword">int</span>[] candidates, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        Arrays.sort(candidates);</span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[candidates.length];</span><br><span class="line">        dfs(candidates, res, <span class="keyword">new</span> ArrayList&lt;Integer&gt;(), visited, <span class="number">0</span>, target);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[] candidates,List&lt;List&lt;Integer&gt;&gt; res, ArrayList&lt;Integer&gt; temp, <span class="keyword">boolean</span>[] visited, <span class="keyword">int</span> start, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">0</span>)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i &lt; candidates.length; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>&amp;&amp;candidates[i] ==candidates[i - <span class="number">1</span>]&amp;&amp;!visited[i - <span class="number">1</span>]||target - candidates[i]&lt;<span class="number">0</span> || visited[i])&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            visited[i] = <span class="keyword">true</span>;</span><br><span class="line">            temp.add(candidates[i]);</span><br><span class="line">            dfs(candidates, res, temp, visited, i, target - candidates[i]);</span><br><span class="line">            temp.remove(temp.size() - <span class="number">1</span>);</span><br><span class="line">            visited[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>216. ç»„åˆæ€»å’ŒIII</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; combinationSum3(<span class="keyword">int</span> k, <span class="keyword">int</span> n) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">0</span>||n==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        backTracking(res, <span class="keyword">new</span> ArrayList&lt;Integer&gt;(), k, n, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backTracking</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; res, ArrayList&lt;Integer&gt; temp, <span class="keyword">int</span> k, <span class="keyword">int</span> n, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>&amp;&amp;k==<span class="number">0</span>)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start + <span class="number">1</span>; i &lt;= <span class="number">9</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(n - i &lt; <span class="number">0</span>||k - <span class="number">1</span>&lt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            temp.add(i);</span><br><span class="line">            backTracking(res, temp, k - <span class="number">1</span>, n - i, i);</span><br><span class="line">            temp.remove(temp.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>78.å­é›†</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å›æº¯æ³•å°±ä¸å†™å‡ºæ¥äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bitmask å¯ä»¥æ„é€ ä¸€ä¸ªï¼Œè¾¾åˆ°é€‰æŸä¸€ä½çš„æ•ˆæœ</span></span><br><span class="line"><span class="keyword">int</span> nthBit = <span class="number">1</span> &lt;&lt; n;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)Math.pow(<span class="number">2</span>, n); ++i) &#123;</span><br><span class="line">    <span class="comment">// generate bitmask, from 0..00 to 1..11</span></span><br><span class="line">    String bitmask = Integer.toBinaryString(i | nthBit).substring(<span class="number">1</span>); <span class="comment">//æˆªå‡ºån - 1ä½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//bitmaskè§£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; subsets(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; output = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="keyword">int</span> n = nums.length;</span><br><span class="line">    <span class="keyword">int</span> nthBit = <span class="number">1</span> &lt;&lt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)Math.pow(<span class="number">2</span>, n); ++i) &#123;</span><br><span class="line">      <span class="comment">// generate bitmask, from 0..00 to 1..11</span></span><br><span class="line">      String bitmask = Integer.toBinaryString(i|nthBit).substring(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// append subset corresponding to that bitmask</span></span><br><span class="line">      List&lt;Integer&gt; curr = <span class="keyword">new</span> ArrayList();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bitmask.charAt(j) == <span class="string">'1'</span>) curr.add(nums[j]);</span><br><span class="line">      &#125;</span><br><span class="line">      output.add(curr);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>90.å­é›†II</h1>
<h1>131.åˆ†å‰²å›æ–‡ä¸²</h1>
<p>æ³¨æ„String.substring(int begin, int end);æ˜¯[begin, end)çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; partition(String s) &#123;</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        backtracking(res, <span class="keyword">new</span> ArrayList&lt;String&gt;(), s);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">backtracking</span><span class="params">(List&lt;List&lt;String&gt;&gt; res, ArrayList&lt;String&gt; temp, String s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> slen = s.length();</span><br><span class="line">        <span class="keyword">if</span>(slen == <span class="number">0</span>)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList(temp));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt; slen;++i)&#123;</span><br><span class="line">            String cur = s.substring(<span class="number">0</span>, i+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(isPalindrome(cur))&#123;</span><br><span class="line">                temp.add(cur);</span><br><span class="line">                backtracking(res, temp, s.substring(i + <span class="number">1</span>));</span><br><span class="line">                temp.remove(temp.size() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>; <span class="keyword">int</span> end = s.length() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (begin &lt; end) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(begin++) != s.charAt(end--)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>37.è§£æ•°ç‹¬</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span>[][] rowused = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">9</span>][<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">boolean</span>[][] colused = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">9</span>][<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">boolean</span>[][] cubeused = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">9</span>][<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">solveSudoku</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(board[i][j]!= <span class="string">'.'</span>)&#123;</span><br><span class="line">                    <span class="keyword">int</span> num = board[i][j] - <span class="string">'0'</span>;</span><br><span class="line">                    rowused[i][num] = <span class="keyword">true</span>;</span><br><span class="line">                    colused[j][num] = <span class="keyword">true</span>;</span><br><span class="line">                    cubeused[cube(i,j)][num] = <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        backtracking(board, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">backtracking</span><span class="params">(<span class="keyword">char</span>[][] board, <span class="keyword">int</span> row, <span class="keyword">int</span> col)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(col == board[<span class="number">0</span>].length)&#123;</span><br><span class="line">            col = <span class="number">0</span>;</span><br><span class="line">            ++row;</span><br><span class="line">            <span class="keyword">if</span>(row== board.length)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(board[row][col] ==<span class="string">'.'</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> num = <span class="number">1</span>; num&lt;<span class="number">10</span>;++num)&#123;</span><br><span class="line">                <span class="keyword">if</span>(rowused[row][num]||colused[col][num]||cubeused[cube(row, col)][num])&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                rowused[row][num] = colused[col][num] = cubeused[cube(row, col)][num] = <span class="keyword">true</span>;</span><br><span class="line">                board[row][col] = (<span class="keyword">char</span>) (num + <span class="string">'0'</span>);</span><br><span class="line">                <span class="keyword">if</span>(backtracking(board, row, col + <span class="number">1</span>))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                board[row][col] = <span class="string">'.'</span>;</span><br><span class="line">                rowused[row][num] = colused[col][num] = cubeused[cube(row, col)][num] = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> backtracking(board, row, col + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cube</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (i/<span class="number">3</span>) * <span class="number">3</span> + j/<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å›æº¯æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode4å¯»æ‰¾ä¸¤ä¸ªæ’åºæ•°ç»„çš„ä¸­ä½æ•°</title>
    <url>/2020/04/27/Leetcode4%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„Â nums1 å’ŒÂ nums2ã€‚
è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºÂ O(log(m + n))ã€‚
ä½ å¯ä»¥å‡è®¾Â nums1Â å’ŒÂ nums2Â ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>æ‰¾åˆ°ä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°å³æ˜¯è¦æ‰¾åˆ°ç¬¬kå°çš„æ•°ï¼Œè¿™ä¸ªkæ˜¯ä¸¤ä¸ªæ•°ç»„ä¸­ä½æ•°çš„æ’ä½ã€‚é‚£ä¹ˆå¯ä»¥å…ˆæ‰¾ä¸¤ä¸ªæ•°ç»„å„è‡ªk/2å°çš„æ•°ï¼Œç„¶åæ¯”è¾ƒã€‚è¾ƒå°çš„æ•°æ‰€åœ¨çš„é‚£ä¸ªæ•°ç»„çš„å‰k/2ä¸ªæ•°å¯ä»¥æ’é™¤æ‰ï¼Œå› ä¸ºä»–ä»¬ä¸€å®šåœ¨åˆå¹¶åçš„æ•°ç»„ç¬¬kå°çš„æ•°çš„å‰é¢ï¼Œç„¶åä»è¾ƒå¤§çš„æ•°ç»„å’Œè¾ƒå°çš„æ•°çš„æ•°ç»„ç¬¬k/2ä¸ªæ•°å¼€å§‹é‡æ–°æ‰¾ ç¬¬k/2å°çš„æ•°ï¼Œåˆå¯ä»¥æ’é™¤æ‰ä¸€éƒ¨åˆ†çš„æ•°ï¼Œä¸€ç›´åˆ°k==1ï¼Œè¯´æ˜å‰é¢å·²ç»æ’é™¤äº†k-1ä¸ªæ•°äº†ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å‰©ä¸‹çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œè¾ƒå°çš„é‚£ä¸ªå³ä¸ºä¸­ä½æ•°ã€‚<br>
è¿™ä¸ªè¦æ³¨æ„çš„æ˜¯è®¨è®ºçš„æ—¶å€™ç”¨çš„æ˜¯ç¬¬å‡ ä¸ªï¼Œè€Œä¸æ˜¯ä¸‹æ ‡ï¼Œå¯¹åº”çš„ä¸‹æ ‡åº”è¯¥-1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums1.length;</span><br><span class="line">        <span class="keyword">int</span> m = nums2.length;</span><br><span class="line">        <span class="keyword">int</span> left = (n + m + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> right = (n + m + <span class="number">2</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//å°†å¶æ•°å’Œå¥‡æ•°çš„æƒ…å†µåˆå¹¶ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œä¼šæ±‚ä¸¤æ¬¡åŒæ ·çš„ k ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> (getKth(nums1, <span class="number">0</span>, n - <span class="number">1</span>, nums2, <span class="number">0</span>, m - <span class="number">1</span>, left) + getKth(nums1, <span class="number">0</span>, n - <span class="number">1</span>, nums2, <span class="number">0</span>, m - <span class="number">1</span>, right)) * <span class="number">0.5</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getKth</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span> start1, <span class="keyword">int</span> end1, <span class="keyword">int</span>[] nums2, <span class="keyword">int</span> start2, <span class="keyword">int</span> end2, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = end1 - start1 + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> len2 = end2 - start2 + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//è®© len1 çš„é•¿åº¦å°äº len2ï¼Œè¿™æ ·å°±èƒ½ä¿è¯å¦‚æœæœ‰æ•°ç»„ç©ºäº†ï¼Œä¸€å®šæ˜¯ len1 </span></span><br><span class="line">        <span class="keyword">if</span> (len1 &gt; len2) <span class="keyword">return</span> getKth(nums2, start2, end2, nums1, start1, end1, k);</span><br><span class="line">        <span class="keyword">if</span> (len1 == <span class="number">0</span>) <span class="keyword">return</span> nums2[start2 + k - <span class="number">1</span>];            <span class="comment">//æ•°ç»„1ç”¨å®Œäº†ï¼Œç›´æ¥åœ¨æ•°ç»„2ä¸­æ‰¾å‰©ä¸‹çš„ç¬¬kä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">1</span>) <span class="keyword">return</span> Math.min(nums1[start1], nums2[start2]);   <span class="comment">//k==1, å·²ç»æ’é™¤æ‰äº† k-1ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i = start1 + Math.min(len1, k / <span class="number">2</span>) - <span class="number">1</span>;     <span class="comment">//é˜²æ­¢è¶Šç•Œï¼Œå¦‚æœk/2æ¯”æ•°ç»„é•¿åº¦å¤§ï¼Œå°±å–æ•°ç»„çš„æœ€åä¸€ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> j = start2 + Math.min(len2, k / <span class="number">2</span>) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nums1[i] &gt; nums2[j]) &#123;</span><br><span class="line">            <span class="keyword">return</span> getKth(nums1, start1, end1, nums2, j + <span class="number">1</span>, end2, k - (j - start2 + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getKth(nums1, i + <span class="number">1</span>, end1, nums2, start2, end2, k - (i - start1 + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums1.length &gt; nums2.length)&#123;</span><br><span class="line">            <span class="keyword">int</span>[] temp = nums2;</span><br><span class="line">            nums2 = nums1;</span><br><span class="line">            nums1 = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> m = nums1.length;</span><br><span class="line">        <span class="keyword">int</span> n = nums2.length;</span><br><span class="line">        <span class="comment">//æ•´ä¸ªæ•°ç»„æ¥è¯´å·¦è¾¹çš„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> totalleft = (n + m + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//åˆ†å‰²çº¿çš„é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = m;</span><br><span class="line">        <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">            <span class="keyword">int</span> i = (right + left + <span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> j = totalleft - i;</span><br><span class="line">            <span class="keyword">if</span>(nums1[i - <span class="number">1</span>] &gt; nums2[j])&#123;</span><br><span class="line">                right = i - <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> i = left;</span><br><span class="line">        <span class="keyword">int</span> j = totalleft - i;</span><br><span class="line">        <span class="keyword">int</span> nums1LeftMax = i==<span class="number">0</span>? Integer.MIN_VALUE:nums1[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> nums1RightMin = i==m? Integer.MAX_VALUE: nums1[i];</span><br><span class="line">        <span class="keyword">int</span> nums2LeftMax = j==<span class="number">0</span>? Integer.MIN_VALUE:nums2[j - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> nums2RightMin = j==n? Integer.MAX_VALUE:nums2[j];</span><br><span class="line">        <span class="keyword">if</span>((m+n)%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> Math.max(nums1LeftMax, nums2LeftMax);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">double</span>) (Math.max(nums1LeftMax, nums2LeftMax) + Math.min(nums1RightMin, nums2RightMin)) / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode198æ‰“å®¶åŠ«èˆ</title>
    <url>/2020/04/27/Leetcode198%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚
ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½ åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rob</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> prev = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">1</span>; i&lt;nums.length;++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> prevmax = max;</span><br><span class="line">            max = Math.max(prev + nums[i], prevmax);</span><br><span class="line">            prev = prevmax;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode1071å­—ç¬¦ä¸²æœ€å¤§å…¬å› å­</title>
    <url>/2020/04/26/Leetcode1071%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9C%80%E5%A4%A7%E5%85%AC%E5%9B%A0%E5%AD%90/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šå¯¹äºå­—ç¬¦ä¸²Â S å’ŒÂ Tï¼Œåªæœ‰åœ¨ S = T + ... + Tï¼ˆTÂ ä¸è‡ªèº«è¿æ¥ 1 æ¬¡æˆ–å¤šæ¬¡ï¼‰æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤å®šÂ â€œT èƒ½é™¤å°½ Sâ€ã€‚
è¿”å›æœ€é•¿å­—ç¬¦ä¸²Â Xï¼Œè¦æ±‚æ»¡è¶³Â X èƒ½é™¤å°½ str1 ä¸”Â X èƒ½é™¤å°½ str2ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ å¸¸è§„</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gcdOfStrings</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = str1.length();</span><br><span class="line">        <span class="keyword">int</span> len2 = str2.length();</span><br><span class="line">        <span class="keyword">if</span>(len1==len2)&#123;</span><br><span class="line">            <span class="keyword">return</span> str1.equals(str2)?str1:<span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> nums = gcd(len1, len2);     <span class="comment">//æ±‚é•¿åº¦çš„æœ€å¤§å…¬çº¦æ•°</span></span><br><span class="line">        <span class="keyword">char</span>[] chars1 = str1.toCharArray();  <span class="keyword">char</span>[] chars2 = str2.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] res = <span class="keyword">new</span> <span class="keyword">char</span>[nums];</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;nums)&#123;                  <span class="comment">//æ‰¾åˆ°æœ€å¤§å…¬çº¦æ•°çš„æ•°ç»„</span></span><br><span class="line">            <span class="keyword">if</span>(chars1[i]==chars2[i])&#123;</span><br><span class="line">                res[i] = chars1[i];</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">if</span>(len1&gt;len2)&#123;</span><br><span class="line">            <span class="keyword">return</span> subString(chars1,res);           <span class="comment">//åˆ¤æ–­è¾ƒé•¿çš„æ˜¯å¦ç¬¦åˆæ¡ä»¶</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> subString(chars2,res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">subString</span><span class="params">(<span class="keyword">char</span>[] longer, <span class="keyword">char</span>[] res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> reslen =  res.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=reslen;i&lt;longer.length;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(res[i%reslen]!=longer[i])&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(res);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">while</span> (a != b) &#123;</span><br><span class="line">             <span class="keyword">if</span>(a&gt;b)a-=b;</span><br><span class="line">             <span class="keyword">else</span> b-=a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gcdOfStrings</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!(str1+str2).equals(str2+str1))&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str1.substring(<span class="number">0</span>,gcd(str1.length(), str2.length()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;  <span class="comment">//æ±‚é•¿åº¦çš„æœ€å¤§å…¬å› å­</span></span><br><span class="line">        <span class="keyword">while</span> (a != b) &#123;</span><br><span class="line">             <span class="keyword">if</span>(a&gt;b)a-=b;</span><br><span class="line">             <span class="keyword">else</span> b-=a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>å­—ç¬¦ä¸²</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeæ»‘åŠ¨çª—å£åˆé›†</title>
    <url>/2020/04/18/Leetcode%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<h1>3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ»‘åŠ¨çª—å£ï¼Œjå¼€æ‹“ï¼Œå¦‚æœé‡åˆ°é‡å¤å­—ç¬¦ï¼Œiä¸€ç›´åˆ ç›´åˆ°ä¸é‡å¤</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        HashSet&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> i =<span class="number">0</span>; <span class="keyword">int</span> j = <span class="number">0</span>; <span class="keyword">int</span> len = chars.length; <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;len &amp;&amp; j&lt;len)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!set.contains(chars[j]))&#123;</span><br><span class="line">                set.add(chars[j++]);</span><br><span class="line">                res = Math.max(res,j-i);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                set.remove(chars[i++]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼˜åŒ–</span></span><br><span class="line"><span class="comment">//Hashmapå¯ä»¥è®°å½•é‡å¤å­—ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå¿«é€Ÿç»™ièµ‹å€¼ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>;j&lt;chars.length;++j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(chars[j]))&#123;</span><br><span class="line">                i = Math.max(map.get(chars[j]),i);</span><br><span class="line">            &#125;</span><br><span class="line">            res = Math.max(j-i+<span class="number">1</span>,res);</span><br><span class="line">            map.put(chars[j],j+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ»‘åŠ¨çª—å£</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetcodeBFSå’ŒDFSåˆé›†</title>
    <url>/2020/04/17/LeetcodeBFS%E5%92%8CDFS%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<h1>BFS</h1>
<p>BFSä¸€èˆ¬ç”¨æ¥æ±‚è§£æœ€çŸ­è·¯å¾„ç­‰æœ€ä¼˜è§£é—®é¢˜ï¼Œä¸è¿‡æœ€çŸ­è·¯å¾„åªèƒ½æ˜¯æ— æƒå›¾çš„æœ€çŸ­è·¯å¾„ã€‚</p>
<h2 id="1091-äºŒç»´çŸ©é˜µçš„æœ€çŸ­è·¯å¾„"><a class="header-anchor" href="#1091-äºŒç»´çŸ©é˜µçš„æœ€çŸ­è·¯å¾„">Â¶</a>1091.äºŒç»´çŸ©é˜µçš„æœ€çŸ­è·¯å¾„</h2>
<p>é¢˜ç›®æè¿°ï¼š0 è¡¨ç¤ºå¯ä»¥ç»è¿‡æŸä¸ªä½ç½®ï¼Œæ±‚è§£ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">shortestPathBinaryMatrix</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(grid == <span class="keyword">null</span>|| grid.length ==<span class="number">0</span>||grid[<span class="number">0</span>].length==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[][]d = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,-<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">1</span>&#125;&#125;;  <span class="comment">//æ–¹å‘æ•°ç»„</span></span><br><span class="line">        LinkedList&lt;Pair&lt;Integer, Integer&gt;&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> m = grid.length-<span class="number">1</span>; <span class="keyword">int</span> n = grid[<span class="number">0</span>].length-<span class="number">1</span>; <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        queue.add(<span class="keyword">new</span> Pair&lt;&gt;(<span class="number">0</span>,<span class="number">0</span>));</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;        <span class="comment">//é˜Ÿåˆ—æœªç©ºè¯´æ˜æ²¡æœ‰æœªè¢«è®¿é—®è¿‡çš„ç›¸é‚»ç»“ç‚¹</span></span><br><span class="line">            <span class="keyword">int</span> size = queue.size();</span><br><span class="line">            ++res;                      <span class="comment">//æ¯ä¸‹ä¸€å±‚ æ·±åº¦+1</span></span><br><span class="line">            <span class="keyword">while</span>(size&gt;<span class="number">0</span>)&#123;              </span><br><span class="line">                Pair&lt;Integer, Integer&gt; cur = queue.pollLast();</span><br><span class="line">                --size;</span><br><span class="line">                <span class="keyword">int</span> a = cur.getKey(); <span class="keyword">int</span> b = cur.getValue();</span><br><span class="line">                <span class="keyword">if</span>(grid[a][b]==<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(a==m&amp;&amp;b==n)&#123;         <span class="comment">//èµ°åˆ°äº†å³ä¸‹è§’åˆ™è¿”å›ç»“æœ</span></span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">                &#125;</span><br><span class="line">                grid[a][b] = <span class="number">1</span>;          <span class="comment">//è®¿é—®è¿‡äº†æ ‡1</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span>[]i: d)&#123;          <span class="comment">//æ‰¾æ‰€æœ‰ç›¸é‚»çš„ç»“ç‚¹ä¸­æœªè¢«è®¿é—®çš„ç‚¹ï¼Œå‹å…¥é˜Ÿåˆ—ä¸­ï¼Œå¢åŠ æ·±åº¦</span></span><br><span class="line">                    <span class="keyword">int</span> nexta = a+i[<span class="number">0</span>];<span class="keyword">int</span> nextb = b + i[<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(nexta&lt;<span class="number">0</span>||nexta&gt;m||nextb&lt;<span class="number">0</span>||nextb&gt;n||grid[nexta][nextb]==<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    queue.offerFirst(<span class="keyword">new</span> Pair&lt;&gt;(nexta,nextb));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>279. å®Œå…¨å¹³æ–¹å’Œ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="comment">//ç›´æ¥æš´åŠ›é€’å½’ä¼šäº§ç”Ÿé‡å¤çš„ç»“æœï¼ŒåŠ¨æ€è§„åˆ’å¯ä»¥è®°å½•ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</span><br><span class="line">        res[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;=n;++i)&#123;</span><br><span class="line">            res[i] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j*j&lt;=i;++j)&#123;</span><br><span class="line">                res[i] = Math.min(res[i-j*j] + <span class="number">1</span>, res[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è´ªå¿ƒç­–ç•¥</span></span><br><span class="line"><span class="comment">//å¯ä»¥é™åˆ¶é€’å½’çš„æ¬¡æ•°ï¼Œå¦‚æœæ‰¾åˆ°ä¸€ä¸ªç»„åˆçš„å’Œä¸ºnï¼Œå³å¯è¿”å›è¿™ä¸ªæ¬¡æ•°ï¼Œå¦åˆ™ç´¯åŠ æ¬¡æ•°ã€‚</span></span><br><span class="line"><span class="comment">//è¿™é‡Œç”¨äº†hashseå¢åŠ æœç´¢é€Ÿåº¦ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    HashSet&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.set.clear();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i*i&lt;=n;++i)&#123;</span><br><span class="line">            <span class="keyword">this</span>.set.add(i*i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">int</span> count = <span class="number">1</span>; count&lt;=n;++count)&#123;</span><br><span class="line">            <span class="keyword">if</span>(is_divide(n, count))&#123;</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">is_divide</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> count)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> set.contains(n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:set)&#123;</span><br><span class="line">            <span class="keyword">if</span>(is_divide(n-i, count-<span class="number">1</span>))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®½åº¦ä¼˜å…ˆæœç´¢</span></span><br><span class="line"><span class="comment">//è¿™é‡Œå¯ä»¥ç”¨å®½åº¦ä¼˜å…ˆæœç´¢ï¼Œç›¸å½“äºå±‚æ¬¡éå†é€’å½’æ ‘</span></span><br><span class="line"><span class="comment">//ä¸€å±‚ä¸€å±‚å¾€ä¸‹ï¼Œåªè¦æ‰¾åˆ°äº†åˆæ³•çš„ç»“æœå³è¿”å›ï¼Œä¸è´ªå¿ƒç­–ç•¥æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼ŒåŒæ ·æ˜¯å‹ç¼©é€’å½’æ ‘çš„æ·±åº¦ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; set = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i*i&lt;=n;++i)&#123;</span><br><span class="line">            set.add(i*i);</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[n+<span class="number">1</span>];</span><br><span class="line">        queue.offerFirst(n);</span><br><span class="line">        visited[n] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> level = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> size = queue.size();</span><br><span class="line">            ++level;</span><br><span class="line">            <span class="keyword">while</span>(size&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> cur = queue.pollLast();</span><br><span class="line">                --size;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i: set)&#123;</span><br><span class="line">                    <span class="keyword">int</span> differ = cur - i;</span><br><span class="line">                    <span class="keyword">if</span>(differ&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(differ==<span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">return</span> level;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(visited[differ]==<span class="keyword">true</span>)&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    visited[differ] = <span class="keyword">true</span>; </span><br><span class="line">                    queue.offerFirst(differ);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> level;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>127. å•è¯æ¥é¾™</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">ladderLength</span><span class="params">(String beginWord, String endWord, List&lt;String&gt; wordList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!wordList.contains(endWord))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        LinkedList&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[wordList.size()];</span><br><span class="line">        queue.offerFirst(beginWord);</span><br><span class="line">        <span class="keyword">int</span> level = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> size = queue.size();</span><br><span class="line">            ++level;</span><br><span class="line">            <span class="keyword">while</span>(size&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                String cur = queue.pollLast();</span><br><span class="line">                --size;</span><br><span class="line">                <span class="keyword">if</span>(distance(cur,endWord)==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> level;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;wordList.size();++i)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(visited[i])&#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    String str = wordList.get(i);</span><br><span class="line">                    <span class="keyword">if</span>(distance(cur,str)==<span class="number">1</span>)&#123;</span><br><span class="line">                        queue.offerFirst(str);</span><br><span class="line">                        visited[i] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">distance</span><span class="params">(String a, String b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] chars1 = a.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] chars2 = b.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i&lt;chars1.length;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(chars1[i]!=chars2[i])&#123;</span><br><span class="line">                ++res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>DFS</h1>
<p>å¯ä»¥è§£å†³å¯è¾¾æ€§é—®é¢˜ï¼Œå¯ä»¥åˆ¤æ–­å›¾ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p>
<h1>LCP.07 ä¼ é€’ä¿¡æ¯</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numWays</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>[][] relation, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        Map&lt;Integer, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] ints : relation) &#123;               <span class="comment">//å°†æ¯ä¸€ä¸ªç›¸åŒå¤´çš„å°¾æ”¾å…¥åŒä¸€æ•°ç»„é‡Œ</span></span><br><span class="line">            <span class="keyword">if</span> (!map.containsKey(ints[<span class="number">0</span>])) map.put(ints[<span class="number">0</span>], <span class="keyword">new</span> ArrayList&lt;&gt;());</span><br><span class="line">            map.get(ints[<span class="number">0</span>]).add(ints[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(n, map, <span class="number">0</span>, k);</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n, Map&lt;Integer, List&lt;Integer&gt;&gt; map, <span class="keyword">int</span> cur, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//é€’å½’ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (k&lt;<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span> &amp;&amp; cur == n - <span class="number">1</span>) &#123;           <span class="comment">//ä¼ é€’åˆ°äº†æœ€åä¸€ä¸ªå°æœ‹å‹ï¼Œå‰ªæè¿”å›</span></span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; list = map.get(cur);      <span class="comment">//è·å–åˆ°äº†å¯¹åº”å°¾çš„æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span> (list == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer integer : list) &#123;          <span class="comment">//å¯¹åº”çš„å°¾ä½œä¸ºå¤´ç»§ç»­å¯»æ‰¾ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶æˆ–è€…å¤±è´¥</span></span><br><span class="line">            dfs(n, map, integer, k - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>695. æœ€å¤§å²›å±¿é¢ç§¯</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] direction = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;grid.length;++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].length;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j]==<span class="number">1</span>)&#123;</span><br><span class="line">                    max = Math.max(dfs(grid, i, j, <span class="number">0</span>),max);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[][]grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> area)</span></span>&#123;</span><br><span class="line">        ++area;</span><br><span class="line">        grid[i][j] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span>[] add: direction)&#123;</span><br><span class="line">            <span class="keyword">int</span> ni = i + add[<span class="number">0</span>];<span class="keyword">int</span> nj = j + add[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(ni&lt;<span class="number">0</span>||nj&lt;<span class="number">0</span>||ni&gt;=grid.length||nj&gt;=grid[<span class="number">0</span>].length)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(grid[ni][nj]==<span class="number">1</span>)&#123;</span><br><span class="line">                area = dfs(grid, ni, nj, area);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>200. çŸ©é˜µä¸­è¿é€šåˆ†é‡çš„æ•°ç›®</h1>
<h1>547. å¥½å‹å…³ç³»çš„è¿é€šåˆ†é‡æ•°ç›®</h1>
<p>å¥½å‹å…³ç³»å¯ä»¥çœ‹ä½œæ— å‘å›¾ï¼ŒM[i][j]ä¸M[j][i]å¯¹åº”ï¼Œå³åº”å½“åœ¨éå†ä»»ä½•ä¸€ä¸ªäººçš„æœ‹å‹å…³ç³»æ—¶ï¼Œåº”è¯¥éå†å…¶æ‰€æœ‰æœ‹å‹çš„æœ‹å‹ï¼Œå…¶å¯¹åº”çš„æ˜¯ä¸€ä¸ªæœ‹å‹åœˆï¼Œå¹¶å°†å…¶æ ‡è®°å·²å½’å±åœ¨æŸä¸ªæœ‹å‹åœˆä¸­äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] direct = &#123;&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findCircleNum</span><span class="params">(<span class="keyword">int</span>[][] M)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> circle = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[M.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;M.length;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(visited[i]==<span class="keyword">false</span>)&#123;</span><br><span class="line">                ++circle; </span><br><span class="line">                clean(M, i, visited);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> circle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">(<span class="keyword">int</span>[][] M, <span class="keyword">int</span> i, <span class="keyword">boolean</span>[] visited)</span></span>&#123;</span><br><span class="line">        visited[i] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;M[i].length;++j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(M[i][j]==<span class="number">1</span>&amp;&amp;visited[j]==<span class="keyword">false</span>)&#123;</span><br><span class="line">                visited[j] = <span class="keyword">true</span>;</span><br><span class="line">                clean(M, j, visited);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>130.è¢«å›´ç»•çš„åŒºåŸŸ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[][] direction = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, -<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;-<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> m, n;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">char</span>[][] board)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (board == <span class="keyword">null</span> || board.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        m = board.length;</span><br><span class="line">        n = board[<span class="number">0</span>].length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;       <span class="comment">//åˆ¤æ–­ä¸­é—´éƒ¨åˆ†</span></span><br><span class="line">            dfs(board, i, <span class="number">0</span>);</span><br><span class="line">            dfs(board, i, n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;       <span class="comment">//åˆ¤æ–­ä¸Šä¸‹ä¸¤æ’</span></span><br><span class="line">            dfs(board, <span class="number">0</span>, i);</span><br><span class="line">            dfs(board, m - <span class="number">1</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;       <span class="comment">//èµ‹å€¼å›æ¥</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (board[i][j] == <span class="string">'T'</span>) &#123;</span><br><span class="line">                    board[i][j] = <span class="string">'O'</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (board[i][j] == <span class="string">'O'</span>) &#123;</span><br><span class="line">                    board[i][j] = <span class="string">'X'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[][] board, <span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (r &lt; <span class="number">0</span> || r &gt;= m || c &lt; <span class="number">0</span> || c &gt;= n || board[r][c] != <span class="string">'O'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        board[r][c] = <span class="string">'T'</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span>[] d : direction) &#123;</span><br><span class="line">            dfs(board, r + d[<span class="number">0</span>], c + d[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>BFSå’ŒDFS</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeåˆ†æ²»åˆé›†</title>
    <url>/2020/04/16/Leetcode%E5%88%86%E6%B2%BB%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<h1>241. ä¸ºè¿ç®—è¡¨è¾¾å¼è®¾è®¡ä¼˜å…ˆçº§</h1>
<p>åˆ†è€Œæ²»ä¹‹ï¼Œå°†æ•´ä¸ªè¿ç®—è¡¨è¾¾å¼çš„é—®é¢˜ï¼Œåˆ†è§£æˆå„ä¸ªé¡¹çš„é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">diffWaysToCompute</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, List&lt;Integer&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(input))&#123;</span><br><span class="line">            <span class="keyword">return</span> map.get(input);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(input==<span class="keyword">null</span>||input.length()&lt;<span class="number">1</span>) <span class="keyword">return</span> aList;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;input.length();++i)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = input.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(c==<span class="string">'+'</span>||c==<span class="string">'-'</span>||c==<span class="string">'*'</span>)&#123;</span><br><span class="line">                List&lt;Integer&gt; left = diffWaysToCompute(input.substring(<span class="number">0</span>,i));</span><br><span class="line">                List&lt;Integer&gt; right = diffWaysToCompute(input.substring(i+<span class="number">1</span>));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> x: left)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> y: right)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(c==<span class="string">'+'</span>)&#123;</span><br><span class="line">                            aList.add(x+y);</span><br><span class="line">                        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">'-'</span>)&#123;</span><br><span class="line">                            aList.add(x-y);</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            aList.add(x*y);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(aList.size() == <span class="number">0</span>)&#123;</span><br><span class="line">            aList.add(Integer.valueOf(input));</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(input, aList);</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>95. ä¸åŒçš„äºŒå‰æœç´¢æ ‘</h1>
<p>ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œç”Ÿæˆæ‰€æœ‰ç”± 1 â€¦ n ä¸ºèŠ‚ç‚¹æ‰€ç»„æˆçš„äºŒå‰æœç´¢æ ‘ã€‚<br>
ä»åºåˆ— 1 â€¦n ä¸­å–å‡ºæ•°å­— iï¼Œä½œä¸ºå½“å‰æ ‘çš„æ ‘æ ¹ã€‚äºæ˜¯ï¼Œå‰©ä½™ i - 1 ä¸ªå…ƒç´ å¯ç”¨äºå·¦å­æ ‘ï¼Œn - i ä¸ªå…ƒç´ ç”¨äºå³å­æ ‘ã€‚<br>
å¯¹åºåˆ— 1 â€¦ i - 1 é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œä»¥æ„å»ºæ‰€æœ‰çš„å·¦å­æ ‘ï¼›ç„¶åå¯¹ i + 1 â€¦ n é‡å¤ï¼Œä»¥æ„å»ºæ‰€æœ‰çš„å³å­æ ‘ã€‚è¿™æ ·ï¼Œå°±æœ‰äº†æ ‘æ ¹ i å’Œå¯èƒ½çš„å·¦å­æ ‘ã€å³å­æ ‘çš„åˆ—è¡¨ã€‚<br>
æœ€åä¸€æ­¥ï¼Œå¯¹ä¸¤ä¸ªåˆ—è¡¨å¾ªç¯ï¼Œå°†å·¦å­æ ‘å’Œå³å­æ ‘è¿æ¥åœ¨æ ¹ä¸Šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">generateTrees</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> generateHelper(<span class="number">1</span>,n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;TreeNode&gt; <span class="title">generateHelper</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        List&lt;TreeNode&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(start&gt;end)&#123;</span><br><span class="line">            aList.add(<span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">return</span> aList;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start;i&lt;=end;++i)&#123;</span><br><span class="line">            List&lt;TreeNode&gt; lTree = generateHelper(start, i-<span class="number">1</span>);</span><br><span class="line">            List&lt;TreeNode&gt; rTree = generateHelper(i+<span class="number">1</span>, end);</span><br><span class="line">            <span class="keyword">for</span>(TreeNode l:lTree)&#123;</span><br><span class="line">                <span class="keyword">for</span>(TreeNode r:rTree)&#123;</span><br><span class="line">                    TreeNode root = <span class="keyword">new</span> TreeNode(i);</span><br><span class="line">                    root.left = l;</span><br><span class="line">                    root.right = r;</span><br><span class="line">                    aList.add(root);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>973. æœ€æ¥è¿‘åŸç‚¹çš„kä¸ªç‚¹</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ’åº</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] kClosest(<span class="keyword">int</span>[][] points, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        <span class="keyword">int</span> N = points.length;</span><br><span class="line">        <span class="keyword">int</span>[] dists = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">            dists[i] = dist(points[i]);</span><br><span class="line"></span><br><span class="line">        Arrays.sort(dists);</span><br><span class="line">        <span class="keyword">int</span> distK = dists[K-<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] ans = <span class="keyword">new</span> <span class="keyword">int</span>[K][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">            <span class="keyword">if</span> (dist(points[i]) &lt;= distK)</span><br><span class="line">                ans[t++] = points[i];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span>[] point)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> point[<span class="number">0</span>] * point[<span class="number">0</span>] + point[<span class="number">1</span>] * point[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å †</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] kClosest(<span class="keyword">int</span>[][] points, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        PriorityQueue&lt;<span class="keyword">int</span>[]&gt; heap = <span class="keyword">new</span> PriorityQueue&lt;&gt;(K, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[]a, <span class="keyword">int</span>[]b)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> a[<span class="number">0</span>]*a[<span class="number">0</span>]+a[<span class="number">1</span>]*a[<span class="number">1</span>]-b[<span class="number">0</span>]*b[<span class="number">0</span>]-b[<span class="number">1</span>]*b[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        heap.addAll(Arrays.asList(points));</span><br><span class="line">        <span class="keyword">int</span>[][] res = <span class="keyword">new</span> <span class="keyword">int</span>[K][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; K; i++) &#123;</span><br><span class="line">            res[i] = heap.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ†æ²», ç±»å¿«æ’çš„æ–¹æ³•ï¼Œä¸€æ¬¡ç­›æ‰ä¸€éƒ¨åˆ†ã€‚å¹³å‡ä¸ºO(N), æœ€å·®O(NlogNï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadLocalRandom;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] points;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[][] kClosest(<span class="keyword">int</span>[][] points, <span class="keyword">int</span> K) &#123;</span><br><span class="line">        <span class="keyword">this</span>.points = points;</span><br><span class="line">        work(<span class="number">0</span>, points.length - <span class="number">1</span>, K);</span><br><span class="line">        <span class="keyword">return</span> Arrays.copyOfRange(points, <span class="number">0</span>, K);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> oi = i, oj = j;</span><br><span class="line">        <span class="keyword">int</span> pivot = dist(ThreadLocalRandom.current().nextInt(i, j));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; dist(i) &lt; pivot) i++;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; j &amp;&amp; dist(j) &gt; pivot) j--;</span><br><span class="line">            <span class="keyword">if</span>(dist(i) == pivot&amp;&amp;dist(j) == pivot) <span class="keyword">break</span>;</span><br><span class="line">            swap(i, j);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (K &lt;= i - oi + <span class="number">1</span>)</span><br><span class="line">            work(oi, i, K);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            work(i+<span class="number">1</span>, oj, K - (i - oi + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> points[i][<span class="number">0</span>] * points[i][<span class="number">0</span>] + points[i][<span class="number">1</span>] * points[i][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t0 = points[i][<span class="number">0</span>], t1 = points[i][<span class="number">1</span>];</span><br><span class="line">        points[i][<span class="number">0</span>] = points[j][<span class="number">0</span>];</span><br><span class="line">        points[i][<span class="number">1</span>] = points[j][<span class="number">1</span>];</span><br><span class="line">        points[j][<span class="number">0</span>] = t0;</span><br><span class="line">        points[j][<span class="number">1</span>] = t1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åˆ†æ²»</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetcodeäºŒåˆ†æŸ¥æ‰¾åˆé›†</title>
    <url>/2020/04/15/Leetcode%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<p>å¦‚æœæ˜¯right = midï¼Œ é‚£ä¹ˆå¾ªç¯æ¡ä»¶åº”ä¸ºleft &lt; right, å¦åˆ™ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</p>
<h1>69. æ±‚å¼€æ–¹</h1>
<h1>744. å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ </h1>
<h1>540. æœ‰åºæ•°ç»„çš„å•ä¸€å…ƒç´ </h1>
<p>ä»¤ index ä¸º Single Element åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚åœ¨ index ä¹‹åï¼Œæ•°ç»„ä¸­åŸæ¥å­˜åœ¨çš„æˆå¯¹çŠ¶æ€è¢«æ”¹å˜ã€‚å¦‚æœ m ä¸ºå¶æ•°ï¼Œå¹¶ä¸” m + 1 &lt; indexï¼Œé‚£ä¹ˆ nums[m] == nums[m + 1]ï¼›m + 1 &gt;= indexï¼Œé‚£ä¹ˆ nums[m] != nums[m + 1]ã€‚</p>
<p>ä»ä¸Šé¢çš„è§„å¾‹å¯ä»¥çŸ¥é“ï¼Œå¦‚æœ nums[m] == nums[m + 1]ï¼Œé‚£ä¹ˆ index æ‰€åœ¨çš„æ•°ç»„ä½ç½®ä¸º [m + 2, h]ï¼Œæ­¤æ—¶ä»¤ l = m + 2ï¼›å¦‚æœ nums[m] != nums[m + 1]ï¼Œé‚£ä¹ˆ index æ‰€åœ¨çš„æ•°ç»„ä½ç½®ä¸º [l, m]ï¼Œæ­¤æ—¶ä»¤ h = mã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNonDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, h = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; h) &#123;     <span class="comment">//h=m</span></span><br><span class="line">        <span class="keyword">int</span> m = l + (h - l) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (m % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            m--;   <span class="comment">// ä¿è¯ l/h/m éƒ½åœ¨å¶æ•°ä½ï¼Œä½¿å¾—æŸ¥æ‰¾åŒºé—´å¤§å°ä¸€ç›´éƒ½æ˜¯å¥‡æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (nums[m] == nums[m + <span class="number">1</span>]) &#123;</span><br><span class="line">            l = m + <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            h = m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[l];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>278.ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬</h1>
<p>left &lt; right, right = midï¼Œ return left</p>
<h1>153.å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„çš„æœ€å°å€¼</h1>
<p>åŒæ ·æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMin</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>; <span class="keyword">int</span> right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (right-left)/<span class="number">2</span> + left;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid]&lt;=nums[right])&#123;</span><br><span class="line">                right = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[left];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>34. æŸ¥æ‰¾æŸæ•°åœ¨æ•°ç»„ä¸­çš„èŒƒå›´</h1>
<p>è¦ä¸¤è¶ŸäºŒåˆ†æŸ¥æ‰¾ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] searchRange(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>; <span class="keyword">int</span> r = nums.length - <span class="number">1</span> ;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (r-l)/<span class="number">2</span> + l;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid]&lt;target)&#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> left = l; r = nums.length; target += <span class="number">1</span>;  <span class="comment">//æ³¨æ„rçš„å€¼ï¼Œæ˜¯ä¸ºäº†åº”å¯¹é‡å¤çš„æ•°åœ¨æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;                                 <span class="comment">//æ‰¾å¤§äºtargetçš„æ•°çš„ç¬¬ä¸€ä¸ªä½ç½®å³å¯</span></span><br><span class="line">            <span class="keyword">int</span> mid = (r-l)/<span class="number">2</span> + l;</span><br><span class="line">            <span class="keyword">if</span>(nums[mid]&lt;target)&#123;</span><br><span class="line">                l = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                r = mid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">int</span> right = l - <span class="number">1</span>;</span><br><span class="line">        target -= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums.length&lt;<span class="number">1</span>||nums[left]!=target)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;left, Math.max(left, right)&#125;;    <span class="comment">//å–æœ€å€¼æ˜¯ä¸ºäº†ä¸é‡å¤çš„æ—¶å€™</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>äºŒåˆ†æŸ¥æ‰¾</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeè´ªå¿ƒç­–ç•¥åˆé›†</title>
    <url>/2020/04/14/Leetcode%E8%B4%AA%E5%BF%83%E7%AD%96%E7%95%A5%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<h1>455.åˆ†å‘é¥¼å¹²</h1>
<h1>435.æ— é‡å åŒºé—´</h1>
<p>æŒ‰ç…§ç»“å°¾æœ€å°æ’åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">eraseOverlapIntervals</span><span class="params">(<span class="keyword">int</span>[][] intervals)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(intervals==<span class="keyword">null</span>||intervals.length&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        Arrays.sort(intervals, <span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[] o1, <span class="keyword">int</span>[] o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> o1[<span class="number">1</span>] - o2[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> end = intervals[<span class="number">0</span>][<span class="number">1</span>]; <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;intervals.length;++i )&#123;</span><br><span class="line">            <span class="keyword">if</span>(intervals[i][<span class="number">0</span>]&lt;end)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            end = intervals[i][<span class="number">1</span>];</span><br><span class="line">            ++res;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (intervals.length - res);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>452.ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ</h1>
<p>åŒæ ·æ˜¯æŒ‰ç…§ç»“å°¾æœ€å°æ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMinArrowShots</span><span class="params">(<span class="keyword">int</span>[][] points)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(points==<span class="keyword">null</span>||points.length&lt;<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        Arrays.sort(points,<span class="keyword">new</span> Comparator&lt;<span class="keyword">int</span>[]&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(<span class="keyword">int</span>[]o1, <span class="keyword">int</span>[]o2)</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> o1[<span class="number">1</span>] - o2[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> end = points[<span class="number">0</span>][<span class="number">1</span>]; <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;points.length;++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = points[i][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span>(start&lt;=end)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                res += <span class="number">1</span>;</span><br><span class="line">                end = points[i][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>121.ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›Š</h1>
<p>é¢˜ç›®æè¿°ï¼šä¸€æ¬¡è‚¡ç¥¨äº¤æ˜“åŒ…å«ä¹°å…¥å’Œå–å‡ºï¼Œåªè¿›è¡Œä¸€æ¬¡äº¤æ˜“ï¼Œæ±‚æœ€å¤§æ”¶ç›Šã€‚<br>
åªè¦è®°å½•å‰é¢çš„æœ€å°ä»·æ ¼ï¼Œå°†è¿™ä¸ªæœ€å°ä»·æ ¼ä½œä¸ºä¹°å…¥ä»·æ ¼ï¼Œç„¶åå°†å½“å‰çš„ä»·æ ¼ä½œä¸ºå”®å‡ºä»·æ ¼ï¼ŒæŸ¥çœ‹å½“å‰æ”¶ç›Šæ˜¯ä¸æ˜¯æœ€å¤§æ”¶ç›Šã€‚</p>
<h1>122.ä¹°å–è‚¡ç¥¨æœ€å¤§çš„æ”¶ç›ŠII</h1>
<p>å¯¹äº [a, b, c, d]ï¼Œå¦‚æœæœ‰ a &lt;= b &lt;= c &lt;= d ï¼Œé‚£ä¹ˆæœ€å¤§æ”¶ç›Šä¸º d - aã€‚è€Œ d - a = (d - c) + (c - b) + (b - a) ï¼Œå› æ­¤å½“è®¿é—®åˆ°ä¸€ä¸ª prices[i] ä¸” prices[i] - prices[i-1] &gt; 0ï¼Œé‚£ä¹ˆå°±æŠŠ prices[i] - prices[i-1] æ·»åŠ åˆ°æ”¶ç›Šä¸­ã€‚</p>
<h1>605. ç§èŠ±é—®é¢˜</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canPlaceFlowers</span><span class="params">(<span class="keyword">int</span>[] flowerbed, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = flowerbed.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len &amp;&amp; cnt &lt; n; i++) &#123;      <span class="comment">//æ»¡è¶³æ¡ä»¶å³é€€å‡º</span></span><br><span class="line">        <span class="keyword">if</span> (flowerbed[i] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pre = i == <span class="number">0</span> ? <span class="number">0</span> : flowerbed[i - <span class="number">1</span>];         <span class="comment">//é˜²è¶Šç•Œ</span></span><br><span class="line">        <span class="keyword">int</span> next = i == len - <span class="number">1</span> ? <span class="number">0</span> : flowerbed[i + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (pre == <span class="number">0</span> &amp;&amp; next == <span class="number">0</span>) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            flowerbed[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt &gt;= n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>392. åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ—</h1>
<h1>665. ä¿®æ”¹ä¸€ä¸ªæ•°æˆä¸ºéé€’å‡æ•°ç»„</h1>
<p>åœ¨å‡ºç° nums[i] &lt; nums[i - 1] æ—¶ï¼Œéœ€è¦è€ƒè™‘çš„æ˜¯åº”è¯¥ä¿®æ”¹æ•°ç»„çš„å“ªä¸ªæ•°ï¼Œä½¿å¾—æœ¬æ¬¡ä¿®æ”¹èƒ½ä½¿ i ä¹‹å‰çš„æ•°ç»„æˆä¸ºéé€’å‡æ•°ç»„ï¼Œå¹¶ä¸” ä¸å½±å“åç»­çš„æ“ä½œ ã€‚ä¼˜å…ˆè€ƒè™‘ä»¤ nums[i - 1] = nums[i]ï¼Œå› ä¸ºå¦‚æœä¿®æ”¹ nums[i] = nums[i - 1] çš„è¯ï¼Œé‚£ä¹ˆ nums[i] è¿™ä¸ªæ•°ä¼šå˜å¤§ï¼Œå°±æœ‰å¯èƒ½æ¯” nums[i + 1] å¤§ï¼Œä»è€Œå½±å“äº†åç»­æ“ä½œã€‚è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„æƒ…å†µå°±æ˜¯ nums[i] &lt; nums[i - 2]ï¼Œä¿®æ”¹ nums[i - 1] = nums[i] ä¸èƒ½ä½¿æ•°ç»„æˆä¸ºéé€’å‡æ•°ç»„ï¼Œåªèƒ½ä¿®æ”¹ nums[i] = nums[i - 1]ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkPossibility</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length &amp;&amp; cnt &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[i] &gt;= nums[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="keyword">if</span> (i - <span class="number">2</span> &gt;= <span class="number">0</span> &amp;&amp; nums[i - <span class="number">2</span>] &gt; nums[i]) &#123;</span><br><span class="line">            nums[i] = nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nums[i - <span class="number">1</span>] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt &lt;= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>53. æœ€å¤§å­åºå’Œ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éå†æ•°ç»„</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>]; <span class="keyword">int</span> maxToCur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:nums)&#123;</span><br><span class="line">            maxToCur += i;</span><br><span class="line">            maxToCur = maxToCur&gt;i?maxToCur:i;</span><br><span class="line">            max = maxToCur&gt;max?maxToCur:max;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ†æ²»ï¼ŒO(nlogn)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;       </span><br><span class="line">        <span class="keyword">return</span> maxSub(nums,<span class="number">0</span>, nums.length -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">maxSub</span><span class="params">(<span class="keyword">int</span>[]a,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(r==l)&#123;</span><br><span class="line">            <span class="keyword">return</span> a[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> m = (r - l)/<span class="number">2</span> + l;</span><br><span class="line">        <span class="keyword">int</span> leftmax = maxSub(a, l,m);</span><br><span class="line">        <span class="keyword">int</span> rightmax = maxSub(a, m+<span class="number">1</span>,r);</span><br><span class="line">        <span class="keyword">int</span> crossmax = crosssub(a, l, m, r);</span><br><span class="line">        <span class="keyword">return</span> Math.max(Math.max(leftmax, rightmax), crossmax);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">crosssub</span><span class="params">(<span class="keyword">int</span>[]a, <span class="keyword">int</span> l,<span class="keyword">int</span> m, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">            <span class="keyword">return</span> a[l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> leftmax = a[m]; <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=m;i&gt;l-<span class="number">1</span>;--i)&#123;</span><br><span class="line">            cur+= a[i];</span><br><span class="line">            leftmax = leftmax&gt;cur?leftmax:cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> rightmax = a[m+<span class="number">1</span>]; cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=m+<span class="number">1</span>;i&lt;r+<span class="number">1</span>;++i)&#123;</span><br><span class="line">            cur+= a[i];</span><br><span class="line">            rightmax = rightmax&gt;cur?rightmax:cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rightmax + leftmax;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;     </span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;nums.length;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i-<span class="number">1</span>]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                nums[i] = nums[i-<span class="number">1</span>] + nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">            max = Math.max(nums[i], max);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>763. åˆ’åˆ†å­—æ¯åŒºé—´</h1>
<p>ç”¨ä¸€ä¸ªå®¹å™¨å»å­˜æ¯ä¸€ä¸ªå­—æ¯å‡ºç°çš„æœ€åä½ç½®ï¼›<br>
ç”¨ä¸€ä¸ªå˜é‡å»å­˜å½“å‰å¯èƒ½æˆªæ–­å­—ç¬¦ä¸²çš„ä½ç½®ï¼ŒåŒæ—¶åœ¨éå†å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­æ›´æ–°è¿™ä¸ªä½ç½®ï¼Œå–æœ€å¤§å€¼ï¼›<br>
åœ¨éå†å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½“å‰ä½ç½®æ­£å¥½æ˜¯æˆªæ–­å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œè¯´æ˜å‰é¢çš„é‡å¤å­—ç¬¦éƒ½å·²ç»åŒ…å«è¿›å»äº†ï¼Œåˆ™ä¿å­˜è¿›ç»“æœï¼Œç»§ç»­éå†ã€‚</p>
<p>è¿™é‡Œçš„å®¹å™¨å¯ä»¥ç”¨HashMapä¹Ÿå¯ä»¥ç”¨æ•°ç»„ï¼Œéšæ„ã€‚æ•°ç»„å°±æ˜¯åˆ©ç”¨æ•°ç»„ä¸‹æ ‡è¡¨ç¤ºå­—ç¬¦çš„ASCIIç å€¼ï¼Œæ•°ç»„å…ƒç´ å­˜ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">partitionLabels</span><span class="params">(String S)</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] chars = S.toCharArray();</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;chars.length; ++i)&#123;</span><br><span class="line">            map.put(chars[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>; <span class="keyword">int</span> pos = <span class="number">0</span>; <span class="keyword">int</span> lastSegPos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;chars.length)&#123;</span><br><span class="line">            <span class="keyword">int</span> curSite = map.get(chars[i]);</span><br><span class="line">            pos = curSite&gt;pos?curSite:pos;</span><br><span class="line">            <span class="keyword">if</span>(pos==i)&#123;</span><br><span class="line">                aList.add(pos-lastSegPos+<span class="number">1</span>);</span><br><span class="line">                lastSegPos = pos+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>45. è·³è·ƒæ¸¸æˆII</h1>
<p><img src="https://assets.leetcode-cn.com/solution-static/45/45_fig1.png" alt></p>
<p>éå†æ•°ç»„ï¼Œæ‰¾å¯¹åº”ä½ç½®èƒ½è·³æœ€è¿œçš„é‚£ä¸ªä¸‹ä¸ªä½ç½®ã€‚<br>
è¿™é‡Œstepè¡¨ç¤ºè·³äº†å‡ æ­¥ï¼Œ maxè®°å½•å½“å‰ä½ç½®è·³åˆ°çš„ä¸‹ä¸ªä½ç½®ä¸­å“ªä¸€ä¸ªèƒ½è·³å¾—æœ€è¿œã€‚<br>
endè¡¨ç¤ºå½“å‰ä½ç½®è·³åˆ°çš„æœ€è¿œä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">jump</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> step = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.length - <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            max = Math.max(nums[i] + i, max);</span><br><span class="line">            <span class="keyword">if</span>(i == end)&#123;</span><br><span class="line">                end = max;</span><br><span class="line">                ++step;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> step;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>è´ªå¿ƒç­–ç•¥</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯è¯­è¨€åŸºç¡€æ€»ç»“</title>
    <url>/2020/04/14/%E5%89%8D%E7%AB%AF%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1>HTML</h1>
<h2 id="åŸºæœ¬å…ƒç´ "><a class="header-anchor" href="#åŸºæœ¬å…ƒç´ ">Â¶</a>åŸºæœ¬å…ƒç´ </h2>
<h3 id="å›¾åƒ-imgæ ‡ç­¾"><a class="header-anchor" href="#å›¾åƒ-imgæ ‡ç­¾">Â¶</a>å›¾åƒ imgæ ‡ç­¾</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span>&gt;</span> å³å›¾åƒæ ‡ç­¾ï¼›</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è®¾ç½®å…¶å±æ€§ srcæŒ‡å®šå›¾åƒçš„è·¯å¾„ï¼›<br>
width=â€œ200â€ height=&quot;200&quot;è®¾ç½®å¤§å°ï¼›</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>imgä¸èƒ½å¤Ÿè‡ªå·±å±…ä¸­ï¼Œéœ€è¦æ”¾åœ¨å…¶ä»–èƒ½å¤Ÿå±…ä¸­çš„æ ‡ç­¾ä¸­å®ç°è¿™ä¸ªæ•ˆæœï¼Œæ¯”å¦‚h1æ ‡ç­¾,pæ ‡ç­¾.<br>
ç»å¸¸é‡‡ç”¨çš„æ‰‹æ®µæ˜¯æ”¾åœ¨divä¸­å±…ä¸­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è¶…é“¾æ¥-aæ ‡ç­¾"><a class="header-anchor" href="#è¶…é“¾æ¥-aæ ‡ç­¾">Â¶</a>è¶…é“¾æ¥ aæ ‡ç­¾</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"è·³è½¬åˆ°çš„é¡µé¢åœ°å€"</span>&gt;</span>è¶…é“¾æ˜¾ç¤ºæ–‡æœ¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.12306.com"</span>&gt;</span>12306<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//title: å½“é¼ æ ‡æ”¾åœ¨è¶…é“¾ä¸Šçš„æ—¶å€™ï¼Œå°±ä¼šå¼¹å‡ºæç¤ºæ–‡å­—</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.12306.com"</span> <span class="attr">title</span>=<span class="string">"è·³è½¬åˆ°http://www.12306.com"</span>&gt;</span>www.12306.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//å›¾ç‰‡ä½œä¸ºè¶…é“¾</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.12306.com"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è¡¨æ ¼-tableæ ‡ç­¾"><a class="header-anchor" href="#è¡¨æ ¼-tableæ ‡ç­¾">Â¶</a>è¡¨æ ¼ tableæ ‡ç­¾</h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;table&gt;æ ‡ç­¾ç”¨äºæ˜¾ç¤ºä¸€ä¸ªè¡¨æ ¼ </span><br><span class="line">&lt;tr&gt; è¡¨ç¤ºè¡Œ </span><br><span class="line">&lt;td&gt; è¡¨ç¤ºåˆ—åˆå«å•å…ƒæ ¼</span><br></pre></td></tr></table></figure>
<h4 id="å±æ€§"><a class="header-anchor" href="#å±æ€§">Â¶</a>å±æ€§</h4>
<p>å±æ€§borderï¼š è¡¨å½¢å¼<br>
å±æ€§ width<br>
å±æ€§alignï¼š å…ƒç´ ä½ç½®<br>
è®¾ç½®træˆ–è€…tdçš„å±æ€§bgcolorï¼š èƒŒæ™¯è‰²</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">"gray"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"50%"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>&gt;</span>a<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span>  <span class="attr">bgcolor</span>=<span class="string">"pink"</span>&gt;</span>b<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ—è¡¨-ulæ ‡ç­¾å’Œolæ ‡ç­¾"><a class="header-anchor" href="#åˆ—è¡¨-ulæ ‡ç­¾å’Œolæ ‡ç­¾">Â¶</a>åˆ—è¡¨ ulæ ‡ç­¾å’Œolæ ‡ç­¾</h3>
<p>åˆ—è¡¨åˆ†æ— åºåˆ—è¡¨å’Œæœ‰åºåˆ—è¡¨<br>
åˆ†åˆ«ç”¨<ul>æ ‡ç­¾å’Œ<ol>æ ‡ç­¾è¡¨ç¤º</ol></ul></p>
<h5 id="1-æ— åºåˆ—è¡¨"><a class="header-anchor" href="#1-æ— åºåˆ—è¡¨">Â¶</a>1. æ— åºåˆ—è¡¨</h5>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>DOTA<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-æœ‰åºåˆ—è¡¨"><a class="header-anchor" href="#2-æœ‰åºåˆ—è¡¨">Â¶</a>2. æœ‰åºåˆ—è¡¨</h5>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>åœ°åœå¸ˆ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>å¡å°”<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å—æ ‡ç­¾-divå’Œspan"><a class="header-anchor" href="#å—æ ‡ç­¾-divå’Œspan">Â¶</a>å—æ ‡ç­¾ divå’Œspan</h3>
<p>è¿™ä¸¤ç§æ ‡ç­¾éƒ½æ˜¯å¸ƒå±€ç”¨çš„<br>
è¿™ç§æ ‡ç­¾æœ¬èº«æ²¡æœ‰ä»»ä½•æ˜¾ç¤ºæ•ˆæœ<br>
é€šå¸¸æ˜¯ç”¨æ¥ç»“åˆcssè¿›è¡Œé¡µé¢å¸ƒå±€</p>
<h5 id="ä¸¤è€…åŒºåˆ«"><a class="header-anchor" href="#ä¸¤è€…åŒºåˆ«">Â¶</a>ä¸¤è€…åŒºåˆ«</h5>
<p>divæ˜¯å—å…ƒç´ ï¼Œå³è‡ªåŠ¨æ¢è¡Œ<br>
å¸¸è§çš„å—å…ƒç´ è¿˜æœ‰h1,table,p<br>
spanæ˜¯å†…è”å…ƒç´ ï¼Œå³ä¸ä¼šæ¢è¡Œ<br>
å¸¸è§çš„å†…è”å…ƒç´ è¿˜æœ‰img,a,b,strong</p>
<h4 id="fronå­—ä½“æ ‡ç­¾"><a class="header-anchor" href="#fronå­—ä½“æ ‡ç­¾">Â¶</a>fronå­—ä½“æ ‡ç­¾</h4>
<p>å¯ä»¥è°ƒæ•´é¢œè‰²color<br>
å¤§å°size</p>
<h3 id="å†…è”æ¡†æ¶-iframe"><a class="header-anchor" href="#å†…è”æ¡†æ¶-iframe">Â¶</a>å†…è”æ¡†æ¶ iframe</h3>
<h2 id="é€šè¿‡å†…è”æ¡†æ¶-å¯ä»¥å®ç°åœ¨ç½‘é¡µä¸­â€œæ’å…¥â€ç½‘é¡µ"><a class="header-anchor" href="#é€šè¿‡å†…è”æ¡†æ¶-å¯ä»¥å®ç°åœ¨ç½‘é¡µä¸­â€œæ’å…¥â€ç½‘é¡µ">Â¶</a>é€šè¿‡å†…è”æ¡†æ¶ å¯ä»¥å®ç°åœ¨ç½‘é¡µä¸­â€œæ’å…¥â€ç½‘é¡µ</h2>
<h2 id="è¡¨å•å…ƒç´ "><a class="header-anchor" href="#è¡¨å•å…ƒç´ ">Â¶</a>è¡¨å•å…ƒç´ </h2>
<h3 id="è¡¨å•-form"><a class="header-anchor" href="#è¡¨å•-form">Â¶</a>è¡¨å• form</h3>
<p>å‘æœåŠ¡å™¨æäº¤æ•°æ®, actionè¡¨ç¤ºå°†æ•°æ®æäº¤åˆ°å“ªé‡Œï¼Œmethodç”¨æ¥é€‰æ‹©httpæäº¤æ•°æ®æ–¹å¼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"https://how2j.cn/study/login.jsp"</span>&gt;</span></span><br><span class="line">è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»é™†"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="inputç±»"><a class="header-anchor" href="#inputç±»">Â¶</a>inputç±»</h3>
<p>ä½¿ç”¨typeé€‰æ‹©å¯¹åº”çš„ç±»å‹</p>
<h5 id="æ–‡æœ¬æ¡†"><a class="header-anchor" href="#æ–‡æœ¬æ¡†">Â¶</a>æ–‡æœ¬æ¡†</h5>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span> å³è¡¨ç¤ºæ–‡æœ¬æ¡† </span><br><span class="line">è¦è¾“å…¥å¤šè¡Œä½¿ç”¨ æ–‡æœ¬åŸŸ<span class="tag">&lt;<span class="name">textarea</span>&gt;</span></span><br><span class="line">- å±æ€§ï¼š</span><br><span class="line">    size    æ”¹å˜å¤§å°</span><br><span class="line">    value   åˆå§‹å€¼</span><br><span class="line">    placeholder èƒŒæ™¯æ–‡å­—</span><br></pre></td></tr></table></figure>
<h5 id="å¯†ç æ¡†-t"><a class="header-anchor" href="#å¯†ç æ¡†-t">Â¶</a>å¯†ç æ¡† t</h5>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"password"</span>&gt;</span>6</span><br></pre></td></tr></table></figure>
<h5 id="é€‰æ¡†"><a class="header-anchor" href="#é€‰æ¡†">Â¶</a>é€‰æ¡†</h5>
<p>å•é€‰ï¼šinput type=â€œradioâ€<br>
å¤é€‰ï¼šinput type=â€œcheckboxâ€<br>
checkedé»˜è®¤é€‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ä»Šå¤©æ™šä¸Šåšä»€ä¹ˆï¼Ÿ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">å­¦ä¹ java<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"å­¦ä¹ java"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">ä¸œäº¬çƒ­<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>  <span class="attr">name</span>=<span class="string">"activity"</span> <span class="attr">value</span>=<span class="string">"tokyohot"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">dota<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"dota"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">LOL<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"lol"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="ä¸‹æ‹‰åˆ—è¡¨-select"><a class="header-anchor" href="#ä¸‹æ‹‰åˆ—è¡¨-select">Â¶</a>ä¸‹æ‹‰åˆ—è¡¨ select</h5>
<p>ä½¿ç”¨selectå’Œoption, sizeæ¡†çš„å¤§å°ï¼Œmultipleè¡¨ç¤ºå¯ä»¥å¤šé€‰ï¼Œselectedé»˜è®¤é€‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">size</span>=<span class="string">"3"</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">option</span> &gt;</span>è‹è€å¸ˆ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>é«˜æ ‘ç›åˆ©äºš<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>é¥ç¾<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æŒ‰é’®ç³»åˆ—"><a class="header-anchor" href="#æŒ‰é’®ç³»åˆ—">Â¶</a>æŒ‰é’®ç³»åˆ—</h3>
<h5 id="æ™®é€šæŒ‰é’®button"><a class="header-anchor" href="#æ™®é€šæŒ‰é’®button">Â¶</a>æ™®é€šæŒ‰é’®button</h5>
<p>valueæ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸èƒ½ç”¨äºæäº¤æ•°æ®ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"ä¸€ä¸ªæŒ‰é’®"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="æäº¤æŒ‰é’®submit"><a class="header-anchor" href="#æäº¤æŒ‰é’®submit">Â¶</a>æäº¤æŒ‰é’®submit</h5>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/study/login.jsp"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"ç™»é™†"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="é‡ç½®æŒ‰é’®reset"><a class="header-anchor" href="#é‡ç½®æŒ‰é’®reset">Â¶</a>é‡ç½®æŒ‰é’®reset</h5>
<p>å°†è¾“å…¥æ¡†å¤åŸ</p>
<h5 id="å›¾åƒæäº¤-input-image"><a class="header-anchor" href="#å›¾åƒæäº¤-input-image">Â¶</a>å›¾åƒæäº¤ input image</h5>
<p>srcæ”¾å›¾ç‰‡uri</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/study/login.jsp"</span>&gt;</span></span><br><span class="line">è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"image"</span> <span class="attr">src</span>=<span class="string">"https://how2j.cn/example.gif"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="buttonæŒ‰é’®æ ‡ç­¾"><a class="header-anchor" href="#buttonæŒ‰é’®æ ‡ç­¾">Â¶</a>buttonæŒ‰é’®æ ‡ç­¾</h3>
<p>å¦‚æœtypeæ˜¯submmitå°±æœ‰æäº¤æ•°æ®çš„åŠŸèƒ½</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/study/login.jsp"</span>&gt;</span></span><br><span class="line">è´¦å·ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> &gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>CSS</h1>
<p>å¯ä»¥æ§åˆ¶å†…å®¹çš„å±æ€§ï¼Œæ¯”å¦‚é¢œè‰²ç­‰ã€‚</p>
<h3 id="æ ¼å¼-styleæ¡†ä½"><a class="header-anchor" href="#æ ¼å¼-styleæ¡†ä½">Â¶</a>æ ¼å¼ styleæ¡†ä½</h3>
<p>é€‰æ‹©å™¨{å±æ€§ï¼šå€¼}</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">   <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªP&lt;/p&gt;</span><br><span class="line">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªP&lt;/p&gt;</span><br><span class="line">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªP&lt;/p&gt;</span><br><span class="line">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªP&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h3 id="é€‰æ‹©å™¨"><a class="header-anchor" href="#é€‰æ‹©å™¨">Â¶</a>é€‰æ‹©å™¨</h3>
<ul>
<li>idé€‰æ‹©å™¨ï¼š #p æ¯ä¸ªæ ‡ç­¾çš„idéƒ½åº”è¯¥æ˜¯å”¯ä¸€çš„</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#p1</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#p2</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;p&gt;æ²¡æœ‰idçš„p&lt;/p&gt;</span><br><span class="line">&lt;p id="p1"&gt;id=p1çš„p&lt;/p&gt;</span><br><span class="line">&lt;p id="p2"&gt;id=p2çš„p&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç±»é€‰æ‹©å™¨ï¼š â€¦pre{color:blue;}</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-class">.pre</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.after</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:green;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;p class="pre"&gt;å‰3ä¸ª&lt;/p&gt;</span><br><span class="line">&lt;p class="pre"&gt;å‰3ä¸ª&lt;/p&gt;</span><br><span class="line">&lt;p class="pre"&gt;å‰3ä¸ª&lt;/p&gt;</span><br><span class="line">&lt;p class="after"&gt;å3ä¸ª&lt;/p&gt;</span><br><span class="line">&lt;p class="after"&gt;å3ä¸ª&lt;/p&gt;</span><br><span class="line">&lt;p class="after"&gt;å3ä¸ª&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>å‡†ç¡®é€‰æ‹©: æ ¹æ®å…ƒç´ åå’Œclassé€‰æ‹©ã€‚</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å…ƒç´ å’Œclasséƒ½è¦ç¬¦åˆ*/</span></span><br><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.blue</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;p class="blue"&gt;class=blueçš„p&lt;/p&gt;</span><br><span class="line">&lt;span class="blue"&gt;class=blueçš„span&lt;/span&gt;</span><br></pre></td></tr></table></figure>
<h3 id="CSSä¸htmlæ–‡ä»¶åˆ†ç¦»"><a class="header-anchor" href="#CSSä¸htmlæ–‡ä»¶åˆ†ç¦»">Â¶</a>CSSä¸htmlæ–‡ä»¶åˆ†ç¦»</h3>
<p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å«style.css<br>
å…¶å†…å®¹ä¸º</p>
<p>.p1{<br>
color:red;<br>
}<br>
.span1{<br>
color:blue;<br>
}</p>
<p>ç„¶ååœ¨htmlä¸­åŒ…å«è¯¥æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"/study/style.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcodeæ’åºåˆé›†</title>
    <url>/2020/04/13/Leetcode%E6%8E%92%E5%BA%8F%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<pre><code>å †å’Œå¿«æ’èƒ½è§£å†³ç™¾åˆ†ä¹‹å…«åçš„é—®é¢˜ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜ç›®ä¸€ 215.æ•°ç»„ä¸­ç¬¬kå¤§çš„å…ƒç´ </h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¤§æ ¹å †</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; heap = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: nums)&#123;</span><br><span class="line">            heap.offer(i);</span><br><span class="line">            <span class="keyword">if</span>(heap.size()&gt;k)&#123;</span><br><span class="line">                heap.poll();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> heap.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¿«æ’ æ³¨æ„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line"><span class="comment">// å…»æˆå¥½ä¹ æƒ¯ï¼Œå°½é‡ä¸è¦æ”¹å˜ä¼ å…¥çš„å˜é‡ï¼Œå°½é‡åˆ›ä¸ªå±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findKthLargest</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums==<span class="keyword">null</span>||nums.length==<span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>; <span class="keyword">int</span> right = nums.length -<span class="number">1</span>; </span><br><span class="line">        k = nums.length - k;       </span><br><span class="line">        <span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line">            <span class="keyword">int</span> i = partition(nums, left, right);</span><br><span class="line">            <span class="keyword">if</span>(i==k)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i&lt;k)&#123;</span><br><span class="line">                left = i + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                right = i - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[k];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[]a, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = left, j = right + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (a[++i] &lt; a[left] &amp;&amp; i &lt; right) ;</span><br><span class="line">            <span class="keyword">while</span> (a[--j] &gt; a[left] &amp;&amp; j &gt; left) ;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= j) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(a, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a, left, j);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜ç›®äºŒ 347.å‰kä¸ªé«˜é¢‘å…ƒç´ </h1>
<p>åˆ©ç”¨æ¡¶æ’ï¼›</p>
<ol>
<li>å…ˆç»Ÿè®¡å„ä¸ªæ•°å­—å‡ºç°çš„é¢‘ç‡</li>
<li>åˆ›å»ºä¸€ä¸ªArrayListæ•°ç»„,ä¸‹æ ‡ä¸ºé¢‘ç‡ï¼Œå…ƒç´ ä¸ºå¯¹åº”é¢‘ç‡çš„æ•°å­—é“¾è¡¨</li>
<li>ä»åå¾€å‰çš„å‰kä¸ªå…ƒç´ å³ä¸ºå‰kä¸ªé«˜é¢‘å…ƒç´ </li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">topKFrequent</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Integer,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: nums)&#123;</span><br><span class="line">            map.put(i, map.getOrDefault(i,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt;[] buckets = <span class="keyword">new</span> ArrayList[nums.length+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> key: map.keySet())&#123;</span><br><span class="line">            <span class="keyword">int</span> fre = map.get(key);</span><br><span class="line">            <span class="keyword">if</span>(buckets[fre] == <span class="keyword">null</span>)&#123;</span><br><span class="line">                buckets[fre] = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">            buckets[fre].add(key);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; topK = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= nums.length;i&gt;=<span class="number">0</span> &amp;&amp; topK.size()&lt;k;--i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(buckets[i] == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(topK.size() + buckets[i].size() &lt;= k)&#123;</span><br><span class="line">                topK.addAll(buckets[i]);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                topK.addAll(buckets[i].subList(<span class="number">0</span>,k- topK.size()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> topK;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>451.æ ¹æ®å­—ç¬¦å‡ºç°çš„é¢‘ç‡æ’åº</h1>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·å°†å­—ç¬¦ä¸²é‡Œçš„å­—ç¬¦æŒ‰ç…§å‡ºç°çš„é¢‘ç‡é™åºæ’åˆ—ã€‚<br>
ä¸ä¸Šé¢˜ç›¸ä¼¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">frequencySort</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s==<span class="keyword">null</span>||s.length()&lt;<span class="number">3</span>) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="keyword">char</span>[] chars = s.toCharArray();</span><br><span class="line">        HashMap&lt;Character,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> c: chars)&#123;</span><br><span class="line">            map.put(c,map.getOrDefault(c,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Character&gt;[] fre = <span class="keyword">new</span> ArrayList[chars.length+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> c: map.keySet())&#123;</span><br><span class="line">            <span class="keyword">int</span> frequency = map.get(c);</span><br><span class="line">            <span class="keyword">if</span>(fre[frequency] == <span class="keyword">null</span>)&#123;</span><br><span class="line">                fre[frequency] = <span class="keyword">new</span> ArrayList&lt;Character&gt;();</span><br><span class="line">            &#125;</span><br><span class="line">            fre[frequency].add(c);</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuilder st = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= fre.length - <span class="number">1</span>;i&gt;=<span class="number">1</span>;--i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fre[i]==<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">char</span> c: fre[i])&#123;</span><br><span class="line">                <span class="keyword">int</span> count = i;</span><br><span class="line">                <span class="keyword">while</span>(count&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    st.append(c);</span><br><span class="line">                    --count;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> st.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è·å…°å›½æ——é—®é¢˜</h1>
<p>æœ‰ä¸‰ç§é¢œè‰²çš„çƒï¼Œç®—æ³•çš„ç›®æ ‡æ˜¯å°†è¿™ä¸‰ç§çƒæŒ‰é¢œè‰²é¡ºåºæ­£ç¡®åœ°æ’åˆ—ã€‚å®ƒå…¶å®æ˜¯ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åºçš„ä¸€ç§å˜ç§ï¼Œåœ¨ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åºä¸­ï¼Œæ¯æ¬¡åˆ‡åˆ†éƒ½å°†æ•°ç»„åˆ†æˆä¸‰ä¸ªåŒºé—´ï¼šå°äºåˆ‡åˆ†å…ƒç´ ã€ç­‰äºåˆ‡åˆ†å…ƒç´ ã€å¤§äºåˆ‡åˆ†å…ƒç´ ï¼Œè€Œè¯¥ç®—æ³•æ˜¯å°†æ•°ç»„åˆ†æˆä¸‰ä¸ªåŒºé—´ï¼šç­‰äºçº¢è‰²ã€ç­‰äºç™½è‰²ã€ç­‰äºè“è‰²ã€‚</p>
<h2 id="75-é¢œè‰²åˆ†ç±»"><a class="header-anchor" href="#75-é¢œè‰²åˆ†ç±»">Â¶</a>75.é¢œè‰²åˆ†ç±»</h2>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode322.é›¶é’±å…‘æ¢</title>
    <url>/2020/04/12/Leetcode322-%E9%9B%B6%E9%92%B1%E5%85%91%E6%8D%A2/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢ amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›Â -1ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ è‡ªé¡¶å‘ä¸‹</h1>
<p>dp[0] = 0;<br>
dp[i] = min(dp[i - coins[1-max]])+1;<br>
ç”¨ä¸€ä¸ªæ•°ç»„å­˜å±€éƒ¨æœ€ä¼˜ï¼Œ<br>
ä»amountå¼€å§‹ï¼Œåˆ†æ”¯æ‰¾minï¼ˆamount-coins[1-max]ï¼‰ï¼Œæ¯ä¸Šä¸€å±‚å°±åŠ ä¸€ã€‚<br>
ç»ˆæ­¢æ¡ä»¶æ˜¯amount ==0çš„æ—¶å€™ï¼Œè¿”å›0ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] memo;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(coins.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="keyword">int</span>[amount];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> findWay(coins,amount);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// memo[n] è¡¨ç¤ºé’±å¸nå¯ä»¥è¢«æ¢å–çš„æœ€å°‘çš„ç¡¬å¸æ•°ï¼Œä¸èƒ½æ¢å–å°±ä¸º-1</span></span><br><span class="line">    <span class="comment">// findWayå‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†æ‰¾åˆ° amountæ•°é‡çš„é›¶é’±å¯ä»¥å…‘æ¢çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œè¿”å›å…¶å€¼int</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findWay</span><span class="params">(<span class="keyword">int</span>[] coins,<span class="keyword">int</span> amount)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(amount &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(amount == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®°å¿†åŒ–çš„å¤„ç†ï¼Œmemo[n]ç”¨èµ‹äºˆäº†å€¼ï¼Œå°±ä¸ç”¨ç»§ç»­ä¸‹é¢çš„å¾ªç¯</span></span><br><span class="line">        <span class="comment">// ç›´æ¥çš„è¿”å›memo[n] çš„æœ€ä¼˜å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(memo[amount-<span class="number">1</span>] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> memo[amount-<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; coins.length;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> res = findWay(coins,amount-coins[i]);</span><br><span class="line">            <span class="keyword">if</span>(res &gt;= <span class="number">0</span> &amp;&amp; res &lt; min)&#123;</span><br><span class="line">                min = res + <span class="number">1</span>; <span class="comment">// åŠ 1ï¼Œæ˜¯ä¸ºäº†åŠ ä¸Šå¾—åˆ°resç»“æœçš„é‚£ä¸ªæ­¥éª¤ä¸­ï¼Œå…‘æ¢çš„ä¸€ä¸ªç¡¬å¸</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        memo[amount-<span class="number">1</span>] = (min == Integer.MAX_VALUE ? -<span class="number">1</span> : min);</span><br><span class="line">        <span class="keyword">return</span> memo[amount-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ è‡ªåº•å‘ä¸Š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] memo;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[amount+<span class="number">1</span>];</span><br><span class="line">        dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;=amount;++i)&#123;</span><br><span class="line">            dp[i] = amount + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;coins.length;++j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i-coins[j]&lt;<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                dp[i] = Math.min(dp[i-coins[j]]+<span class="number">1</span>,dp[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[amount] == amount+<span class="number">1</span>? -<span class="number">1</span>:dp[amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetcodeåŒæŒ‡é’ˆåˆé›†</title>
    <url>/2020/04/12/Leetcode%E5%8F%8C%E6%8C%87%E9%92%88%E5%90%88%E9%9B%86/</url>
    <content><![CDATA[<pre><code>æ€»ç»“ä¸€æ³¢
</code></pre>
<a id="more"></a>
<h1>é¢˜ç›®ä¸€ 167.ä¸¤æ•°ä¹‹å’Œ</h1>
<h1>é¢˜ç›®äºŒ 633.ä¸¤æ•°å¹³æ–¹å’Œ</h1>
<h1>é¢˜ç›®ä¸‰ 345.åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—ç¬¦</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reverseVowels</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s.length()&lt;<span class="number">2</span>) <span class="keyword">return</span> s;</span><br><span class="line">        <span class="keyword">char</span>[]chars = s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> i= <span class="number">0</span>; <span class="keyword">int</span> j = chars.length -<span class="number">1</span> ;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(chars[i]==<span class="string">'a'</span>||chars[i]==<span class="string">'e'</span>||chars[i]==<span class="string">'o'</span>||chars[i]==<span class="string">'i'</span>||chars[i]==<span class="string">'u'</span>||chars[i]==<span class="string">'A'</span>||chars[i]==<span class="string">'E'</span>||chars[i]==<span class="string">'O'</span>||chars[i]==<span class="string">'I'</span>||chars[i]==<span class="string">'U'</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(chars[j]==<span class="string">'a'</span>||chars[j]==<span class="string">'e'</span>||chars[j]==<span class="string">'o'</span>||chars[j]==<span class="string">'i'</span>||chars[j]==<span class="string">'u'</span>||chars[j]==<span class="string">'A'</span>||chars[j]==<span class="string">'E'</span>||chars[j]==<span class="string">'O'</span>||chars[j]==<span class="string">'I'</span>||chars[j]==<span class="string">'U'</span>)&#123;</span><br><span class="line">                    <span class="keyword">char</span> temp = chars[i];</span><br><span class="line">                    chars[i] = chars[j];</span><br><span class="line">                    chars[j] = temp;</span><br><span class="line">                    ++i;</span><br><span class="line">                    --j;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    --j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;</span><br><span class="line">                              </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(chars);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜ç›®å›› 680.å›æ–‡å­—ç¬¦ä¸²</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> onechance = <span class="keyword">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">validPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = s.length() - <span class="number">1</span>; i &lt; j; i++, j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) != s.charAt(j)) &#123;</span><br><span class="line">                <span class="keyword">return</span> isPalindrome(s, i, j - <span class="number">1</span>) || isPalindrome(s, i + <span class="number">1</span>, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(String s, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i++) != s.charAt(j--)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜ç›®äº” 88.åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h1>
<h1>é¢˜ç›®å…­ 141.ç¯å½¢é“¾è¡¨</h1>
<h1>é¢˜ç›®ä¸ƒ 524.é€šè¿‡åˆ é™¤å­—æ¯åŒ¹é…åˆ°å­—å…¸é‡Œæœ€é•¿å•è¯</h1>
<p>Stringé¡ºåºå¤§å°æ¯”è¾ƒå¯ä»¥ç”¨ a.compareTO(b), ä¼šè¿”å›ASCIIç çš„å·®å€¼ï¼Œaå¤§äºbåˆ™ç»“æœå¤§äº0ï¼›<br>
è¿™é¢˜å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆæ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­åºåˆ—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">findLongestWord</span><span class="params">(String s, List&lt;String&gt; d)</span> </span>&#123;</span><br><span class="line">        String maxStr = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">int</span> m = s.length(); </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x = <span class="number">0</span>; x&lt;d.size();++x)&#123;</span><br><span class="line">            String str = d.get(x); </span><br><span class="line">            <span class="keyword">int</span> l1 = str.length();</span><br><span class="line">            <span class="keyword">int</span> l2 = maxStr.length();</span><br><span class="line">            <span class="keyword">if</span>(l1 &lt; l2||(l1==l2&amp;&amp;str.compareTo(maxStr)&gt;<span class="number">0</span>))&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>; <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(i&lt;m &amp;&amp; j&lt;l1)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s.charAt(i)!=str.charAt(j))&#123;</span><br><span class="line">                    ++i;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    ++i; ++j; </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j==l1)&#123;</span><br><span class="line">                maxStr = str;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxStr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="28-å®ç°strStr"><a class="header-anchor" href="#28-å®ç°strStr">Â¶</a>28.å®ç°strStr()</h3>
<p>è¿™é¢˜çš„è§£æ³•äºŒå¯ä»¥ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŒæŒ‡é’ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åŒæŒ‡é’ˆæ€æƒ³</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">strStr</span><span class="params">(String haystack, String needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (needle.length() == <span class="number">0</span> || haystack.equals(needle)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; haystack.length()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (haystack.charAt(i) == needle.charAt(j)) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    i = i - j ;</span><br><span class="line">                    j = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (j == needle.length()) &#123;</span><br><span class="line">                <span class="keyword">return</span> i - j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">strStr</span><span class="params">(String haystack, String needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = haystack.length(); <span class="keyword">int</span> len2 = needle.length();</span><br><span class="line">        <span class="keyword">if</span>(len2 &gt; len1)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(len2 == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len1 - len2 + <span class="number">1</span>; ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(haystack.charAt(i) == needle.charAt(<span class="number">0</span>))&#123;</span><br><span class="line">                <span class="keyword">if</span>(haystack.substring(i, i + len2).equals(needle))&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ»šåŠ¨å“ˆå¸Œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="comment">// function to convert character to integer</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">charToInt</span><span class="params">(<span class="keyword">int</span> idx, String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)s.charAt(idx) - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">strStr</span><span class="params">(String haystack, String needle)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> L = needle.length(), n = haystack.length();</span><br><span class="line">    <span class="keyword">if</span> (L &gt; n) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// base value for the rolling hash function</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">26</span>;</span><br><span class="line">    <span class="comment">// modulus value for the rolling hash function to avoid overflow</span></span><br><span class="line">    <span class="keyword">long</span> modulus = (<span class="keyword">long</span>)Math.pow(<span class="number">2</span>, <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the hash of strings haystack[:L], needle[:L]</span></span><br><span class="line">    <span class="keyword">long</span> h = <span class="number">0</span>, ref_h = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; L; ++i) &#123;</span><br><span class="line">      h = (h * a + charToInt(i, haystack)) % modulus;</span><br><span class="line">      ref_h = (ref_h * a + charToInt(i, needle)) % modulus;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h == ref_h) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// const value to be used often : a**L % modulus</span></span><br><span class="line">    <span class="keyword">long</span> aL = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= L; ++i) aL = (aL * a) % modulus;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">1</span>; start &lt; n - L + <span class="number">1</span>; ++start) &#123;</span><br><span class="line">      <span class="comment">// compute rolling hash in O(1) time</span></span><br><span class="line">      h = (h * a - charToInt(start - <span class="number">1</span>, haystack) * aL</span><br><span class="line">              + charToInt(start + L - <span class="number">1</span>, haystack)) % modulus;</span><br><span class="line">      <span class="keyword">if</span> (h == ref_h) <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="76-æœ€å°è¦†ç›–å­—ä¸²"><a class="header-anchor" href="#76-æœ€å°è¦†ç›–å­—ä¸²">Â¶</a>76. æœ€å°è¦†ç›–å­—ä¸²</h3>
<p>åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆä¸€ç›´å‘å³æ‹“å®½çª—å£ï¼Œä¸ºäº†è®©å­ä¸²å°½å¯èƒ½çš„çŸ­ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆåœ¨å·¦è¾¹å°½å¯èƒ½çš„å‡å°‘çª—å£ï¼Œè¿™ä¸ªå°½å¯èƒ½å°±æ˜¯çª—å£è‡³å°‘è¦åŒ…å«tä¸­æ‰€æœ‰å­—æ¯ã€‚</p>
<p>è¿™é‡Œæœ‰å‡ ç‚¹è¦è€ƒè™‘ï¼š</p>
<ol>
<li>
<p>ä»€ä¹ˆæ—¶å€™å·¦è¾¹çš„æŒ‡é’ˆèƒ½å¤Ÿå‡å°‘çª—å£ï¼š<br>
åªæœ‰å½“å·¦è¾¹æŒ‡é’ˆæŒ‡å‘çš„å­—æ¯å’Œå³è¾¹æŒ‡é’ˆæŒ‡å‘çš„å­—æ¯ç›¸åŒï¼Œæ‰æœ‰æœºä¼šå‡ºç°ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„çª—å£æŠŠtä¸­çš„æ‰€æœ‰å­—æ¯éƒ½åŒ…æ‹¬äº†ã€‚</p>
</li>
<li>
<p>å‡å°‘çª—å£çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™åœæ­¢ï¼š<br>
å¦‚æœå·¦è¾¹æŒ‡é’ˆæŒ‡å‘çš„å­—æ¯æ˜¯tä¸­çš„å­—æ¯ï¼Œè€Œä¸”çª—å£å†…è¿™ä¸ªå­—æ¯æ•°é‡ç­‰äºtä¸­è¿™ä¸ªå­—æ¯æ•°é‡ï¼Œè¯´æ˜çª—å£å†…çš„å­—æ¯åˆšå¥½å¤Ÿç”¨äº†ï¼Œå°±åº”è¯¥åœæ­¢äº†ã€‚</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();  <span class="comment">//è®°å½•tå„ä¸ªå­—æ¯çš„æ•°é‡</span></span><br><span class="line">    Map&lt;Character, Integer&gt; map2 = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">//è®°å½•å½“å‰èŒƒå›´å†…å·²è·å¾—çš„tä¸­å­—æ¯çš„æ•°é‡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> slen = s.length(); <span class="keyword">int</span> tlen = t.length();</span><br><span class="line">        <span class="keyword">if</span>(slen &lt; tlen)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; tlen;++i)&#123;                                    </span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–map</span></span><br><span class="line">            <span class="keyword">char</span> c = t.charAt(i);</span><br><span class="line">            map.put(c, map.getOrDefault(c, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å·¦è¾¹çš„æŒ‡é’ˆç”¨æ¥æŒ‡å‘çª—å£æœ€å·¦è¾¹çš„å­—æ¯</span></span><br><span class="line">        <span class="keyword">int</span> start = -<span class="number">1</span>;           </span><br><span class="line">        <span class="comment">//è®°å½•æœ€å€¼ï¼Œç”¨æ¥è¿”å›ç»“æœ                             </span></span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>; <span class="keyword">int</span> end = slen;                                  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; slen; ++i)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(i);</span><br><span class="line">            <span class="comment">//å¦‚æœå½“å‰åœ¨sä¸­èµ°åˆ°çš„å­—æ¯æ˜¯tä¸­çš„å­—æ¯å°±å¼€å§‹æ£€æŸ¥</span></span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(c))&#123;                                     </span><br><span class="line">                <span class="keyword">if</span>(start == - <span class="number">1</span>)&#123; <span class="comment">//ç»™startèµ‹åˆå€¼</span></span><br><span class="line">                    start = i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//çª—å£çš„å³è¾¹æ¯é‡åˆ°ä¸€ä¸ªtä¸­çš„å­—æ¯å°±è®°å½•</span></span><br><span class="line">                map2.put(c, map2.getOrDefault(c, <span class="number">0</span>) + <span class="number">1</span>); </span><br><span class="line">                <span class="comment">//å¦‚æœèµ°åˆ°çš„å­—æ¯è·ŸèŒƒå›´çš„ç¬¬ä¸€ä¸ªå­—æ¯ç›¸åŒå°±æŸ¥çœ‹èƒ½ä¸èƒ½æŠŠç¬¬ä¸€ä¸ªå­—æ¯æ¶ˆå»ï¼ˆä¸ºäº†å°½å¯èƒ½çŸ­ï¼‰</span></span><br><span class="line">                <span class="keyword">if</span>(s.charAt(start) == c)&#123;                               </span><br><span class="line">                    <span class="keyword">while</span>(start &lt; i)&#123;</span><br><span class="line">                        <span class="keyword">char</span> pre = s.charAt(start);</span><br><span class="line">                        <span class="comment">//æ£€æŸ¥startä½ç½®æ˜¯ä¸æ˜¯tä¸­çš„å­—æ¯ï¼Œå¦‚æœä¸æ˜¯å°±å¯ä»¥å‘å³ç§»</span></span><br><span class="line">                        <span class="keyword">if</span>(map.containsKey(pre))&#123;  </span><br><span class="line">                        <span class="comment">//å¦‚æœstartä½ç½®æ˜¯tä¸­çš„å­—æ¯ï¼Œè€Œä¸”çª—å£å†…è¿™ä¸ªå­—æ¯å·²ç»å¤šè¿‡tä¸­è¿™ä¸ªå­—æ¯æ•°é‡ï¼Œé‚£å°±å¯ä»¥èˆå»ï¼›</span></span><br><span class="line">                            <span class="keyword">if</span>(map.get(pre)&lt; map2.get(pre))&#123;            </span><br><span class="line">                                map2.put(pre, map2.get(pre) - <span class="number">1</span>);</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;  <span class="comment">//å¦åˆ™å°±ä¸èƒ½èˆå»ï¼Œè·³å‡ºæ£€æŸ¥</span></span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        ++start;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­å½“å‰çš„çª—å£æ˜¯ä¸æ˜¯æ¯”è¾ƒçŸ­ä¸”æ»¡è¶³çª—å£å†…åŒ…æ‹¬å®Œäº†tä¸­æ‰€æœ‰å­—æ¯</span></span><br><span class="line">                <span class="keyword">if</span>(i - start &lt; end - begin &amp;&amp; check())&#123;                 </span><br><span class="line">                    end = i;</span><br><span class="line">                    begin = start;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> end == slen? <span class="string">""</span> : s.substring(begin, end + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Iterator iter = map.entrySet().iterator(); </span><br><span class="line">        <span class="keyword">while</span> (iter.hasNext()) &#123; </span><br><span class="line">            Map.Entry entry = (Map.Entry) iter.next(); </span><br><span class="line">            Character key = (Character) entry.getKey(); </span><br><span class="line">            Integer val = (Integer) entry.getValue(); </span><br><span class="line">            <span class="keyword">if</span> (map2.getOrDefault(key, <span class="number">0</span>) &lt; val) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Mapçš„éå†æ–¹å¼ï¼šentrySetï¼ŒkeySetï¼Œ valueSetï¼Œè¿˜æœ‰ä¸Šé¢ç”¨è¿­ä»£å™¨ï¼ˆæ•ˆç‡æœ€é«˜ï¼‰</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">check</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> c: map.keySet())&#123;</span><br><span class="line">            <span class="keyword">if</span>(map2.containsKey(c))&#123;</span><br><span class="line">                <span class="keyword">if</span>(map2.get(c) &lt; map.get(c))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿˜æœ‰Lambdaï¼Œæ•ˆç‡æœ€ä½</span></span><br><span class="line">    map.forEach((key, value) -&gt; &#123;</span><br><span class="line">            System.out.println(key + <span class="string">":"</span> + value);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode2.ä¸¤æ•°ç›¸åŠ </title>
    <url>/2020/04/11/Leetcode2-%E4%B8%A4%E6%95%B0%E7%9B%B8%E5%8A%A0/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å‡ºä¸¤ä¸ªÂ éç©º çš„é“¾è¡¨ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å…¶ä¸­ï¼Œå®ƒä»¬å„è‡ªçš„ä½æ•°æ˜¯æŒ‰ç…§Â é€†åºÂ çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨Â ä¸€ä½Â æ•°å­—ã€‚
å¦‚æœï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨æ¥è¡¨ç¤ºå®ƒä»¬çš„å’Œã€‚æ‚¨å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0Â å¼€å¤´ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<ol>
<li>ç”¨ä¸€ä¸ªintè®°å½•è¿›ä½ï¼Œç”¨ä¸€ä¸ªintè®°å½•å½“å‰ä½å’Œã€‚</li>
<li>æŒ‰ä½ç›¸åŠ ï¼Œæ›´æ–°å’Œï¼Œæ›´æ–°è¿›ä½</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        ListNode dummyHead = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode cur = dummyHead; ListNode p = l1; ListNode q = l2;</span><br><span class="line">        <span class="keyword">while</span>(p!=<span class="keyword">null</span>||q!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> num1 = (p!= <span class="keyword">null</span>)? p.val: <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> num2 = (q!= <span class="keyword">null</span>)? q.val: <span class="number">0</span>;</span><br><span class="line">            sum = carry + num1 + num2;</span><br><span class="line">            carry = sum/<span class="number">10</span>;</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(sum%<span class="number">10</span>);</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">if</span>(p!=<span class="keyword">null</span>) p = p.next;</span><br><span class="line">            <span class="keyword">if</span>(q!=<span class="keyword">null</span>) q = q.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(carry&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummyHead.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode560.å’Œä¸ºkçš„å­æ•°ç»„</title>
    <url>/2020/04/11/leetcode560-%E5%92%8C%E4%B8%BAk%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° kï¼Œä½ éœ€è¦æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚
å¦™è§£ï¼šä»¥å½“å‰sum - kæ£€ç´¢ä¹‹å‰çš„sumã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ï¼šæš´åŠ›è¿­ä»£</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> start = <span class="number">0</span>; start&lt;nums.length;++start)&#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>; </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> end = start; end &lt; nums.length;++end)&#123;</span><br><span class="line">                sum += nums[end];</span><br><span class="line">                <span class="keyword">if</span>(sum == k)&#123;</span><br><span class="line">                    ++count;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒï¼šå“ˆå¸Œéå†</h1>
<ol>
<li>sumè¡¨ç¤ºå½“å‰å’Œï¼Œcountè¡¨ç¤ºæ»¡è¶³å’Œä¸ºkçš„æ•°é‡</li>
<li>sum[i] - sum[j] = k è¯´æ˜iåˆ°jçš„å’Œä¸ºkã€‚</li>
<li>ç”¨ä¸€ä¸ªHashMapå­˜sumï¼Œå¦‚æœå­˜åœ¨ sum-kï¼Œåˆ™è¯´æ˜ï¼ˆå½“å‰çš„è¿™ä¸ªsum - k = ä¹‹å‰æ”¾å…¥çš„æŸä¸ªsumï¼‰å­˜åœ¨ã€‚valueè¡¨ç¤ºsumçš„æ•°é‡ï¼Œcount += HashMapä¸­çš„æ•°é‡ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;nums.length; ++i)&#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(sum - k))&#123;</span><br><span class="line">                count += map.get(sum - k);</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(sum,map.getOrDefault(sum,<span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>Leetcode</tag>
        <tag>æ•°ç»„</tag>
        <tag>è§£æ³•ï¼šå“ˆå¸Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/10/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•°ç»„å’Œæ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œæ•°å€¼çš„æœ€å¤§å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥æ•°ç»„{2,3,4,2,6,2,5,1}åŠæ»‘åŠ¨çª—å£çš„å¤§å°3ï¼Œé‚£ä¹ˆä¸€å…±å­˜åœ¨6ä¸ªæ»‘åŠ¨çª—å£ï¼Œä»–ä»¬çš„æœ€å¤§å€¼åˆ†åˆ«ä¸º{4,4,6,6,6,5}ï¼› é’ˆå¯¹æ•°ç»„{2,3,4,2,6,2,5,1}çš„æ»‘åŠ¨çª—å£æœ‰ä»¥ä¸‹6ä¸ªï¼š {[2,3,4],2,6,2,5,1}ï¼Œ {2,[3,4,2],6,2,5,1}ï¼Œ {2,3,[4,2,6],2,5,1}ï¼Œ {2,3,4,[2,6,2],5,1}ï¼Œ {2,3,4,2,[6,2,5],1}ï¼Œ {2,3,4,2,6,[2,5,1]}ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ æš´åŠ›æ³•</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">maxInWindows</span><span class="params">(<span class="keyword">int</span> [] num, <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">int</span> len = num.length;</span><br><span class="line">        <span class="keyword">if</span>(len&lt;<span class="number">1</span>||size&lt;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> aList;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=len-size;++i)&#123;</span><br><span class="line">            aList.add(findMax(num,size,i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findMax</span><span class="params">(<span class="keyword">int</span>[]num,<span class="keyword">int</span> size, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = num[start];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;start+size;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(num[i]&gt;max)&#123;</span><br><span class="line">                max = num[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ</h1>
<p>åŒç«¯é˜Ÿåˆ—<br>
ç”¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ç¬¬ä¸€ä¸ªä½ç½®ä¿å­˜å½“å‰çª—å£çš„æœ€å¤§å€¼ï¼Œå½“çª—å£æ»‘åŠ¨ä¸€æ¬¡<br>
1.åˆ¤æ–­å½“å‰æœ€å¤§å€¼æ˜¯å¦è¿‡æœŸ<br>
2.æ–°å¢åŠ çš„å€¼ä»é˜Ÿå°¾å¼€å§‹æ¯”è¾ƒï¼ŒæŠŠæ‰€æœ‰æ¯”ä»–å°çš„å€¼ä¸¢æ‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">maxInWindows</span><span class="params">(<span class="keyword">int</span> [] num, <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">if</span>(size&lt;<span class="number">1</span>||num.length&lt;<span class="number">1</span>) <span class="keyword">return</span> aList;</span><br><span class="line">        <span class="keyword">int</span> begin;</span><br><span class="line">        LinkedList&lt;Integer&gt; dueue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;num.length;++i)&#123;</span><br><span class="line">            begin = i - size + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(dueue.isEmpty())&#123;</span><br><span class="line">                dueue.offerFirst(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(begin&gt;dueue.peekFirst())&#123;</span><br><span class="line">                dueue.pollFirst();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(!dueue.isEmpty() &amp;&amp; num[dueue.peekLast()]&lt;=num[i])&#123;</span><br><span class="line">                dueue.pollLast();</span><br><span class="line">            &#125;</span><br><span class="line">            dueue.offerLast(i);</span><br><span class="line">            <span class="keyword">if</span>(begin&gt;=<span class="number">0</span>) aList.add(num[dueue.peekFirst()]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ©é˜µä¸­çš„è·¯å¾„ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/10/%E7%9F%A9%E9%98%B5%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­åœ¨ä¸€ä¸ªçŸ©é˜µä¸­æ˜¯å¦å­˜åœ¨ä¸€æ¡åŒ…å«æŸå­—ç¬¦ä¸²æ‰€æœ‰å­—ç¬¦çš„è·¯å¾„ã€‚è·¯å¾„å¯ä»¥ä»çŸ©é˜µä¸­çš„ä»»æ„ä¸€ä¸ªæ ¼å­å¼€å§‹ï¼Œæ¯ä¸€æ­¥å¯ä»¥åœ¨çŸ©é˜µä¸­å‘å·¦ï¼Œå‘å³ï¼Œå‘ä¸Šï¼Œå‘ä¸‹ç§»åŠ¨ä¸€ä¸ªæ ¼å­ã€‚å¦‚æœä¸€æ¡è·¯å¾„ç»è¿‡äº†çŸ©é˜µä¸­çš„æŸä¸€ä¸ªæ ¼å­ï¼Œåˆ™è¯¥è·¯å¾„ä¸èƒ½å†è¿›å…¥è¯¥æ ¼å­ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPath</span><span class="params">(<span class="keyword">char</span>[] matrix, <span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">char</span>[] str)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//æ ‡å¿—ä½ï¼Œåˆå§‹åŒ–ä¸ºfalse</span></span><br><span class="line">        <span class="keyword">boolean</span>[] flag = <span class="keyword">new</span> <span class="keyword">boolean</span>[matrix.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;rows;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;cols;j++)&#123;</span><br><span class="line">                 <span class="comment">//å¾ªç¯éå†äºŒç»´æ•°ç»„ï¼Œæ‰¾åˆ°èµ·ç‚¹ç­‰äºstrç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œå†é€’å½’åˆ¤æ–­å››å‘¨æ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„----å›æº¯æ³•</span></span><br><span class="line">                 <span class="keyword">if</span>(judge(matrix,i,j,rows,cols,flag,str,<span class="number">0</span>))&#123;</span><br><span class="line">                     <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//judge(åˆå§‹çŸ©é˜µï¼Œç´¢å¼•è¡Œåæ ‡iï¼Œç´¢å¼•çºµåæ ‡jï¼ŒçŸ©é˜µè¡Œæ•°ï¼ŒçŸ©é˜µåˆ—æ•°ï¼Œå¾…åˆ¤æ–­çš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ç´¢å¼•åˆå§‹ä¸º0å³å…ˆåˆ¤æ–­å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä½)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">judge</span><span class="params">(<span class="keyword">char</span>[] matrix,<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> rows,<span class="keyword">int</span> cols,<span class="keyword">boolean</span>[] flag,<span class="keyword">char</span>[] str,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="comment">//å…ˆæ ¹æ®iå’Œjè®¡ç®—åŒ¹é…çš„ç¬¬ä¸€ä¸ªå…ƒç´ è½¬ä¸ºä¸€ç»´æ•°ç»„çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> index = i*cols+j;</span><br><span class="line">        <span class="comment">//é€’å½’ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span> || j&lt;<span class="number">0</span> || i&gt;=rows || j&gt;=cols || matrix[index] != str[k] || flag[index] == <span class="keyword">true</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="comment">//è‹¥kå·²ç»åˆ°è¾¾stræœ«å°¾äº†ï¼Œè¯´æ˜ä¹‹å‰çš„éƒ½å·²ç»åŒ¹é…æˆåŠŸäº†ï¼Œç›´æ¥è¿”å›trueå³å¯</span></span><br><span class="line">        <span class="keyword">if</span>(k == str.length-<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//è¦èµ°çš„ç¬¬ä¸€ä¸ªä½ç½®ç½®ä¸ºtrueï¼Œè¡¨ç¤ºå·²ç»èµ°è¿‡äº†</span></span><br><span class="line">        flag[index] = <span class="keyword">true</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">//å›æº¯ï¼Œé€’å½’å¯»æ‰¾ï¼Œæ¯æ¬¡æ‰¾åˆ°äº†å°±ç»™kåŠ ä¸€ï¼Œæ‰¾ä¸åˆ°ï¼Œè¿˜åŸ</span></span><br><span class="line">        <span class="keyword">if</span>(judge(matrix,i-<span class="number">1</span>,j,rows,cols,flag,str,k+<span class="number">1</span>) ||</span><br><span class="line">           judge(matrix,i+<span class="number">1</span>,j,rows,cols,flag,str,k+<span class="number">1</span>) ||</span><br><span class="line">           judge(matrix,i,j-<span class="number">1</span>,rows,cols,flag,str,k+<span class="number">1</span>) ||</span><br><span class="line">           judge(matrix,i,j+<span class="number">1</span>,rows,cols,flag,str,k+<span class="number">1</span>)  )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//èµ°åˆ°è¿™ï¼Œè¯´æ˜è¿™ä¸€æ¡è·¯ä¸é€šï¼Œè¿˜åŸï¼Œå†è¯•å…¶ä»–çš„è·¯å¾„</span></span><br><span class="line">        flag[index] = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ‡ç»³å­ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/10/%E5%88%87%E7%BB%B3%E5%AD%90%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™ä½ ä¸€æ ¹é•¿åº¦ä¸ºnçš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿çš„mæ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn&gt;1å¹¶ä¸”m&gt;1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸ºk[0],k[1],...,k[m]ã€‚è¯·é—®k[0]xk[1]x...xk[m]å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">cutRope</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(target &gt;<span class="number">4</span>)&#123;</span><br><span class="line">            target -= <span class="number">3</span>;</span><br><span class="line">            res *= <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res*target;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®æµä¸­çš„ä¸­ä½æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/10/%E6%95%B0%E6%8D%AE%E6%B5%81%E4%B8%AD%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šå¦‚ä½•å¾—åˆ°ä¸€ä¸ªæ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼Ÿå¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¥‡æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä½äºä¸­é—´çš„æ•°å€¼ã€‚å¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¶æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚æˆ‘ä»¬ä½¿ç”¨Insert()æ–¹æ³•è¯»å–æ•°æ®æµï¼Œä½¿ç”¨GetMedian()æ–¹æ³•è·å–å½“å‰è¯»å–æ•°æ®çš„ä¸­ä½æ•°ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ ç»´æŠ¤ä¸€ä¸ªå°æ ¹å †å’Œå¤§æ ¹å †</h1>
<p>ä¼˜å…ˆçº§é˜Ÿåˆ—ä½œå¤§æ ¹å †å’Œå°æ ¹å †ï¼Œå¤§æ ¹å †é‡Œæ˜¯å°çš„é‚£åŠéƒ¨åˆ†ï¼Œå°æ ¹å †é‡Œæ˜¯å¤§çš„é‚£åŠéƒ¨åˆ†ã€‚<br>
å¤§æ ¹å †é‡Œæœ€å¤§çš„æ•°æ‰”åˆ°å°æ ¹å †é‡Œï¼Œ<br>
å¥‡æ•°çš„æ—¶å€™ï¼Œå°æ ¹å †æœ€å°çš„æ•°æ‰”åˆ°å¤§æ ¹å †é‡Œå»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; lowHeap = <span class="keyword">new</span> PriorityQueue&lt;&gt;((x,y)-&gt; y-x );</span><br><span class="line">    PriorityQueue&lt;Integer&gt; highHeap = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(Integer num)</span> </span>&#123;</span><br><span class="line">        ++size;</span><br><span class="line">        lowHeap.offer(num);</span><br><span class="line">        highHeap.offer(lowHeap.poll());</span><br><span class="line">        <span class="keyword">if</span>((size&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;</span><br><span class="line">            lowHeap.offer(highHeap.poll());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">GetMedian</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>((size&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">double</span>)lowHeap.peek();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">double</span>)(lowHeap.peek()+highHeap.peek())/<span class="number">2.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ’åº</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(Integer num)</span> </span>&#123;</span><br><span class="line">            aList.add(num);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Double <span class="title">GetMedian</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[aList.size()];</span><br><span class="line">            <span class="keyword">int</span> len = temp.length;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;len;++i)&#123;</span><br><span class="line">                temp[i] = aList.get(i);</span><br><span class="line">            &#125;</span><br><span class="line">            Arrays.sort(temp);</span><br><span class="line">            <span class="keyword">int</span> mid = len&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(len%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> (<span class="keyword">double</span>)temp[mid];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> ((<span class="keyword">double</span>)temp[mid]+(<span class="keyword">double</span>)temp[mid-<span class="number">1</span>])/<span class="number">2.0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹</title>
    <url>/2020/04/09/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%BB%93%E7%82%B9/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå°çš„ç»“ç‚¹ã€‚ä¾‹å¦‚ï¼Œ ï¼ˆ5ï¼Œ3ï¼Œ7ï¼Œ2ï¼Œ4ï¼Œ6ï¼Œ8ï¼‰    ä¸­ï¼ŒæŒ‰ç»“ç‚¹æ•°å€¼å¤§å°é¡ºåºç¬¬ä¸‰å°ç»“ç‚¹çš„å€¼ä¸º4ã€‚
</code></pre>
<a id="more"></a>
<h1>é€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">KthNode</span><span class="params">(TreeNode pRoot, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pRoot==<span class="keyword">null</span>||k==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode left = KthNode(pRoot.left, k);</span><br><span class="line">        <span class="keyword">if</span>(left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> left;</span><br><span class="line">        &#125;</span><br><span class="line">        ++index;</span><br><span class="line">        <span class="keyword">if</span>(index == k)&#123;</span><br><span class="line">            <span class="keyword">return</span> pRoot;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode right = KthNode(pRoot.right, k);</span><br><span class="line">        <span class="keyword">if</span>(right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ ˆä¸­åºéå†</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">TreeNode <span class="title">KthNode</span><span class="params">(TreeNode root, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>||k==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        TreeNode node = root;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(node!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(node);</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                node = stack.pop();</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">if</span>(count==k)</span><br><span class="line">                    <span class="keyword">return</span> node;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">while</span>(node!=<span class="keyword">null</span>||!stack.isEmpty());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>åºåˆ—åŒ–äºŒå‰æ ‘ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/09/%E5%BA%8F%E5%88%97%E5%8C%96%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æ ‘
äºŒå‰æ ‘çš„åºåˆ—åŒ–æ˜¯æŒ‡ï¼šæŠŠä¸€æ£µäºŒå‰æ ‘æŒ‰ç…§æŸç§éå†æ–¹å¼çš„ç»“æœä»¥æŸç§æ ¼å¼ä¿å­˜ä¸ºå­—ç¬¦ä¸²ï¼Œä»è€Œä½¿å¾—å†…å­˜ä¸­å»ºç«‹èµ·æ¥çš„äºŒå‰æ ‘å¯ä»¥æŒä¹…ä¿å­˜ã€‚åºåˆ—åŒ–å¯ä»¥åŸºäºå…ˆåºã€ä¸­åºã€ååºã€å±‚åºçš„äºŒå‰æ ‘éå†æ–¹å¼æ¥è¿›è¡Œä¿®æ”¹ï¼Œåºåˆ—åŒ–çš„ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåºåˆ—åŒ–æ—¶é€šè¿‡ æŸç§ç¬¦å·è¡¨ç¤ºç©ºèŠ‚ç‚¹ï¼ˆ#ï¼‰ï¼Œä»¥ ï¼ è¡¨ç¤ºä¸€ä¸ªç»“ç‚¹å€¼çš„ç»“æŸï¼ˆvalue!ï¼‰ã€‚
äºŒå‰æ ‘çš„ååºåˆ—åŒ–æ˜¯æŒ‡ï¼šæ ¹æ®æŸç§éå†é¡ºåºå¾—åˆ°çš„åºåˆ—åŒ–å­—ç¬¦ä¸²ç»“æœstrï¼Œé‡æ„äºŒå‰æ ‘ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ é€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = -<span class="number">1</span>;   <span class="comment">//è®¡æ•°å˜é‡</span></span><br><span class="line">  </span><br><span class="line">    <span class="function">String <span class="title">Serialize</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            sb.append(<span class="string">"#!"</span>);</span><br><span class="line">            <span class="keyword">return</span> sb.toString();</span><br><span class="line">        &#125;</span><br><span class="line">        sb.append(root.val + <span class="string">"!"</span>);</span><br><span class="line">        sb.append(Serialize(root.left));</span><br><span class="line">        sb.append(Serialize(root.right));</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="function">TreeNode <span class="title">Deserialize</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        index++;</span><br><span class="line">        <span class="comment">//int len = str.length();</span></span><br><span class="line">        <span class="comment">//if(index &gt;= len)&#123;</span></span><br><span class="line">        <span class="comment">//    return null;</span></span><br><span class="line">       <span class="comment">// &#125;</span></span><br><span class="line">        String[] strr = str.split(<span class="string">"!"</span>);</span><br><span class="line">        TreeNode node = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(!strr[index].equals(<span class="string">"#"</span>))&#123;</span><br><span class="line">            node = <span class="keyword">new</span> TreeNode(Integer.valueOf(strr[index]));</span><br><span class="line">            node.left = Deserialize(str);</span><br><span class="line">            node.right = Deserialize(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ å±‚æ¬¡éå†</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">     <span class="function"><span class="keyword">public</span> String <span class="title">Serialize</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        StringBuilder res = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = queue.poll();</span><br><span class="line">            <span class="keyword">if</span>(node != <span class="keyword">null</span>) &#123;</span><br><span class="line">                res.append(node.val + <span class="string">"!"</span>);</span><br><span class="line">                queue.add(node.left);</span><br><span class="line">                queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> res.append(<span class="string">"null!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        res.deleteCharAt(res.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> res.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">Deserialize</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(data.equals(<span class="string">""</span>)) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        String[] vals = data.split(<span class="string">"!"</span>);</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(Integer.parseInt(vals[<span class="number">0</span>]));</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = queue.poll();</span><br><span class="line">            <span class="keyword">if</span>(!vals[i].equals(<span class="string">"null"</span>)) &#123;</span><br><span class="line">                node.left = <span class="keyword">new</span> TreeNode(Integer.parseInt(vals[i]));</span><br><span class="line">                queue.add(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="keyword">if</span>(!vals[i].equals(<span class="string">"null"</span>)) &#123;</span><br><span class="line">                node.right = <span class="keyword">new</span> TreeNode(Integer.parseInt(vals[i]));</span><br><span class="line">                queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å±‚åºéå†ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/08/%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚ç»“ç‚¹ä»å·¦è‡³å³è¾“å‡ºã€‚æ¯ä¸€å±‚è¾“å‡ºä¸€è¡Œã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ éé€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; Print(TreeNode pRoot) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        LinkedList&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(pRoot==<span class="keyword">null</span>) <span class="keyword">return</span> aList;</span><br><span class="line">        queue.offerLast(pRoot);</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>; <span class="keyword">int</span> end = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            ArrayList&lt;Integer&gt; tempList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(start!=end)&#123;</span><br><span class="line">                TreeNode temp = queue.pollFirst();</span><br><span class="line">                <span class="keyword">if</span>(temp.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    queue.offerLast(temp.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(temp.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    queue.offerLast(temp.right);</span><br><span class="line">                &#125;</span><br><span class="line">                tempList.add(temp.val);</span><br><span class="line">                ++start;</span><br><span class="line">            &#125;</span><br><span class="line">            start = <span class="number">0</span>;</span><br><span class="line">            end = queue.size();</span><br><span class="line">            <span class="keyword">if</span>(!tempList.isEmpty())&#123;</span><br><span class="line">                aList.add(tempList);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ é€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; Print(TreeNode pRoot) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        depth(pRoot, <span class="number">1</span>, list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">depth</span><span class="params">(TreeNode root, <span class="keyword">int</span> depth, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(depth &gt; list.size())</span><br><span class="line">            list.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;());</span><br><span class="line">        list.get(depth -<span class="number">1</span>).add(root.val);</span><br><span class="line">         </span><br><span class="line">        depth(root.left, depth + <span class="number">1</span>, list);</span><br><span class="line">        depth(root.right, depth + <span class="number">1</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/08/%E6%8C%89%E4%B9%8B%E5%AD%97%E5%BD%A2%E9%A1%BA%E5%BA%8F%E6%89%93%E5%8D%B0%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢æ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³è‡³å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>ç”¨ä¸¤ä¸ªæ ˆåˆ†åˆ«è®°å½•å¶æ•°å±‚å’Œå¥‡æ•°å±‚ï¼Œç”¨ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºå½“å‰æ˜¯å¶æ•°å±‚è¿˜æ˜¯å¥‡æ•°å±‚ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt; &gt; Print(TreeNode pRoot) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        LinkedList&lt;TreeNode&gt; oddStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        LinkedList&lt;TreeNode&gt; evenStack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(pRoot==<span class="keyword">null</span>) <span class="keyword">return</span> aList;</span><br><span class="line">        oddStack.offerFirst(pRoot);</span><br><span class="line">        <span class="keyword">int</span> layer = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(!oddStack.isEmpty()||!evenStack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(layer%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">                ArrayList&lt;Integer&gt; tempList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">while</span>(!oddStack.isEmpty())&#123;</span><br><span class="line">                    TreeNode temp = oddStack.pollFirst();</span><br><span class="line">                    <span class="keyword">if</span>(temp.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                        evenStack.offerFirst(temp.left);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(temp.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                        evenStack.offerFirst(temp.right);</span><br><span class="line">                    &#125;</span><br><span class="line">                    tempList.add(temp.val);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(!tempList.isEmpty())&#123;</span><br><span class="line">                    aList.add(tempList);</span><br><span class="line">                    ++layer;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ArrayList&lt;Integer&gt; tempList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">while</span>(!evenStack.isEmpty())&#123;</span><br><span class="line">                    TreeNode temp = evenStack.pollFirst();</span><br><span class="line">                    <span class="keyword">if</span>(temp.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                        oddStack.offerFirst(temp.right);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(temp.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                        oddStack.offerFirst(temp.left);</span><br><span class="line">                    &#125;</span><br><span class="line">                    tempList.add(temp.val);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(!tempList.isEmpty())&#123;</span><br><span class="line">                    aList.add(tempList);</span><br><span class="line">                    ++layer;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹ç§°çš„äºŒå‰æ ‘ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/07/%E5%AF%B9%E7%A7%B0%E7%9A%84%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€é¢—äºŒå‰æ ‘æ˜¯ä¸æ˜¯å¯¹ç§°çš„ã€‚æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªäºŒå‰æ ‘åŒæ­¤äºŒå‰æ ‘çš„é•œåƒæ˜¯åŒæ ·çš„ï¼Œå®šä¹‰å…¶ä¸ºå¯¹ç§°çš„ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€</h1>
<p>é€’å½’éå†äºŒå‰æ ‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isSymmetrical</span><span class="params">(TreeNode pRoot)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pRoot == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> compare(pRoot.left,pRoot.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">compare</span><span class="params">(TreeNode left, TreeNode right)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left==<span class="keyword">null</span>) <span class="keyword">return</span> right==<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(right==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(left.val!=right.val) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> compare(left.left, right.right)&amp;&amp; compare(left.right, right.left);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ</h1>
<p>éé€’å½’ï¼Œåˆ©ç”¨stackçš„å‹æ ˆé¡ºåºåˆ¤æ–­,ä¿æŒæˆå¯¹å‹å…¥ï¼Œæˆé˜Ÿå‹å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isSymmetrical</span><span class="params">(TreeNode pRoot)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pRoot == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        Stack&lt;TreeNode&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        s.push(pRoot.left);</span><br><span class="line">        s.push(pRoot.right);</span><br><span class="line">        <span class="keyword">while</span>(!s.empty()) &#123;</span><br><span class="line">            TreeNode right = s.pop();<span class="comment">//æˆå¯¹å–å‡º</span></span><br><span class="line">            TreeNode left = s.pop();</span><br><span class="line">            <span class="keyword">if</span>(left == <span class="keyword">null</span> &amp;&amp; right == <span class="keyword">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(left == <span class="keyword">null</span> || right == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(left.val != right.val) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="comment">//æˆå¯¹æ’å…¥</span></span><br><span class="line">            s.push(left.left);</span><br><span class="line">            s.push(right.right);</span><br><span class="line">            s.push(left.right);</span><br><span class="line">            s.push(right.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/07/%E6%8A%8A%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E6%88%90%E6%95%B4%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªæ•´æ•°ï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²è½¬æ¢æ•´æ•°çš„åº“å‡½æ•°ã€‚ æ•°å€¼ä¸º0æˆ–è€…å­—ç¬¦ä¸²ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„æ•°å€¼åˆ™è¿”å›0
</code></pre>
<a id="more"></a>
<h1>code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">StrToInt</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str.length()&lt;<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">char</span>[] chars = str.toCharArray();</span><br><span class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">boolean</span> nn = chars[<span class="number">0</span>] == <span class="string">'-'</span>? <span class="keyword">true</span> :<span class="keyword">false</span>;    <span class="comment">//åˆ¤æ–­ç¬¬ä¸€ä¸ªæ˜¯å¦æ˜¯è´Ÿå·</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= (chars[<span class="number">0</span>] ==  <span class="string">'-'</span> || chars[<span class="number">0</span>] == <span class="string">'+'</span>)? <span class="number">1</span> : <span class="number">0</span>;i&lt;chars.length;++i)&#123;  <span class="comment">//æœ‰ç¬¦å·å°±è·³è¿‡ç¬¬ä¸€ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">if</span>(!(chars[i]&gt;=<span class="string">'0'</span>&amp;&amp;chars[i]&lt;=<span class="string">'9'</span>))&#123;      <span class="comment">//é”™è¯¯è¾“å…¥ï¼Œç›´æ¥è¿”å›0</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sum = sum*<span class="number">10</span> + (chars[i] - <span class="string">'0'</span>);      <span class="comment">//ç´¯åŠ </span></span><br><span class="line">            <span class="comment">//æº¢å‡ºåˆ™è¿”å›0</span></span><br><span class="line">            <span class="keyword">if</span>(((nn==<span class="keyword">false</span>)&amp;&amp; sum&gt;Integer.MAX_VALUE) || ((nn==<span class="keyword">true</span>)&amp;&amp; (-sum) &lt; Integer.MIN_VALUE)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è½¬æˆintå‹</span></span><br><span class="line">        <span class="keyword">int</span> res = (<span class="keyword">int</span>)sum;</span><br><span class="line">        <span class="keyword">return</span> nn?-res:res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/07/%E4%B8%8D%E7%94%A8%E5%8A%A0%E5%87%8F%E4%B9%98%E9%99%A4%E5%81%9A%E5%8A%A0%E6%B3%95%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šå†™ä¸€ä¸ªå‡½æ•°ï¼Œæ±‚ä¸¤ä¸ªæ•´æ•°ä¹‹å’Œï¼Œè¦æ±‚åœ¨å‡½æ•°ä½“å†…ä¸å¾—ä½¿ç”¨+ã€-ã€*ã€/å››åˆ™è¿ç®—ç¬¦å·ã€‚
</code></pre>
<p>åˆæ˜¯ä¸€é“ä½è¿ç®—ï¼Œç¥ä»™é¢˜ã€‚</p>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>åˆ†åˆ«æ±‚è¿›ä½çš„å€¼ï¼Œå’Œä¸ç®—è¿›ä½çš„å€¼ã€‚ä¸ç®—è¿›ä½çš„å€¼ç›¸å½“äºåšå¼‚æˆ–ï¼Œè¿›ä½å€¼ç›¸å½“ä¸¤æ•°ç›¸ä¸å·¦ç§»ä¸€ä½ï¼Œå½“è¿›ä½å€¼ä¸º0ï¼Œè¯´æ˜ï¼Œä¸ç®—è¿›ä½å€¼çš„å€¼å°±æ˜¯æœ€åç­”æ¡ˆã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (num2!=<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = num1^num2;</span><br><span class="line">            num2 = (num1&amp;num2)&lt;&lt;<span class="number">1</span>;</span><br><span class="line">            num1 = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±‚1+2+3+...+nï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/07/%E6%B1%821-2-3-n%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜è§£ï¼šæ±‚1+2+3+...+nï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨ä¹˜é™¤æ³•ã€forã€whileã€ifã€elseã€switchã€caseç­‰å…³é”®å­—åŠæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆA?B:Cï¼‰ã€‚
</code></pre>
<p>è¿™é¢˜æ›´å°¼ç›æ˜¯ç¥ä»™é¢˜ï¼Œå„ç§ä½è¿ç®—å¤§ä½¬ï¼Œæˆ‘æœäº†ï¼ŒğŸ‚ğŸº</p>
<a id="more"></a>
<h1>é¢˜è§£ä¸€</h1>
<p>åˆ©ç”¨é€’å½’å’ŒçŸ­è·¯ç‰¹æ€§</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Sum_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = n;</span><br><span class="line">        <span class="keyword">boolean</span> flag = (sum &gt; <span class="number">0</span>) &amp;&amp; ((sum += Sum_Solution(--n)) &gt; <span class="number">0</span>);  <span class="comment">//sum&gt;0ä¸æ»¡è¶³ï¼Œåé¢çš„è¯­å¥ç›´æ¥ä¸æ‰§è¡Œï¼Œå½“ä¸‹è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ</h1>
<p>ç”¨å‡½æ•°æ±‚næ–¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Sum_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(Math.pow(n,<span class="number">2</span>)+n)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£ä¸‰</h1>
<p>åˆ©ç”¨å¿«é€Ÿå¹‚æ¥æ›¿æ¢ä¹˜æ³•ï¼Œn(n+1)è½¬åŒ–ä¸º2çš„å„ç§å¹‚ä¹˜ä»¥n+1çš„å’Œï¼ŒæŸä¸€ä½ä¸º1å°±åŠ èµ·æ¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Sum_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">return</span></span><br><span class="line">        ((((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">13</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">13</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">12</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">12</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">11</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">11</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">10</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">10</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">9</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">9</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">8</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">8</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">7</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">7</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">6</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">6</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">5</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">5</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">4</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">4</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">3</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">3</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">2</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">2</span>)+</span><br><span class="line">        (((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-((n&gt;&gt;&gt;<span class="number">1</span>)&amp;<span class="number">1</span>)))&lt;&lt;<span class="number">1</span>)+</span><br><span class="line">        ((n+<span class="number">1</span>)&amp;(<span class="number">0</span>-(n&amp;<span class="number">1</span>))))&gt;&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±‚1+2+3+...+n</title>
    <url>/2020/04/07/%E6%B1%821-2-3-n/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/07/%E5%9C%86%E5%9C%88%E4%B8%AD%E6%9C%80%E5%90%8E%E5%89%A9%E4%B8%8B%E7%9A%84%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šnä¸ªäººï¼ˆç¼–å·0~(n-1))ï¼Œä»0å¼€å§‹æŠ¥æ•°ï¼ŒæŠ¥åˆ°(m-1)çš„é€€å‡ºï¼Œå‰©ä¸‹çš„äºº ç»§ç»­ä»é€€å‡ºçš„äººçš„ä¸‹ä¸€ä¸ªå¼€å§‹æŠ¥æ•°ï¼Œç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªäººè·å¾—èƒœåˆ©ã€‚æ±‚èƒœåˆ©è€…çš„ç¼–å·ã€‚
</code></pre>
<p>ä¸€ä¸ªä»€ä¹ˆæ€ªæ€ªç¯é—®é¢˜ï¼Œçº¦ç‘Ÿå¤«ç¯é—®é¢˜ï¼Œå¯ä»¥æ¨¡æ‹Ÿè¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ç”¨æ•°å­¦çš„æ–¹æ³•æ±‚å‡ºé€’æ¨å¼ï¼ŒçœŸçš„æ— è¯­ï¼Œé¢˜ç›®ç­‰çº§ç«Ÿç„¶æ˜¯ç®€å•ã€‚ã€‚</p>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ï¼šç”¨ä¸€ä¸ªArrayListæ¨¡æ‹Ÿè¿‡ç¨‹</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LastRemaining_Solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&lt;<span class="number">1</span>||m&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        ArrayList&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">            aList.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            index = (index + m-<span class="number">1</span>) % n;   <span class="comment">//è¦å»¶ç»­ä¸Šä¸€æ¬¡æ¸¸æˆå‰©ä¸‹çš„ä¸‹æ ‡</span></span><br><span class="line">            aList.remove(index);</span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒï¼šé€’æ¨</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LastRemaining_Solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>||m&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> (LastRemaining_Solution(n-<span class="number">1</span>,m)+m)%n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ é™¤é“¾è¡¨ä¸­é‡å¤çš„ç»“ç‚¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/06/%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E7%BB%93%E7%82%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªæ’åºçš„é“¾è¡¨ä¸­ï¼Œå­˜åœ¨é‡å¤çš„ç»“ç‚¹ï¼Œè¯·åˆ é™¤è¯¥é“¾è¡¨ä¸­é‡å¤çš„ç»“ç‚¹ï¼Œé‡å¤çš„ç»“ç‚¹ä¸ä¿ç•™ï¼Œè¿”å›é“¾è¡¨å¤´æŒ‡é’ˆã€‚ ä¾‹å¦‚ï¼Œé“¾è¡¨1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5 å¤„ç†åä¸º 1-&gt;2-&gt;5
</code></pre>
<a id="more"></a>
<p>è‡ªå»ºä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œé¿å…ä»å¤´å¼€å§‹å°±æ˜¯é‡å¤çš„æƒ…å†µå‘ç”Ÿã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> public class ListNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    ListNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplication</span><span class="params">(ListNode pHead)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pHead==<span class="keyword">null</span>||pHead.next==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> pHead;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode start = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        start.next = pHead;</span><br><span class="line">        ListNode fast = start.next;</span><br><span class="line">        ListNode slow = start;</span><br><span class="line">        <span class="keyword">while</span>(fast!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fast.next!=<span class="keyword">null</span>&amp;&amp;fast.val==fast.next.val)&#123;</span><br><span class="line">                <span class="keyword">while</span>(fast.next!=<span class="keyword">null</span>&amp;&amp;fast.val==fast.next.val)&#123;</span><br><span class="line">                    fast = fast.next;</span><br><span class="line">                &#125;</span><br><span class="line">                slow.next = fast.next;</span><br><span class="line">                fast = fast.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                slow = slow.next;</span><br><span class="line">                fast = fast.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> start.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é“¾è¡¨ä¸­ç¯çš„å…¥å£ç»“ç‚¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/06/%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%8E%AF%E7%9A%84%E5%85%A5%E5%8F%A3%E7%BB%93%E7%82%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™ä¸€ä¸ªé“¾è¡¨ï¼Œè‹¥å…¶ä¸­åŒ…å«ç¯ï¼Œè¯·æ‰¾å‡ºè¯¥é“¾è¡¨çš„ç¯çš„å…¥å£ç»“ç‚¹ï¼Œå¦åˆ™ï¼Œè¾“å‡ºnullã€‚
</code></pre>
<a id="more"></a>
<p>å¿«æ…¢æŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆåœ¨äº¤é›†å¤„ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆåœ¨èµ·ç‚¹ï¼Œä¸€èµ·å‡ºå‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> public class ListNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    ListNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    ListNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">EntryNodeOfLoop</span><span class="params">(ListNode pHead)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pHead==<span class="keyword">null</span>||pHead.next==<span class="keyword">null</span>||pHead.next.next==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        ListNode slow = pHead.next;</span><br><span class="line">        ListNode fast = pHead.next.next;</span><br><span class="line">        <span class="keyword">while</span>(fast!=slow)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fast.next!=<span class="keyword">null</span>||fast.next.next!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                slow = slow.next;</span><br><span class="line">                fast = fast.next.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fast = pHead;</span><br><span class="line">        <span class="keyword">while</span>(fast!=slow)&#123;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaEE-Webå…¥é—¨</title>
    <url>/2020/04/05/JavaEE-Web/</url>
    <content><![CDATA[<h1>Servlet</h1>
<p>ä¸€æ¬¾APIæä¾›éƒ¨ç½²åœ¨web serverä¸Šå¤„ç†HTTPè¯·æ±‚çš„å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// WebServletæ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªServletï¼Œå¹¶æ˜ å°„åˆ°åœ°å€/:</span></span><br><span class="line"><span class="meta">@WebServlet</span>(urlPatterns = <span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®å“åº”ç±»å‹:</span></span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        <span class="comment">// è·å–è¾“å‡ºæµ:</span></span><br><span class="line">        PrintWriter pw = resp.getWriter();</span><br><span class="line">        <span class="comment">// å†™å…¥å“åº”:</span></span><br><span class="line">        pw.write(<span class="string">"&lt;h1&gt;Hello, world!&lt;/h1&gt;"</span>);</span><br><span class="line">        <span class="comment">// æœ€åä¸è¦å¿˜è®°flushå¼ºåˆ¶è¾“å‡º:</span></span><br><span class="line">        pw.flush();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Tomcat"><a class="header-anchor" href="#Tomcat">Â¶</a>Tomcat</h3>
<p>WebæœåŠ¡å™¨ï¼Œåˆç§°ä¸ºservletå®¹å™¨ï¼Œ<br>
åœ¨Servletå®¹å™¨ä¸­è¿è¡Œçš„Servletå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ— æ³•åœ¨ä»£ç ä¸­ç›´æ¥é€šè¿‡newåˆ›å»ºServletå®ä¾‹ï¼Œå¿…é¡»ç”±Servletå®¹å™¨è‡ªåŠ¨åˆ›å»ºServletå®ä¾‹ï¼›</li>
<li>Servletå®¹å™¨åªä¼šç»™æ¯ä¸ªServletç±»åˆ›å»ºå”¯ä¸€å®ä¾‹ï¼›</li>
<li>Servletå®¹å™¨ä¼šä½¿ç”¨å¤šçº¿ç¨‹æ‰§è¡ŒdoGet()æˆ–doPost()æ–¹æ³•ã€‚</li>
</ul>
<h3 id="å¤šçº¿ç¨‹æ³¨æ„"><a class="header-anchor" href="#å¤šçº¿ç¨‹æ³¨æ„">Â¶</a>å¤šçº¿ç¨‹æ³¨æ„</h3>
<p>å¤ä¹ ä¸€ä¸‹Javaå¤šçº¿ç¨‹çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p>
<ul>
<li>åœ¨Servletä¸­å®šä¹‰çš„å®ä¾‹å˜é‡ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œè¦æ³¨æ„çº¿ç¨‹å®‰å…¨ï¼›</li>
<li>HttpServletRequestå’ŒHttpServletResponseå®ä¾‹æ˜¯ç”±Servletå®¹å™¨ä¼ å…¥çš„å±€éƒ¨å˜é‡ï¼Œå®ƒä»¬åªèƒ½è¢«å½“å‰çº¿ç¨‹è®¿é—®ï¼Œä¸å­˜åœ¨å¤šä¸ªçº¿ç¨‹è®¿é—®çš„é—®é¢˜ï¼›</li>
<li>åœ¨doGet()æˆ–doPost()æ–¹æ³•ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†ThreadLocalï¼Œä½†æ²¡æœ‰æ¸…ç†ï¼Œé‚£ä¹ˆå®ƒçš„çŠ¶æ€å¾ˆå¯èƒ½ä¼šå½±å“åˆ°ä¸‹æ¬¡çš„æŸä¸ªè¯·æ±‚ï¼Œå› ä¸ºServletå®¹å™¨å¾ˆå¯èƒ½ç”¨çº¿ç¨‹æ± å®ç°çº¿ç¨‹å¤ç”¨ã€‚</li>
</ul>
<h3 id="Servletçš„æµç¨‹"><a class="header-anchor" href="#Servletçš„æµç¨‹">Â¶</a>Servletçš„æµç¨‹</h3>
<p>ä¸€ä¸ªå®Œæ•´çš„Webåº”ç”¨ç¨‹åºçš„å¼€å‘æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç¼–å†™Servletï¼›</li>
<li>æ‰“åŒ…ä¸ºwaræ–‡ä»¶ï¼›</li>
<li>å¤åˆ¶åˆ°Tomcatçš„webappsç›®å½•ä¸‹ï¼›</li>
<li>å¯åŠ¨Tomcatã€‚</li>
</ol>
<h3 id="Tomcatçš„æµç¨‹"><a class="header-anchor" href="#Tomcatçš„æµç¨‹">Â¶</a>Tomcatçš„æµç¨‹</h3>
<ol>
<li>å¯åŠ¨JVMå¹¶æ‰§è¡ŒTomcatçš„main()æ–¹æ³•ï¼›</li>
<li>åŠ è½½warå¹¶åˆå§‹åŒ–Servletï¼›</li>
<li>æ­£å¸¸æœåŠ¡ã€‚</li>
</ol>
<h3 id="æ›´å¥½çš„æ–¹æ³•"><a class="header-anchor" href="#æ›´å¥½çš„æ–¹æ³•">Â¶</a>æ›´å¥½çš„æ–¹æ³•</h3>
<p>å¯ä»¥æ·»åŠ Tomcatè¿›å·¥ç¨‹ï¼Œç¼–å†™Mavenä¾èµ–ï¼Œç¼–å†™main()æ–¹æ³•æ¥æŒ‡å®šè·¯å¾„å’Œå¯åŠ¨TomcatæœåŠ¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// å¯åŠ¨Tomcat:</span></span><br><span class="line">        Tomcat tomcat = <span class="keyword">new</span> Tomcat();</span><br><span class="line">        tomcat.setPort(Integer.getInteger(<span class="string">"port"</span>, <span class="number">8080</span>));</span><br><span class="line">        tomcat.getConnector();</span><br><span class="line">        <span class="comment">// åˆ›å»ºwebapp:</span></span><br><span class="line">        Context ctx = tomcat.addWebapp(<span class="string">""</span>, <span class="keyword">new</span> File(<span class="string">"src/main/webapp"</span>).getAbsolutePath());</span><br><span class="line">        WebResourceRoot resources = <span class="keyword">new</span> StandardRoot(ctx);</span><br><span class="line">        resources.addPreResources(</span><br><span class="line">                <span class="keyword">new</span> DirResourceSet(resources, <span class="string">"/WEB-INF/classes"</span>, <span class="keyword">new</span> File(<span class="string">"target/classes"</span>).getAbsolutePath(), <span class="string">"/"</span>));</span><br><span class="line">        ctx.setResources(resources);</span><br><span class="line">        tomcat.start();</span><br><span class="line">        tomcat.getServer().await();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é‡å®šå‘</h1>
<p>æ¥æ”¶åˆ° /hiçš„è¯·æ±‚åˆ™é‡å®šå‘åˆ°/helloå¤„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(urlPatterns = <span class="string">"/hi"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// æ„é€ é‡å®šå‘çš„è·¯å¾„:</span></span><br><span class="line">        String name = req.getParameter(<span class="string">"name"</span>);</span><br><span class="line">        String redirectToUrl = <span class="string">"/hello"</span> + (name == <span class="keyword">null</span> ? <span class="string">""</span> : <span class="string">"?name="</span> + name);</span><br><span class="line">        <span class="comment">// å‘é€é‡å®šå‘å“åº”:</span></span><br><span class="line">        resp.sendRedirect(redirectToUrl);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å®šå‘æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯302å“åº”ï¼Œç§°ä¸ºä¸´æ—¶é‡å®šå‘ï¼Œä¸€ç§æ˜¯301å“åº”ï¼Œç§°ä¸ºæ°¸ä¹…é‡å®šå‘ã€‚<br>
ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨å‘é€301æ°¸ä¹…é‡å®šå‘å“åº”ï¼Œæµè§ˆå™¨ä¼šç¼“å­˜/hiåˆ°/helloè¿™ä¸ªé‡å®šå‘çš„å…³è”ï¼Œä¸‹æ¬¡è¯·æ±‚/hiçš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±ç›´æ¥å‘é€/helloè¯·æ±‚äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">resp.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY); <span class="comment">// 301æ°¸ä¹…é‡å®šå‘</span></span><br><span class="line">resp.setHeader(<span class="string">"Location"</span>, <span class="string">"/hello"</span>);</span><br></pre></td></tr></table></figure>
<h1>Forward å†…éƒ¨è½¬å‘</h1>
<p>servletè‡ªå·±ä¸ç»§ç»­å¤„ç†ï¼Œè½¬å‘ç»™å¦ä¸€ä¸ªservletå¤„ç†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å…³äº /morningçš„éƒ½è½¬å‘ç»™/hello</span></span><br><span class="line"><span class="meta">@WebServlet</span>(urlPatterns = <span class="string">"/morning"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForwardServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        req.getRequestDispatcher(<span class="string">"/hello"</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬å‘æ˜¯åœ¨WebæœåŠ¡å™¨å†…éƒ¨å®Œæˆçš„ï¼Œå¯¹æµè§ˆå™¨æ¥è¯´ï¼Œå®ƒåªå‘å‡ºäº†ä¸€ä¸ªHTTPè¯·æ±‚ã€‚<br>
è€Œé‡å®šå‘éœ€è¦å®¢æˆ·ç«¯å‘é€ä¸¤ä¸ªHTTPè¯·æ±‚ã€‚</p>
<h1>SessionID</h1>
<p>å„ä¸ªservletå„å¸å…¶èŒã€‚<br>
â”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”</p>
<pre><code>       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
         â”Œâ”€â”€â”€&gt;â”‚ IndexServlet  â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â–¼    â”‚
</code></pre>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚Browserâ”‚â”€â”€â”¼â”€â”¼â”€â”€â”€&gt;â”‚ SignInServlet â”‚&lt;â”€â”€â”€â”€&gt;â”‚Sessionsâ”‚â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â–²    â”‚<br>
â””â”€â”€â”€&gt;â”‚SignOutServlet â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚</p>
<pre><code>       â”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜
</code></pre>
<p>é€šè¿‡HttpSessionè¿™ä¸ªé«˜çº§æ¥å£è®¿é—®å½“å‰Sessionã€‚WebæœåŠ¡å™¨åœ¨å†…å­˜ä¸­è‡ªåŠ¨ç»´æŠ¤äº†ä¸€ä¸ªIDåˆ°HttpSessionçš„æ˜ å°„è¡¨ã€‚<br>
è€ŒæœåŠ¡å™¨è¯†åˆ«Sessionçš„å…³é”®å°±æ˜¯ä¾é ä¸€ä¸ªåä¸ºJSESSIONIDçš„Cookieã€‚åœ¨Servletä¸­ç¬¬ä¸€æ¬¡è°ƒç”¨req.getSession()æ—¶ï¼ŒServletå®¹å™¨è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªSession IDï¼Œç„¶åé€šè¿‡ä¸€ä¸ªåä¸ºJSESSIONIDçš„Cookieå‘é€ç»™æµè§ˆå™¨ã€‚</p>
<ul>
<li>å¤šå°æœåŠ¡å™¨çš„é›†ç¾¤ä½¿ç”¨åå‘ä»£ç†ä½œä¸ºå…¥å£ï¼Œ ä½¿ç”¨ç²˜æ»ä¼šè¯ï¼ˆSticky Sessionï¼‰æœºåˆ¶ï¼Œæ ¹æ®JSESSIONIDçš„å€¼è½¬å‘å›ºå®šçš„Web Serverã€‚</li>
<li>ç»´æŠ¤sessionè®©webserverçš„é›†ç¾¤éš¾ä»¥æ‰©å±•ã€‚</li>
</ul>
<h1>Cookie</h1>
<p>æµè§ˆå™¨åœ¨è¯·æ±‚æŸä¸ªURLæ—¶ï¼Œæ˜¯å¦æºå¸¦æŒ‡å®šçš„Cookieï¼Œå–å†³äºCookieæ˜¯å¦æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰è¦æ±‚ï¼š</p>
<ul>
<li>URLå‰ç¼€æ˜¯è®¾ç½®Cookieæ—¶çš„Pathï¼›</li>
<li>Cookieåœ¨æœ‰æ•ˆæœŸå†…ï¼›</li>
<li>Cookieè®¾ç½®äº†secureæ—¶å¿…é¡»ä»¥httpsè®¿é—®ã€‚</li>
</ul>
<h1>JSP</h1>
<p>JSPæ˜¯Java Server Pagesçš„ç¼©å†™ï¼Œå®ƒçš„æ–‡ä»¶å¿…é¡»æ”¾åˆ°/src/main/webappä¸‹ï¼Œæ–‡ä»¶åå¿…é¡»ä»¥.jspç»“å°¾ï¼Œæ•´ä¸ªæ–‡ä»¶ä¸HTMLå¹¶æ— å¤ªå¤§åŒºåˆ«ï¼Œä½†éœ€è¦æ’å…¥å˜é‡ï¼Œæˆ–è€…åŠ¨æ€è¾“å‡ºçš„åœ°æ–¹ï¼Œä½¿ç”¨ç‰¹æ®ŠæŒ‡ä»¤&lt;% â€¦ %&gt;</p>
<h4 id="æ•´ä¸ªJSPçš„å†…å®¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªHTMLï¼š"><a class="header-anchor" href="#æ•´ä¸ªJSPçš„å†…å®¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªHTMLï¼š">Â¶</a>æ•´ä¸ªJSPçš„å†…å®¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªHTMLï¼š</h4>
<ul>
<li>åŒ…å«åœ¨&lt;%â€“å’Œ--%&gt;ä¹‹é—´çš„æ˜¯JSPçš„æ³¨é‡Šï¼Œå®ƒä»¬ä¼šè¢«å®Œå…¨å¿½ç•¥ï¼›</li>
<li>åŒ…å«åœ¨&lt;%å’Œ%&gt;ä¹‹é—´çš„æ˜¯Javaä»£ç ï¼Œå¯ä»¥ç¼–å†™ä»»æ„Javaä»£ç ï¼›</li>
<li>å¦‚æœä½¿ç”¨&lt;%= xxx %&gt;åˆ™å¯ä»¥å¿«æ·è¾“å‡ºä¸€ä¸ªå˜é‡çš„å€¼ã€‚</li>
</ul>
<h4 id="JSPé¡µé¢å†…ç½®äº†å‡ ä¸ªå˜é‡ï¼š"><a class="header-anchor" href="#JSPé¡µé¢å†…ç½®äº†å‡ ä¸ªå˜é‡ï¼š">Â¶</a>JSPé¡µé¢å†…ç½®äº†å‡ ä¸ªå˜é‡ï¼š</h4>
<ul>
<li>outï¼šè¡¨ç¤ºHttpServletResponseçš„PrintWriterï¼›</li>
<li>sessionï¼šè¡¨ç¤ºå½“å‰HttpSessionå¯¹è±¡ï¼›</li>
<li>requestï¼šè¡¨ç¤ºHttpServletRequestå¯¹è±¡ã€‚<br>
JSPæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServletï¼Œåªä¸è¿‡æ— éœ€é…ç½®æ˜ å°„è·¯å¾„ï¼ŒWeb Serverä¼šæ ¹æ®è·¯å¾„æŸ¥æ‰¾å¯¹åº”çš„.jspæ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è‡ªåŠ¨ç¼–è¯‘æˆServletå†æ‰§è¡Œã€‚åœ¨æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¿®æ”¹äº†JSPçš„å†…å®¹ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘ã€‚</li>
</ul>
<h4 id="è®¿é—®-JavaBean-å¯¹è±¡çš„å±æ€§"><a class="header-anchor" href="#è®¿é—®-JavaBean-å¯¹è±¡çš„å±æ€§">Â¶</a>è®¿é—® JavaBean å¯¹è±¡çš„å±æ€§</h4>
<p>åœ¨ <a href="jsp:useBean">jsp:useBean</a> æ ‡ç­¾ä¸»ä½“ä¸­ä½¿ç”¨ <a href="jsp:getProperty/">jsp:getProperty/</a> æ ‡ç­¾æ¥è°ƒç”¨ getter æ–¹æ³•ï¼Œä½¿ç”¨ <a href="jsp:setProperty/">jsp:setProperty/</a> æ ‡ç­¾æ¥è°ƒç”¨ setter æ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:useBean</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">class</span>=<span class="string">"bean ç¼–è¯‘çš„ç±»"</span> <span class="attr">scope</span>=<span class="string">"bean ä½œç”¨åŸŸ"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:setProperty</span> <span class="attr">name</span>=<span class="string">"bean çš„ id"</span> <span class="attr">property</span>=<span class="string">"å±æ€§å"</span>  </span></span><br><span class="line"><span class="tag">                    <span class="attr">value</span>=<span class="string">"value"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">jsp:getProperty</span> <span class="attr">name</span>=<span class="string">"bean çš„ id"</span> <span class="attr">property</span>=<span class="string">"å±æ€§å"</span>/&gt;</span></span><br><span class="line">   ...........</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:useBean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å¯¹æ¯”"><a class="header-anchor" href="#å¯¹æ¯”">Â¶</a>å¯¹æ¯”</h4>
<p>Servleté€‚åˆç¼–å†™Javaä»£ç ï¼Œå®ç°å„ç§å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œä½†ä¸é€‚åˆè¾“å‡ºå¤æ‚çš„HTMLï¼›<br>
JSPé€‚åˆç¼–å†™HTMLï¼Œå¹¶åœ¨å…¶ä¸­æ’å…¥åŠ¨æ€å†…å®¹ï¼Œä½†ä¸é€‚åˆç¼–å†™å¤æ‚çš„Javaä»£ç ã€‚</p>
<h1>MVC</h1>
<p>æŠŠUserServletçœ‹ä½œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼ŒæŠŠUserçœ‹ä½œæ¨¡å‹ï¼ŒæŠŠuser.jspçœ‹ä½œæ¸²æŸ“ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼é€šå¸¸è¢«ç§°ä¸ºMVCï¼šModel-View-Controllerï¼Œå³UserServletä½œä¸ºæ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼ŒUserä½œä¸ºæ¨¡å‹ï¼ˆModelï¼‰ï¼Œuser.jspä½œä¸ºè§†å›¾ï¼ˆViewï¼‰ï¼Œæ•´ä¸ªMVCæ¶æ„å¦‚ä¸‹ï¼š</p>
<pre><code>               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”Œâ”€â”€â”€â”€&gt;â”‚Controller: UserServletâ”‚
         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚
</code></pre>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”‚           â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”<br>
â”‚Browserâ”‚â”€â”€â”€â”€â”˜           â”‚Model: Userâ”‚<br>
â”‚       â”‚&lt;â”€â”€â”€â”           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜<br>
â””â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                 â”‚<br>
â”‚                 â–¼<br>
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â””â”€â”€â”€â”€â”€â”‚    View: user.jsp     â”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>MVCæ¨¡å¼çš„å¥½å¤„æ˜¯ï¼ŒControllerä¸“æ³¨äºä¸šåŠ¡å¤„ç†ï¼Œå®ƒçš„å¤„ç†ç»“æœå°±æ˜¯Modelã€‚Modelå¯ä»¥æ˜¯ä¸€ä¸ªJavaBeanï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå¯¹è±¡çš„Mapï¼ŒControlleråªè´Ÿè´£æŠŠModelä¼ é€’ç»™Viewï¼ŒViewåªè´Ÿè´£æŠŠModelç»™â€œæ¸²æŸ“â€å‡ºæ¥ï¼Œè¿™æ ·ï¼Œä¸‰è€…èŒè´£æ˜ç¡®ï¼Œä¸”å¼€å‘æ›´ç®€å•ï¼Œå› ä¸ºå¼€å‘Controlleræ—¶æ— éœ€å…³æ³¨é¡µé¢ï¼Œå¼€å‘Viewæ—¶æ— éœ€å…³å¿ƒå¦‚ä½•åˆ›å»ºModelã€‚</p>
<p>ä¸€ä¸ªMVCæ¡†æ¶æ˜¯åŸºäºServletåŸºç¡€æŠ½è±¡å‡ºæ›´é«˜çº§çš„æ¥å£ï¼Œä½¿å¾—ä¸Šå±‚åŸºäºMVCæ¡†æ¶çš„å¼€å‘å¯ä»¥ä¸æ¶‰åŠServletç›¸å…³çš„HttpServletRequestç­‰æ¥å£ï¼Œå¤„ç†å¤šä¸ªè¯·æ±‚æ›´åŠ çµæ´»ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä»»æ„æ¨¡æ¿å¼•æ“ï¼Œä¸å¿…ä½¿ç”¨JSPã€‚</p>
<h1>Filter</h1>
<pre><code>Filteræ˜¯ä¸€ç§å¯¹HTTPè¯·æ±‚è¿›è¡Œé¢„å¤„ç†çš„ç»„ä»¶ï¼Œå®ƒå¯ä»¥æ„æˆä¸€ä¸ªå¤„ç†é“¾ï¼Œä½¿å¾—å…¬å…±å¤„ç†ä»£ç èƒ½é›†ä¸­åˆ°ä¸€èµ·ï¼›
Filteré€‚ç”¨äºæ—¥å¿—ã€ç™»å½•æ£€æŸ¥ã€å…¨å±€è®¾ç½®ç­‰ï¼›
è®¾è®¡åˆç†çš„URLæ˜ å°„å¯ä»¥è®©Filteré“¾æ›´æ¸…æ™°
</code></pre>
<p>æŠŠä¸€äº›å…¬ç”¨é€»è¾‘ä»å„ä¸ªServletä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒJavaEEçš„Servletè§„èŒƒè¿˜æä¾›äº†ä¸€ç§Filterç»„ä»¶ï¼Œå³è¿‡æ»¤å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼Œåœ¨HTTPè¯·æ±‚åˆ°è¾¾Servletä¹‹å‰ï¼Œå¯ä»¥è¢«ä¸€ä¸ªæˆ–å¤šä¸ªFilteré¢„å¤„ç†ï¼Œç±»ä¼¼æ‰“å°æ—¥å¿—ã€ç™»å½•æ£€æŸ¥ç­‰é€»è¾‘ï¼Œå®Œå…¨å¯ä»¥æ”¾åˆ°Filterä¸­ã€‚</p>
<p>å¤šä¸ªFilterä¼šç»„æˆä¸€ä¸ªé“¾ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è¢«é“¾ä¸Šçš„Filterä¾æ¬¡å¤„ç†ï¼š<br>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”Œâ”€&gt;â”‚ServletAâ”‚<br>
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â”€â”€â”€&gt;â”‚EncodingFilterâ”‚â”€â”€â”€&gt;â”‚LogFilterâ”‚â”€â”€â”¼â”€&gt;â”‚ServletBâ”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”<br>
â””â”€&gt;â”‚ServletCâ”‚<br>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br>
filterçš„é¡ºåºéœ€è¦åœ¨web.xmlä¸­é…ç½®ã€‚</p>
<p>åœ¨AuthFilterå†…éƒ¨ï¼Œç›´æ¥è°ƒç”¨resp.sendRedirect()å‘é€é‡å®šå‘ï¼Œä¸”æ²¡æœ‰è°ƒç”¨chain.doFilter()ï¼Œå› æ­¤ï¼Œå½“ç”¨æˆ·æ²¡æœ‰ç™»å½•æ—¶ï¼Œè¯·æ±‚åˆ°è¾¾AuthFilteråï¼Œä¸å†ç»§ç»­å¤„ç†ï¼Œå³åç»­çš„Filterå’Œä»»ä½•Servletéƒ½æ²¡æœ‰æœºä¼šå¤„ç†è¯¥è¯·æ±‚äº†ã€‚<br>
å¯è§ï¼ŒFilterå¯ä»¥æœ‰é’ˆå¯¹æ€§åœ°æ‹¦æˆªæˆ–è€…æ”¾è¡ŒHTTPè¯·æ±‚ã€‚</p>
<ul>
<li>å¦‚æœFilterè¦ä½¿è¯·æ±‚ç»§ç»­è¢«å¤„ç†ï¼Œå°±ä¸€å®šè¦è°ƒç”¨chain.doFilter()ï¼</li>
</ul>
<h3 id="ä¿®æ”¹è¯·æ±‚"><a class="header-anchor" href="#ä¿®æ”¹è¯·æ±‚">Â¶</a>ä¿®æ”¹è¯·æ±‚</h3>
<p>whyï¼Ÿï¼šåœ¨æˆ‘ä»¬å®ç°éªŒè¯ç™»å½•æ—¶ï¼ŒåŸæœ¬çš„getInputstreamåªèƒ½ä½¿ç”¨ä¸€æ¬¡requestï¼Œå¯ä»¥ç”¨ä»£ç†æ¥å£æ¥èµ‹å†™è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>å€ŸåŠ©HttpServletRequestWrapperï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Filterä¸­å®ç°å¯¹åŸå§‹HttpServletRequestçš„ä¿®æ”¹ã€‚<br>
åˆ©ç”¨ä»£ç†è®¾è®¡æ¨¡å¼ã€‚</p>
<p>å¯¹HttpServletRequestæ¥å£è¿›è¡Œä»£ç†çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ä»HttpServletRequestWrapperç»§æ‰¿ä¸€ä¸ªXxxHttpServletRequestï¼Œéœ€è¦ä¼ å…¥åŸå§‹çš„HttpServletRequestå®ä¾‹ï¼›</li>
<li>è¦†å†™æŸäº›æ–¹æ³•ï¼Œä½¿å¾—æ–°çš„XxxHttpServletRequestå®ä¾‹çœ‹ä¸Šå»â€œæ”¹å˜â€äº†åŸå§‹çš„HttpServletRequestå®ä¾‹ï¼›</li>
<li>åœ¨doFilter()ä¸­ä¼ å…¥æ–°çš„XxxHttpServletRequestå®ä¾‹ã€‚<br>
ä¸€ä¸ªâ€œå¯æ’æ‹”â€ç»„ä»¶ï¼Œå®ƒæ˜¯å¦å¯ç”¨ä¸å½±å“Webåº”ç”¨ç¨‹åºçš„å…¶ä»–ç»„ä»¶ï¼ˆFilterã€Servletï¼‰ã€‚</li>
</ol>
<h3 id="ä¿®æ”¹å“åº”"><a class="header-anchor" href="#ä¿®æ”¹å“åº”">Â¶</a>ä¿®æ”¹å“åº”</h3>
<p>ä¸»è¦åº”ç”¨åœºæ™¯åœ¨åšç¼“å­˜ï¼Œç”¨è‡ªå·±ä¼ªé€ çš„å“åº”æ¥è·å¾—åé¢ç»„å»ºäº§ç”Ÿçš„å€¼ã€‚<br>
æƒ³è¦ä¿®æ”¹å“åº”ï¼Œå°±å¯ä»¥é€šè¿‡HttpServletResponseWrapperæ„é€ ä¸€ä¸ªâ€œä¼ªé€ â€çš„HttpServletResponseï¼Œè¿™æ ·å°±èƒ½æ‹¦æˆªåˆ°å†™å…¥çš„æ•°æ®ã€‚<br>
ä¿®æ”¹å“åº”æ—¶ï¼Œæœ€åä¸è¦å¿˜è®°æŠŠæ•°æ®å†™å…¥åŸå§‹çš„HttpServletResponseå®ä¾‹ã€‚<br>
ä¸€ä¸ªâ€œå¯æ’æ‹”â€ç»„ä»¶ï¼Œå®ƒæ˜¯å¦å¯ç”¨ä¸å½±å“Webåº”ç”¨ç¨‹åºçš„å…¶ä»–ç»„ä»¶ï¼ˆFilterã€Servletï¼‰ã€‚</p>
<h1>Listener</h1>
<p>é€šè¿‡Listeneræˆ‘ä»¬å¯ä»¥ç›‘å¬Webåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸï¼Œè·å–HttpSessionç­‰åˆ›å»ºå’Œé”€æ¯çš„äº‹ä»¶ï¼›<br>
ServletContextæ˜¯ä¸€ä¸ªWebAppè¿è¡ŒæœŸçš„å…¨å±€å”¯ä¸€å®ä¾‹ï¼Œå¯ç”¨äºè®¾ç½®å’Œå…±äº«é…ç½®ä¿¡æ¯ã€‚å¦‚æ•°æ®åº“è¿æ¥æ± æ‰“å¼€å’Œå…³é—­ã€‚</p>
<h3 id="éƒ¨ç½²"><a class="header-anchor" href="#éƒ¨ç½²">Â¶</a>éƒ¨ç½²</h3>
<p>Tomcatä½œä¸ºåº”ç”¨æœåŠ¡å™¨ï¼ŒNginxä½œä¸ºåå‘ä»£ç†å’Œé™æ€æœåŠ¡å™¨å……å½“ç½‘å…³ï¼Œå¯ä»¥æŠŠhttpsã€é˜²ç«å¢™ã€é™é€Ÿã€åçˆ¬è™«ç­‰åŠŸèƒ½æ”¾åˆ°Nginxä¸­ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsonå…¥é—¨</title>
    <url>/2020/04/05/Json%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1>Json</h1>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Javaæ ¸å¿ƒæŠ€æœ¯"</span>,</span><br><span class="line">    <span class="attr">"author"</span>: &#123;</span><br><span class="line">        <span class="attr">"firstName"</span>: <span class="string">"Abc"</span>,</span><br><span class="line">        <span class="attr">"lastName"</span>: <span class="string">"Xyz"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"isbn"</span>: <span class="string">"1234567"</span>,</span><br><span class="line">    <span class="attr">"tags"</span>: [<span class="string">"Java"</span>, <span class="string">"Network"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¼˜ç‚¹"><a class="header-anchor" href="#ä¼˜ç‚¹">Â¶</a>ä¼˜ç‚¹</h3>
<ol>
<li>JSONåªå…è®¸ä½¿ç”¨UTF-8ç¼–ç ï¼Œä¸å­˜åœ¨ç¼–ç é—®é¢˜ï¼›</li>
<li>JSONåªå…è®¸ä½¿ç”¨åŒå¼•å·ä½œä¸ºkeyï¼Œç‰¹æ®Šå­—ç¬¦ç”¨\è½¬ä¹‰ï¼Œæ ¼å¼ç®€å•ï¼›</li>
<li>æµè§ˆå™¨å†…ç½®JSONæ”¯æŒï¼Œå¦‚æœæŠŠæ•°æ®ç”¨JSONå‘é€ç»™æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨JavaScriptç›´æ¥å¤„ç†ã€‚</li>
<li>æ ¼å¼ç®€å•ï¼Œä»…æ”¯æŒä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹ï¼š</li>
</ol>
<ul>
<li>é”®å€¼å¯¹ï¼š{â€œkeyâ€: value}</li>
<li>æ•°ç»„ï¼š[1, 2, 3]</li>
<li>å­—ç¬¦ä¸²ï¼šâ€œabcâ€</li>
<li>æ•°å€¼ï¼ˆæ•´æ•°å’Œæµ®ç‚¹æ•°ï¼‰ï¼š12.34</li>
<li>å¸ƒå°”å€¼ï¼štrueæˆ–false</li>
<li>ç©ºå€¼ï¼šnull</li>
</ul>
<h3 id="Jasonè§£ææˆJavaBean"><a class="header-anchor" href="#Jasonè§£ææˆJavaBean">Â¶</a>Jasonè§£ææˆJavaBean</h3>
<h5 id="å¼•å…¥Mavenä¾èµ–"><a class="header-anchor" href="#å¼•å…¥Mavenä¾èµ–">Â¶</a>å¼•å…¥Mavenä¾èµ–</h5>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºObjectMapperå¯¹è±¡è§£æ"><a class="header-anchor" href="#åˆ›å»ºObjectMapperå¯¹è±¡è§£æ">Â¶</a>åˆ›å»ºObjectMapperå¯¹è±¡è§£æ</h5>
<h6 id="ååºåˆ—åŒ–"><a class="header-anchor" href="#ååºåˆ—åŒ–">Â¶</a>ååºåˆ—åŒ–</h6>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">InputStream input = Main.class.getResourceAsStream("/book.json");</span><br><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–æ—¶å¿½ç•¥ä¸å­˜åœ¨çš„JavaBeanå±æ€§:</span></span><br><span class="line">mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="keyword">false</span>);</span><br><span class="line">Book book = mapper.readValue(input, Book<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>æ ¸å¿ƒä»£ç æ˜¯åˆ›å»ºä¸€ä¸ªObjectMapperå¯¹è±¡ã€‚å…³é—­DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIESåŠŸèƒ½ä½¿å¾—è§£ææ—¶å¦‚æœJavaBeanä¸å­˜åœ¨è¯¥å±æ€§æ—¶è§£æä¸ä¼šæŠ¥é”™ã€‚</p>
<h6 id="åºåˆ—åŒ–"><a class="header-anchor" href="#åºåˆ—åŒ–">Â¶</a>åºåˆ—åŒ–</h6>
<p>æŠŠJSONè§£æä¸ºJavaBeançš„è¿‡ç¨‹ç§°ä¸ºååºåˆ—åŒ–ã€‚å¦‚æœæŠŠJavaBeanå˜ä¸ºJSONï¼Œé‚£å°±æ˜¯åºåˆ—åŒ–ã€‚è¦å®ç°JavaBeanåˆ°JSONçš„åºåˆ—åŒ–ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String json = mapper.writeValueAsString(book);</span><br></pre></td></tr></table></figure>
<h6 id="è§£ææˆç‰¹å®šå¯¹è±¡"><a class="header-anchor" href="#è§£ææˆç‰¹å®šå¯¹è±¡">Â¶</a>è§£ææˆç‰¹å®šå¯¹è±¡</h6>
<p>å¦‚LocalDate: å¯ä»¥å¼•å…¥ç‰¹å®šdatatype mavenä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åæ³¨å†Œä¸€ä¸ªæ–°moduleï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper().registerModule(<span class="keyword">new</span> JavaTimeModule());</span><br></pre></td></tr></table></figure>
<h6 id="è‡ªå®šä¹‰è§£æè§„åˆ™"><a class="header-anchor" href="#è‡ªå®šä¹‰è§£æè§„åˆ™">Â¶</a>è‡ªå®šä¹‰è§£æè§„åˆ™</h6>
<p>isbnä¸è§„åˆ™ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Javaæ ¸å¿ƒæŠ€æœ¯"</span>,</span><br><span class="line">    <span class="attr">"isbn"</span>: <span class="string">"978-7-111-54742-6"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œç»§æ‰¿JsonDeserializer<BigInteger></BigInteger></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IsbnDeserializer</span> <span class="keyword">extends</span> <span class="title">JsonDeserializer</span>&lt;<span class="title">BigInteger</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigInteger <span class="title">deserialize</span><span class="params">(JsonParser p, DeserializationContext ctxt)</span> <span class="keyword">throws</span> IOException, JsonProcessingException </span>&#123;</span><br><span class="line">        <span class="comment">// è¯»å–åŸå§‹çš„JSONå­—ç¬¦ä¸²å†…å®¹:</span></span><br><span class="line">        String s = p.getValueAsString();</span><br><span class="line">        <span class="keyword">if</span> (s != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> BigInteger(s.replace(<span class="string">"-"</span>, <span class="string">""</span>));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> JsonParseException(p, s, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åBookç±»ä¸­ä½¿ç”¨æ³¨è§£æ ‡æ³¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="comment">// è¡¨ç¤ºååºåˆ—åŒ–isbnæ—¶ä½¿ç”¨è‡ªå®šä¹‰çš„IsbnDeserializer:</span></span><br><span class="line">    <span class="meta">@JsonDeserialize</span>(using = IsbnDeserializer<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">BigInteger</span> <span class="title">isbn</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>æ•°æ®æ ¼å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‘å…‹ç‰Œé¡ºå­ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/05/%E6%89%91%E5%85%8B%E7%89%8C%E9%A1%BA%E5%AD%90%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šLLä»Šå¤©å¿ƒæƒ…ç‰¹åˆ«å¥½,å› ä¸ºä»–å»ä¹°äº†ä¸€å‰¯æ‰‘å…‹ç‰Œ,å‘ç°é‡Œé¢å±…ç„¶æœ‰2ä¸ªå¤§ç‹,2ä¸ªå°ç‹(ä¸€å‰¯ç‰ŒåŸæœ¬æ˜¯54å¼ ^_^)...ä»–éšæœºä»ä¸­æŠ½å‡ºäº†5å¼ ç‰Œ,æƒ³æµ‹æµ‹è‡ªå·±çš„æ‰‹æ°”,çœ‹çœ‹èƒ½ä¸èƒ½æŠ½åˆ°é¡ºå­,å¦‚æœæŠ½åˆ°çš„è¯,ä»–å†³å®šå»ä¹°ä½“è‚²å½©ç¥¨,å˜¿å˜¿ï¼ï¼â€œçº¢å¿ƒA,é»‘æ¡ƒ3,å°ç‹,å¤§ç‹,æ–¹ç‰‡5â€,â€œOh My God!â€ä¸æ˜¯é¡ºå­.....LLä¸é«˜å…´äº†,ä»–æƒ³äº†æƒ³,å†³å®šå¤§\å° ç‹å¯ä»¥çœ‹æˆä»»ä½•æ•°å­—,å¹¶ä¸”Açœ‹ä½œ1,Jä¸º11,Qä¸º12,Kä¸º13ã€‚ä¸Šé¢çš„5å¼ ç‰Œå°±å¯ä»¥å˜æˆâ€œ1,2,3,4,5â€(å¤§å°ç‹åˆ†åˆ«çœ‹ä½œ2å’Œ4),â€œSo Lucky!â€ã€‚LLå†³å®šå»ä¹°ä½“è‚²å½©ç¥¨å•¦ã€‚ ç°åœ¨,è¦æ±‚ä½ ä½¿ç”¨è¿™å¹…ç‰Œæ¨¡æ‹Ÿä¸Šé¢çš„è¿‡ç¨‹,ç„¶åå‘Šè¯‰æˆ‘ä»¬LLçš„è¿æ°”å¦‚ä½•ï¼Œ å¦‚æœç‰Œèƒ½ç»„æˆé¡ºå­å°±è¾“å‡ºtrueï¼Œå¦åˆ™å°±è¾“å‡ºfalseã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§,ä½ å¯ä»¥è®¤ä¸ºå¤§å°ç‹æ˜¯0ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<ol>
<li>ä¸èƒ½æœ‰é0é‡å¤</li>
<li>max-min&lt;5</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isContinuous</span><span class="params">(<span class="keyword">int</span> [] numbers)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(numbers==<span class="keyword">null</span>||numbers.length!=<span class="number">5</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> min = <span class="number">14</span>;</span><br><span class="line">        <span class="keyword">int</span>[] d = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">14</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;numbers.length;++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> number = numbers[i];</span><br><span class="line">            d[number]++;</span><br><span class="line">            <span class="keyword">if</span>(number==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(d[number]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            max = max&lt;number? number:max;</span><br><span class="line">            min = min&gt;number? number:min;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (max-min)&lt;<span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¿»è½¬å•è¯é¡ºåºåˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/05/%E7%BF%BB%E8%BD%AC%E5%8D%95%E8%AF%8D%E9%A1%BA%E5%BA%8F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç‰›å®¢æœ€è¿‘æ¥äº†ä¸€ä¸ªæ–°å‘˜å·¥Fishï¼Œæ¯å¤©æ—©æ™¨æ€»æ˜¯ä¼šæ‹¿ç€ä¸€æœ¬è‹±æ–‡æ‚å¿—ï¼Œå†™äº›å¥å­åœ¨æœ¬å­ä¸Šã€‚åŒäº‹Catå¯¹Fishå†™çš„å†…å®¹é¢‡æ„Ÿå…´è¶£ï¼Œæœ‰ä¸€å¤©ä»–å‘Fishå€Ÿæ¥ç¿»çœ‹ï¼Œä½†å´è¯»ä¸æ‡‚å®ƒçš„æ„æ€ã€‚ä¾‹å¦‚ï¼Œâ€œstudent. a am Iâ€ã€‚åæ¥æ‰æ„è¯†åˆ°ï¼Œè¿™å®¶ä¼™åŸæ¥æŠŠå¥å­å•è¯çš„é¡ºåºç¿»è½¬äº†ï¼Œæ­£ç¡®çš„å¥å­åº”è¯¥æ˜¯â€œI am a student.â€ã€‚Catå¯¹ä¸€ä¸€çš„ç¿»è½¬è¿™äº›å•è¯é¡ºåºå¯ä¸åœ¨è¡Œï¼Œä½ èƒ½å¸®åŠ©ä»–ä¹ˆï¼Ÿ

çµæ´»ä½¿ç”¨Stringæ–¹æ³•ï¼Œsplitå’Œtrimã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ReverseSentence</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.length()&lt;<span class="number">2</span>) <span class="keyword">return</span> str;</span><br><span class="line">            <span class="keyword">if</span>(str==<span class="keyword">null</span>||str.trim().equals(<span class="string">""</span>))<span class="keyword">return</span> str;</span><br><span class="line">            String[] a = str.split(<span class="string">" "</span>);</span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = a.length-<span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!a[i].equals(<span class="string">""</span>))&#123;</span><br><span class="line">                    sb.append(a[i]);</span><br><span class="line">                    sb.append(<span class="string">" "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sb.toString().trim();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å·¦æ—‹è½¬å­—ç¬¦ä¸²ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/05/%E5%B7%A6%E6%97%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ±‡ç¼–è¯­è¨€ä¸­æœ‰ä¸€ç§ç§»ä½æŒ‡ä»¤å«åšå¾ªç¯å·¦ç§»ï¼ˆROLï¼‰ï¼Œç°åœ¨æœ‰ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œå°±æ˜¯ç”¨å­—ç¬¦ä¸²æ¨¡æ‹Ÿè¿™ä¸ªæŒ‡ä»¤çš„è¿ç®—ç»“æœã€‚å¯¹äºä¸€ä¸ªç»™å®šçš„å­—ç¬¦åºåˆ—Sï¼Œè¯·ä½ æŠŠå…¶å¾ªç¯å·¦ç§»Kä½åçš„åºåˆ—è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦åºåˆ—S=â€abcXYZdefâ€,è¦æ±‚è¾“å‡ºå¾ªç¯å·¦ç§»3ä½åçš„ç»“æœï¼Œå³â€œXYZdefabcâ€ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸOKï¼Œæå®šå®ƒï¼
</code></pre>
<a id="more"></a>
<p>æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ³¨æ„nå…ˆå–ä½™å°±è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">LeftRotateString</span><span class="params">(String str,<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str.length()&lt;<span class="number">2</span>||str == <span class="keyword">null</span>||n&lt;<span class="number">1</span>) <span class="keyword">return</span> str;</span><br><span class="line">        <span class="keyword">char</span>[] strChars = str.toCharArray();</span><br><span class="line">        StringBuilder str1 = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        n %= strChars.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&lt;strChars.length; ++i)&#123;</span><br><span class="line">            str1.append(strChars[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">            str1.append(strChars[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str1.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaç½‘ç»œç¼–ç¨‹åŸºç¡€</title>
    <url>/2020/04/04/Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h1>TCP</h1>
<h3 id="ä»€ä¹ˆæ˜¯socket"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯socket">Â¶</a>ä»€ä¹ˆæ˜¯socket?</h3>
<p>ç”±IPåœ°å€å’Œç«¯å£å·ï¼ˆèŒƒå›´æ˜¯0ï½65535ï¼‰ç»„æˆã€‚ç«¯å£å·æ€»æ˜¯ç”±æ“ä½œç³»ç»Ÿåˆ†é…;<br>
å°äº1024çš„ç«¯å£å±äºç‰¹æƒç«¯å£ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œå¤§äº1024çš„ç«¯å£å¯ä»¥ç”±ä»»æ„ç”¨æˆ·çš„åº”ç”¨ç¨‹åºæ‰“å¼€ã€‚</p>
<a id="more"></a>
<h3 id="socketé€šä¿¡"><a class="header-anchor" href="#socketé€šä¿¡">Â¶</a>socketé€šä¿¡</h3>
<p>ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚<br>
ä¸€ä¸ªè¿›ç¨‹å……å½“æœåŠ¡å™¨ç«¯ï¼Œå®ƒä¼šä¸»åŠ¨ç›‘å¬æŸä¸ªæŒ‡å®šçš„ç«¯å£ï¼›<br>
å¦ä¸€ä¸ªè¿›ç¨‹å……å½“å®¢æˆ·ç«¯ï¼Œå®ƒå¿…é¡»ä¸»åŠ¨è¿æ¥æœåŠ¡å™¨çš„IPåœ°å€å’ŒæŒ‡å®šç«¯å£ï¼›<br>
å¦‚æœè¿æ¥æˆåŠŸï¼ŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å°±æˆåŠŸåœ°å»ºç«‹äº†ä¸€ä¸ªTCPè¿æ¥ï¼ŒåŒæ–¹åç»­å°±å¯ä»¥éšæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚</p>
<p>Socketè¿æ¥æˆåŠŸåœ°åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹åï¼š</p>
<ul>
<li>å¯¹æœåŠ¡å™¨ç«¯æ¥è¯´ï¼Œå®ƒçš„Socketæ˜¯æŒ‡å®šçš„IPåœ°å€å’ŒæŒ‡å®šçš„ç«¯å£å·ï¼›</li>
<li>å¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼Œå®ƒçš„Socketæ˜¯å®ƒæ‰€åœ¨è®¡ç®—æœºçš„IPåœ°å€å’Œä¸€ä¸ªç”±æ“ä½œç³»ç»Ÿåˆ†é…çš„éšæœºç«¯å£å·ã€‚</li>
</ul>
<h3 id="æœåŠ¡å™¨ç«¯"><a class="header-anchor" href="#æœåŠ¡å™¨ç«¯">Â¶</a>æœåŠ¡å™¨ç«¯</h3>
<p>ServerSocketç±»æ¥æŒ‡å®šIPå’ŒæŒ‡å®šç«¯å£çš„ç›‘å¬ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ServerSocket ss = <span class="keyword">new</span> ServerSocket(<span class="number">6666</span>); <span class="comment">//è¿™é‡Œæ²¡æœ‰æŒ‡å®šIPï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    Socket sock = ss.accept();          <span class="comment">//ç›‘å¬åˆ°äº†ï¼Œå°±è¿”å›ä¸€ä¸ªsocketå®ä¾‹</span></span><br><span class="line">    Thread t = <span class="keyword">new</span> Handler(sock);</span><br><span class="line">    t.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Socketå®ä¾‹å°±æ˜¯ç”¨æ¥å’Œåˆšè¿æ¥çš„å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡çš„ã€‚ç”±äºå®¢æˆ·ç«¯å¾ˆå¤šï¼Œè¦å®ç°å¹¶å‘å¤„ç†ï¼Œæˆ‘ä»¬å°±å¿…é¡»ä¸ºæ¯ä¸ªæ–°çš„Socketåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†ï¼Œè¿™æ ·ï¼Œä¸»çº¿ç¨‹çš„ä½œç”¨å°±æ˜¯æ¥æ”¶æ–°çš„è¿æ¥ï¼Œæ¯å½“æ”¶åˆ°æ–°è¿æ¥åï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>
<h6 id="é˜»å¡å’Œé˜Ÿåˆ—"><a class="header-anchor" href="#é˜»å¡å’Œé˜Ÿåˆ—">Â¶</a>é˜»å¡å’Œé˜Ÿåˆ—</h6>
<p>å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥è¿›æ¥ï¼Œaccept()æ–¹æ³•ä¼šé˜»å¡å¹¶ä¸€ç›´ç­‰å¾…ã€‚å¦‚æœæœ‰å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿æ¥è¿›æ¥ï¼ŒServerSocketä¼šæŠŠè¿æ¥æ‰”åˆ°é˜Ÿåˆ—é‡Œï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªå¤„ç†ã€‚å¯¹äºJavaç¨‹åºè€Œè¨€ï¼Œåªéœ€è¦é€šè¿‡å¾ªç¯ä¸æ–­è°ƒç”¨accept()å°±å¯ä»¥è·å–æ–°çš„è¿æ¥ã€‚</p>
<h3 id="å®¢æˆ·ç«¯"><a class="header-anchor" href="#å®¢æˆ·ç«¯">Â¶</a>å®¢æˆ·ç«¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Socket sock = <span class="keyword">new</span> Socket(<span class="string">"localhost"</span>, <span class="number">6666</span>); <span class="comment">// // è¿æ¥æŒ‡å®šæœåŠ¡å™¨å’Œç«¯å£</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡Socketæ„é€ æ–¹æ³•è¿æ¥å®¢æˆ·ç«¯ï¼Œå¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªsocketå®ä¾‹ã€‚</p>
<h3 id="Socketæµ"><a class="header-anchor" href="#Socketæµ">Â¶</a>Socketæµ</h3>
<p>ä½¿ç”¨Socketå®ä¾‹è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚å› ä¸ºTCPæ˜¯ä¸€ç§åŸºäºæµçš„åè®®ï¼Œå› æ­¤ï¼ŒJavaæ ‡å‡†åº“ä½¿ç”¨InputStreamå’ŒOutputStreamæ¥å°è£…Socketçš„æ•°æ®æµï¼Œè¿™æ ·æˆ‘ä»¬ä½¿ç”¨Socketçš„æµï¼Œå’Œæ™®é€šIOæµç±»ä¼¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨äºè¯»å–ç½‘ç»œæ•°æ®:</span></span><br><span class="line">InputStream in = sock.getInputStream();</span><br><span class="line"><span class="comment">// ç”¨äºå†™å…¥ç½‘ç»œæ•°æ®:</span></span><br><span class="line">OutputStream out = sock.getOutputStream();</span><br></pre></td></tr></table></figure>
<h6 id="ä¸ºä»€ä¹ˆå†™å…¥ç½‘ç»œæ•°æ®æ—¶ï¼Œè¦è°ƒç”¨flush-æ–¹æ³•"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆå†™å…¥ç½‘ç»œæ•°æ®æ—¶ï¼Œè¦è°ƒç”¨flush-æ–¹æ³•">Â¶</a>ä¸ºä»€ä¹ˆå†™å…¥ç½‘ç»œæ•°æ®æ—¶ï¼Œè¦è°ƒç”¨flush()æ–¹æ³•?</h6>
<p>æˆ‘ä»¬ä»¥æµçš„å½¢å¼å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä¸€å†™å…¥å°±ç«‹åˆ»å‘é€åˆ°ç½‘ç»œï¼Œè€Œæ˜¯å…ˆå†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œç›´åˆ°ç¼“å†²åŒºæ»¡äº†ä»¥åï¼Œæ‰ä¼šä¸€æ¬¡æ€§çœŸæ­£å‘é€åˆ°ç½‘ç»œï¼Œè¿™æ ·è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜ä¼ è¾“æ•ˆç‡ã€‚å¦‚æœç¼“å†²åŒºçš„æ•°æ®å¾ˆå°‘ï¼Œè€Œæˆ‘ä»¬åˆæƒ³å¼ºåˆ¶æŠŠè¿™äº›æ•°æ®å‘é€åˆ°ç½‘ç»œï¼Œå°±å¿…é¡»è°ƒç”¨flush()å¼ºåˆ¶æŠŠç¼“å†²åŒºæ•°æ®å‘é€å‡ºå»ã€‚</p>
<h1>UDP</h1>
<p>UDPæ²¡æœ‰æµçš„æ¦‚å¿µï¼Œä¸€æ¬¡æ”¶å‘ä¸€ä¸ªåŒ…ã€‚<br>
UDPç«¯å£å’ŒTCPç«¯å£è™½ç„¶éƒ½ä½¿ç”¨0~65535ï¼Œä½†ä»–ä»¬æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„ç«¯å£ï¼Œå³ä¸€ä¸ªåº”ç”¨ç¨‹åºç”¨TCPå ç”¨äº†ç«¯å£1234ï¼Œä¸å½±å“å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºç”¨UDPå ç”¨ç«¯å£1234ã€‚</p>
<h3 id="æœåŠ¡å™¨ç«¯-v2"><a class="header-anchor" href="#æœåŠ¡å™¨ç«¯-v2">Â¶</a>æœåŠ¡å™¨ç«¯</h3>
<p>DatagramSocketç±»å®ç°ç›‘å¬ï¼Œæ¥æ”¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DatagramSocket ds = <span class="keyword">new</span> DatagramSocket(<span class="number">6666</span>);</span><br></pre></td></tr></table></figure>
<h6 id="ç¼“å†²åŒºæ¥æ”¶"><a class="header-anchor" href="#ç¼“å†²åŒºæ¥æ”¶">Â¶</a>ç¼“å†²åŒºæ¥æ”¶</h6>
<p>å‡†å¤‡ä¸€ä¸ªbyte[]ç¼“å†²åŒºï¼Œå¹¶é€šè¿‡DatagramPacketå®ç°æ¥æ”¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buffer, buffer.length);</span><br><span class="line">ds.receive(packet);</span><br></pre></td></tr></table></figure>
<h6 id="è½¬ç "><a class="header-anchor" href="#è½¬ç ">Â¶</a>è½¬ç </h6>
<p>// æ”¶å–åˆ°çš„æ•°æ®å­˜å‚¨åœ¨bufferä¸­ï¼Œç”±packet.getOffset(), packet.getLength()æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦<br>
// å°†å…¶æŒ‰UTF-8ç¼–ç è½¬æ¢ä¸ºString:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="keyword">new</span> String(packet.getData(), packet.getOffset(), packet.getLength(), StandardCharsets.UTF_8);</span><br></pre></td></tr></table></figure>
<h6 id="å‘é€åŒ…"><a class="header-anchor" href="#å‘é€åŒ…">Â¶</a>å‘é€åŒ…</h6>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] data = ...</span><br><span class="line">packet.setData(data);</span><br><span class="line">ds.send(packet);</span><br></pre></td></tr></table></figure>
<h3 id="å®¢æˆ·ç«¯-v2"><a class="header-anchor" href="#å®¢æˆ·ç«¯-v2">Â¶</a>å®¢æˆ·ç«¯</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">DatagramSocket ds = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">ds.setSoTimeout(<span class="number">1000</span>);</span><br><span class="line">ds.connect(InetAddress.getByName(<span class="string">"localhost"</span>), <span class="number">6666</span>); <span class="comment">//  // è¿æ¥æŒ‡å®šæœåŠ¡å™¨å’Œç«¯å£</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªconnect()æ–¹æ³•ä¸æ˜¯çœŸè¿æ¥ï¼Œå®ƒæ˜¯ä¸ºäº†åœ¨å®¢æˆ·ç«¯çš„DatagramSocketå®ä¾‹ä¸­ä¿å­˜æœåŠ¡å™¨ç«¯çš„IPå’Œç«¯å£å·ï¼Œç¡®ä¿è¿™ä¸ªDatagramSocketå®ä¾‹åªèƒ½å¾€æŒ‡å®šçš„åœ°å€å’Œç«¯å£å‘é€UDPåŒ…ï¼Œä¸èƒ½å¾€å…¶ä»–åœ°å€å’Œç«¯å£å‘é€ã€‚è¿™ä¹ˆåšä¸æ˜¯UDPçš„é™åˆ¶ï¼Œè€Œæ˜¯Javaå†…ç½®äº†å®‰å…¨æ£€æŸ¥ã€‚</p>
<p>å®¢æˆ·ç«¯å¿…é¡»å…ˆå‘UDPåŒ…ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸å‘UDPåŒ…ï¼ŒæœåŠ¡å™¨ç«¯å°±æ ¹æœ¬ä¸çŸ¥é“å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£å·ã€‚</p>
<p>å¦‚æœå®¢æˆ·ç«¯è®¤ä¸ºé€šä¿¡ç»“æŸï¼Œå°±å¯ä»¥è°ƒç”¨disconnect()æ–­å¼€è¿æ¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ds.disconnect();</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°disconnect()ä¹Ÿä¸æ˜¯çœŸæ­£åœ°æ–­å¼€è¿æ¥ï¼Œå®ƒåªæ˜¯æ¸…é™¤äº†å®¢æˆ·ç«¯DatagramSocketå®ä¾‹è®°å½•çš„è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œç«¯å£å·ï¼Œè¿™æ ·ï¼ŒDatagramSocketå®ä¾‹å°±å¯ä»¥è¿æ¥å¦ä¸€ä¸ªæœåŠ¡å™¨ç«¯ã€‚</p>
<h1>HTTPç¼–ç¨‹ ä¸€ä¸ªè¯·æ±‚-å“åº”åè®®</h1>
<p>HTTPæœ‰å›ºå®šçš„å“åº”ä»£ç ï¼š</p>
<p>1xxï¼šè¡¨ç¤ºä¸€ä¸ªæç¤ºæ€§å“åº”ï¼Œä¾‹å¦‚101è¡¨ç¤ºå°†åˆ‡æ¢åè®®ï¼Œå¸¸è§äºWebSocketè¿æ¥ï¼›<br>
2xxï¼šè¡¨ç¤ºä¸€ä¸ªæˆåŠŸçš„å“åº”ï¼Œä¾‹å¦‚200è¡¨ç¤ºæˆåŠŸï¼Œ206è¡¨ç¤ºåªå‘é€äº†éƒ¨åˆ†å†…å®¹ï¼›<br>
3xxï¼šè¡¨ç¤ºä¸€ä¸ªé‡å®šå‘çš„å“åº”ï¼Œä¾‹å¦‚301è¡¨ç¤ºæ°¸ä¹…é‡å®šå‘ï¼Œ303è¡¨ç¤ºå®¢æˆ·ç«¯åº”è¯¥æŒ‰æŒ‡å®šè·¯å¾„é‡æ–°å‘é€è¯·æ±‚ï¼›<br>
4xxï¼šè¡¨ç¤ºä¸€ä¸ªå› ä¸ºå®¢æˆ·ç«¯é—®é¢˜å¯¼è‡´çš„é”™è¯¯å“åº”ï¼Œä¾‹å¦‚400è¡¨ç¤ºå› ä¸ºContent-Typeç­‰å„ç§åŸå› å¯¼è‡´çš„æ— æ•ˆè¯·æ±‚ï¼Œ404è¡¨ç¤ºæŒ‡å®šçš„è·¯å¾„ä¸å­˜åœ¨ï¼›<br>
5xxï¼šè¡¨ç¤ºä¸€ä¸ªå› ä¸ºæœåŠ¡å™¨é—®é¢˜å¯¼è‡´çš„é”™è¯¯å“åº”ï¼Œä¾‹å¦‚500è¡¨ç¤ºæœåŠ¡å™¨å†…éƒ¨æ•…éšœï¼Œ503è¡¨ç¤ºæœåŠ¡å™¨æš‚æ—¶æ— æ³•å“åº”ã€‚</p>
<p>å…è®¸å®¢æˆ·ç«¯åœ¨æ²¡æœ‰æ”¶åˆ°å“åº”çš„æ—¶å€™ï¼Œå‘é€å¤šä¸ªHTTPè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›å“åº”çš„æ—¶å€™ï¼Œä¸ä¸€å®šæŒ‰é¡ºåºè¿”å›ï¼Œåªè¦åŒæ–¹èƒ½è¯†åˆ«å‡ºå“ªä¸ªå“åº”å¯¹åº”å“ªä¸ªè¯·æ±‚ï¼Œå°±å¯ä»¥åšåˆ°å¹¶è¡Œå‘é€å’Œæ¥æ”¶ã€‚</p>
<h3 id="HttpURLConnectionåŒ…"><a class="header-anchor" href="#HttpURLConnectionåŒ…">Â¶</a>HttpURLConnectionåŒ…</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">URL url = <span class="keyword">new</span> URL(<span class="string">"http://www.example.com/path/to/target?a=1&amp;b=2"</span>);</span><br><span class="line">HttpURLConnection conn = (HttpURLConnection) url.openConnection();</span><br><span class="line">conn.setRequestMethod(<span class="string">"GET"</span>);</span><br><span class="line">conn.setUseCaches(<span class="keyword">false</span>);</span><br><span class="line">conn.setConnectTimeout(<span class="number">5000</span>); <span class="comment">// è¯·æ±‚è¶…æ—¶5ç§’</span></span><br><span class="line"><span class="comment">// è®¾ç½®HTTPå¤´:</span></span><br><span class="line">conn.setRequestProperty(<span class="string">"Accept"</span>, <span class="string">"*/*"</span>);</span><br><span class="line">conn.setRequestProperty(<span class="string">"User-Agent"</span>, <span class="string">"Mozilla/5.0 (compatible; MSIE 11; Windows NT 5.1)"</span>);</span><br><span class="line"><span class="comment">// è¿æ¥å¹¶å‘é€HTTPè¯·æ±‚:</span></span><br><span class="line">conn.connect();</span><br><span class="line"><span class="comment">// åˆ¤æ–­HTTPå“åº”æ˜¯å¦200:</span></span><br><span class="line"><span class="keyword">if</span> (conn.getResponseCode() != <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"bad response"</span>);</span><br><span class="line">&#125;		</span><br><span class="line"><span class="comment">// è·å–æ‰€æœ‰å“åº”Header:</span></span><br><span class="line">Map&lt;String, List&lt;String&gt;&gt; map = conn.getHeaderFields();</span><br><span class="line"><span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">    System.out.println(key + <span class="string">": "</span> + map.get(key));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–å“åº”å†…å®¹:</span></span><br><span class="line">InputStream input = conn.getInputStream();</span><br></pre></td></tr></table></figure>
<h3 id="httpClient"><a class="header-anchor" href="#httpClient">Â¶</a>httpClient</h3>
<p>Java 11åï¼š<br>
éœ€è¦åˆ›å»ºä¸€ä¸ªå…¨å±€HttpClientå®ä¾‹ï¼Œå› ä¸ºHttpClientå†…éƒ¨ä½¿ç”¨çº¿ç¨‹æ± ä¼˜åŒ–å¤šä¸ªHTTPè¿æ¥ï¼Œå¯ä»¥å¤ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> HttpClient httpClient = HttpClient.newBuilder().build();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…¨å±€HttpClient:</span></span><br><span class="line">    <span class="keyword">static</span> HttpClient httpClient = HttpClient.newBuilder().build();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String url = <span class="string">"https://www.sina.com.cn/"</span>;</span><br><span class="line">        HttpRequest request = HttpRequest.newBuilder(<span class="keyword">new</span> URI(url))</span><br><span class="line">            <span class="comment">// è®¾ç½®Header:</span></span><br><span class="line">            .header(<span class="string">"User-Agent"</span>, <span class="string">"Java HttpClient"</span>).header(<span class="string">"Accept"</span>, <span class="string">"*/*"</span>)</span><br><span class="line">            <span class="comment">// è®¾ç½®è¶…æ—¶:</span></span><br><span class="line">            .timeout(Duration.ofSeconds(<span class="number">5</span>))</span><br><span class="line">            <span class="comment">// è®¾ç½®ç‰ˆæœ¬:</span></span><br><span class="line">            .version(Version.HTTP_2).build();</span><br><span class="line">        HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">        <span class="comment">// HTTPå…è®¸é‡å¤çš„Headerï¼Œå› æ­¤ä¸€ä¸ªHeaderå¯å¯¹åº”å¤šä¸ªValue:</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; headers = response.headers().map();</span><br><span class="line">        <span class="keyword">for</span> (String header : headers.keySet()) &#123;</span><br><span class="line">            System.out.println(header + <span class="string">": "</span> + headers.get(header).get(<span class="number">0</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(response.body().substring(<span class="number">0</span>, <span class="number">1024</span>) + <span class="string">"..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;y</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬è¦è·å–å›¾ç‰‡è¿™æ ·çš„äºŒè¿›åˆ¶å†…å®¹ï¼Œåªéœ€è¦æŠŠHttpResponse.BodyHandlers.ofString()æ¢æˆHttpResponse.BodyHandlers.ofByteArray()ï¼Œå°±å¯ä»¥è·å¾—ä¸€ä¸ªHttpResponse&lt;byte[]&gt;å¯¹è±¡ã€‚å¦‚æœå“åº”çš„å†…å®¹å¾ˆå¤§ï¼Œä¸å¸Œæœ›ä¸€æ¬¡æ€§å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œå¯ä»¥ä½¿ç”¨HttpResponse.BodyHandlers.ofInputStream()è·å–ä¸€ä¸ªInputStreamæµã€‚</p>
<p>è¦ä½¿ç”¨POSTè¯·æ±‚ï¼Œæˆ‘ä»¬è¦å‡†å¤‡å¥½å‘é€çš„Bodyæ•°æ®å¹¶æ­£ç¡®è®¾ç½®Content-Typeï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String url = <span class="string">"http://www.example.com/login"</span>;</span><br><span class="line">String body = <span class="string">"username=bob&amp;password=123456"</span>;</span><br><span class="line">HttpRequest request = HttpRequest.newBuilder(<span class="keyword">new</span> URI(url))</span><br><span class="line">    <span class="comment">// è®¾ç½®Header:</span></span><br><span class="line">    .header(<span class="string">"Accept"</span>, <span class="string">"*/*"</span>)</span><br><span class="line">    .header(<span class="string">"Content-Type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>)</span><br><span class="line">    <span class="comment">// è®¾ç½®è¶…æ—¶:</span></span><br><span class="line">    .timeout(Duration.ofSeconds(<span class="number">5</span>))</span><br><span class="line">    <span class="comment">// è®¾ç½®ç‰ˆæœ¬:</span></span><br><span class="line">    .version(Version.HTTP_2)</span><br><span class="line">    <span class="comment">// ä½¿ç”¨POSTå¹¶è®¾ç½®Body:</span></span><br><span class="line">    .POST(BodyPublishers.ofString(body, StandardCharsets.UTF_8)).build();</span><br><span class="line">HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">String s = response.body();</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>å’Œä¸ºSçš„ä¸¤ä¸ªæ•°å­—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/04/%E5%92%8C%E4%B8%BAS%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%95%B0%E5%AD%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„å’Œä¸€ä¸ªæ•°å­—Sï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—ä»–ä»¬çš„å’Œæ­£å¥½æ˜¯Sï¼Œå¦‚æœæœ‰å¤šå¯¹æ•°å­—çš„å’Œç­‰äºSï¼Œè¾“å‡ºä¸¤ä¸ªæ•°çš„ä¹˜ç§¯æœ€å°çš„ã€‚
æ»‘åŠ¨çª—å£åˆæ¥äº†ï¼Œkimochi
</code></pre>
<a id="more"></a>
<h1>ç›´ç”·è§£æ³•</h1>
<p>çœ‹åˆ°æ¡ä»¶å°±æ˜¯æ€¼ï¼Œä¹Ÿä¸æƒ³æƒ³ï¼Œå¤–å±‚çš„ä¹˜ç§¯æ˜¯ä¸€å®šå°äºå†…å±‚çš„:)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">FindNumbersWithSum</span><span class="params">(<span class="keyword">int</span> [] array,<span class="keyword">int</span> sum)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; twoboy = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">if</span>(array == <span class="keyword">null</span> || array.length&lt;<span class="number">2</span>) <span class="keyword">return</span> twoboy;</span><br><span class="line">        <span class="keyword">int</span> len = array.length;</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>; <span class="keyword">int</span> right = len-<span class="number">1</span>; <span class="keyword">boolean</span> first = <span class="keyword">true</span>; <span class="keyword">int</span> curMul = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(right&gt;left)&#123;</span><br><span class="line">            <span class="keyword">int</span> mysum = array[left] + array[right];</span><br><span class="line">            <span class="keyword">if</span>(mysum == sum)&#123;</span><br><span class="line">                <span class="keyword">if</span>(first)&#123;</span><br><span class="line">                    twoboy.add(array[left]);</span><br><span class="line">                    twoboy.add(array[right]);</span><br><span class="line">                    first = <span class="keyword">false</span>;</span><br><span class="line">                    curMul = array[left] * array[right];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(array[left]*array[right]&lt;curMul)&#123;</span><br><span class="line">                    twoboy.set(<span class="number">0</span>,array[left]);</span><br><span class="line">                    twoboy.set(<span class="number">1</span>,array[right]);</span><br><span class="line">                    curMul = array[left] * array[right];</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mysum &lt; sum)&#123;</span><br><span class="line">                    left++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 right--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> twoboy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ‰¾åˆ°å°±return</h1>
<p>è¾“å‡ºä¸¤ä¸ªæ•°çš„ä¹˜ç§¯æœ€å°çš„ã€‚è¿™å¥è¯çš„ç†è§£ï¼Ÿ<br>
å‡è®¾ï¼šè‹¥b&gt;a,ä¸”å­˜åœ¨ï¼Œ<br>
a + b = s;<br>
(a - m ) + (b + m) = s<br>
åˆ™ï¼š(a - m )(b + m)=ab - (b-a)m - m*m &lt; abï¼›è¯´æ˜å¤–å±‚çš„ä¹˜ç§¯æ›´å°<br>
ä¹Ÿå°±æ˜¯è¯´ä¾ç„¶æ˜¯å·¦å³å¤¹é€¼æ³•ï¼ï¼ï¼åªéœ€è¦2ä¸ªæŒ‡é’ˆ</p>
<ol>
<li>leftå¼€å¤´ï¼ŒrightæŒ‡å‘ç»“å°¾</li>
<li>å¦‚æœå’Œå°äºsumï¼Œè¯´æ˜å¤ªå°äº†ï¼Œleftå³ç§»å¯»æ‰¾æ›´å¤§çš„æ•°</li>
<li>å¦‚æœå’Œå¤§äºsumï¼Œè¯´æ˜å¤ªå¤§äº†ï¼Œrightå·¦ç§»å¯»æ‰¾æ›´å°çš„æ•°</li>
<li>å’Œç›¸ç­‰ï¼ŒæŠŠleftå’Œrightçš„æ•°è¿”å›</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">FindNumbersWithSum</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> sum)</span> </span>&#123;</span><br><span class="line">       ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">0</span>)</span><br><span class="line">           <span class="keyword">return</span> list;</span><br><span class="line">       <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">int</span> right = array.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">           <span class="keyword">int</span> total = array[left] + array[right];</span><br><span class="line">           <span class="keyword">if</span> (total == sum) &#123;</span><br><span class="line">               list.add(array[left]);</span><br><span class="line">               list.add(array[right]);</span><br><span class="line">               <span class="keyword">return</span> list;</span><br><span class="line">           &#125; <span class="keyword">else</span> <span class="keyword">if</span> (total &gt; sum) &#123;</span><br><span class="line">             <span class="comment">//å¤§äºsumï¼Œè¯´æ˜å¤ªå¤§äº†ï¼Œrightå·¦ç§»å¯»æ‰¾æ›´å°çš„æ•°</span></span><br><span class="line">               --right;</span><br><span class="line">                 </span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">//2.å¦‚æœå’Œå°äºsumï¼Œè¯´æ˜å¤ªå°äº†ï¼Œleftå³ç§»å¯»æ‰¾æ›´å¤§çš„æ•°</span></span><br><span class="line">               ++left;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> list;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å’Œä¸ºSçš„è¿ç»­æ­£æ•°åºåˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/04/%E5%92%8C%E4%B8%BAS%E7%9A%84%E8%BF%9E%E7%BB%AD%E6%AD%A3%E6%95%B0%E5%BA%8F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ‰¾å‡ºæ‰€æœ‰å’Œä¸ºSçš„è¿ç»­æ­£æ•°åºåˆ—?
</code></pre>
<a id="more"></a>
<h1>ç©·ä¸¾</h1>
<p>ç©·ä¸¾ä¸€æ—¶çˆ½ï¼Œè¶…æ—¶å°±çˆ†ç‚¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt; &gt; FindContinuousSequence(<span class="keyword">int</span> sum) &#123;</span><br><span class="line">       ArrayList&lt;ArrayList&lt;Integer&gt; &gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       <span class="keyword">if</span>(sum&lt;<span class="number">3</span>) <span class="keyword">return</span> aList;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;=sum/<span class="number">2</span>;++i)&#123;</span><br><span class="line">           <span class="keyword">int</span> tempSum = <span class="number">0</span>;</span><br><span class="line">           ArrayList&lt;Integer&gt; tempList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> j = i;j&lt;=sum;++j)&#123;</span><br><span class="line">               tempSum += j;</span><br><span class="line">               <span class="keyword">if</span>(tempSum&lt;sum)&#123;</span><br><span class="line">                   tempList.add(j);</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span>(tempSum == sum)&#123;</span><br><span class="line">                   tempList.add(j);</span><br><span class="line">                   aList.add(tempList);</span><br><span class="line">               &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>åŒæŒ‡é’ˆï¼ŒåŠ¨æ€çª—å£</h1>
<p>çœŸå°¼ç›é¦™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt; &gt; FindContinuousSequence(<span class="keyword">int</span> sum) &#123;</span><br><span class="line">        <span class="comment">//å­˜æ”¾ç»“æœ</span></span><br><span class="line">        ArrayList&lt;ArrayList&lt;Integer&gt; &gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//ä¸¤ä¸ªèµ·ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€çª—å£çš„ä¸¤è¾¹ï¼Œæ ¹æ®å…¶çª—å£å†…çš„å€¼çš„å’Œæ¥ç¡®å®šçª—å£çš„ä½ç½®å’Œå¤§å°</span></span><br><span class="line">        <span class="keyword">int</span> plow = <span class="number">1</span>,phigh = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(phigh &gt; plow)&#123;</span><br><span class="line">            <span class="comment">//ç”±äºæ˜¯è¿ç»­çš„ï¼Œå·®ä¸º1çš„ä¸€ä¸ªåºåˆ—ï¼Œé‚£ä¹ˆæ±‚å’Œå…¬å¼æ˜¯(a0+an)*n/2</span></span><br><span class="line">            <span class="keyword">int</span> cur = (phigh + plow) * (phigh - plow + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±å°†çª—å£èŒƒå›´çš„æ‰€æœ‰æ•°æ·»åŠ è¿›ç»“æœé›†</span></span><br><span class="line">            <span class="keyword">if</span>(cur == sum)&#123;</span><br><span class="line">                ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=plow;i&lt;=phigh;i++)&#123;</span><br><span class="line">                    list.add(i);</span><br><span class="line">                &#125;</span><br><span class="line">                result.add(list);</span><br><span class="line">                plow++;</span><br><span class="line">            <span class="comment">//å¦‚æœå½“å‰çª—å£å†…çš„å€¼ä¹‹å’Œå°äºsumï¼Œé‚£ä¹ˆå³è¾¹çª—å£å³ç§»ä¸€ä¸‹</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cur &lt; sum)&#123;</span><br><span class="line">                phigh++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å¦‚æœå½“å‰çª—å£å†…çš„å€¼ä¹‹å’Œå¤§äºsumï¼Œé‚£ä¹ˆå·¦è¾¹çª—å£å³ç§»ä¸€ä¸‹</span></span><br><span class="line">                plow++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/03/%E6%95%B0%E7%BB%84%E4%B8%AD%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚
</code></pre>
<a id="more"></a>
<h1>å“ˆå¸Œ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//num1,num2åˆ†åˆ«ä¸ºé•¿åº¦ä¸º1çš„æ•°ç»„ã€‚ä¼ å‡ºå‚æ•°</span></span><br><span class="line"><span class="comment">//å°†num1[0],num2[0]è®¾ç½®ä¸ºè¿”å›ç»“æœ</span></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">FindNumsAppearOnce</span><span class="params">(<span class="keyword">int</span> [] array,<span class="keyword">int</span> num1[] , <span class="keyword">int</span> num2[])</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Integer,Boolean&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:array)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(i))&#123;</span><br><span class="line">                map.put(i,<span class="keyword">true</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(map.get(i))&#123;</span><br><span class="line">                map.put(i,<span class="keyword">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:array)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.get(i)&amp;&amp;first)&#123;</span><br><span class="line">                num1[<span class="number">0</span>] = i;</span><br><span class="line">                first = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(map.get(i)&amp;&amp;!first)&#123;</span><br><span class="line">                num2[<span class="number">0</span>] = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ä½è¿ç®—</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//num1,num2åˆ†åˆ«ä¸ºé•¿åº¦ä¸º1çš„æ•°ç»„ã€‚ä¼ å‡ºå‚æ•°</span></span><br><span class="line"><span class="comment">//å°†num1[0],num2[0]è®¾ç½®ä¸ºè¿”å›ç»“æœ</span></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">FindNumsAppearOnce</span><span class="params">(<span class="keyword">int</span> [] array,<span class="keyword">int</span> num1[] , <span class="keyword">int</span> num2[])</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> xor = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : array)<span class="comment">// ä¸€æ ·çš„æŠµæ¶ˆ,ä¸ä¸€æ ·çš„ä¸¤ä¸ªæ•°å­—å¼‚æˆ–è¿ç®—ç»“æœå¿…å®šæœ‰ä¸€ä½æ˜¯1</span></span><br><span class="line">            xor ^= i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> mask = xor &amp; (-xor); <span class="comment">//x &amp; (-x) æ˜¯ä¿ç•™ä½ä¸­æœ€å³è¾¹ 1 ï¼Œä¸”å°†å…¶ä½™çš„ 1 è®¾ä½ 0 çš„æ–¹æ³•ã€‚</span></span><br><span class="line">        <span class="comment">// -xor = ~xor + 1;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : array) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &amp; mask) == <span class="number">0</span>)<span class="comment">//== 0ã€ == mask ä¸¤ç§ç»“æœ</span></span><br><span class="line">                num1[<span class="number">0</span>] ^= i;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                num2[<span class="number">0</span>] ^= i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹³è¡¡äºŒå‰æ ‘ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/03/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œåˆ¤æ–­è¯¥äºŒå‰æ ‘æ˜¯å¦æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚
</code></pre>
<a id="more"></a>
<h1>æ€è·¯</h1>
<p>è‡ªé¡¶å‘ä¸‹ï¼Œæ±‚å‡ºå·¦å³å­æ ‘çš„æœ€å¤§æ ‘é«˜è¿›è¡Œæ¯”è¾ƒã€‚ä½†æ˜¯é—®é¢˜åœ¨äºå­èŠ‚ç‚¹ä¼šè¢«é‡å¤è°ƒç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsBalanced_Solution</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.abs(maxDepth(root.left) - maxDepth(root.right)) &lt;= <span class="number">1</span> &amp;&amp;</span><br><span class="line">            IsBalanced_Solution(root.left) &amp;&amp; IsBalanced_Solution(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">maxDepth</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + Math.max(maxDepth(root.left), maxDepth(root.right));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ”¹è¿›</h1>
<p>å¢åŠ æ ‡å¿—ä½ï¼Œè®°å½•é«˜åº¦ï¼Œä¸å¹³è¡¡å°±å‰ªæã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsBalanced_Solution</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getDepth(root) != -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getDepth</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> left = getDepth(root.left);</span><br><span class="line">        <span class="keyword">if</span> (left == -<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> right = getDepth(root.right);</span><br><span class="line">        <span class="keyword">if</span> (right == -<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> Math.abs(left - right) &gt; <span class="number">1</span> ? -<span class="number">1</span> : <span class="number">1</span> + Math.max(left, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>MavenåŸºç¡€</title>
    <url>/2020/04/02/Maven%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<pre><code>è¿«ä¸åŠå¾…æƒ³å¼€å§‹åšé¡¹ç›®ï¼Œè¯­æ³•ã€æ¡†æ¶ä¸¤æ‰‹æŠ“ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹Mavenå§ã€‚
Mavenå£°æ˜å‘¨æœŸ
Maven deployå‘½ä»¤
</code></pre>
<a id="more"></a>
<h1>Mavençš„ç»“æ„</h1>
<p>a-maven-project<br>
â”œâ”€â”€ pom.xml     é…ç½®<br>
â”œâ”€â”€ src<br>
â”‚   â”œâ”€â”€ main    æºç <br>
â”‚   â”‚   â”œâ”€â”€ java<br>
â”‚   â”‚   â””â”€â”€ resources<br>
â”‚   â””â”€â”€ test    æµ‹è¯•ä»£ç <br>
â”‚       â”œâ”€â”€ java<br>
â”‚       â””â”€â”€ resources<br>
â””â”€â”€ target<br>
é¡¹ç›®çš„æ ¹ç›®å½•a-maven-projectæ˜¯é¡¹ç›®åï¼Œå®ƒæœ‰ä¸€ä¸ªé¡¹ç›®æè¿°æ–‡ä»¶pom.xmlï¼Œå­˜æ”¾Javaæºç çš„ç›®å½•æ˜¯src/main/javaï¼Œå­˜æ”¾èµ„æºæ–‡ä»¶çš„ç›®å½•æ˜¯src/main/resourcesï¼Œå­˜æ”¾æµ‹è¯•æºç çš„ç›®å½•æ˜¯src/test/javaï¼Œå­˜æ”¾æµ‹è¯•èµ„æºçš„ç›®å½•æ˜¯src/test/resourcesï¼Œæœ€åï¼Œæ‰€æœ‰ç¼–è¯‘ã€æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶éƒ½æ”¾åœ¨targetç›®å½•é‡Œã€‚</p>
<h1>pom.xml ç»“æ„</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itranswarp.learnjava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">	<span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å”¯ä¸€æ ‡è¯†"><a class="header-anchor" href="#å”¯ä¸€æ ‡è¯†">Â¶</a>å”¯ä¸€æ ‡è¯†</h4>
<p>groupId: å…¬å¸å<br>
artifactId: é¡¹ç›®å<br>
version: ç‰ˆæœ¬å<br>
å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ä¹Ÿæ˜¯ç”¨è¿™ä¸‰ä¸ªå˜é‡ï¼ŒMavenä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–åŒ…å¹¶æ”¾å…¥classpathä¸­ã€‚</p>
<h1>ä¾èµ–ç®¡ç†</h1>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Mavenä¼šè‡ªåŠ¨è§£æå¹¶åˆ¤æ–­å…¶ä»–ä¾èµ–ã€‚</p>
<h2 id="ä¾èµ–å…³ç³»"><a class="header-anchor" href="#ä¾èµ–å…³ç³»">Â¶</a>ä¾èµ–å…³ç³»</h2>
<p>Mavenå®šä¹‰äº†å‡ ç§ä¾èµ–å…³ç³»ï¼Œåˆ†åˆ«æ˜¯compileã€testã€runtimeå’Œprovidedã€‚<br>
Mavenç»´æŠ¤äº†ä¸€ä¸ªä¸­å¤®ä»“åº“ï¼ˆ<a href="http://repo1.maven.org" target="_blank" rel="noopener">repo1.maven.org</a>ï¼‰ï¼Œæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“å°†è‡ªèº«çš„jarä»¥åŠç›¸å…³ä¿¡æ¯ä¸Šä¼ è‡³ä¸­å¤®ä»“åº“ï¼ŒMavenå°±å¯ä»¥ä»ä¸­å¤®ä»“åº“æŠŠæ‰€éœ€ä¾èµ–ä¸‹è½½åˆ°æœ¬åœ°ã€‚Mavenå¹¶ä¸ä¼šæ¯æ¬¡éƒ½ä»ä¸­å¤®ä»“åº“ä¸‹è½½jaråŒ…ã€‚jaråŒ…ä¸€æ—¦è¢«ä¸‹è½½è¿‡ï¼Œå°±ä¼šè¢«Mavenè‡ªåŠ¨ç¼“å­˜åœ¨æœ¬åœ°ç›®å½•ï¼ˆç”¨æˆ·ä¸»ç›®å½•çš„.m2ç›®å½•ï¼‰ã€‚</p>
<h2 id="æœç´¢ç¬¬ä¸‰æ–¹ç»„ä»¶"><a class="header-anchor" href="#æœç´¢ç¬¬ä¸‰æ–¹ç»„ä»¶">Â¶</a>æœç´¢ç¬¬ä¸‰æ–¹ç»„ä»¶</h2>
<p><a href="http://search.maven.org" target="_blank" rel="noopener">search.maven.org</a>ã€‚</p>
<h1>ç”Ÿå‘½å‘¨æœŸ</h1>
<p>æ˜¯æŒ‡Mavenå°†ä¸€ä¸ªæ•´ä½“ä»»åŠ¡åŒ–åˆ†ä¸ºä¸€ä¸ªä¸ªçš„é˜¶æ®µï¼ˆphaseï¼‰ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œå¯ä»¥æŒ‡å®šæ‰§è¡Œåˆ°ä¸­é—´çš„æŸä¸ªé˜¶æ®µç»“æŸã€‚<br>
Maven çš„å†…éƒ¨æœ‰ä¸‰ä¸ªæ„å»ºç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«æ˜¯ clean, default, siteã€‚å…¶ä¸­ default ç”Ÿå‘½å‘¨æœŸçš„æ ¸å¿ƒé˜¶æ®µå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/94765-809bca97c9fcb03a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/115" alt="ç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µ"></p>
<h3 id="1-ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå®Œæˆæ„å»º"><a class="header-anchor" href="#1-ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå®Œæˆæ„å»º">Â¶</a>1. ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå®Œæˆæ„å»º</h3>
<ul>
<li>æŒ‡å®šæŸä¸ªç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn install</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ mvn install å‘½ä»¤ï¼Œå°†å®Œæˆ validate, compile, test, package, verify, install é˜¶æ®µï¼Œå¹¶å°† package ç”Ÿæˆçš„åŒ…å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚å…¶ä¸­æŸäº›å¸¦æœ‰è¿å­—ç¬¦çš„é˜¶æ®µä¸èƒ½é€šè¿‡ shell å‘½ä»¤å•ç‹¬æŒ‡å®šã€‚ä¾‹å¦‚ï¼š(pre-, post-, or process-*)</p>
<ul>
<li>æŒ‡å®šå¤šä¸ªä¸åŒæ„å»ºç”Ÿå‘½å‘¨æœŸçš„é˜¶æ®µ<br>
æ‰§è¡Œ mvn clean deploy å‘½ä»¤ï¼Œé¦–å…ˆå®Œæˆçš„ clean lifecycleï¼Œå°†ä»¥å‰æ„å»ºçš„æ–‡ä»¶æ¸…ç†ï¼Œç„¶åå†æ‰§è¡Œ default lifecycle çš„ validate, compile, test, package, verify, insstall, deploy é˜¶æ®µï¼Œå°† package é˜¶æ®µåˆ›å»ºçš„åŒ…å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚</li>
</ul>
<h3 id="2-é˜¶æ®µä¸æ’ä»¶"><a class="header-anchor" href="#2-é˜¶æ®µä¸æ’ä»¶">Â¶</a>2. é˜¶æ®µä¸æ’ä»¶</h3>
<p>Maven å¯¹å·¥ç¨‹çš„æ‰€æœ‰æ“ä½œå®å®åœ¨åœ¨çš„éƒ½æ˜¯ç”± æ’ä»¶ æ¥å®Œæˆçš„ã€‚ä¸€ä¸ªæ’ä»¶å¯ä»¥æ”¯æŒå¤šç§åŠŸèƒ½ï¼Œç§°ä¹‹ä¸ºç›®æ ‡ï¼ˆgoalï¼‰ï¼Œä¾‹å¦‚ï¼šcompiler æ’ä»¶æœ‰ä¸¤ä¸ªç›®æ ‡ï¼šcompile å’Œ testCompileï¼Œåˆ†åˆ«å®ç°ç¼–è¯‘æºä»£ç  å’Œ ç¼–è¯‘æµ‹è¯•ä»£ç ã€‚<br>
å¦‚ä½•å°†æ’ä»¶ä¸ Maven çš„æ„å»ºç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·å‘¢ï¼Ÿé€šè¿‡å°†æ’ä»¶çš„ç›®æ ‡ï¼ˆgoalï¼‰ä¸ build lifecycle ä¸­ phase ç»‘å®šåˆ°ä¸€èµ·ï¼Œè¿™æ ·ï¼Œå½“è¦æ‰§è¡ŒæŸä¸ª phase æ—¶ï¼Œå°±è°ƒç”¨æ’ä»¶æ¥å®Œæˆç»‘å®šçš„ç›®æ ‡ã€‚<br>
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸€ä¸ªé˜¶æ®µå¯ä»¥ç»‘å®š0 ä¸ª æˆ– å¤šä¸ªç›®æ ‡ï¼Œæ¯ä¸ªæ’ä»¶å¯ä»¥æä¾› 1 ä¸ªæˆ–å¤šä¸ªç›®æ ‡ã€‚<br>
<img src="https://upload-images.jianshu.io/upload_images/94765-1fd6ddbcb906ab66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/441" alt="goal"></p>
<h3 id="3-åˆ›å»ºæ„å»ºç”Ÿå‘½å‘¨æœŸ"><a class="header-anchor" href="#3-åˆ›å»ºæ„å»ºç”Ÿå‘½å‘¨æœŸ">Â¶</a>3. åˆ›å»ºæ„å»ºç”Ÿå‘½å‘¨æœŸ</h3>
<ul>
<li>è®¾ç½®ä¸åŒçš„packagingç±»å‹<br>
åœ¨ pom.xml æ–‡ä»¶ä¸­ï¼Œpackaging ç±»å‹æ”¯æŒ jar, war, ear, pom ç­‰å¤šç§ç±»å‹ï¼Œä¸åŒçš„ packaging ç±»å‹ä¼šä½¿å¾—ä¸åŒçš„ phase ç»‘å®šä¸åŒçš„ plugin goalã€‚</li>
<li>é…ç½®plugin<br>
åœ¨ pom.xml æ–‡ä»¶ä¸­ï¼Œ <build> <plugins> å…ƒç´ ä¸‹å¯ä»¥æ·»åŠ  <plugin>ï¼Œé€šè¿‡æŒ‡å®š goal å’Œ phase æ¥è¿›è¡Œç»‘å®šã€‚</plugin></plugins></build></li>
</ul>
<h3 id="4-Mavenä¼šé»˜è®¤æŒ‡å®šplugin"><a class="header-anchor" href="#4-Mavenä¼šé»˜è®¤æŒ‡å®šplugin">Â¶</a>4. Mavenä¼šé»˜è®¤æŒ‡å®šplugin</h3>
<ul>
<li>lifecycleç›¸å½“äºJavaçš„packageï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªphaseï¼›</li>
<li>phaseç›¸å½“äºJavaçš„classï¼Œå®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªgoalï¼›</li>
<li>goalç›¸å½“äºclassçš„methodï¼Œå®ƒå…¶å®æ‰æ˜¯çœŸæ­£å¹²æ´»çš„ã€‚</li>
</ul>
<h1>å¸¸ç”¨æ’ä»¶</h1>
<p>maven-shade-pluginï¼šæ‰“åŒ…æ‰€æœ‰ä¾èµ–åŒ…å¹¶ç”Ÿæˆå¯æ‰§è¡Œjarï¼›<br>
cobertura-maven-pluginï¼šç”Ÿæˆå•å…ƒæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼›<br>
findbugs-maven-pluginï¼šå¯¹Javaæºç è¿›è¡Œé™æ€åˆ†æä»¥æ‰¾å‡ºæ½œåœ¨é—®é¢˜ã€‚</p>
<h1>æ¨¡å—ç®¡ç†</h1>
<p>æ³¨æ„åˆ°parentçš„<packaging>æ˜¯pomè€Œä¸æ˜¯jarï¼Œå› ä¸ºparentæœ¬èº«ä¸å«ä»»ä½•Javaä»£ç ã€‚ç¼–å†™parentçš„pom.xmlåªæ˜¯ä¸ºäº†åœ¨å„ä¸ªæ¨¡å—ä¸­å‡å°‘é‡å¤çš„é…ç½®ã€‚ç°åœ¨æˆ‘ä»¬çš„æ•´ä¸ªå·¥ç¨‹ç»“æ„å¦‚ä¸‹ï¼š</packaging></p>
<p>multiple-project<br>
â”œâ”€â”€ pom.xml<br>
â”œâ”€â”€ parent<br>
â”‚   â””â”€â”€ pom.xml<br>
â”œâ”€â”€ module-a<br>
â”‚   â”œâ”€â”€ pom.xml<br>
â”‚   â””â”€â”€ src<br>
â”œâ”€â”€ module-b<br>
â”‚   â”œâ”€â”€ pom.xml<br>
â”‚   â””â”€â”€ src<br>
â””â”€â”€ module-c<br>
â”œâ”€â”€ pom.xml<br>
â””â”€â”€ src<br>
å¦‚æœæ¨¡å—Aä¾èµ–æ¨¡å—Bï¼Œåˆ™æ¨¡å—Aéœ€è¦æ¨¡å—Bçš„jaråŒ…æ‰èƒ½æ­£å¸¸ç¼–è¯‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¨¡å—Aä¸­å¼•å…¥æ¨¡å—Bã€‚<br>
æœ€åï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œéœ€è¦åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªpom.xmlç»Ÿä¸€ç¼–è¯‘ã€‚</p>
<h1>ä»“åº“åˆ†ç±»</h1>
<p>ä¸­å¤®ä»“åº“<br>
å…¶å®æˆ‘ä»¬ä½¿ç”¨çš„å¤§å¤šæ•°ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ˜¯è¿™ä¸ªç”¨æ³•ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨commons loggingã€log4jè¿™äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œ å°±æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—çš„å¼€å‘è€…è‡ªå·±æŠŠç¼–è¯‘å¥½çš„jaråŒ…å‘å¸ƒåˆ°Mavençš„ä¸­å¤®ä»“åº“ä¸­ã€‚</p>
<p>ç§æœ‰ä»“åº“<br>
ç§æœ‰ä»“åº“æ˜¯æŒ‡å…¬å¸å†…éƒ¨å¦‚æœä¸å¸Œæœ›æŠŠæºç å’ŒjaråŒ…æ”¾åˆ°å…¬ç½‘ä¸Šï¼Œé‚£ä¹ˆå¯ä»¥æ­å»ºç§æœ‰ä»“åº“ã€‚ç§æœ‰ä»“åº“æ€»æ˜¯åœ¨å…¬å¸å†…éƒ¨ä½¿ç”¨ï¼Œå®ƒåªéœ€è¦åœ¨æœ¬åœ°çš„~/.m2/settings.xmlä¸­é…ç½®å¥½ï¼Œä½¿ç”¨æ–¹å¼å’Œä¸­å¤®ä»“ä½æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p>
<p>æœ¬åœ°ä»“åº“<br>
æœ¬åœ°ä»“åº“æ˜¯æŒ‡æŠŠæœ¬åœ°å¼€å‘çš„é¡¹ç›®â€œå‘å¸ƒâ€åœ¨æœ¬åœ°ï¼Œè¿™æ ·å…¶ä»–é¡¹ç›®å¯ä»¥é€šè¿‡æœ¬åœ°ä»“åº“å¼•ç”¨å®ƒã€‚ä½†æ˜¯æˆ‘ä»¬ä¸æ¨èæŠŠè‡ªå·±çš„æ¨¡å—å®‰è£…åˆ°Mavençš„æœ¬åœ°ä»“åº“ï¼Œå› ä¸ºæ¯æ¬¡ä¿®æ”¹æŸä¸ªæ¨¡å—çš„æºç ï¼Œéƒ½éœ€è¦é‡æ–°å®‰è£…ï¼Œéå¸¸å®¹æ˜“å‡ºç°ç‰ˆæœ¬ä¸ä¸€è‡´çš„æƒ…å†µã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ¨¡å—åŒ–ç¼–è¯‘ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå‘Šè¯‰Mavenå‡ ä¸ªæ¨¡å—ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œéœ€è¦ä¸€å—ç¼–è¯‘ï¼ŒMavenå°±ä¼šè‡ªåŠ¨æŒ‰ä¾èµ–é¡ºåºç¼–è¯‘è¿™äº›æ¨¡å—ã€‚</p>
<h1>Maven Wrapper</h1>
<ol>
<li>ç»™ä¸€ä¸ªé¡¹ç›®æä¾›ä¸€ä¸ªç‹¬ç«‹çš„ï¼ŒæŒ‡å®šç‰ˆæœ¬çš„Mavenç»™å®ƒä½¿ç”¨ã€‚</li>
<li>æŠŠé¡¹ç›®çš„mvnwã€mvnw.cmdå’Œ.mvnæäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿æ‰€æœ‰å¼€å‘äººå‘˜ä½¿ç”¨ç»Ÿä¸€çš„Mavenç‰ˆæœ¬ã€‚</li>
</ol>
<h4 id="å®‰è£…"><a class="header-anchor" href="#å®‰è£…">Â¶</a>å®‰è£…</h4>
<p>å®‰è£…Maven Wrapperæœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆå³pom.xmlæ‰€åœ¨çš„ç›®å½•ï¼‰ä¸‹è¿è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn -N io.takari:maven:0.7.6:wrapper</span><br></pre></td></tr></table></figure>
<p>å®ƒä¼šè‡ªåŠ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Mavenã€‚æ³¨æ„0.7.6æ˜¯Maven Wrapperçš„ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœè¦æŒ‡å®šä½¿ç”¨çš„Mavenç‰ˆæœ¬ï¼Œä½¿ç”¨ä¸‹é¢çš„å®‰è£…å‘½ä»¤æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚3.3.3ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn -N io.takari:maven:0.7.6:wrapper -Dmaven=3.3.3</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨"><a class="header-anchor" href="#ä½¿ç”¨">Â¶</a>ä½¿ç”¨</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./mvnw clean package</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBCå…¥é—¨</title>
    <url>/2020/04/02/JDBC%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<h1>ORM å¯¹è±¡å…³ç³»æ•°æ®åº“æ˜ å°„</h1>
<p>ä¸€ä¸ªå¯¹è±¡å¯¹åº”æ•°æ®åº“çš„ä¸€æ¡è®°å½•</p>
<h1>DAO æ•°æ®è®¿é—®å¯¹è±¡</h1>
<p>æŠŠæ•°æ®åº“ç›¸å…³çš„æ“ä½œéƒ½å°è£…åœ¨è¿™ä¸ªç±»é‡Œé¢ï¼Œå…¶ä»–åœ°æ–¹çœ‹ä¸åˆ°JDBCçš„ä»£ç </p>
<h1>æ•°æ®åº“è¿æ¥æ±  ConnectionPool</h1>
<h4 id="ä¼ ç»Ÿæ–¹å¼"><a class="header-anchor" href="#ä¼ ç»Ÿæ–¹å¼">Â¶</a>ä¼ ç»Ÿæ–¹å¼</h4>
<p>ä¸€ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªè¿æ¥ï¼Œè¿æ¥çš„åˆ›å»ºå’Œå…³é—­æ¶ˆè€—å¾ˆå¤§ï¼Œè€Œä¸”æ•°æ®åº“çš„è¿æ¥æ€»æ•°ä¹Ÿæœ‰é™ã€‚<br>
<img src="https://stepimagewm.how2j.cn/2654.png" alt></p>
<h4 id="è¿æ¥æ± "><a class="header-anchor" href="#è¿æ¥æ± ">Â¶</a>è¿æ¥æ± </h4>
<p>è¿æ¥æ± ä½¿ç”¨ä¹‹å‰å°±å·²ç»åˆ›å»ºå¥½è¿æ¥ï¼Œçº¿ç¨‹åªæ˜¯å€Ÿç”¨è¿æ¥ï¼Œä½¿ç”¨å®Œåè¿”è¿˜è¿æ¥æ± ï¼Œå¦‚æœè¿æ¥æ± ç”¨å®Œï¼Œåˆ™å…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚<br>
<img src="https://stepimagewm.how2j.cn/2655.png" alt><br>
</p>
<ol>
<li>
<p>ConnectionPool() æ„é€ æ–¹æ³•çº¦å®šäº†è¿™ä¸ªè¿æ¥æ± ä¸€å…±æœ‰å¤šå°‘è¿æ¥</p>
</li>
<li>
<p>åœ¨init() åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº†sizeæ¡è¿æ¥ã€‚ æ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ä½¿ç”¨try-with-resourceè¿™ç§è‡ªåŠ¨å…³é—­è¿æ¥çš„æ–¹å¼ï¼Œå› ä¸ºè¿æ¥æ°æ°éœ€è¦ä¿æŒä¸å…³é—­çŠ¶æ€ï¼Œä¾›åç»­å¾ªç¯ä½¿ç”¨</p>
</li>
<li>
<p>getConnectionï¼Œ åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„å°±waitç­‰å¾…ï¼Œå¦åˆ™å°±å€Ÿç”¨ä¸€æ¡è¿æ¥å‡ºå»</p>
</li>
<li>
<p>returnConnectionï¼Œ åœ¨ä½¿ç”¨å®Œæ¯•åï¼Œå½’è¿˜è¿™ä¸ªè¿æ¥åˆ°è¿æ¥æ± ï¼Œå¹¶ä¸”åœ¨å½’è¿˜å®Œæ¯•åï¼Œè°ƒç”¨notifyAllï¼Œé€šçŸ¥é‚£äº›ç­‰å¾…çš„çº¿ç¨‹ï¼Œæœ‰æ–°çš„è¿æ¥å¯ä»¥å€Ÿç”¨äº†ã€‚</p>
</li>
</ol>
<p>æ³¨ï¼šè¿æ¥æ± è®¾è®¡ç”¨åˆ°äº†å¤šçº¿ç¨‹çš„waitå’ŒnotifyAll</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘çš„æ·±åº¦ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/02/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ±‚äºŒå‰æ ‘çš„æ·±åº¦ã€‚
</code></pre>
<a id="more"></a>
<p>äºŒå‰æ ‘çš„éå†ï¼Œè¿”å›å€¼æ—¶åŠ ä¸€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">TreeDepth</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> maxDepth = Math.max(TreeDepth(root.left),TreeDepth(root.right));</span><br><span class="line">        <span class="keyword">return</span> maxDepth+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„ä½ç½®ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/02/%E6%95%B0%E5%AD%97%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»Ÿè®¡ä¸€ä¸ªæ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚
</code></pre>
<a id="more"></a>
<p>äºŒåˆ†æ³•å˜ç§ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶ï¼Œstartä¸endç›¸ç­‰ï¼Œè¿˜èƒ½è¿›è¡Œä¸€æ¬¡åˆ¤æ–­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">GetNumberOfK</span><span class="params">(<span class="keyword">int</span> [] array , <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(array == <span class="keyword">null</span> || array.length&lt;<span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">int</span> start = <span class="number">0</span>; <span class="keyword">int</span> end = array.length - <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> l = lowbound(array, start, end, k);</span><br><span class="line">       <span class="keyword">int</span> h = highbound(array, start, end, k);</span><br><span class="line">       <span class="keyword">return</span> h-l+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lowbound</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (start+end)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(start&lt;=end)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[mid]&lt;k)&#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                end = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            mid = (start+end)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> start;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">highbound</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (start+end)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(start&lt;=end)&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[mid]&lt;=k)&#123;</span><br><span class="line">                start = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                end = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            mid = (start+end)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> end;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±ç»“ç‚¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/02/%E4%B8%A4%E4%B8%AA%E9%93%BE%E8%A1%A8%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%85%AC%E5%85%B1%E7%BB%93%E7%82%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸¤ä¸ªé“¾è¡¨ï¼Œæ‰¾å‡ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå…¬å…±ç»“ç‚¹ã€‚ï¼ˆæ³¨æ„å› ä¸ºä¼ å…¥æ•°æ®æ˜¯é“¾è¡¨ï¼Œæ‰€ä»¥é”™è¯¯æµ‹è¯•æ•°æ®çš„æç¤ºæ˜¯ç”¨å…¶ä»–æ–¹å¼æ˜¾ç¤ºçš„ï¼Œä¿è¯ä¼ å…¥æ•°æ®æ˜¯æ­£ç¡®çš„ï¼‰
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€</h1>
<p>æ‰¾å‡ºä¸¤é“¾è¡¨é•¿åº¦ï¼Œé•¿çš„å…ˆèµ°ï¼Œç„¶ååŒæ—¶èµ°ï¼Œæ‰¾åˆ°å…±åŒçš„ç»“ç‚¹</p>
<h1>é¢˜è§£äºŒ</h1>
<p>HashMapçš„ç‰¹æ€§</p>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¤šçº¿ç¨‹ä¸‰ï¼šçº¿ç¨‹æ± </title>
    <url>/2020/04/02/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%89%EF%BC%9A%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
    <content><![CDATA[<pre><code>ç»ˆäºåˆ°äº†è¿™ä¸€æ­¥äº†å—ï¼Œæµ·ç‹çš„ç¬¬ä¸€æ­¥ã€‚
</code></pre>
<a id="more"></a>
<h1>çº¿ç¨‹æ± </h1>
<h4 id="ä¸ºä»€ä¹ˆè¦æœ‰çº¿ç¨‹æ± ï¼Ÿ"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦æœ‰çº¿ç¨‹æ± ï¼Ÿ">Â¶</a>ä¸ºä»€ä¹ˆè¦æœ‰çº¿ç¨‹æ± ï¼Ÿ</h4>
<p>åˆ›å»ºçº¿ç¨‹éœ€è¦æ“ä½œç³»ç»Ÿèµ„æºï¼ˆçº¿ç¨‹èµ„æºï¼Œæ ˆç©ºé—´ç­‰ï¼‰ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹éœ€è¦æ¶ˆè€—å¤§é‡æ—¶é—´ã€‚<br>
é€šè¿‡çº¿ç¨‹æ± å¤ç”¨ä¸€ç»„çº¿ç¨‹ï¼Œæ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ã€‚å¦‚æœæœ‰æ–°ä»»åŠ¡ï¼Œå°±åˆ†é…ä¸€ä¸ªç©ºé—²çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœæ‰€æœ‰çº¿ç¨‹éƒ½å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œæ–°ä»»åŠ¡è¦ä¹ˆæ”¾å…¥é˜Ÿåˆ—ç­‰å¾…ï¼Œè¦ä¹ˆå¢åŠ ä¸€ä¸ªæ–°çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p>
<h4 id="çº¿ç¨‹æ± çš„åˆ›å»º"><a class="header-anchor" href="#çº¿ç¨‹æ± çš„åˆ›å»º">Â¶</a>çº¿ç¨‹æ± çš„åˆ›å»º</h4>
<p>ExecutorServiceåªæ˜¯æ¥å£ï¼ŒJavaæ ‡å‡†åº“æä¾›çš„å‡ ä¸ªå¸¸ç”¨å®ç°ç±»æœ‰ï¼š</p>
<ul>
<li>FixedThreadPoolï¼šçº¿ç¨‹æ•°å›ºå®šçš„çº¿ç¨‹æ± ï¼›</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ExecutorService es = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>CachedThreadPoolï¼šçº¿ç¨‹æ•°æ ¹æ®ä»»åŠ¡åŠ¨æ€è°ƒæ•´çš„çº¿ç¨‹æ± ï¼›</p>
</li>
<li>
<p>SingleThreadExecutorï¼šä»…å•çº¿ç¨‹æ‰§è¡Œçš„çº¿ç¨‹æ± ã€‚</p>
</li>
<li>
<p>ThreadPoolExecutorï¼šåŠ¨æ€è®¾ç½®çº¿ç¨‹æ± å¤§å°èŒƒå›´ã€‚</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> min = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">int</span> max = <span class="number">10</span>;</span><br><span class="line">ExecutorService es = <span class="keyword">new</span> ThreadPoolExecutor(min, max, <span class="number">60L</span>, TimeUnit.SECONDS, <span class="keyword">new</span> SynchronousQueue&lt;Runnable&gt;());</span><br></pre></td></tr></table></figure>
<h6 id="çº¿ç¨‹æ± ä»»åŠ¡æäº¤å’Œç»“æŸ"><a class="header-anchor" href="#çº¿ç¨‹æ± ä»»åŠ¡æäº¤å’Œç»“æŸ">Â¶</a>çº¿ç¨‹æ± ä»»åŠ¡æäº¤å’Œç»“æŸ</h6>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">es.submit(<span class="keyword">new</span> Task(<span class="string">""</span> + i));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­çº¿ç¨‹æ± :</span></span><br><span class="line">es.shutdown();</span><br><span class="line"><span class="comment">// awaitTermination()åˆ™ä¼šç­‰å¾…æŒ‡å®šçš„æ—¶é—´è®©çº¿ç¨‹æ± å…³é—­ã€‚</span></span><br><span class="line">es.awaitTermination();</span><br></pre></td></tr></table></figure>
<h4 id="ScheduledThreadPool-å®šæœŸåå¤æ‰§è¡Œçº¿ç¨‹æ± "><a class="header-anchor" href="#ScheduledThreadPool-å®šæœŸåå¤æ‰§è¡Œçº¿ç¨‹æ± ">Â¶</a>ScheduledThreadPool: å®šæœŸåå¤æ‰§è¡Œçº¿ç¨‹æ± </h4>
<h5 id="çº¿ç¨‹æ± åˆ›å»º"><a class="header-anchor" href="#çº¿ç¨‹æ± åˆ›å»º">Â¶</a>çº¿ç¨‹æ± åˆ›å»º</h5>
<p>åˆ›å»ºä¸€ä¸ªScheduledThreadPoolä»ç„¶æ˜¯é€šè¿‡Executorsç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ScheduledExecutorService ses = Executors.newScheduledThreadPool(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h5 id="çº¿ç¨‹ä»»åŠ¡åˆ†é…"><a class="header-anchor" href="#çº¿ç¨‹ä»»åŠ¡åˆ†é…">Â¶</a>çº¿ç¨‹ä»»åŠ¡åˆ†é…</h5>
<p>ä½¿ç”¨ScheduledThreadPoolæ—¶ï¼Œæˆ‘ä»¬è¦æ ¹æ®éœ€è¦é€‰æ‹©<br>
æ‰§è¡Œä¸€æ¬¡;<br>
FixedRateæ‰§è¡Œ;<br>
è¿˜æ˜¯FixedDelayæ‰§è¡Œã€‚</p>
<ol>
<li>ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œåœ¨æŒ‡å®šå»¶è¿Ÿååªæ‰§è¡Œä¸€æ¬¡ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ç§’åæ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡:</span></span><br><span class="line">ses.schedule(<span class="keyword">new</span> Task(<span class="string">"one-time"</span>), <span class="number">1</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä»¥å›ºå®šçš„æ¯3ç§’æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦å®Œæˆ</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2ç§’åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œæ¯3ç§’æ‰§è¡Œ:</span></span><br><span class="line">ses.scheduleAtFixedRate(<span class="keyword">new</span> Task(<span class="string">"fixed-rate"</span>), <span class="number">2</span>, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä»¥å›ºå®šçš„3ç§’ä¸ºé—´éš”æ‰§è¡Œï¼Œå®Œæˆåæ‰è®°3ç§’çš„é—´éš”</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2ç§’åå¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œä»¥3ç§’ä¸ºé—´éš”æ‰§è¡Œ:</span></span><br><span class="line">ses.scheduleWithFixedDelay(<span class="keyword">new</span> Task(<span class="string">"fixed-delay"</span>), <span class="number">2</span>, <span class="number">3</span>, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>
<h5 id="ä¸java-util-Timerç±»çš„åŒºåˆ«"><a class="header-anchor" href="#ä¸java-util-Timerç±»çš„åŒºåˆ«">Â¶</a>ä¸java.util.Timerç±»çš„åŒºåˆ«</h5>
<ol>
<li>ä¸€ä¸ªTimerä¼šå¯¹åº”ä¸€ä¸ªThreadï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªTimeråªèƒ½å®šæœŸæ‰§è¡Œä¸€ä¸ªä»»åŠ¡</li>
<li>ä¸€ä¸ªScheduledThreadPoolå°±å¯ä»¥è°ƒåº¦å¤šä¸ªå®šæ—¶ä»»åŠ¡<br>
æ‰€ä»¥ï¼Œå¯ä»¥ç”¨ScheduledThreadPoolå–ä»£æ—§çš„Timerã€‚</li>
</ol>
<h1>çº¿ç¨‹æ± ä»»åŠ¡</h1>
<h3 id="Runnableæ¥å£"><a class="header-anchor" href="#Runnableæ¥å£">Â¶</a>Runnableæ¥å£</h3>
<p>è¦å®ç°Runnableæ¥å£ï¼Œè¦†å†™run()æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String result;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.result = longTimeCalculation(); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Callable-æ³›å‹æ¥å£"><a class="header-anchor" href="#Callable-æ³›å‹æ¥å£">Â¶</a>Callable æ³›å‹æ¥å£</h3>
<p>æœ‰è¿”å›å€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> longTimeCalculation(); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Futureç±»å‹</h1>
<p>æœªæ¥èƒ½è·å–ç»“æœçš„å¯¹è±¡ï¼Œå¦‚æœå¼‚æ­¥ä»»åŠ¡æ²¡æœ‰å®Œæˆå°±é˜»å¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ExecutorService executor = Executors.newFixedThreadPool(<span class="number">4</span>); </span><br><span class="line"><span class="comment">// å®šä¹‰ä»»åŠ¡:</span></span><br><span class="line">Callable&lt;String&gt; task = <span class="keyword">new</span> Task();</span><br><span class="line"><span class="comment">// æäº¤ä»»åŠ¡å¹¶è·å¾—Future:</span></span><br><span class="line">Future&lt;String&gt; future = executor.submit(task);</span><br><span class="line"><span class="comment">// ä»Futureè·å–å¼‚æ­¥æ‰§è¡Œè¿”å›çš„ç»“æœ:</span></span><br><span class="line">String result = future.get(); <span class="comment">// å¯èƒ½é˜»å¡</span></span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>get()</li>
<li>get(long timeout, TimeUnit unit): è·å–ç»“æœï¼Œä½†åªç­‰æŒ‡å®šçš„æ—¶é—´</li>
<li>cancel(boolean mayInterruptIfRunning): å–æ¶ˆå½“å‰ä»»åŠ¡</li>
<li>isDone(): åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²å®Œæˆ</li>
</ul>
<p>Java 8åï¼š</p>
<h1>CompletableFuture</h1>
<p>Futureç¼ºç‚¹ï¼šçº¿ç¨‹é˜»å¡æˆ–è€…è½®è¯¢çœ‹isDone()æ˜¯å¦ä¸ºtrueï¼Œå¯¼è‡´ä¸»çº¿ç¨‹è¢«è¿«ç­‰å¾…ã€‚</p>
<p>å¼‚æ­¥ä»»åŠ¡å®Œæˆæ—¶æˆ–è€…å‘ç”Ÿå¼‚å¸¸æ—¶è‡ªåŠ¨è°ƒç”¨å›è°ƒå¯¹è±¡çš„å›è°ƒæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">CompletableFuture&lt;Double&gt; cf = CompletableFuture.supplyAsync(Main::fetchPrice);</span><br><span class="line">       <span class="comment">// å¦‚æœæ‰§è¡ŒæˆåŠŸ:</span></span><br><span class="line">       cf.thenAccept((result) -&gt; &#123;</span><br><span class="line">           System.out.println(<span class="string">"price: "</span> + result);</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="comment">// å¦‚æœæ‰§è¡Œå¼‚å¸¸:</span></span><br><span class="line">       cf.exceptionally((e) -&gt; &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ªCompletableFutureé€šè¿‡CompletableFuture.supplyAsyncï¼ˆï¼‰å®ç°ï¼Œéœ€è¦å®ç°Supplieræ¥å£ã€‚<br>
å®Œæˆæ—¶ï¼Œå›è°ƒè°ƒç”¨Consumerå¯¹è±¡ã€‚<br>
å¼‚å¸¸æ—¶ï¼Œå›è°ƒè°ƒç”¨Functionå¯¹è±¡ã€‚<br>
æ‰€ä»¥ä¸»çº¿ç¨‹è®¾ç½®å¥½å›è°ƒå°±ä¸å†å…³å¿ƒå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
<h4 id="ä¸²è¡Œæ‰§è¡Œå’Œå¹¶è¡Œ"><a class="header-anchor" href="#ä¸²è¡Œæ‰§è¡Œå’Œå¹¶è¡Œ">Â¶</a>ä¸²è¡Œæ‰§è¡Œå’Œå¹¶è¡Œ</h4>
<p>ä¸²è¡Œï¼šå¯¹è±¡ä¾æ¬¡å¤„ç†<br>
CompletableFuture<String> cfQuery = CompletableFuture.supplyAsync ç¬¬ä¸€æ­¥<br>
CompletableFuture<Double> cfFetch == cfQuery.thenApplyAsync ä¸‹ä¸€æ­¥<br>
cfFetch.thenAccept è·å–ç»“æœ</Double></String></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªä»»åŠ¡:</span></span><br><span class="line">    CompletableFuture&lt;String&gt; cfQuery = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> queryCode(<span class="string">"ä¸­å›½çŸ³æ²¹"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// cfQueryæˆåŠŸåç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡:</span></span><br><span class="line">    CompletableFuture&lt;Double&gt; cfFetch = cfQuery.thenApplyAsync((code) -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> fetchPrice(code);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// cfFetchæˆåŠŸåæ‰“å°ç»“æœ:</span></span><br><span class="line">    cfFetch.thenAccept((result) -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">"price: "</span> + result);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>å¹¶è¡Œï¼šanyOf()å¯ä»¥å®ç°â€œä»»æ„ä¸ªCompletableFutureåªè¦ä¸€ä¸ªæˆåŠŸâ€ï¼ŒallOf()å¯ä»¥å®ç°â€œæ‰€æœ‰CompletableFutureéƒ½å¿…é¡»æˆåŠŸâ€ï¼Œè¿™äº›ç»„åˆæ“ä½œå¯ä»¥å®ç°éå¸¸å¤æ‚çš„å¼‚æ­¥æµç¨‹æ§åˆ¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ä¸ªCompletableFutureæ‰§è¡Œå¼‚æ­¥æŸ¥è¯¢:</span></span><br><span class="line">        CompletableFuture&lt;Double&gt; cfFetchFromSina = cfQuery.thenApplyAsync((code) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> fetchPrice((String) code, <span class="string">"https://finance.sina.com.cn/price/"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        CompletableFuture&lt;Double&gt; cfFetchFrom163 = cfQuery.thenApplyAsync((code) -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> fetchPrice((String) code, <span class="string">"https://money.163.com/price/"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨anyOfåˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„CompletableFuture:</span></span><br><span class="line">        CompletableFuture&lt;Object&gt; cfFetch = CompletableFuture.anyOf(cfFetchFromSina, cfFetchFrom163);</span><br></pre></td></tr></table></figure>
<p>CompletableFutureçš„å‘½åè§„åˆ™ï¼š</p>
<ul>
<li>xxx()ï¼šè¡¨ç¤ºè¯¥æ–¹æ³•å°†ç»§ç»­åœ¨å·²æœ‰çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼›</li>
<li>xxxAsync()ï¼šè¡¨ç¤ºå°†å¼‚æ­¥åœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</li>
</ul>
<p>Java7 å¼•å…¥çš„çº¿ç¨‹æ± ï¼š</p>
<h1>ForkJoinçº¿ç¨‹æ±  åˆ’å°å¹¶è¡Œ</h1>
<p>Fork/Joinä»»åŠ¡çš„åŸç†ï¼šåˆ¤æ–­ä¸€ä¸ªä»»åŠ¡æ˜¯å¦è¶³å¤Ÿå°ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥è®¡ç®—ï¼Œå¦åˆ™ï¼Œå°±åˆ†æ‹†æˆå‡ ä¸ªå°ä»»åŠ¡åˆ†åˆ«è®¡ç®—ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åå¤â€œè£‚å˜â€æˆä¸€ç³»åˆ—å°ä»»åŠ¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º2000ä¸ªéšæœºæ•°ç»„æˆçš„æ•°ç»„:</span></span><br><span class="line">        <span class="keyword">long</span>[] array = <span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">2000</span>];</span><br><span class="line">        <span class="keyword">long</span> expectedSum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            array[i] = random();</span><br><span class="line">            expectedSum += array[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"Expected sum: "</span> + expectedSum);</span><br><span class="line">        <span class="comment">// fork/join:</span></span><br><span class="line">        ForkJoinTask&lt;Long&gt; task = <span class="keyword">new</span> SumTask(array, <span class="number">0</span>, array.length);</span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        Long result = ForkJoinPool.commonPool().invoke(task);</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"Fork/join sum: "</span> + result + <span class="string">" in "</span> + (endTime - startTime) + <span class="string">" ms."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Random random = <span class="keyword">new</span> Random(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">long</span> <span class="title">random</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> random.nextInt(<span class="number">10000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SumTask</span> <span class="keyword">extends</span> <span class="title">RecursiveTask</span>&lt;<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> THRESHOLD = <span class="number">500</span>;</span><br><span class="line">    <span class="keyword">long</span>[] array;</span><br><span class="line">    <span class="keyword">int</span> start;</span><br><span class="line">    <span class="keyword">int</span> end;</span><br><span class="line"></span><br><span class="line">    SumTask(<span class="keyword">long</span>[] array, <span class="keyword">int</span> start, <span class="keyword">int</span> end) &#123;</span><br><span class="line">        <span class="keyword">this</span>.array = array;</span><br><span class="line">        <span class="keyword">this</span>.start = start;</span><br><span class="line">        <span class="keyword">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Long <span class="title">compute</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (end - start &lt;= THRESHOLD) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä»»åŠ¡è¶³å¤Ÿå°,ç›´æ¥è®¡ç®—:</span></span><br><span class="line">            <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; end; i++) &#123;</span><br><span class="line">                sum += <span class="keyword">this</span>.array[i];</span><br><span class="line">                <span class="comment">// æ•…æ„æ”¾æ…¢è®¡ç®—é€Ÿåº¦:</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä»»åŠ¡å¤ªå¤§,ä¸€åˆ†ä¸ºäºŒ:</span></span><br><span class="line">        <span class="keyword">int</span> middle = (end + start) / <span class="number">2</span>;</span><br><span class="line">        System.out.println(String.format(<span class="string">"split %d~%d ==&gt; %d~%d, %d~%d"</span>, start, end, start, middle, middle, end));</span><br><span class="line">        <span class="comment">// â€œåˆ†è£‚â€å­ä»»åŠ¡:</span></span><br><span class="line">        SumTask subtask1 = <span class="keyword">new</span> SumTask(<span class="keyword">this</span>.array, start, middle);</span><br><span class="line">        SumTask subtask2 = <span class="keyword">new</span> SumTask(<span class="keyword">this</span>.array, middle, end);</span><br><span class="line">        <span class="comment">// invokeAllä¼šå¹¶è¡Œè¿è¡Œä¸¤ä¸ªå­ä»»åŠ¡:</span></span><br><span class="line">        invokeAll(subtask1, subtask2);</span><br><span class="line">        <span class="comment">// è·å¾—å­ä»»åŠ¡çš„ç»“æœ:</span></span><br><span class="line">        Long subresult1 = subtask1.join();</span><br><span class="line">        Long subresult2 = subtask2.join();</span><br><span class="line">        Long result = subresult1 + subresult2;</span><br><span class="line">        System.out.println(<span class="string">"result = "</span> + subresult1 + <span class="string">" + "</span> + subresult2 + <span class="string">" ==&gt; "</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¸å¿ƒä»£ç SumTaskç»§æ‰¿è‡ªRecursiveTaskï¼Œåœ¨compute()æ–¹æ³•ä¸­ï¼Œå…³é”®æ˜¯å¦‚ä½•â€œåˆ†è£‚â€å‡ºå­ä»»åŠ¡å¹¶ä¸”æäº¤å­ä»»åŠ¡ã€‚</p>
<p>Javaæ ‡å‡†åº“æä¾›çš„java.util.Arrays.parallelSort(array)å¯ä»¥è¿›è¡Œå¹¶è¡Œæ’åºï¼Œå®ƒçš„åŸç†å°±æ˜¯å†…éƒ¨é€šè¿‡Fork/Joinå¯¹å¤§æ•°ç»„åˆ†æ‹†è¿›è¡Œå¹¶è¡Œæ’åºï¼Œåœ¨å¤šæ ¸CPUä¸Šå°±å¯ä»¥å¤§å¤§æé«˜æ’åºçš„é€Ÿåº¦ã€‚</p>
<h1>ThreadLocal</h1>
<p>ä¸Šä¸‹æ–‡ï¼šåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ¨ªè·¨è‹¥å¹²æ–¹æ³•è°ƒç”¨ï¼Œéœ€è¦ä¼ é€’çš„å¯¹è±¡ã€‚å®ƒæ˜¯ä¸€ç§çŠ¶æ€ï¼Œå¯ä»¥æ˜¯ç”¨æˆ·èº«ä»½ã€ä»»åŠ¡ä¿¡æ¯ç­‰ã€‚</p>
<p>ThreadLocalè¡¨ç¤ºçº¿ç¨‹çš„â€œå±€éƒ¨å˜é‡â€ï¼Œå®ƒç¡®ä¿æ¯ä¸ªçº¿ç¨‹çš„ThreadLocalå˜é‡éƒ½æ˜¯å„è‡ªç‹¬ç«‹çš„ï¼›<br>
ThreadLocalé€‚åˆåœ¨ä¸€ä¸ªçº¿ç¨‹çš„å¤„ç†æµç¨‹ä¸­ä¿æŒä¸Šä¸‹æ–‡ï¼ˆé¿å…äº†åŒä¸€å‚æ•°åœ¨æ‰€æœ‰æ–¹æ³•ä¸­ä¼ é€’ï¼‰ï¼›<br>
ä½¿ç”¨ThreadLocalè¦ç”¨try â€¦ finallyç»“æ„ï¼Œå¹¶åœ¨finallyä¸­æ¸…é™¤ã€‚</p>
<h4 id="åˆå§‹åŒ–ï¼š"><a class="header-anchor" href="#åˆå§‹åŒ–ï¼š">Â¶</a>åˆå§‹åŒ–ï¼š</h4>
<p>ä½¿ç”¨é™æ€å¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> ThreadLocal&lt;User&gt; threadLocalUser = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br></pre></td></tr></table></figure>
<h4 id="å…¸å‹ä½¿ç”¨æ–¹å¼ï¼š"><a class="header-anchor" href="#å…¸å‹ä½¿ç”¨æ–¹å¼ï¼š">Â¶</a>å…¸å‹ä½¿ç”¨æ–¹å¼ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processUser</span><span class="params">(user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        threadLocalUser.set(user);</span><br><span class="line">        step1();</span><br><span class="line">        step2();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        threadLocalUser.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œç‰¹åˆ«æ³¨æ„ThreadLocalä¸€å®šè¦åœ¨finallyä¸­æ¸…é™¤ã€‚å› ä¸ºå½“å‰çº¿ç¨‹æ‰§è¡Œå®Œç›¸å…³ä»£ç åï¼Œå¾ˆå¯èƒ½ä¼šè¢«é‡æ–°æ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œå¦‚æœThreadLocalæ²¡æœ‰è¢«æ¸…é™¤ï¼Œè¯¥çº¿ç¨‹æ‰§è¡Œå…¶ä»–ä»£ç æ—¶ï¼Œä¼šæŠŠä¸Šä¸€æ¬¡çš„çŠ¶æ€å¸¦è¿›å»ã€‚</p>
<h4 id="å¯¹ThreadLocalçš„å°è£…"><a class="header-anchor" href="#å¯¹ThreadLocalçš„å°è£…">Â¶</a>å¯¹ThreadLocalçš„å°è£…</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserContext</span> <span class="keyword">implements</span> <span class="title">AutoCloseable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;String&gt; ctx = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserContext</span><span class="params">(String user)</span> </span>&#123;</span><br><span class="line">        ctx.set(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">currentUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ctx.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ctx.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æŠŠThreadLocalçœ‹æˆä¸€ä¸ªå…¨å±€Map&lt;Thread, Object&gt;ï¼šæ¯ä¸ªçº¿ç¨‹è·å–ThreadLocalå˜é‡æ—¶ï¼Œæ€»æ˜¯ä½¿ç”¨Threadè‡ªèº«ä½œä¸ºkeyï¼š<br>
å› æ­¤ï¼ŒThreadLocalç›¸å½“äºç»™æ¯ä¸ªçº¿ç¨‹éƒ½å¼€è¾Ÿäº†ä¸€ä¸ªç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼Œå„ä¸ªçº¿ç¨‹çš„ThreadLocalå…³è”çš„å®ä¾‹äº’ä¸å¹²æ‰°ã€‚</p>
<h4 id="è‡ªåŠ¨æ¸…é™¤çº¿ç¨‹"><a class="header-anchor" href="#è‡ªåŠ¨æ¸…é™¤çº¿ç¨‹">Â¶</a>è‡ªåŠ¨æ¸…é™¤çº¿ç¨‹</h4>
<p>å¯ä»¥é€šè¿‡AutoCloseableæ¥å£é…åˆtry (resource) {â€¦}ç»“æ„ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬å…³é—­ã€‚<br>
ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å€ŸåŠ©try (resource) {â€¦}ç»“æ„ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="keyword">var</span> ctx = <span class="keyword">new</span> UserContext(<span class="string">"Bob"</span>)) &#123;</span><br><span class="line">    <span class="comment">// å¯ä»»æ„è°ƒç”¨UserContext.currentUser():</span></span><br><span class="line">    String currentUser = UserContext.currentUser();</span><br><span class="line">&#125; <span class="comment">// åœ¨æ­¤è‡ªåŠ¨è°ƒç”¨UserContext.close()æ–¹æ³•é‡Šæ”¾ThreadLocalå…³è”å¯¹è±¡</span></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­çš„é€†åºå¯¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/01/%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E9%80%86%E5%BA%8F%E5%AF%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªæ•°å­—å¤§äºåé¢çš„æ•°å­—ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªé€†åºå¯¹ã€‚è¾“å…¥ä¸€ä¸ªæ•°ç»„,æ±‚å‡ºè¿™ä¸ªæ•°ç»„ä¸­çš„é€†åºå¯¹çš„æ€»æ•°Pã€‚å¹¶å°†På¯¹1000000007å–æ¨¡çš„ç»“æœè¾“å‡ºã€‚ å³è¾“å‡ºP%1000000007
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>å½’å¹¶æ’åºçš„è¿‡ç¨‹ä¸­è®°æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯éšæ—¶éƒ½è¦æ£€æŸ¥totalæ˜¯å¦æœ‰å¤§äº1000000007ï¼Œtotalçš„è®¡ç®—æ—¶æœºï¼Œmergeçš„è¾¹ç•Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">InversePairs</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array==<span class="keyword">null</span>||array.length&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[]copy = <span class="keyword">new</span> <span class="keyword">int</span>[array.length];</span><br><span class="line">        <span class="keyword">return</span> Invert(array, copy, <span class="number">0</span>, array.length - <span class="number">1</span>)%<span class="number">1000000007</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">Invert</span><span class="params">(<span class="keyword">int</span>[]array, <span class="keyword">int</span>[]copy, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(start==end)&#123;</span><br><span class="line">                copy[start]=array[start];</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> mid = (end  + start)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> leftcount = Invert(array,copy, start, mid);</span><br><span class="line">            <span class="keyword">int</span> rightcount = Invert(array, copy, mid+<span class="number">1</span>, end);</span><br><span class="line">            <span class="keyword">int</span> leftrigth = leftcount+rightcount;</span><br><span class="line">            leftrigth = leftrigth&gt;<span class="number">1000000007</span>?leftrigth%<span class="number">1000000007</span>:leftrigth;</span><br><span class="line">            <span class="keyword">if</span> (array[mid] &lt;= array[mid + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> leftrigth;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> crosscount = merge(array, copy, start, mid, end);</span><br><span class="line">            <span class="keyword">return</span> leftrigth+crosscount;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span>[]array,<span class="keyword">int</span>[]copy, <span class="keyword">int</span> start, <span class="keyword">int</span> mid, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> rstart = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i&lt;=end;++i)&#123;</span><br><span class="line">                copy[i] = array[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i&lt;=end;++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(start&gt;mid)&#123;</span><br><span class="line">                    array[i] = copy[rstart++];</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rstart&gt;end)&#123;</span><br><span class="line">                    array[i] = copy[start++];</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(copy[start]&lt;= copy[rstart])&#123;</span><br><span class="line">                    array[i] = copy[start++];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    array[i] = copy[rstart++];</span><br><span class="line">                    total += (mid - start + <span class="number">1</span>);</span><br><span class="line">                    total=total&gt;<span class="number">1000000007</span>?total%<span class="number">1000000007</span>:total;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> total;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/04/01/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E5%AD%97%E7%AC%A6%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²(0&lt;=å­—ç¬¦ä¸²é•¿åº¦&lt;=10000ï¼Œå…¨éƒ¨ç”±å­—æ¯ç»„æˆ)ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦,å¹¶è¿”å›å®ƒçš„ä½ç½®, å¦‚æœæ²¡æœ‰åˆ™è¿”å› -1ï¼ˆéœ€è¦åŒºåˆ†å¤§å°å†™ï¼‰.
è¿™é¢˜å¤§ä½¬çš„è§£å¾ˆå¦™ï¼ŒæŠŠå­˜Integeræ”¹ä¸ºå­˜Booleanï¼Œå¤ªå¦™äº†ï¼
</code></pre>
<a id="more"></a>
<h1>å¸¸è§„é¢˜è§£ hashå­˜æ¬¡æ•°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">FirstNotRepeatingChar</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str == <span class="keyword">null</span>||str.length()&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] chars = str.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(i))&#123;</span><br><span class="line">                map.put(i,<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                map.put(i,map.get(i)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.get(i)==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> pos;</span><br><span class="line">            &#125;</span><br><span class="line">            pos++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å¦™è§£</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">FirstNotRepeatingChar</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str == <span class="keyword">null</span>||str.length()&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        HashMap&lt;Character, Boolean&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">char</span>[] chars = str.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            map.put(i,!map.containsKey(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.get(i)) <span class="keyword">return</span> pos;</span><br><span class="line">            pos++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ASCIIç ä½œæ˜ å°„</h1>
<p>ASCIIç å­—ç¬¦å…±256ä¸ªï¼Œéšæ„å­˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">FirstNotRepeatingChar</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str == <span class="keyword">null</span>||str.length()&lt;<span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span>[] map = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</span><br><span class="line">        <span class="keyword">char</span>[] chars = str.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            map[(<span class="keyword">int</span>)i] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> i:chars)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map[(<span class="keyword">int</span>)i]==<span class="number">1</span>) <span class="keyword">return</span> pos;</span><br><span class="line">            pos++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¤šçº¿ç¨‹äºŒï¼šä»£ç çº§åˆ«çš„é”</title>
    <url>/2020/04/01/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%BA%8C/</url>
    <content><![CDATA[<pre><code>JDK1.5ä¹‹åï¼Œæ¬¢è¿æ¥åˆ°java.util.concurrentåŒ…ã€‚å¯é‡å…¥é”ï¼Œæ‚²è§‚è¯»é”ï¼Œä¹è§‚è¯»é”ï¼Œçº¿ç¨‹å®‰å…¨æ•°æ®ç»“æ„ã€‚
</code></pre>
<a id="more"></a>
<ul>
<li>âš ï¸æ³¨æ„final</li>
</ul>
<h1>ReentrantLock å¯é‡å…¥é”</h1>
<p>ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œä¸´ç•ŒåŒºä»£ç ï¼š<br>
æ›´å®‰å…¨ç‰ˆæœ¬çš„syncronizedï¼Œå¢åŠ äº†å°è¯•è·å–é”çš„åŠŸèƒ½ï¼Œæ›´ä¸å®¹æ˜“æ­»é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            count += n;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸syncronizedçš„åŒºåˆ«ï¼š</p>
<ol>
<li>synchronizedæ˜¯Javaè¯­è¨€å±‚é¢æä¾›çš„è¯­æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘å¼‚å¸¸ï¼Œè€ŒReentrantLockæ˜¯Javaä»£ç å®ç°çš„é”ï¼Œæˆ‘ä»¬å°±å¿…é¡»å…ˆè·å–é”ï¼Œç„¶ååœ¨finallyä¸­æ­£ç¡®é‡Šæ”¾é”ã€‚</li>
<li>ReentrantLockå¯ä»¥å°è¯•è·å–é”ï¼š<br>
è¿™é‡Œè¡¨ç¤ºå•ä½ä¸ºç§’ï¼Œæœ€å¤šç­‰å¾…ä¸€ç§’ï¼Œå¦åˆ™è¿”å›falseã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(lock.tryLock(<span class="number">1</span>, TimeUnit.SECONDS))&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Condition condition.await(), condition.signalAll();</h1>
<p>æ–°ç‰ˆwait and notify<br>
åˆ›å»ºä¸€ä¸ªCondtionå¯¹è±¡ï¼Œè¿›è¡Œä¿¡å·é‡ç®¡ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TaskQueue</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock = <span class="keyword">new</span> ReentrantLock(); </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Condition condition = lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> Queue&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTask</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            queue.add(s);</span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (queue.isEmpty()) &#123;</span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> queue.remove();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸç†å’Œè¡Œä¸ºéƒ½æ˜¯ä¸€è‡´çš„ã€‚<br>
è€Œä¸” condition.await() ä¹Ÿå¯ä»¥æŒ‡å®šç­‰å¾…çš„æ—¶é—´ï¼Œè§„å®šæ—¶é—´å†…æ²¡æœ‰è¢«condition.signal()æˆ–condition.signalAll()å”¤é†’ï¼Œä¼šè‡ªå·±å”¤é†’ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(condtion.await(<span class="number">1</span>,TimeUnit.SECOND))&#123; </span><br><span class="line">    è¢«å…¶ä»–çº¿ç¨‹å”¤é†’  </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ReadWriteLockè¯»å†™é” ï¼ˆæ‚²è§‚è¯»é”ï¼Œå¯é‡å…¥é”ï¼‰</h1>
<p>å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»ï¼Œä½†åªèƒ½ä¸€ä¸ªçº¿ç¨‹å†™ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ã€‚<br>
åˆ›å»ºä¸€ä¸ªReadWriteLockå®ä¾‹ï¼Œç„¶åç”¨è¿™ä¸ªå®ä¾‹åˆ†åˆ«è·å–è¯»/å†™é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Counter</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReadWriteLock rwlock = <span class="keyword">new</span> ReentrantReadWriteLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock rlock = rwlock.readLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock wlock = rwlock.writeLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] counts = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">        wlock.lock;         <span class="comment">// åŠ å†™é”</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            counts[index] += <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            wlock.unlock(); <span class="comment">// é‡Šæ”¾å†™é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] get()&#123;</span><br><span class="line">        rlock.lock();       <span class="comment">// åŠ è¯»é”  </span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.copyOf(counts, counts.length);</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            rlock.unlock(); <span class="comment">// é‡Šæ”¾è¯»é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ReadWriteLockï¼Œä¼šå‘ç°å®ƒæœ‰ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼šå¦‚æœæœ‰çº¿ç¨‹æ­£åœ¨è¯»ï¼Œå†™çº¿ç¨‹éœ€è¦ç­‰å¾…è¯»çº¿ç¨‹é‡Šæ”¾é”åæ‰èƒ½è·å–å†™é”ï¼Œå³è¯»çš„è¿‡ç¨‹ä¸­ä¸å…è®¸å†™ï¼Œè¿™æ˜¯ä¸€ç§æ‚²è§‚çš„è¯»é”ã€‚</p>
<h1>StampedLock ï¼ˆä¹è§‚è¯»é”ï¼Œä¸å¯é‡å…¥é”ï¼‰</h1>
<p>è¯»çš„è¿‡ç¨‹ä¸­ä¹Ÿå…è®¸è·å–å†™é”åå†™å…¥ï¼</p>
<ol>
<li>å†™å…¥çš„åŠ é”æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</li>
<li>è¯»å–çš„æ—¶å€™ä¼šå…ˆé€šè¿‡stampedLock.tryOptimisticRead()è·å–ä¹è§‚è¯»é”ï¼Œä¼šè¿”å›ä¸€ä¸ªç‰ˆæœ¬å·ã€‚</li>
<li>é€šè¿‡ä¹è§‚è¯»é”è¯»å–æ•°æ®ï¼Œå¦‚æœå‘ç”Ÿå†™å…¥ï¼Œç‰ˆæœ¬å·ä¸ä¸€è‡´ï¼Œä¼šå†ä½¿ç”¨æ‚²è§‚è¯»é”è·å–æ•°æ®ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StampedLock stampedLock = <span class="keyword">new</span> StampedLock();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">double</span> deltaX, <span class="keyword">double</span> deltaY)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> stamp = stampedLock.writeLock(); <span class="comment">// è·å–å†™é”</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            x += deltaX;</span><br><span class="line">            y += deltaY;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            stampedLock.unlockWrite(stamp); <span class="comment">// é‡Šæ”¾å†™é”</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">distanceFromOrigin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> stamp = stampedLock.tryOptimisticRead(); <span class="comment">// è·å¾—ä¸€ä¸ªä¹è§‚è¯»é”</span></span><br><span class="line">        <span class="comment">// æ³¨æ„ä¸‹é¢ä¸¤è¡Œä»£ç ä¸æ˜¯åŸå­æ“ä½œ</span></span><br><span class="line">        <span class="comment">// å‡è®¾x,y = (100,200)</span></span><br><span class="line">        <span class="keyword">double</span> currentX = x;</span><br><span class="line">        <span class="comment">// æ­¤å¤„å·²è¯»å–åˆ°x=100ï¼Œä½†x,yå¯èƒ½è¢«å†™çº¿ç¨‹ä¿®æ”¹ä¸º(300,400)</span></span><br><span class="line">        <span class="keyword">double</span> currentY = y;</span><br><span class="line">        <span class="comment">// æ­¤å¤„å·²è¯»å–åˆ°yï¼Œå¦‚æœæ²¡æœ‰å†™å…¥ï¼Œè¯»å–æ˜¯æ­£ç¡®çš„(100,200)</span></span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰å†™å…¥ï¼Œè¯»å–æ˜¯é”™è¯¯çš„(100,400)</span></span><br><span class="line">        <span class="keyword">if</span> (!stampedLock.validate(stamp)) &#123; <span class="comment">// æ£€æŸ¥ä¹è§‚è¯»é”åæ˜¯å¦æœ‰å…¶ä»–å†™é”å‘ç”Ÿ</span></span><br><span class="line">            stamp = stampedLock.readLock(); <span class="comment">// è·å–ä¸€ä¸ªæ‚²è§‚è¯»é”</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentX = x;</span><br><span class="line">                currentY = y;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                stampedLock.unlockRead(stamp); <span class="comment">// é‡Šæ”¾æ‚²è§‚è¯»é”</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.sqrt(currentX * currentX + currentY * currentY);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä»£ä»·"><a class="header-anchor" href="#ä»£ä»·">Â¶</a>ä»£ä»·</h5>
<ol>
<li>ä»£ç å¤æ‚</li>
<li>ä¸å¯é‡å…¥é”</li>
</ol>
<p>StampedLockè¿˜æä¾›äº†æ›´å¤æ‚çš„å°†æ‚²è§‚è¯»é”å‡çº§ä¸ºå†™é”çš„åŠŸèƒ½ï¼Œå®ƒä¸»è¦ä½¿ç”¨åœ¨if-then-updateçš„åœºæ™¯ï¼šå³å…ˆè¯»ï¼Œå¦‚æœè¯»çš„æ•°æ®æ»¡è¶³æ¡ä»¶ï¼Œå°±è¿”å›ï¼Œå¦‚æœè¯»çš„æ•°æ®ä¸æ»¡è¶³æ¡ä»¶ï¼Œå†å°è¯•å†™ã€‚</p>
<h1>Concurrenté›†åˆåŒ…</h1>
<p>çº¿ç¨‹å®‰å…¨ç‰ˆï¼Œæ“ä½œæ˜¯ä¸€æ ·çš„ã€‚</p>
<table>
<thead>
<tr>
<th>interface</th>
<th>non-thread-safe</th>
<th>thread-safe</th>
</tr>
</thead>
<tbody>
<tr>
<td>List</td>
<td>ArrayList</td>
<td>CopyOnWriteArrayList</td>
</tr>
<tr>
<td>Map</td>
<td>HashMap</td>
<td>ConcurrentHashMap</td>
</tr>
<tr>
<td>Set</td>
<td>HashSet/TreeSet</td>
<td>CopyOnWriteArraySet</td>
</tr>
<tr>
<td>Queue</td>
<td>ArrayDeque/LinkedList</td>
<td>ArrayBlocingQueue/LinkedBlockingQueue</td>
</tr>
<tr>
<td>Deque</td>
<td>ArrayDeque/LinkedList</td>
<td>LinkedBlockingQueue</td>
</tr>
</tbody>
</table>
<h4 id="çº¿ç¨‹å®‰å…¨é›†åˆè½¬æ¢å™¨"><a class="header-anchor" href="#çº¿ç¨‹å®‰å…¨é›†åˆè½¬æ¢å™¨">Â¶</a>çº¿ç¨‹å®‰å…¨é›†åˆè½¬æ¢å™¨</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map unsafeMap = <span class="keyword">new</span> HashMap();</span><br><span class="line">Map threadSafeMap = Collections.synchronizedMap(unsafeMap);</span><br></pre></td></tr></table></figure>
<p>å®ƒå®é™…ä¸Šæ˜¯ç”¨ä¸€ä¸ªåŒ…è£…ç±»åŒ…è£…äº†éçº¿ç¨‹å®‰å…¨çš„Mapï¼Œç„¶åå¯¹æ‰€æœ‰è¯»å†™æ–¹æ³•éƒ½ç”¨synchronizedåŠ é”ï¼Œè¿™æ ·è·å¾—çš„çº¿ç¨‹å®‰å…¨é›†åˆçš„æ€§èƒ½æ¯”java.util.concurrenté›†åˆè¦ä½å¾ˆå¤šï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨ã€‚</p>
<h1>Atomic åŸå­æ“ä½œå°è£…ç±»</h1>
<ol>
<li>æ— é”çš„çº¿ç¨‹å®‰å…¨</li>
<li>é€‚ç”¨äºè®¡æ•°å™¨ï¼Œç´¯åŠ å™¨<br>
å¦‚ï¼šçº¿ç¨‹å®‰å…¨çš„å…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IdGenerator</span> </span>&#123;</span><br><span class="line">    AtomicLong <span class="keyword">var</span> = <span class="keyword">new</span> AtomicLong(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getNextId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">var</span>.incrementAndGet();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥AtomicIntegerä¸ºä¾‹ï¼Œå®ƒæä¾›çš„ä¸»è¦æ“ä½œæœ‰ï¼š</p>
<ul>
<li>å¢åŠ å€¼å¹¶è¿”å›æ–°å€¼ï¼šint addAndGet(int delta)</li>
<li>è‡ªå¢å¹¶è¿”å›å€¼ï¼šint incrementAndGet()</li>
<li>è·å–å½“å‰å€¼ï¼šint get()</li>
<li>ç”¨CASæ–¹å¼è®¾ç½®ï¼šint compareAndSet(int expect, int update)</li>
</ul>
<p>CASæ˜¯æŒ‡ï¼Œåœ¨è¿™ä¸ªæ“ä½œä¸­ï¼Œå¦‚æœAtomicIntegerçš„å½“å‰å€¼æ˜¯prevï¼Œé‚£ä¹ˆå°±æ›´æ–°ä¸ºnextï¼Œè¿”å›trueã€‚å¦‚æœAtomicIntegerçš„å½“å‰å€¼ä¸æ˜¯prevï¼Œå°±ä»€ä¹ˆä¹Ÿä¸å¹²ï¼Œè¿”å›falseã€‚é€šè¿‡CASæ“ä½œå¹¶é…åˆdo â€¦ whileå¾ªç¯ï¼Œå³ä½¿å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†AtomicIntegerçš„å€¼ï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">incrementAndGet</span><span class="params">(AtomicInteger <span class="keyword">var</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> prev, next;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        prev = <span class="keyword">var</span>.get();</span><br><span class="line">        next = prev + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">while</span> ( ! <span class="keyword">var</span>.compareAndSet(prev, next));</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¤šçº¿ç¨‹ä¸€ï¼šè¯­è¨€çº§åˆ«çš„é”</title>
    <url>/2020/03/31/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<pre><code>ä¸€ä¸ªçº¿ç¨‹éƒ½æä¸å¥½ï¼Œæä»€ä¹ˆå¤šçº¿ç¨‹ã€‚
</code></pre>
<a id="more"></a>
<h1>1 åˆ›å»ºçº¿ç¨‹</h1>
<p>ç›´æ¥åˆ›å»ºå¾ˆç®€å• Thread a = new Thread();å°±æ˜¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡<br>
a.start()ï¼Œå¯åŠ¨å¤šçº¿ç¨‹ï¼Œä½†æ˜¯è¦åœ¨å­çº¿ç¨‹é‡Œè°ƒç”¨æ–¹æ³•ï¼Œè¦è¦†å†™run()æ–¹æ³•ï¼ŒåŒæ—¶ç»§æ‰¿Threadç±»æˆ–è€…ç»§æ‰¿runnableæ¥å£,æˆ–è€…ç”¨å‡½æ•°å¼ç¼–ç¨‹lambdaã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(<span class="keyword">new</span> MyRunnable());</span><br><span class="line">        t.start(); <span class="comment">// å¯åŠ¨æ–°çº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//lambda</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        t.start(); <span class="comment">// å¯åŠ¨æ–°çº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»§æ‰¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»§æ‰¿Runnableæ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start new thread!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="çº¿ç¨‹ä¼‘çœ "><a class="header-anchor" href="#çº¿ç¨‹ä¼‘çœ ">Â¶</a>çº¿ç¨‹ä¼‘çœ </h6>
<p>é™æ€æ–¹æ³•ï¼Œå•ä½æ˜¯æ¯«ç§’</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Thread.sleep(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<h6 id="è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§"><a class="header-anchor" href="#è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§">Â¶</a>è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</h6>
<p>1-10ï¼Œè¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">t.setPriority(<span class="number">10</span>);</span><br><span class="line">Thread.currentThread().setPriority(<span class="number">10</span>);</span><br><span class="line">è®¾ç½®å½“å‰çº¿ç¨‹</span><br></pre></td></tr></table></figure>
<h1>çº¿ç¨‹çš„çŠ¶æ€</h1>
<p>Newï¼šæ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œå°šæœªæ‰§è¡Œï¼›<br>
ğŸ‘‡<br>
Runnableï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œæ­£åœ¨æ‰§è¡Œrun()æ–¹æ³•çš„Javaä»£ç ï¼›<br>
Blockedï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæŸäº›æ“ä½œè¢«é˜»å¡è€ŒæŒ‚èµ·ï¼›<br>
Waitingï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæŸäº›æ“ä½œåœ¨ç­‰å¾…ä¸­ï¼›<br>
Timed Waitingï¼šè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œå› ä¸ºæ‰§è¡Œsleep()æ–¹æ³•æ­£åœ¨è®¡æ—¶ç­‰å¾…ï¼›<br>
ğŸ‘‡<br>
Terminatedï¼šçº¿ç¨‹å·²ç»ˆæ­¢ï¼Œå› ä¸ºrun()æ–¹æ³•æ‰§è¡Œå®Œæ¯•ã€‚</p>
<h4 id="çº¿ç¨‹ç»ˆæ­¢æ¡ä»¶"><a class="header-anchor" href="#çº¿ç¨‹ç»ˆæ­¢æ¡ä»¶">Â¶</a>çº¿ç¨‹ç»ˆæ­¢æ¡ä»¶</h4>
<p>çº¿ç¨‹æ­£å¸¸ç»ˆæ­¢ï¼šrun()æ–¹æ³•æ‰§è¡Œåˆ°returnè¯­å¥è¿”å›ï¼›<br>
çº¿ç¨‹æ„å¤–ç»ˆæ­¢ï¼šrun()æ–¹æ³•å› ä¸ºæœªæ•è·çš„å¼‚å¸¸å¯¼è‡´çº¿ç¨‹ç»ˆæ­¢ï¼›<br>
å¯¹æŸä¸ªçº¿ç¨‹çš„Threadå®ä¾‹è°ƒç”¨stop()æ–¹æ³•å¼ºåˆ¶ç»ˆæ­¢ï¼ˆå¼ºçƒˆä¸æ¨èä½¿ç”¨ï¼‰ã€‚</p>
<h4 id="t-join-å½“å‰çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹ç»“æŸæ‰æ‰§è¡Œ"><a class="header-anchor" href="#t-join-å½“å‰çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹ç»“æŸæ‰æ‰§è¡Œ">Â¶</a>t.join() å½“å‰çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹ç»“æŸæ‰æ‰§è¡Œ</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">"start"</span>);</span><br><span class="line">        t.start();</span><br><span class="line">        t.join();</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mainçº¿ç¨‹å…ˆæ‰“å°startï¼Œtçº¿ç¨‹å†æ‰“å°helloï¼Œmainçº¿ç¨‹æœ€åå†æ‰“å°endã€‚</p>
<ul>
<li>join(long)çš„é‡è½½æ–¹æ³•ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œè¶…è¿‡ç­‰å¾…æ—¶é—´åå°±ä¸å†ç»§ç»­ç­‰å¾…ã€‚</li>
</ul>
<h4 id="t-interrupt-å‘å‡ºä¸­æ–­è¯·æ±‚"><a class="header-anchor" href="#t-interrupt-å‘å‡ºä¸­æ–­è¯·æ±‚">Â¶</a>t.interrupt() å‘å‡ºä¸­æ–­è¯·æ±‚</h4>
<p>åªæ˜¯æ‰€åœ¨çº¿ç¨‹å‘å‡ºä¸­æ–­è¯·æ±‚ï¼Œè¦å“åº”ï¼Œè¿˜éœ€è¦åœ¨è¯¥çº¿ç¨‹æ£€æµ‹ isInterrupted()ã€‚</p>
<p>t.join() + t.interrupt() æŠ›å‡º InterruptedExceptionã€‚<br>
å¦‚æœçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¾‹å¦‚ï¼Œt.join()ä¼šè®©mainçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œå¦‚æœå¯¹mainçº¿ç¨‹è°ƒç”¨interrupt()ï¼Œjoin()æ–¹æ³•ä¼šç«‹åˆ»æŠ›å‡ºInterruptedExceptionï¼Œå› æ­¤ï¼Œç›®æ ‡çº¿ç¨‹åªè¦æ•è·åˆ°join()æ–¹æ³•æŠ›å‡ºçš„InterruptedExceptionï¼Œå°±è¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹å¯¹å…¶è°ƒç”¨äº†interrupt()æ–¹æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹è¯¥çº¿ç¨‹åº”è¯¥ç«‹åˆ»ç»“æŸè¿è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        t.interrupt(); <span class="comment">// ä¸­æ–­tçº¿ç¨‹</span></span><br><span class="line">        t.join(); <span class="comment">// ç­‰å¾…tçº¿ç¨‹ç»“æŸ</span></span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread hello = <span class="keyword">new</span> HelloThread();</span><br><span class="line">        hello.start(); <span class="comment">// å¯åŠ¨helloçº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            hello.join(); <span class="comment">// ç­‰å¾…helloçº¿ç¨‹ç»“æŸ</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"interrupted!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        hello.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!isInterrupted()) &#123;</span><br><span class="line">            n++;</span><br><span class="line">            System.out.println(n + <span class="string">" hello!"</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¦ä¸€ä¸ªä¸­æ–­è¯·æ±‚çš„æ–¹æ³•"><a class="header-anchor" href="#å¦ä¸€ä¸ªä¸­æ–­è¯·æ±‚çš„æ–¹æ³•">Â¶</a>å¦ä¸€ä¸ªä¸­æ–­è¯·æ±‚çš„æ–¹æ³•</h4>
<p>è®¾ç½®æ ‡å¿—ä½ï¼Œä½†æ˜¯è¦è®°å¾—ä½¿ç”¨ volatile å…³é”®å­—ï¼Œé¿å…æ ‡è¯†ä½æ— æ³•åŠæ—¶æ›´æ–°ï¼Œå³å¯è§æ€§é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>  <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        HelloThread t = <span class="keyword">new</span> HelloThread();</span><br><span class="line">        t.start();</span><br><span class="line">        Thread.sleep(<span class="number">1</span>);</span><br><span class="line">        t.running = <span class="keyword">false</span>; <span class="comment">// æ ‡å¿—ä½ç½®ä¸ºfalse</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> running = <span class="keyword">true</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (running) &#123;</span><br><span class="line">            n ++;</span><br><span class="line">            System.out.println(n + <span class="string">" hello!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"end!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆè¦å¯¹çº¿ç¨‹é—´å…±äº«çš„å˜é‡ç”¨å…³é”®å­—volatileå£°æ˜ï¼Ÿè¿™æ¶‰åŠåˆ°Javaçš„å†…å­˜æ¨¡å‹ã€‚åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå˜é‡çš„å€¼ä¿å­˜åœ¨ä¸»å†…å­˜ä¸­ï¼Œä½†æ˜¯ï¼Œå½“çº¿ç¨‹è®¿é—®å˜é‡æ—¶ï¼Œå®ƒä¼šå…ˆè·å–ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¿å­˜åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­ã€‚å¦‚æœçº¿ç¨‹ä¿®æ”¹äº†å˜é‡çš„å€¼ï¼Œè™šæ‹Ÿæœºä¼šåœ¨æŸä¸ªæ—¶åˆ»æŠŠä¿®æ”¹åçš„å€¼å›å†™åˆ°ä¸»å†…å­˜ï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯ä¸ç¡®å®šçš„ï¼</p>
<p>å› æ­¤ï¼Œvolatileå…³é”®å­—çš„ç›®çš„æ˜¯å‘Šè¯‰è™šæ‹Ÿæœºï¼š</p>
<ul>
<li>æ¯æ¬¡è®¿é—®å˜é‡æ—¶ï¼Œæ€»æ˜¯è·å–ä¸»å†…å­˜çš„æœ€æ–°å€¼ï¼›</li>
<li>æ¯æ¬¡ä¿®æ”¹å˜é‡åï¼Œç«‹åˆ»å›å†™åˆ°ä¸»å†…å­˜ã€‚</li>
</ul>
<p>volatileå…³é”®å­—è§£å†³çš„æ˜¯å¯è§æ€§é—®é¢˜ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ä¿®æ”¹åçš„å€¼ã€‚</p>
<h1>å®ˆæŠ¤çº¿ç¨‹</h1>
<p>ç”¨æ¥å…³é—­å‰©ä¸‹çš„å®šæ—¶è§¦å‘ä»»åŠ¡ä¹‹ç±»çš„çº¿ç¨‹ï¼Œç¡®ä¿JVMèƒ½æ­£å¸¸å…³é—­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Thread t = <span class="keyword">new</span> MyThread();</span><br><span class="line">t.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">t.start();</span><br></pre></td></tr></table></figure>
<p>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­ï¼Œç¼–å†™ä»£ç è¦æ³¨æ„ï¼šå®ˆæŠ¤çº¿ç¨‹ä¸èƒ½æŒæœ‰ä»»ä½•éœ€è¦å…³é—­çš„èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶ç­‰ï¼Œå› ä¸ºè™šæ‹Ÿæœºé€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ä»»ä½•æœºä¼šæ¥å…³é—­æ–‡ä»¶ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
<h1>çº¿ç¨‹åŒæ­¥</h1>
<p>å¤šçº¿ç¨‹æ¨¡å‹ä¸‹ï¼Œè¦ä¿è¯é€»è¾‘æ­£ç¡®ï¼Œå¯¹å…±äº«å˜é‡è¿›è¡Œè¯»å†™æ—¶ï¼Œå¿…é¡»ä¿è¯ä¸€ç»„æŒ‡ä»¤ä»¥åŸå­æ–¹å¼æ‰§è¡Œï¼šå³æŸä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼š<br>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”<br>
â”‚Thread1â”‚     â”‚Thread2â”‚<br>
â””â”€â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”¬â”€â”€â”€â”˜<br>
â”‚             â”‚<br>
â”‚-- lock â€“   â”‚<br>
â”‚ILOAD (100)  â”‚<br>
â”‚IADD         â”‚<br>
â”‚ISTORE (101) â”‚<br>
â”‚-- unlock â€“ â”‚<br>
â”‚             â”‚-- lock â€“<br>
â”‚             â”‚ILOAD (101)<br>
â”‚             â”‚IADD<br>
â”‚             â”‚ISTORE (102)<br>
â”‚             â”‚-- unlock â€“<br>
â–¼             â–¼<br>
åœ¨æ‰§è¡ŒæœŸçº¿ç¨‹è¢«æ“ä½œç³»ç»Ÿä¸­æ–­æ‰§è¡Œï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿä¼šå› ä¸ºæ— æ³•è·å¾—é”å¯¼è‡´æ— æ³•è¿›å…¥æ­¤æŒ‡ä»¤åŒºé—´ã€‚åªæœ‰æ‰§è¡Œçº¿ç¨‹å°†é”é‡Šæ”¾åï¼Œå…¶ä»–çº¿ç¨‹æ‰æœ‰æœºä¼šè·å¾—é”å¹¶æ‰§è¡Œã€‚è¿™ç§åŠ é”å’Œè§£é”ä¹‹é—´çš„ä»£ç å—æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸´ç•ŒåŒºï¼ˆCritical Sectionï¼‰ï¼Œä»»ä½•æ—¶å€™ä¸´ç•ŒåŒºæœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œã€‚</p>
<p>å¯è§ï¼Œä¿è¯ä¸€æ®µä»£ç çš„åŸå­æ€§å°±æ˜¯é€šè¿‡åŠ é”å’Œè§£é”å®ç°çš„ã€‚Javaç¨‹åºä½¿ç”¨synchronizedå…³é”®å­—å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡ŒåŠ é”ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(lock) &#123;</span><br><span class="line">    n = n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>synchronizedä¿è¯äº†ä»£ç å—åœ¨ä»»æ„æ—¶åˆ»æœ€å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> add = <span class="keyword">new</span> AddThread();</span><br><span class="line">        <span class="keyword">var</span> dec = <span class="keyword">new</span> DecThread();</span><br><span class="line">        add.start();</span><br><span class="line">        dec.start();</span><br><span class="line">        add.join();</span><br><span class="line">        dec.join();</span><br><span class="line">        System.out.println(Counter.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Counter.lock) &#123;</span><br><span class="line">                Counter.count += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DecThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Counter.lock) &#123;</span><br><span class="line">                Counter.count -= <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•ä½¿ç”¨synchronizedï¼š</p>
<ol>
<li>æ‰¾å‡ºä¿®æ”¹å…±äº«å˜é‡çš„çº¿ç¨‹ä»£ç å—ï¼›</li>
<li>é€‰æ‹©ä¸€ä¸ªå…±äº«å®ä¾‹ä½œä¸ºé”ï¼›</li>
<li>ä½¿ç”¨synchronized(lockObject) { â€¦ }ã€‚</li>
</ol>
<p>åœ¨ä½¿ç”¨synchronizedçš„æ—¶å€™ï¼Œä¸å¿…æ‹…å¿ƒæŠ›å‡ºå¼‚å¸¸ã€‚å› ä¸ºæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šåœ¨synchronizedç»“æŸå¤„æ­£ç¡®é‡Šæ”¾.</p>
<h3 id="ä¸éœ€è¦-synchronized-çš„æ“ä½œ"><a class="header-anchor" href="#ä¸éœ€è¦-synchronized-çš„æ“ä½œ">Â¶</a>ä¸éœ€è¦ synchronized çš„æ“ä½œ</h3>
<p>JVMè§„èŒƒå®šä¹‰äº†å‡ ç§åŸå­æ“ä½œï¼š</p>
<ol>
<li>åŸºæœ¬ç±»å‹ï¼ˆlongå’Œdoubleé™¤å¤–ï¼‰èµ‹å€¼ï¼Œä¾‹å¦‚ï¼šint n = mï¼›</li>
<li>å¼•ç”¨ç±»å‹èµ‹å€¼ï¼Œä¾‹å¦‚ï¼šList<String> list = anotherListã€‚<br>
longå’Œdoubleæ˜¯64ä½æ•°æ®ï¼ŒJVMæ²¡æœ‰æ˜ç¡®è§„å®š64ä½èµ‹å€¼æ“ä½œæ˜¯ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œä¸è¿‡åœ¨x64å¹³å°çš„JVMæ˜¯æŠŠlongå’Œdoubleçš„èµ‹å€¼ä½œä¸ºåŸå­æ“ä½œå®ç°çš„ã€‚</String></li>
</ol>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯å¤šè¡Œèµ‹å€¼è¯­å¥ï¼Œå°±å¿…é¡»ä¿è¯æ˜¯åŒæ­¥æ“ä½œï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> first;</span><br><span class="line">    <span class="keyword">int</span> last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> first, <span class="keyword">int</span> last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.first = first;</span><br><span class="line">            <span class="keyword">this</span>.last = last;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰äº›æ—¶å€™ï¼Œé€šè¿‡ä¸€äº›å·§å¦™çš„è½¬æ¢ï¼Œå¯ä»¥æŠŠéåŸå­æ“ä½œå˜ä¸ºåŸå­æ“ä½œã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°ä»£ç å¦‚æœæ”¹é€ æˆï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] pair;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> first, <span class="keyword">int</span> last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ps = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; first, last &#125;;</span><br><span class="line">        <span class="keyword">this</span>.pair = ps;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å°±ä¸å†éœ€è¦åŒæ­¥ï¼Œå› ä¸º<span class="keyword">this</span>.pair = psæ˜¯å¼•ç”¨èµ‹å€¼çš„åŸå­æ“ä½œã€‚è€Œè¯­å¥ï¼š</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ps = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; first, last &#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„psæ˜¯æ–¹æ³•å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰å„è‡ªçš„å±€éƒ¨å˜é‡ï¼Œäº’ä¸å½±å“ï¼Œå¹¶ä¸”äº’ä¸å¯è§ï¼Œå¹¶ä¸éœ€è¦åŒæ­¥ã€‚</p>
<h1>Javaçš„çº¿ç¨‹é”æ˜¯å¯é‡å…¥é”</h1>
<p>åŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–åŒä¸€ä¸ªé”ï¼Œè·å–é”çš„æ—¶å€™ï¼Œä¸ä½†è¦åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡è·å–ï¼Œè¿˜è¦è®°å½•è¿™æ˜¯ç¬¬å‡ æ¬¡è·å–ã€‚æ¯è·å–ä¸€æ¬¡é”ï¼Œè®°å½•+1ï¼Œæ¯é€€å‡ºsynchronizedå—ï¼Œè®°å½•-1ï¼Œå‡åˆ°0çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£é‡Šæ”¾é”ã€‚<br>
æ¯”å¦‚æ–¹æ³•é‡Œè¿˜è°ƒç”¨äº†æ–¹æ³•ï¼Œå½“å‰ä½¿ç”¨çš„é”å¯¹æ–°è°ƒç”¨çš„æ–¹æ³•ä¾ç„¶å¯ç”¨ã€‚</p>
<h1>æ­»é”</h1>
<p>ä¸¤ä¸ªçº¿ç¨‹éƒ½æƒ³è·å–å¯¹æ–¹çš„èµ„æºï¼Œå¯¼è‡´æ— é™çš„ç­‰å¾…ä¸‹å»ã€‚å³çº¿ç¨‹è·å–é”çš„é¡ºåºè¦ä¸€è‡´ã€‚å³ä¸¥æ ¼æŒ‰ç…§å…ˆè·å–lockAï¼Œå†è·å–lockBçš„é¡ºåºã€‚</p>
<h1>waitå’Œnotify</h1>
<p>å¤šçº¿ç¨‹åè°ƒè¿è¡Œçš„åŸåˆ™å°±æ˜¯ï¼šå½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼›å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹è¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œä»»åŠ¡ã€‚<br>
t.wait(): ä½¿çº¿ç¨‹è¿›å…¥ç­‰å¾…  åªæœ‰åœ¨å·²è·å¾—çš„é”å¯¹è±¡çš„å†…éƒ¨æ‰èƒ½è°ƒç”¨<br>
t.notify(), t.notifyAll(): å”¤é†’å…¶ä»–çº¿ç¨‹ï¼Œåªèƒ½åœ¨å·²è·å¾—é”å¯¹è±¡å†…éƒ¨è°ƒç”¨<br>
å”¤é†’ä¹‹åçš„çº¿ç¨‹ä¹Ÿè¦é‡æ–°è·å¾—é”å¯¹è±¡æ‰èƒ½ç»§ç»­æ‰§è¡Œ</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸‘æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/31/%E4%B8%91%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæŠŠåªåŒ…å«è´¨å› å­2ã€3å’Œ5çš„æ•°ç§°ä½œä¸‘æ•°ï¼ˆUgly Numberï¼‰ã€‚ä¾‹å¦‚6ã€8éƒ½æ˜¯ä¸‘æ•°ï¼Œä½†14ä¸æ˜¯ï¼Œå› ä¸ºå®ƒåŒ…å«è´¨å› å­7ã€‚ ä¹ æƒ¯ä¸Šæˆ‘ä»¬æŠŠ1å½“åšæ˜¯ç¬¬ä¸€ä¸ªä¸‘æ•°ã€‚æ±‚æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºçš„ç¬¬Nä¸ªä¸‘æ•°ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ åŠ¨æ€è§„åˆ’</h1>
<pre><code>ä¸€ä¸ªååˆ†å·§å¦™çš„åŠ¨æ€è§„åˆ’é—®é¢˜
1. æˆ‘ä»¬å°†å‰é¢æ±‚å¾—çš„ä¸‘æ•°è®°å½•ä¸‹æ¥ï¼Œåé¢çš„ä¸‘æ•°å°±æ˜¯å‰é¢çš„ä¸‘æ•°*2ï¼Œ*3ï¼Œ*5
2. ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œæˆ‘æ€ä¹ˆç¡®å®šå·²çŸ¥å‰é¢k-1ä¸ªä¸‘æ•°ï¼Œæˆ‘æ€ä¹ˆç¡®å®šç¬¬kä¸ªä¸‘æ•°å‘¢
3. é‡‡å–ç”¨ä¸‰ä¸ªæŒ‡é’ˆçš„æ–¹æ³•ï¼Œp2,p3,p5
4. index2æŒ‡å‘çš„æ•°å­—ä¸‹ä¸€æ¬¡æ°¸è¿œ*2ï¼Œp3æŒ‡å‘çš„æ•°å­—ä¸‹ä¸€æ¬¡æ°¸è¿œ*3ï¼Œp5æŒ‡å‘çš„æ•°å­—æ°¸è¿œ*5
5. æˆ‘ä»¬ä»2*p2 3*p3 5*p5é€‰å–æœ€å°çš„ä¸€ä¸ªæ•°å­—ï¼Œä½œä¸ºç¬¬kä¸ªä¸‘æ•°
6. å¦‚æœç¬¬Kä¸ªä¸‘æ•°==2*p2ï¼Œä¹Ÿå°±æ˜¯è¯´å‰é¢0-p2ä¸ªä¸‘æ•°*2ä¸å¯èƒ½äº§ç”Ÿæ¯”ç¬¬Kä¸ªä¸‘æ•°æ›´å¤§çš„ä¸‘æ•°äº†ï¼Œæ‰€ä»¥p2++
7. p3,p5åŒç†
8. è¿”å›ç¬¬nä¸ªä¸‘æ•°
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">GetUglyNumber_Solution</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(index == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> p2=<span class="number">0</span>,p3=<span class="number">0</span>,p5=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[index];</span><br><span class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;index;i++)&#123;</span><br><span class="line">            dp[i]=Math.min(dp[p2]*<span class="number">2</span>,Math.min(dp[p3]*<span class="number">3</span>,dp[p5]*<span class="number">5</span>));</span><br><span class="line">            <span class="keyword">if</span>(dp[i]==dp[p2]*<span class="number">2</span>) p2++;</span><br><span class="line">            <span class="keyword">if</span>(dp[i]==dp[p3]*<span class="number">3</span>) p3++;</span><br><span class="line">            <span class="keyword">if</span>(dp[i]==dp[p5]*<span class="number">5</span>) p5++; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[index-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/31/%E6%8A%8A%E6%95%B0%E7%BB%84%E6%8E%92%E6%88%90%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚ä¾‹å¦‚è¾“å…¥æ•°ç»„{3ï¼Œ32ï¼Œ321}ï¼Œåˆ™æ‰“å°å‡ºè¿™ä¸‰ä¸ªæ•°å­—èƒ½æ’æˆçš„æœ€å°æ•°å­—ä¸º321323ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>æ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.lang.StringBuilder;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">PrintMinNumber</span><span class="params">(<span class="keyword">int</span> [] numbers)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: numbers)&#123;</span><br><span class="line">            aList.add(String.valueOf(i));</span><br><span class="line">        &#125;</span><br><span class="line">        aList.sort((x,y)-&gt; (x+y).compareTo(y+x));</span><br><span class="line">        StringBuilder str = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(String s:aList)&#123;</span><br><span class="line">            str.append(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/30/%E6%95%B4%E6%95%B0%E4%B8%AD1%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ±‚å‡ºä»»æ„éè´Ÿæ•´æ•°åŒºé—´ä¸­1å‡ºç°çš„æ¬¡æ•°ï¼ˆä»1 åˆ° n ä¸­1å‡ºç°çš„æ¬¡æ•°ï¼‰ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£1 è½¬æˆå­—ç¬¦ä¸²</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">NumberOf1Between1AndN_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            result += numberof1(n);</span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numberof1</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> c: Integer.toString(a).toCharArray())&#123;</span><br><span class="line">            <span class="keyword">if</span>(c==<span class="string">'1'</span>) count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£2 æ€»ç»“æ¯ä½å‡ºç°1çš„ä¸ªæ•°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">NumberOf1Between1AndN_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(n &lt;= <span class="number">0</span>)</span><br><span class="line">             <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">long</span> i = <span class="number">1</span>; i &lt;= n; i *= <span class="number">10</span>)&#123;</span><br><span class="line">             <span class="keyword">long</span> diviver = i * <span class="number">10</span>;           </span><br><span class="line">             count += (n / diviver) * i + Math.min(Math.max(n % diviver - i + <span class="number">1</span>, <span class="number">0</span>), i);</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="keyword">return</span> count;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£3 æ€»ç»“æ¯ä½å‡ºç°1çš„ä¸ªæ•°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">NumberOf1Between1AndN_Solution</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> m = <span class="number">1</span>; m &lt;= n; m *= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">long</span> a = n / m;</span><br><span class="line">            <span class="keyword">long</span> b = n % m;</span><br><span class="line">            res += (a + <span class="number">8</span>) / <span class="number">10</span> * m + (a % <span class="number">10</span> == <span class="number">1</span> ? b + <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/29/%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™ä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›å®ƒçš„æœ€å¤§è¿ç»­å­åºåˆ—çš„å’Œ(å­å‘é‡çš„é•¿åº¦è‡³å°‘æ˜¯1)
</code></pre>
<a id="more"></a>
<pre><code>åŠ¨æ€è§„åˆ’, d[0] = array[0] 
         d[i] = max(d[i-1]+array[i],array[i]) i&gt;0;

ç®€åŒ–ä¸€ç‚¹,çœä¸ªæ•°ç»„ï¼š
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">int</span> <span class="title">FindGreatestSumOfSubArray</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = array[<span class="number">0</span>]; <span class="comment">//è®°å½•å½“å‰æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">int</span> max=array[<span class="number">0</span>];   <span class="comment">//åŒ…å«array[i]çš„è¿ç»­æ•°ç»„æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            max=Math.max(max+array[i], array[i]);</span><br><span class="line">            res=Math.max(max, res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²çš„æ’åˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/29/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²,æŒ‰å­—å…¸åºæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚ä¾‹å¦‚è¾“å…¥å­—ç¬¦ä¸²abc,åˆ™æ‰“å°å‡ºç”±å­—ç¬¦a,b,cæ‰€èƒ½æ’åˆ—å‡ºæ¥çš„æ‰€æœ‰å­—ç¬¦ä¸²abc,acb,bac,bca,cabå’Œcbaã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ é€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹äºæ— é‡å¤å€¼çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * å›ºå®šç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œé€’å½’å–å¾—é¦–ä½åé¢çš„å„ç§å­—ç¬¦ä¸²ç»„åˆï¼›</span></span><br><span class="line"><span class="comment">     * å†æŠŠç¬¬ä¸€ä¸ªå­—ç¬¦ä¸åé¢æ¯ä¸€ä¸ªå­—ç¬¦äº¤æ¢ï¼Œå¹¶åŒæ ·é€’å½’è·å¾—é¦–ä½åé¢çš„å­—ç¬¦ä¸²ç»„åˆï¼› *é€’å½’çš„å‡ºå£ï¼Œå°±æ˜¯åªå‰©ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œé€’å½’çš„å¾ªç¯è¿‡ç¨‹ï¼Œå°±æ˜¯ä»æ¯ä¸ªå­ä¸²çš„ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹ä¾æ¬¡ä¸ç¬¬ä¸€ä¸ªå­—ç¬¦äº¤æ¢ï¼Œç„¶åç»§ç»­å¤„ç†å­ä¸²ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * å‡å¦‚æœ‰é‡å¤å€¼å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">     * *ç”±äºå…¨æ’åˆ—å°±æ˜¯ä»ç¬¬ä¸€ä¸ªæ•°å­—èµ·ï¼Œæ¯ä¸ªæ•°åˆ†åˆ«ä¸å®ƒåé¢çš„æ•°å­—äº¤æ¢ï¼Œæˆ‘ä»¬å…ˆå°è¯•åŠ ä¸ªè¿™æ ·çš„åˆ¤æ–­â€”â€”å¦‚æœä¸€ä¸ªæ•°ä¸åé¢çš„æ•°å­—ç›¸åŒé‚£ä¹ˆè¿™ä¸¤ä¸ªæ•°å°±ä¸äº¤æ¢äº†ã€‚</span></span><br><span class="line"><span class="comment">     * ä¾‹å¦‚abbï¼Œç¬¬ä¸€ä¸ªæ•°ä¸åé¢ä¸¤ä¸ªæ•°äº¤æ¢å¾—babï¼Œbbaã€‚ç„¶åabbä¸­ç¬¬äºŒä¸ªæ•°å’Œç¬¬ä¸‰ä¸ªæ•°ç›¸åŒï¼Œå°±ä¸ç”¨äº¤æ¢äº†ã€‚</span></span><br><span class="line"><span class="comment">     * ä½†æ˜¯å¯¹babï¼Œç¬¬äºŒä¸ªæ•°å’Œç¬¬ä¸‰ä¸ªæ•°ä¸ åŒï¼Œåˆ™éœ€è¦äº¤æ¢ï¼Œå¾—åˆ°bbaã€‚</span></span><br><span class="line"><span class="comment">     * ç”±äºè¿™é‡Œçš„bbaå’Œå¼€å§‹ç¬¬ä¸€ä¸ªæ•°ä¸ç¬¬ä¸‰ä¸ªæ•°äº¤æ¢çš„ç»“æœç›¸åŒäº†ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ³•ä¸è¡Œã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * æ¢ç§æ€ç»´ï¼Œå¯¹abbï¼Œç¬¬ä¸€ä¸ªæ•°aä¸ç¬¬äºŒä¸ªæ•°bäº¤æ¢å¾—åˆ°babï¼Œç„¶åè€ƒè™‘ç¬¬ä¸€ä¸ªæ•°ä¸ç¬¬ä¸‰ä¸ªæ•°äº¤æ¢ï¼Œæ­¤æ—¶ç”±äºç¬¬ä¸‰ä¸ªæ•°ç­‰äºç¬¬äºŒä¸ªæ•°ï¼Œ</span></span><br><span class="line"><span class="comment">     * æ‰€ä»¥ç¬¬ä¸€ä¸ªæ•°å°±ä¸å†ç”¨ä¸ç¬¬ä¸‰ä¸ªæ•°äº¤æ¢äº†ã€‚å†è€ƒè™‘babï¼Œå®ƒçš„ç¬¬äºŒä¸ªæ•°ä¸ç¬¬ä¸‰ä¸ªæ•°äº¤æ¢å¯ä»¥è§£å†³bbaã€‚æ­¤æ—¶å…¨æ’åˆ—ç”Ÿæˆå®Œæ¯•ï¼</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">Permutation</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;String&gt; alist = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(str!=<span class="keyword">null</span>&amp;&amp;str.length()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            PermutationHelper(alist,str.toCharArray(),i);</span><br><span class="line">            Collections.sort(alist);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> alist;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PermutationHelper</span><span class="params">(ArrayList&lt;String&gt; alist,<span class="keyword">char</span>[] str,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == str.length-<span class="number">1</span>)&#123;</span><br><span class="line">            alist.add(String.valueOf(str));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        HashSet&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤å­—æ¯</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i;j&lt;str.length;++j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j==i||!set.contains(str[j]))&#123;</span><br><span class="line">                set.add(str[j]);</span><br><span class="line">                swap(str,i,j);</span><br><span class="line">                PermutationHelper(alist, str, i+<span class="number">1</span>);</span><br><span class="line">                swap(str,j,i);                        <span class="comment">//äº¤æ¢å›åŸæ¥çš„å­—ç¬¦ä¸²ä»¥æ»¡è¶³ä¸Šå±‚å¾ªç¯çš„æ¡ä»¶</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">char</span>[]str, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">char</span> temp = str[a];</span><br><span class="line">        str[a] = str[b];</span><br><span class="line">        str[b] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/28/%E6%95%B0%E7%BB%84%E4%B8%AD%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0%E8%B6%85%E8%BF%87%E4%B8%80%E5%8D%8A%E7%9A%84%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚ä¾‹å¦‚è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º9çš„æ•°ç»„{1,2,3,2,2,2,5,4,2}ã€‚ç”±äºæ•°å­—2åœ¨æ•°ç»„ä¸­å‡ºç°äº†5æ¬¡ï¼Œè¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œå› æ­¤è¾“å‡º2ã€‚å¦‚æœä¸å­˜åœ¨åˆ™è¾“å‡º0ã€‚
</code></pre>
<a id="more"></a>
<h1>è§£æ³•ä¸€ hashmap</h1>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br>
ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MoreThanHalfNum_Solution</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length == <span class="number">0</span> || array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        HashMap&lt;Integer,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: array)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(i))&#123;</span><br><span class="line">                map.put(i,<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                map.put(i,map.get(i)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: array) &#123;</span><br><span class="line">        	<span class="keyword">int</span> max = map.get(i);</span><br><span class="line">            <span class="keyword">if</span>(max&gt;(array.length&gt;&gt;<span class="number">1</span>))&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è§£æ³•äºŒ partition</h1>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)<br>
ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MoreThanHalfNum_Solution</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length == <span class="number">0</span> || array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(array.length == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> length = array.length;</span><br><span class="line">        <span class="keyword">int</span> middle = length&gt;&gt;<span class="number">1</span>;<span class="keyword">int</span> left = <span class="number">0</span>;<span class="keyword">int</span> right = length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> i = partition(array, left, right);</span><br><span class="line">        <span class="keyword">while</span>(i!=middle)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;middle)&#123;</span><br><span class="line">                right = i - <span class="number">1</span>;</span><br><span class="line">                i = partition(array,left, right);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                left = i + <span class="number">1</span>;</span><br><span class="line">                i = partition(array, left, right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = array[i];</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> a:array)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a==result)&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count&gt;(length&gt;&gt;<span class="number">1</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = left+<span class="number">1</span>;<span class="keyword">int</span> j = right;</span><br><span class="line">        <span class="keyword">int</span> flag = array[left];</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">            <span class="keyword">while</span>(array[i]&lt;=flag) </span><br><span class="line">                <span class="keyword">if</span>(i&lt;right)&#123;</span><br><span class="line">                    ++i;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">while</span>(array[j]&gt;flag) --j;</span><br><span class="line">            swap(array, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(array, left, i);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = array[a];</span><br><span class="line">        array[a] = array[b];</span><br><span class="line">        array[b] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£ä¸‰ï¼šæ‘©å°”æŠ•ç¥¨æ³•</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MoreThanHalfNum_Solution</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length == <span class="number">0</span> || array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> votes = <span class="number">1</span>;<span class="keyword">int</span> num = array[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(votes==<span class="number">0</span>)&#123;</span><br><span class="line">               num = array[i];</span><br><span class="line">               votes = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            votes += (array[i]==num)? <span class="number">1</span>:-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: array)&#123;</span><br><span class="line">            count += (i==num) ? <span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count &gt; (array.length &gt;&gt;<span class="number">1</span>)) <span class="keyword">return</span> num;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å°çš„kä¸ªæ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/27/%E6%9C%80%E5%B0%8F%E7%9A%84k%E4%B8%AA%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥nä¸ªæ•´æ•°ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„Kä¸ªæ•°ã€‚ä¾‹å¦‚è¾“å…¥4,5,1,6,2,7,3,8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1,2,3,4,ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£1 å¿«æ’partition</h1>
<p>å¯ä»¥æ‰¾åˆ°ç¬¬må¤§çš„æ•°ï¼Œç„¶åä¸kæ¯”è¾ƒï¼Œä»è€Œé€’å½’åˆ’åˆ†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] getLeastNumbers(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr.length &lt;= k) &#123;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åŸåœ°ä¸æ–­åˆ’åˆ†æ•°ç»„</span></span><br><span class="line">    partitionArray(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>, k);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ•°ç»„çš„å‰ k ä¸ªæ•°æ­¤æ—¶å°±æ˜¯æœ€å°çš„ k ä¸ªæ•°ï¼Œå°†å…¶å­˜å…¥ç»“æœ</span></span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[k];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">        res[i] = arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">partitionArray</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åšä¸€æ¬¡ partition æ“ä½œ</span></span><br><span class="line">    <span class="keyword">int</span> m = partition(arr, lo, hi);</span><br><span class="line">    <span class="comment">// æ­¤æ—¶æ•°ç»„å‰ m ä¸ªæ•°ï¼Œå°±æ˜¯æœ€å°çš„ m ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">if</span> (k == m) &#123;</span><br><span class="line">        <span class="comment">// æ­£å¥½æ‰¾åˆ°æœ€å°çš„ k(m) ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k &lt; m) &#123;</span><br><span class="line">        <span class="comment">// æœ€å°çš„ k ä¸ªæ•°ä¸€å®šåœ¨å‰ m ä¸ªæ•°ä¸­ï¼Œé€’å½’åˆ’åˆ†</span></span><br><span class="line">        partitionArray(arr, lo, m-<span class="number">1</span>, k);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨å³ä¾§æ•°ç»„ä¸­å¯»æ‰¾æœ€å°çš„ k-m ä¸ªæ•°</span></span><br><span class="line">        partitionArray(arr, m+<span class="number">1</span>, hi, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// partition å‡½æ•°å’Œå¿«é€Ÿæ’åºä¸­ç›¸åŒï¼Œå…·ä½“å¯å‚è€ƒå¿«é€Ÿæ’åºç›¸å…³çš„èµ„æ–™</span></span><br><span class="line"><span class="comment">// ä»£ç å‚è€ƒ Sedgewick çš„ã€Šç®—æ³•4ã€‹</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = lo;</span><br><span class="line">    <span class="keyword">int</span> j = hi + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> v = a[lo];</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123; </span><br><span class="line">        <span class="keyword">while</span> (a[++i] &lt; v) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == hi) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (a[--j] &gt; v) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j == lo) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    swap(a, lo, j);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a[lo .. j-1] &lt;= a[j] &lt;= a[j+1 .. hi]</span></span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = a[i];</span><br><span class="line">    a[i] = a[j];</span><br><span class="line">    a[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç®—æ³•çš„å¤æ‚åº¦åˆ†æï¼š</p>
<ul>
<li>ç©ºé—´å¤æ‚åº¦<br>
O(1)ï¼Œä¸éœ€è¦é¢å¤–ç©ºé—´ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦çš„åˆ†ææ–¹æ³•å’Œå¿«é€Ÿæ’åºç±»ä¼¼ã€‚ç”±äºå¿«é€Ÿé€‰æ‹©åªéœ€è¦é€’å½’ä¸€è¾¹çš„æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦å°äºå¿«é€Ÿæ’åºï¼ŒæœŸæœ›æ—¶é—´å¤æ‚åº¦ä¸º<br>
O(n)ï¼Œæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n2)ã€‚</li>
</ul>
<h1>é¢˜è§£2 æœ€å¤§å †</h1>
<p>æ¯æ¬¡æ‹¿æ•°ç»„é‡Œçš„æ•°ä¸å †é¡¶æ¯”è¾ƒï¼Œå°äºå †é¡¶åˆ™æ’å…¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] getLeastNumbers(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸€ä¸ªæœ€å¤§å †ï¼ˆå¤§é¡¶å †ï¼‰</span></span><br><span class="line">    <span class="comment">// Java çš„ PriorityQueue é»˜è®¤æ˜¯å°é¡¶å †ï¼Œæ·»åŠ  comparator å‚æ•°ä½¿å…¶å˜æˆæœ€å¤§å †</span></span><br><span class="line">    Queue&lt;Integer&gt; heap = <span class="keyword">new</span> PriorityQueue&lt;&gt;(k, (i1, i2) -&gt; Integer.compare(i2, i1));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> e : arr) &#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ•°å­—å°äºå †é¡¶å…ƒç´ æ‰ä¼šå…¥å †</span></span><br><span class="line">        <span class="keyword">if</span> (heap.isEmpty() || heap.size() &lt; k || e &lt; heap.peek()) &#123;</span><br><span class="line">            heap.offer(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (heap.size() &gt; k) &#123;</span><br><span class="line">            heap.poll(); <span class="comment">// åˆ é™¤å †é¡¶æœ€å¤§å…ƒç´ </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å †ä¸­çš„å…ƒç´ å­˜å…¥æ•°ç»„</span></span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[heap.size()];</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> e : heap) &#123;</span><br><span class="line">        res[j++] = e;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(k)<br>
æ—¶é—´å¤æ‚åº¦ï¼šå•æ¬¡æ“ä½œï¼ŒO(logk)ã€‚æ•…æ€»å¤æ‚åº¦ï¼šO(nlogk)</p>
<p>ä¸¤ç§æ–¹æ³•çš„ä¼˜åŠ£æ€§æ¯”è¾ƒ<br>
åœ¨é¢è¯•ä¸­ï¼Œå¦ä¸€ä¸ªå¸¸å¸¸é—®çš„é—®é¢˜å°±æ˜¯è¿™ä¸¤ç§æ–¹æ³•æœ‰ä½•ä¼˜åŠ£ã€‚çœ‹èµ·æ¥åˆ†æ²»æ³•çš„å¿«é€Ÿé€‰æ‹©ç®—æ³•çš„æ—¶é—´ã€ç©ºé—´å¤æ‚åº¦éƒ½ä¼˜äºä½¿ç”¨å †çš„æ–¹æ³•ï¼Œä½†æ˜¯è¦æ³¨æ„åˆ°å¿«é€Ÿé€‰æ‹©ç®—æ³•çš„å‡ ç‚¹å±€é™æ€§ï¼š<br>
ç¬¬ä¸€ï¼Œç®—æ³•éœ€è¦ä¿®æ”¹åŸæ•°ç»„ï¼Œå¦‚æœåŸæ•°ç»„ä¸èƒ½ä¿®æ”¹çš„è¯ï¼Œè¿˜éœ€è¦æ‹·è´ä¸€ä»½æ•°ç»„ï¼Œç©ºé—´å¤æ‚åº¦å°±ä¸Šå»äº†ã€‚<br>
ç¬¬äºŒï¼Œç®—æ³•éœ€è¦ä¿å­˜æ‰€æœ‰çš„æ•°æ®ã€‚å¦‚æœæŠŠæ•°æ®çœ‹æˆè¾“å…¥æµçš„è¯ï¼Œä½¿ç”¨å †çš„æ–¹æ³•æ˜¯æ¥ä¸€ä¸ªå¤„ç†ä¸€ä¸ªï¼Œä¸éœ€è¦ä¿å­˜æ•°æ®ï¼Œåªéœ€è¦ä¿å­˜ k ä¸ªå…ƒç´ çš„æœ€å¤§å †ã€‚è€Œå¿«é€Ÿé€‰æ‹©çš„æ–¹æ³•éœ€è¦å…ˆä¿å­˜ä¸‹æ¥æ‰€æœ‰çš„æ•°æ®ï¼Œå†è¿è¡Œç®—æ³•ã€‚å½“æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œç”šè‡³å†…å­˜éƒ½æ”¾ä¸ä¸‹çš„æ—¶å€™ï¼Œå°±éº»çƒ¦äº†ã€‚æ‰€ä»¥å½“æ•°æ®é‡å¤§çš„æ—¶å€™è¿˜æ˜¯ç”¨åŸºäºå †çš„æ–¹æ³•æ¯”è¾ƒå¥½ã€‚</p>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/27/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œå°†è¯¥äºŒå‰æœç´¢æ ‘è½¬æ¢æˆä¸€ä¸ªæ’åºçš„åŒå‘é“¾è¡¨ã€‚è¦æ±‚ä¸èƒ½åˆ›å»ºä»»ä½•æ–°çš„ç»“ç‚¹ï¼Œåªèƒ½è°ƒæ•´æ ‘ä¸­ç»“ç‚¹æŒ‡é’ˆçš„æŒ‡å‘ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ 1 éé€’å½’</h1>
<p>ä¸­åºéå†äºŒå‰æœç´¢æ ‘ï¼Œæ‰èƒ½æŒ‰ç…§æ’åºï¼Œè®¿é—®ç»“ç‚¹<br>
ä½¿ç”¨ä¸€ä¸ªç»“ç‚¹è®°å½•å‰ä¸€ä¸ªç»“ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">Convert</span><span class="params">(TreeNode pRootOfTree)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pRootOfTree == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        TreeNode node = pRootOfTree;</span><br><span class="line">        TreeNode pre = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">boolean</span> isFirst = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span>(node!=<span class="keyword">null</span>||!stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(node!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.offerFirst(node);</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125;</span><br><span class="line">            node = stack.pollFirst();</span><br><span class="line">            <span class="keyword">if</span>(isFirst)&#123;</span><br><span class="line">                pRootOfTree = node;</span><br><span class="line">                pre = pRootOfTree;</span><br><span class="line">                isFirst = <span class="keyword">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                pre.right = node; </span><br><span class="line">                node.left = pre; <span class="comment">//å½“å‰ç»“ç‚¹åªèƒ½è…¾å‡ºå·¦è¾¹</span></span><br><span class="line">                pre = node;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pRootOfTree;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é€’å½’"><a class="header-anchor" href="#é€’å½’">Â¶</a>é€’å½’</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    TreeNode pre = <span class="keyword">null</span>;</span><br><span class="line">    TreeNode root = <span class="keyword">null</span>;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">Convert</span><span class="params">(TreeNode pRootOfTree)</span> </span>&#123;</span><br><span class="line">        travel(pRootOfTree);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">travel</span><span class="params">(TreeNode pRootOfTree)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pRootOfTree == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">        travel(pRootOfTree.left);</span><br><span class="line">        <span class="keyword">if</span>(pre== <span class="keyword">null</span>)&#123;</span><br><span class="line">            root = pRootOfTree;</span><br><span class="line">            pre = root;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pre.right = pRootOfTree;</span><br><span class="line">            pRootOfTree.left = pre;</span><br><span class="line">            pre = pRootOfTree;</span><br><span class="line">        &#125;</span><br><span class="line">        travel(pRootOfTree.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨äººçš„è¿åŠ¨èŒƒå›´ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/25/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%B5%B0%E8%BF%87%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ°ä¸Šæœ‰ä¸€ä¸ªmè¡Œå’Œnåˆ—çš„æ–¹æ ¼ã€‚ä¸€ä¸ªæœºå™¨äººä»åæ ‡0,0çš„æ ¼å­å¼€å§‹ç§»åŠ¨ï¼Œæ¯ä¸€æ¬¡åªèƒ½å‘å·¦ï¼Œå³ï¼Œä¸Šï¼Œä¸‹å››ä¸ªæ–¹å‘ç§»åŠ¨ä¸€æ ¼ï¼Œä½†æ˜¯ä¸èƒ½è¿›å…¥è¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œå¤§äºkçš„æ ¼å­ã€‚ ä¾‹å¦‚ï¼Œå½“kä¸º18æ—¶ï¼Œæœºå™¨äººèƒ½å¤Ÿè¿›å…¥æ–¹æ ¼ï¼ˆ35,37ï¼‰ï¼Œå› ä¸º3+5+3+7 = 18ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½è¿›å…¥æ–¹æ ¼ï¼ˆ35,38ï¼‰ï¼Œå› ä¸º3+5+3+8 = 19ã€‚è¯·é—®è¯¥æœºå™¨äººèƒ½å¤Ÿè¾¾åˆ°å¤šå°‘ä¸ªæ ¼å­ï¼Ÿ
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ DFS</h1>
<p>ä»å·¦å¾€å³ï¼Œä»ä¸Šåˆ°ä¸‹é€’å½’éå†ã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> threshold, rows, cols;</span><br><span class="line">    <span class="keyword">boolean</span>[][] visited;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">movingCount</span><span class="params">(<span class="keyword">int</span> threshold, <span class="keyword">int</span> rows, <span class="keyword">int</span> cols)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.threshold = threshold;<span class="keyword">this</span>.rows = rows;<span class="keyword">this</span>.cols = cols;</span><br><span class="line">        <span class="keyword">this</span>.visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[rows][cols];</span><br><span class="line">        <span class="keyword">return</span> DFS(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€’å½’è®¡ç®—æ¬¡æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> rowSum,<span class="keyword">int</span> colSum)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span>||i&gt;=rows||j&lt;<span class="number">0</span>||j&gt;=cols||rowSum + colSum&gt;threshold||visited[i][j]) <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">        visited[i][j] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>+DFS(i+<span class="number">1</span>,j,digitSum(i+<span class="number">1</span>),colSum)+DFS(i,j+<span class="number">1</span>,rowSum,digitSum(j+<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è®¡ç®—ä½æ•°å’Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">digitSum</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(num!=<span class="number">0</span>)&#123;</span><br><span class="line">            sum += num%<span class="number">10</span>;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é¢˜è§£äºŒ-BFS"><a class="header-anchor" href="#é¢˜è§£äºŒ-BFS">Â¶</a>é¢˜è§£äºŒ BFS</h2>
<p>ä½¿ç”¨é˜Ÿåˆ—ï¼Œè®°å½•å‚æ•°ï¼Œä¾å±‚æ¬¡æ‰©å±•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">movingCount</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span>[][] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[m][n];</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue= <span class="keyword">new</span> LinkedList&lt;<span class="keyword">int</span>[]&gt;();</span><br><span class="line">        queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> &#125;);</span><br><span class="line">        <span class="keyword">while</span>(queue.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] x = queue.poll();</span><br><span class="line">            <span class="keyword">int</span> i = x[<span class="number">0</span>], j = x[<span class="number">1</span>], si = x[<span class="number">2</span>], sj = x[<span class="number">3</span>];</span><br><span class="line">            <span class="keyword">if</span>(i &lt; <span class="number">0</span> || i &gt;= m || j &lt; <span class="number">0</span> || j &gt;= n || k &lt; si + sj || visited[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">            visited[i][j] = <span class="keyword">true</span>;</span><br><span class="line">            res ++;</span><br><span class="line">            queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i + <span class="number">1</span>, j, digitSum(i+<span class="number">1</span>), sj &#125;);</span><br><span class="line">            queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123; i, j + <span class="number">1</span>, si, digitSum(j+<span class="number">1</span>) &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¡ç®—ä½æ•°å’Œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">digitSum</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(num!=<span class="number">0</span>)&#123;</span><br><span class="line">            sum += num%<span class="number">10</span>;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/25/%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%92%8C%E4%B8%BA%E6%9F%90%E4%B8%80%E5%80%BC%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€é¢—äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å’Œä¸€ä¸ªæ•´æ•°ï¼Œæ‰“å°å‡ºäºŒå‰æ ‘ä¸­ç»“ç‚¹å€¼çš„å’Œä¸ºè¾“å…¥æ•´æ•°çš„æ‰€æœ‰è·¯å¾„ã€‚è·¯å¾„å®šä¹‰ä¸ºä»æ ‘çš„æ ¹ç»“ç‚¹å¼€å§‹å¾€ä¸‹ä¸€ç›´åˆ°å¶ç»“ç‚¹æ‰€ç»è¿‡çš„ç»“ç‚¹å½¢æˆä¸€æ¡è·¯å¾„ã€‚(æ³¨æ„: åœ¨è¿”å›å€¼çš„listä¸­ï¼Œæ•°ç»„é•¿åº¦å¤§çš„æ•°ç»„é å‰)
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼š</h1>
<p>åˆ›å»ºä¸¤ä¸ªArrayListï¼Œä¸€ä¸ªç”¨æ¥å­˜æ‰€æœ‰è·¯å¾„resultï¼Œä¸€ä¸ªç”¨æ¥å­˜ç»“ç‚¹curã€‚<br>
åˆ©ç”¨äºŒå‰æ ‘çš„å‰åºéå†ï¼Œå› ä¸ºå‰åºéå†æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„ã€‚<br>
æ¯ç»è¿‡ä¸€ä¸ªç»“ç‚¹ï¼Œå°±å°†ç»“ç‚¹æ”¾å…¥curï¼Œç„¶åé€’å½’çš„è°ƒç”¨å·¦å­æ ‘å’Œå³å­æ ‘ï¼ŒåŒæ—¶ç›®æ ‡å€¼åº”è¯¥å‡å»å½“å‰åŠ å…¥ç»“ç‚¹çš„å€¼ã€‚<br>
ç»ˆæ­¢æ¡ä»¶æ˜¯ç›®æ ‡å€¼å’Œå½“å‰ç»“ç‚¹çš„å€¼ç›¸ç­‰ï¼Œä¸”è¯¥ç»“ç‚¹ä¸ºå¶å­ç»“ç‚¹ã€‚è‹¥Trueï¼Œè¯´æ˜å½“å‰è·¯å¾„ç¬¦åˆæ¡ä»¶ï¼ŒåŠ å…¥resultä¸­ã€‚<br>
æœ€åéœ€è¦æ’åºï¼Œå› ä¸ºè¦æ±‚è¿”å›çš„listä¸­ï¼Œæ•°ç»„é•¿åº¦å¤§çš„æ•°ç»„é å‰ã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; FindPath(TreeNode root,<span class="keyword">int</span> target) &#123;</span><br><span class="line">        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        ArrayList&lt;Integer&gt; cur=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">        helper(root,target,cur,res);</span><br><span class="line">        Collections.sort(res, <span class="keyword">new</span> Comparator&lt;ArrayList&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(ArrayList&lt;Integer&gt; o1, ArrayList&lt;Integer&gt; o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (o1.size()&lt;o2.size())&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode root,<span class="keyword">int</span> target,ArrayList&lt;Integer&gt; cur,ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root==<span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> value=root.val;</span><br><span class="line">        cur.add(value);</span><br><span class="line">        <span class="keyword">if</span> (target==value&amp;&amp;root.left==<span class="keyword">null</span>&amp;&amp;root.right==<span class="keyword">null</span>)&#123;</span><br><span class="line">            res.add(<span class="keyword">new</span> ArrayList&lt;&gt;(cur));</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            helper(root.left,target-value,cur,res);</span><br><span class="line">            helper(root.right,target-value,cur,res);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        cur.remove(cur.size()-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>sqlå¥½é¢˜æ€»ç»“</title>
    <url>/2020/03/25/sql%E4%B9%A0%E9%A2%98%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<pre><code>åˆæ ¼çš„SQL BOYç»ƒæˆä¹‹è·¯ã€‚
</code></pre>
<a id="more"></a>
<h3 id="1-æ‰¾æ‰€æœ‰éƒ¨é—¨å†…salaryæœ€å¤§çš„å‘˜å·¥ï¼ˆå­˜åœ¨å¤šå€¼ï¼‰"><a class="header-anchor" href="#1-æ‰¾æ‰€æœ‰éƒ¨é—¨å†…salaryæœ€å¤§çš„å‘˜å·¥ï¼ˆå­˜åœ¨å¤šå€¼ï¼‰">Â¶</a>1. æ‰¾æ‰€æœ‰éƒ¨é—¨å†…salaryæœ€å¤§çš„å‘˜å·¥ï¼ˆå­˜åœ¨å¤šå€¼ï¼‰</h3>
<p>æ³¨æ„ä½¿ç”¨group byå­å¥æ—¶ï¼Œselectå­å¥ä¸­åªèƒ½æœ‰èšåˆé”®ã€èšåˆå‡½æ•°ã€å¸¸æ•°ã€‚å¦åˆ™groupbyé»˜è®¤å–ç¬¬ä¸€æ¡æ•°æ®ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> de.dept_no, de.emp_no, s.salary</span><br><span class="line"><span class="keyword">from</span> dept_emp de <span class="keyword">inner</span> <span class="keyword">join</span> salaries s</span><br><span class="line"><span class="keyword">on</span> de.emp_no = s.emp_no</span><br><span class="line"><span class="keyword">and</span> de.to_date = <span class="string">'9999-01-01'</span></span><br><span class="line"><span class="keyword">and</span> s.to_date = <span class="string">'9999-01-01'</span></span><br><span class="line"><span class="keyword">where</span> s.salary = (<span class="keyword">select</span> <span class="keyword">max</span>(s2.salary)</span><br><span class="line">                <span class="keyword">from</span> dept_emp de2 <span class="keyword">inner</span> <span class="keyword">join</span> salaries s2</span><br><span class="line">                <span class="keyword">on</span> de2.emp_no = s2.emp_no</span><br><span class="line">                <span class="keyword">and</span> de2.to_date = <span class="string">'9999-01-01'</span></span><br><span class="line">                <span class="keyword">and</span> s2.to_date = <span class="string">'9999-01-01'</span></span><br><span class="line">                <span class="keyword">where</span> de2.dept_no = de.dept_no</span><br><span class="line">                <span class="keyword">group</span> <span class="keyword">by</span> de2.dept_no)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> de.dept_no</span><br></pre></td></tr></table></figure>
<h3 id="2-æŸ¥æ‰¾å½“å‰è–ªæ°´-to-date-â€˜9999-01-01â€™-æ’åç¬¬äºŒå¤šçš„å‘˜å·¥-ä¸å‡†ä½¿ç”¨order-by"><a class="header-anchor" href="#2-æŸ¥æ‰¾å½“å‰è–ªæ°´-to-date-â€˜9999-01-01â€™-æ’åç¬¬äºŒå¤šçš„å‘˜å·¥-ä¸å‡†ä½¿ç”¨order-by">Â¶</a>2. æŸ¥æ‰¾å½“å‰è–ªæ°´(to_date=â€˜9999-01-01â€™)æ’åç¬¬äºŒå¤šçš„å‘˜å·¥, ä¸å‡†ä½¿ç”¨order by</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> e.emp_no, <span class="keyword">max</span>(s.salary) <span class="keyword">as</span> salary, e.last_name, e.first_name</span><br><span class="line"><span class="keyword">from</span> employees <span class="keyword">as</span> e <span class="keyword">join</span> salaries <span class="keyword">as</span> s <span class="keyword">using</span>(emp_no)</span><br><span class="line"><span class="keyword">where</span> s.to_date = <span class="string">'9999-01-01'</span></span><br><span class="line"><span class="keyword">and</span> s.salary <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">max</span>(salary) </span><br><span class="line">                     <span class="keyword">from</span> salaries </span><br><span class="line">                     <span class="keyword">where</span> <span class="keyword">to_date</span> = <span class="string">'9999-01-01'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="3-æŸ¥æ‰¾æ‰€æœ‰å‘˜å·¥å…¥èŒä»¥æ¥çš„è–ªæ°´æ¶¨å¹…"><a class="header-anchor" href="#3-æŸ¥æ‰¾æ‰€æœ‰å‘˜å·¥å…¥èŒä»¥æ¥çš„è–ªæ°´æ¶¨å¹…">Â¶</a>3. æŸ¥æ‰¾æ‰€æœ‰å‘˜å·¥å…¥èŒä»¥æ¥çš„è–ªæ°´æ¶¨å¹…</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sCurrent.emp_no, (sCurrent.salary-sStart.salary) <span class="keyword">AS</span> growth</span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> s.emp_no, s.salary <span class="keyword">FROM</span> employees e, salaries s <span class="keyword">WHERE</span> e.emp_no = s.emp_no <span class="keyword">AND</span> s.to_date = <span class="string">'9999-01-01'</span>) <span class="keyword">AS</span> sCurrent,</span><br><span class="line">(<span class="keyword">SELECT</span> s.emp_no, s.salary <span class="keyword">FROM</span> employees e, salaries s <span class="keyword">WHERE</span> e.emp_no = s.emp_no <span class="keyword">AND</span> s.from_date = e.hire_date) <span class="keyword">AS</span> sStart</span><br><span class="line"><span class="keyword">WHERE</span> sCurrent.emp_no = sStart.emp_no</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> growth</span><br></pre></td></tr></table></figure>
<h3 id="4-å¯¹æ‰€æœ‰å‘˜å·¥çš„å½“å‰-to-date-â€˜9999-01-01â€™-è–ªæ°´æŒ‰ç…§salaryè¿›è¡ŒæŒ‰ç…§1-Nçš„æ’å"><a class="header-anchor" href="#4-å¯¹æ‰€æœ‰å‘˜å·¥çš„å½“å‰-to-date-â€˜9999-01-01â€™-è–ªæ°´æŒ‰ç…§salaryè¿›è¡ŒæŒ‰ç…§1-Nçš„æ’å">Â¶</a>4. å¯¹æ‰€æœ‰å‘˜å·¥çš„å½“å‰(to_date=â€˜9999-01-01â€™)è–ªæ°´æŒ‰ç…§salaryè¿›è¡ŒæŒ‰ç…§1-Nçš„æ’å</h3>
<p>è‡ªæˆ‘è”ç»“ï¼Œè®¡ç®—å¤§äºä¸»è¡¨çš„å·¥èµ„çš„æ•°é‡ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> s2.emp_no, s2.salary, <span class="keyword">count</span>(<span class="keyword">distinct</span> s1.salary) <span class="keyword">as</span> <span class="keyword">rank</span></span><br><span class="line"><span class="keyword">from</span> salaries <span class="keyword">as</span> s1, salaries <span class="keyword">as</span> s2</span><br><span class="line"><span class="keyword">where</span> s1.to_date=<span class="string">'9999-01-01'</span> <span class="keyword">and</span> s2.to_date=<span class="string">'9999-01-01'</span></span><br><span class="line"><span class="keyword">and</span> s2.salary &lt;= s1.salary</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s2.emp_no,s2.salary</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> s2.salary <span class="keyword">desc</span>, s2.emp_no <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>
<h3 id="5-æŸ¥æ‰¾æè¿°ä¿¡æ¯ä¸­åŒ…æ‹¬robotçš„ç”µå½±å¯¹åº”çš„åˆ†ç±»åç§°ä»¥åŠç”µå½±æ•°ç›®ï¼Œè€Œä¸”è¿˜éœ€è¦è¯¥åˆ†ç±»å¯¹åº”ç”µå½±æ•°é‡-5éƒ¨"><a class="header-anchor" href="#5-æŸ¥æ‰¾æè¿°ä¿¡æ¯ä¸­åŒ…æ‹¬robotçš„ç”µå½±å¯¹åº”çš„åˆ†ç±»åç§°ä»¥åŠç”µå½±æ•°ç›®ï¼Œè€Œä¸”è¿˜éœ€è¦è¯¥åˆ†ç±»å¯¹åº”ç”µå½±æ•°é‡-5éƒ¨">Â¶</a>5. æŸ¥æ‰¾æè¿°ä¿¡æ¯ä¸­åŒ…æ‹¬robotçš„ç”µå½±å¯¹åº”çš„åˆ†ç±»åç§°ä»¥åŠç”µå½±æ•°ç›®ï¼Œè€Œä¸”è¿˜éœ€è¦è¯¥åˆ†ç±»å¯¹åº”ç”µå½±æ•°é‡&gt;=5éƒ¨</h3>
<p>è¿™é‡Œè¦æ³¨æ„ï¼Œè¿™é‡Œçš„å¤§äºç­‰äº5éƒ¨æ˜¯æŒ‡åˆ†ç±»çš„ç”µå½±æ•°é‡å¤§äº5éƒ¨è€Œä¸æ˜¯åŒ…å«robotçš„åˆ†ç±»çš„ç”µå½±æ•°é‡å¤§äº5éƒ¨ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> c.name, <span class="keyword">count</span>(f.film_id)</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">category</span> c, (<span class="keyword">select</span> <span class="keyword">count</span>(film_id), category_id </span><br><span class="line">                       <span class="keyword">from</span> film_category</span><br><span class="line">                      <span class="keyword">group</span> <span class="keyword">by</span> category_id</span><br><span class="line">                       <span class="keyword">having</span> <span class="keyword">count</span>(film_id)&gt;=<span class="number">5</span>) <span class="keyword">as</span> fc, film f, </span><br><span class="line">film_category cc</span><br><span class="line"><span class="keyword">where</span> f.description <span class="keyword">like</span> <span class="string">'%robot%'</span></span><br><span class="line"><span class="keyword">and</span> c.category_id = fc.category_id</span><br><span class="line"><span class="keyword">and</span> f.film_id = cc.film_id</span><br><span class="line"><span class="keyword">and</span> cc.category_id = fc.category_id;</span><br></pre></td></tr></table></figure>
<h3 id="6-last-nameå’Œfirst-nameæ‹¼æ¥èµ·æ¥ä½œä¸ºName"><a class="header-anchor" href="#6-last-nameå’Œfirst-nameæ‹¼æ¥èµ·æ¥ä½œä¸ºName">Â¶</a>6. last_nameå’Œfirst_nameæ‹¼æ¥èµ·æ¥ä½œä¸ºName</h3>
<p>MySQLã€SQL Serverã€Oracleç­‰æ•°æ®åº“æ”¯æŒCONCATæ–¹æ³•ï¼Œ<br>
å¦‚æœç”¨çš„SQLiteæ•°æ®åº“åªæ”¯æŒç”¨è¿æ¥ç¬¦å·&quot;||&quot;æ¥è¿æ¥å­—ç¬¦ä¸²</p>
<p>CONCATæ–¹æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="keyword">CONCAT</span>(last_name,<span class="string">" "</span>),first_name) <span class="keyword">as</span> <span class="keyword">name</span>  <span class="keyword">from</span> employees</span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(last_name,<span class="string">" "</span>ï¼Œfirst_name) <span class="keyword">as</span> <span class="keyword">name</span>  <span class="keyword">from</span> employees</span><br><span class="line"> </span><br><span class="line">SQLiteä¸­ä½¿ç”¨ï¼š</span><br><span class="line"><span class="keyword">select</span> last_name||<span class="string">" "</span>||first_name <span class="keyword">as</span> <span class="keyword">name</span>  <span class="keyword">from</span> employees</span><br></pre></td></tr></table></figure>
<h3 id="7-æ’å…¥æˆ–è€…å¿½ç•¥-å…³é”®å­—IGNORE"><a class="header-anchor" href="#7-æ’å…¥æˆ–è€…å¿½ç•¥-å…³é”®å­—IGNORE">Â¶</a>7. æ’å…¥æˆ–è€…å¿½ç•¥ å…³é”®å­—IGNORE</h3>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">ignore</span> <span class="keyword">into</span> actor(actor_id,first_name,last_name,last_update) </span><br><span class="line"><span class="keyword">values</span>(<span class="string">'3'</span>,<span class="string">'ED'</span>,<span class="string">'CHASE'</span>,<span class="string">'2006-02-15 12:34:33'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="8-å¯¹äºemployeesè¡¨ä¸­ï¼Œç»™å‡ºå¥‡æ•°è¡Œçš„first-name"><a class="header-anchor" href="#8-å¯¹äºemployeesè¡¨ä¸­ï¼Œç»™å‡ºå¥‡æ•°è¡Œçš„first-name">Â¶</a>8. å¯¹äºemployeesè¡¨ä¸­ï¼Œç»™å‡ºå¥‡æ•°è¡Œçš„first_name</h3>
<p>è¯´æ˜ï¼š</p>
<ol>
<li>é¦–å…ˆé¢˜ç›®è¦æ±‚å¯¹first_nameæ’åºï¼Œæ‰€ä»¥å­æŸ¥è¯¢é‡Œæœ‰first_nameçš„æ¯”è¾ƒã€‚</li>
<li>é€šè¿‡æ¯”è¾ƒï¼Œå¦‚æœ e1.first_name æ˜¯ç¬¬ä¸€ä½ï¼Œé‚£ e2.first_name åªæœ‰1ä¸ªï¼Œå°±æ˜¯ e1.first_name æœ¬èº«ï¼Œ1%2=1ï¼›å¦‚æœ e1.first_name æ’åœ¨ç¬¬äºŒä½ï¼Œå°±æœ‰å®ƒå’Œæ¯”å®ƒå°çš„2ä¸ª e2.first_nameï¼Œ2%2=0ï¼Œæ‰€ä»¥ä¸é€‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> e1.first_name</span><br><span class="line">  <span class="keyword">from</span> employees e1</span><br><span class="line"><span class="keyword">where</span> (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> employees e2 <span class="keyword">where</span> e1.first_name &gt;= e2.first_name)%<span class="number">2</span>=<span class="number">1</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<h3 id="9-åˆ é™¤emp-noé‡å¤çš„è®°å½•ï¼Œåªä¿ç•™æœ€å°çš„idå¯¹åº”çš„è®°å½•ã€‚"><a class="header-anchor" href="#9-åˆ é™¤emp-noé‡å¤çš„è®°å½•ï¼Œåªä¿ç•™æœ€å°çš„idå¯¹åº”çš„è®°å½•ã€‚">Â¶</a>9. åˆ é™¤emp_noé‡å¤çš„è®°å½•ï¼Œåªä¿ç•™æœ€å°çš„idå¯¹åº”çš„è®°å½•ã€‚</h3>
<p>æœ¬é¢˜æ€è·¯å¦‚ä¸‹ï¼šå…ˆç”¨ GROUP BY å’Œ MIN() é€‰å‡ºæ¯ä¸ª emp_no åˆ†ç»„ä¸­æœ€å°çš„ idï¼Œç„¶åç”¨ DELETE FROM â€¦ WHERE â€¦ NOT IN â€¦ è¯­å¥åˆ é™¤ â€œéæ¯ä¸ªåˆ†ç»„æœ€å°idå¯¹åº”çš„æ‰€æœ‰è®°å½•â€</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> titles_test <span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">NOT</span> <span class="keyword">IN</span> </span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">MIN</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> titles_test <span class="keyword">GROUP</span> <span class="keyword">BY</span> emp_no);</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘çš„æ•°æ®ç»“æ„è¡¥å……</title>
    <url>/2020/03/25/%E6%A0%91%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A1%A5%E5%85%85/</url>
    <content><![CDATA[<h1>å‰ç¼€æ ‘</h1>
<p>Trieæ ‘çš„åŸºæœ¬æ€§è´¨ï¼š<br>
â‘ æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–çš„æ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚<br>
â‘¡ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€ä¸ªèŠ‚ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚<br>
â‘¢æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦äº’ä¸ç›¸åŒã€‚<br>
â‘£ä»ç¬¬ä¸€å­—ç¬¦å¼€å§‹æœ‰è¿ç»­é‡å¤çš„å­—ç¬¦åªå ç”¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸Šé¢çš„toï¼Œå’Œtenï¼Œä¸­é‡å¤çš„å•è¯tåªå ç”¨äº†ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<h3 id="å‰ç¼€æ ‘çš„åº”ç”¨"><a class="header-anchor" href="#å‰ç¼€æ ‘çš„åº”ç”¨">Â¶</a>å‰ç¼€æ ‘çš„åº”ç”¨</h3>
<p>1ã€å‰ç¼€åŒ¹é…<br>
2ã€å­—ç¬¦ä¸²æ£€ç´¢<br>
3ã€è¯é¢‘ç»Ÿè®¡<br>
4ã€å­—ç¬¦ä¸²æ’åº</p>
<p>å¯ä»¥åˆ©ç”¨å‰ç¼€æ ‘çš„æ€§è´¨æ¥è§£å†³ç°å®ä¸­çš„é—®é¢˜ã€‚æ¯”å¦‚è¯´æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­æ˜¯å¦å«æœ‰å‰ç¼€å•è¯ï¼Œä»€ä¹ˆæ˜¯å‰ç¼€å•è¯ï¼šä¸Šé¢çš„ inï¼Œå°±æ˜¯ inn çš„å‰ç¼€å•è¯ã€‚å¦‚æœæœ‰åå‡ ä¸‡æ¡å•è¯ï¼Œå¹¶ä¸”æ¯ä¸ªå•è¯çš„é•¿åº¦éƒ½æ˜¯5-10ä»¥å†…ï¼Œè¿™æ ·å¿…å®šå­˜åœ¨å¤§é‡é‡å¤çš„å­—ç¬¦ï¼Œå› æ­¤åˆ©ç”¨å‰ç¼€æ ‘æ¥æ±‚è§£ä¸ä»…é€Ÿåº¦å¿«è€Œä¸”ç©ºé—´å¤æ‚åº¦ä¹Ÿæ¯”è¾ƒå¥½ã€‚</p>
<p>æ¯ä¸ªç»“ç‚¹ç»´æŒä¸¤ä¸ªå˜é‡çš„è®°å½•ï¼špathè¡¨ç¤ºå­—ç¬¦è·¯è¿‡è¿™ä¸ªç»“ç‚¹çš„æ¬¡æ•°ï¼ˆå³è¡¨ç¤ºå­˜åœ¨ä»¥å½“å‰ç»“ç‚¹ä¸ºå‰ç¼€çš„å­—ç¬¦æœ‰å¤šå°‘ä¸ªï¼‰ï¼›endè®°å½•ä»¥å½“å‰ç»“ç‚¹ä¸ºç»“æŸçš„å­—ç¬¦æœ‰å¤šå°‘ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Trie trie = <span class="keyword">new</span> Trie();</span><br><span class="line">        trie.add(<span class="string">"a"</span>);</span><br><span class="line">        trie.add(<span class="string">"ab"</span>);</span><br><span class="line">        trie.add(<span class="string">"ac"</span>);</span><br><span class="line">        trie.add(<span class="string">"abc"</span>);</span><br><span class="line">        trie.add(<span class="string">"acb"</span>);</span><br><span class="line">        trie.add(<span class="string">"abcc"</span>);</span><br><span class="line">        trie.add(<span class="string">"aab"</span>);</span><br><span class="line">        trie.add(<span class="string">"abx"</span>);</span><br><span class="line">        trie.add(<span class="string">"abc"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(trie.get(<span class="string">"abc"</span>));</span><br><span class="line">        System.out.println(trie.getPre(<span class="string">"ab"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * pathè¡¨ç¤ºå­—ç¬¦è·¯è¿‡è¿™ä¸ªç»“ç‚¹çš„æ¬¡æ•°ï¼ˆå³è¡¨ç¤ºå­˜åœ¨ä»¥å½“å‰ç»“ç‚¹ä¸ºå‰ç¼€çš„å­—ç¬¦æœ‰å¤šå°‘ä¸ªï¼‰ï¼›</span></span><br><span class="line"><span class="comment"> * endè®°å½•ä»¥å½“å‰ç»“ç‚¹ä¸ºç»“æŸçš„å­—ç¬¦æœ‰å¤šå°‘ä¸ªã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> path;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> end;</span><br><span class="line">    <span class="keyword">public</span> TrieNode[] nexts;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        path = <span class="number">0</span>;</span><br><span class="line">        end = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//åªèƒ½å­˜è‹±æ–‡å°å†™å­—æ¯ï¼Œå¦‚æœæ˜¯ASCIIç å¯ä»¥ç”Ÿæˆ256å¤§å°çš„æ•°ç»„</span></span><br><span class="line">        <span class="comment">//å¦‚æœæƒ³å­˜æ›´å¤šç§ç±»çš„å­—ç¬¦å¯ä»¥æ”¹ä¸ºmapç»“æ„</span></span><br><span class="line">        nexts = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TrieNode root;</span><br><span class="line"></span><br><span class="line">    Trie() &#123;</span><br><span class="line">        root = <span class="keyword">new</span> TrieNode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—å…¸æ ‘çš„åŠ å…¥è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (word == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">char</span>[] chars = word.toCharArray();</span><br><span class="line">        TrieNode node = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : chars) &#123;</span><br><span class="line">            index = c - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span> (node.nexts[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                node.nexts[index] = <span class="keyword">new</span> TrieNode();</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.nexts[index];</span><br><span class="line">            node.path++;</span><br><span class="line">        &#125;</span><br><span class="line">        node.end++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—å…¸æ ‘æŸ¥è¯¢ç›®æ ‡å•è¯å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (word == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">char</span>[] chars = word.toCharArray();</span><br><span class="line">        TrieNode node = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : chars) &#123;</span><br><span class="line">            index = c - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span> (node.nexts[index] == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            node = node.nexts[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node.end;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—å…¸æ ‘æŸ¥è¯¢ä»¥ç›®æ ‡å‰ç¼€çš„å•è¯æœ‰å¤šå°‘ä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPre</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(word ==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">char</span>[] chars = word.toCharArray();</span><br><span class="line">        TrieNode node = root;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : chars) &#123;</span><br><span class="line">            index = c - <span class="string">'a'</span>;</span><br><span class="line">            <span class="keyword">if</span>(node.nexts[index]==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            node = node.nexts[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node.path;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ä¼˜å…ˆçº§é˜Ÿåˆ—</h1>
<p>æœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæœ€å¤§çš„ä¼˜å…ˆå‡ºåˆ—ï¼Œæœ€å¤§å †å®ç°é™åºã€‚<br>
æœ€å°å †å®ç°å‡åº</p>
<p>æœ€å°å †æ˜¯ä¸€ç§ç»è¿‡æ’åºçš„å®Œå…¨äºŒå‰æ ‘ï¼Œå…¶ä¸­ä»»ä¸€éç»ˆç«¯èŠ‚ç‚¹çš„æ•°æ®å€¼å‡ä¸å¤§äºå…¶å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚çš„å€¼ã€‚</p>
<p>å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(logn)ï¼Œä¸‹æ²‰å’Œä¸Šæµ®æ“ä½œ</p>
<h3 id="Javaä¸­"><a class="header-anchor" href="#Javaä¸­">Â¶</a>Javaä¸­</h3>
<p>PriorityQueue æ˜¯åŸºäºä¼˜å…ˆå †çš„ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œä¸å…è®¸æ’å…¥ä¸å¯æ¯”è¾ƒçš„å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ›å‡º ClassCastException å¼‚å¸¸(å¦‚æœé˜Ÿåˆ—åªæœ‰ä¸€ä¸ªå…ƒç´ åˆ™ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶æ²¡æœ‰æ¯”è¾ƒ)ï¼›ä¹Ÿä¸å…è®¸æ’å…¥ nullï¼Œå¦åˆ™ä¼šæŠ›å‡ºNullPointerExceptionã€‚<br>
PriorityQueueä½¿ç”¨æ—¶è¦å®ç°æ¯”è¾ƒå™¨ï¼Œå®šä¹‰æ’åºæ–¹æ³•ã€‚<br>
æ³¨ï¼šPriorityQueue æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœæƒ³è¦åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ PriorityBlockingQueueã€‚</p>
<h3 id="å®ç°"><a class="header-anchor" href="#å®ç°">Â¶</a>å®ç°</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinHeap</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] queue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinHeap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        queue = <span class="keyword">new</span> Object[<span class="number">11</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> k = size;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>)</span><br><span class="line">            queue[<span class="number">0</span>] = t;</span><br><span class="line">        size++;</span><br><span class="line">        moveUp(k, t);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»å †åº•ä¸€å±‚å±‚ä¸Šæµ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moveUp</span><span class="params">(<span class="keyword">int</span> k, T t)</span> </span>&#123;</span><br><span class="line">        Comparable&lt;? <span class="keyword">super</span> T&gt; key = (Comparable&lt;? <span class="keyword">super</span> T&gt;) t;</span><br><span class="line">        <span class="keyword">while</span> (k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> parent = (k - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            Object e = queue[parent];</span><br><span class="line">            <span class="keyword">if</span> (key.compareTo((T) e) &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            queue[k] = e;</span><br><span class="line">            k = parent;</span><br><span class="line">        &#125;</span><br><span class="line">        queue[k] = key;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä»å †é¡¶ä¸€å±‚å±‚ä¸‹æ²‰</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> s = --size;</span><br><span class="line">        T result = (T) queue[<span class="number">0</span>];</span><br><span class="line">        T end = (T) queue[s];</span><br><span class="line">        queue[s] = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (s != <span class="number">0</span>)</span><br><span class="line">            moveDown(<span class="number">0</span>, end);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moveDown</span><span class="params">(<span class="keyword">int</span> k, T end)</span> </span>&#123;</span><br><span class="line">        Comparable&lt;? <span class="keyword">super</span> T&gt; key = (Comparable&lt;? <span class="keyword">super</span> T&gt;) end;</span><br><span class="line">        <span class="keyword">int</span> half = size &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (k &lt; half) &#123;</span><br><span class="line">            <span class="keyword">int</span> left = (k &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> right = left + <span class="number">1</span>;</span><br><span class="line">            Object c = queue[left];</span><br><span class="line">            <span class="keyword">if</span> (right &lt; size &amp;&amp; ((Comparable&lt;? <span class="keyword">super</span> T&gt;) c).compareTo((T) queue[right]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                c = queue[left = right];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (key.compareTo((T) c) &lt;= <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            queue[k] = c;</span><br><span class="line">            k = left;</span><br><span class="line">        &#125;</span><br><span class="line">        queue[k] = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MinHeap minHeap = <span class="keyword">new</span> MinHeap();</span><br><span class="line">        minHeap.offer(<span class="number">1</span>);</span><br><span class="line">        minHeap.offer(<span class="number">5</span>);</span><br><span class="line">        minHeap.offer(<span class="number">3</span>);</span><br><span class="line">        minHeap.offer(<span class="number">2</span>);</span><br><span class="line">        minHeap.offer(<span class="number">4</span>);</span><br><span class="line">        minHeap.offer(<span class="number">4</span>);</span><br><span class="line">        <span class="keyword">int</span> length = minHeap.size;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">            System.out.println(minHeap.poll());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/24/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<h1>é¢˜è§£</h1>
<p>äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—ï¼Œæœ€åä¸€ä¸ªç»“ç‚¹ä¸ºrootï¼Œåˆ™å¾€å‰æ‰¾ç¬¬ä¸€ä¸ªå°äºrootå³ä¸ºå·¦å­æ ‘çš„æœ€å³ç»“ç‚¹ï¼Œå³å¯å°†åºåˆ—åˆ†ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ã€‚</p>
<h1>code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">VerifySquenceOfBST</span><span class="params">(<span class="keyword">int</span> [] sequence)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sequence == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(sequence.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(sequence.length == <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> Bst(sequence,<span class="number">0</span>,sequence.length -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">Bst</span><span class="params">(<span class="keyword">int</span>[] sequence,<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start&gt;=end) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = end-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((sequence[mid]&gt;sequence[end])&amp;&amp;(mid&gt;start)) mid--;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = start;i&lt;mid;i++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>(sequence[i]&gt;sequence[end])</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Bst(sequence,start, mid)&amp;&amp; Bst(sequence,mid+<span class="number">1</span>, end-<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/23/%E6%A0%88%E7%9A%84%E5%8E%8B%E5%85%A5%E3%80%81%E5%BC%B9%E5%87%BA%E5%BA%8F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦å¯èƒ½ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚åºåˆ—1,2,3,4,5æ˜¯æŸæ ˆçš„å‹å…¥é¡ºåºï¼Œåºåˆ—4,5,3,2,1æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½†4,3,5,1,2å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦æ˜¯ç›¸ç­‰çš„ï¼‰
</code></pre>
<a id="more"></a>
<p>åˆ›å»ºä¸€ä¸ªè¾…åŠ©æ ˆï¼Œæ¨¡æ‹Ÿå‹å…¥ã€å¼¹å‡ºçš„è¡Œä¸ºï¼š<br>
å…³é”®åœ¨äºæ ˆä¸èƒ½å‡ºç°ä¸¤ä¸ªé€†åºï¼Œæ‰€ä»¥forå¾ªç¯æ‰§è¡Œåˆ°æœ€åä¸€æ¬¡ï¼Œwhileå¾ªç¯å°†popå®Œstackä¸­çš„æ‰€æœ‰ç»“ç‚¹ï¼Œå¦åˆ™å¼¹å‡ºåºåˆ—ä¸æˆç«‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsPopOrder</span><span class="params">(<span class="keyword">int</span> [] pushA,<span class="keyword">int</span> [] popA)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pushA.length == <span class="number">0</span> || popA.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        LinkedList&lt;Integer&gt; s = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">//ç”¨äºæ ‡è¯†å¼¹å‡ºåºåˆ—çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> popIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; pushA.length;i++)&#123;</span><br><span class="line">            s.addFirst(pushA[i]);</span><br><span class="line">            <span class="comment">//å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œä¸”æ ˆé¡¶å…ƒç´ ç­‰äºå¼¹å‡ºåºåˆ—</span></span><br><span class="line">            <span class="keyword">while</span>(!s.isEmpty() &amp;&amp;s.getFirst() == popA[popIndex])&#123;</span><br><span class="line">                <span class="comment">//å‡ºæ ˆ</span></span><br><span class="line">                s.pollFirst();</span><br><span class="line">                <span class="comment">//å¼¹å‡ºåºåˆ—å‘åä¸€ä½</span></span><br><span class="line">                popIndex++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonå¤ä¹ </title>
    <url>/2020/03/22/python%E5%A4%8D%E4%B9%A0/</url>
    <content><![CDATA[<pre><code>å†è¿‡ä¸€épythonè¯­æ³•ï¼Œè®°ç‚¹æœ‰è¶£çš„ã€‚
</code></pre>
<a id="more"></a>
<h1>åŸºæœ¬ç±»å‹å’Œå˜é‡</h1>
<h3 id="1-è®¡ç®—"><a class="header-anchor" href="#1-è®¡ç®—">Â¶</a>1.è®¡ç®—</h3>
<p>é™¤æ³•ï¼š/ï¼ˆæ— è®ºæ€ä¹ˆé™¤ç»“æœéƒ½æ˜¯æµ®ç‚¹å‹ï¼‰ï¼›//ï¼ˆåœ°æ¿é™¤ï¼Œæ— è®ºæ€ä¹ˆé™¤ç»“æœéƒ½æ˜¯æ•´æ•°ï¼‰<br>
ä¹˜æ³•ï¼š*ï¼Œ** ä¹˜æ–¹</p>
<h3 id="2-å­—ç¬¦ä¸²"><a class="header-anchor" href="#2-å­—ç¬¦ä¸²">Â¶</a>2. å­—ç¬¦ä¸²</h3>
<p>unicodeç¼–ç ï¼Œencode()ç¼–æˆæŒ‡å®šbytesï¼Œdecode()ç¼–æˆunicodeã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = <span class="string">b'ABC'</span> <span class="comment">#ä»¥byteså½¢å¼å­˜ï¼Œå å†…å­˜å¤§å°ä¸ä¸€æ ·ã€‚</span></span><br></pre></td></tr></table></figure>
<p>çº¯è‹±æ–‡çš„strå¯ä»¥ç”¨ASCIIç¼–ç ä¸ºbytesï¼Œå†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå«æœ‰ä¸­æ–‡çš„strå¯ä»¥ç”¨UTF-8ç¼–ç ä¸ºbytesã€‚å«æœ‰ä¸­æ–‡çš„stræ— æ³•ç”¨ASCIIç¼–ç ï¼Œå› ä¸ºä¸­æ–‡ç¼–ç çš„èŒƒå›´è¶…è¿‡äº†ASCIIç¼–ç çš„èŒƒå›´ï¼ŒPythonä¼šæŠ¥é”™ã€‚ï¼ˆå«å‚æ•°errors='ignoreâ€™å¯ä»¥æ— è§†ä¸€éƒ¨åˆ†æŠ¥é”™ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  #æç¤ºæ“ä½œç³»ç»Ÿæ˜¯pythonå¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*- #æç¤ºç¼–ç æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">str1.replace(<span class="string">'a'</span>,<span class="string">'A'</span>) <span class="comment">#æ¢å­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="3-æ ¼å¼åŒ–"><a class="header-anchor" href="#3-æ ¼å¼åŒ–">Â¶</a>3. æ ¼å¼åŒ–</h3>
<p>%så¯ä»¥æŠŠå…¶ä»–æ•°å¼ºåˆ¶è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚<br>
%%ï¼šè¡¨ç¤º%</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">'Hi, %s, you have $%d.'</span> % (<span class="string">'Michael'</span>, <span class="number">1000000</span>)</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right">å ä½ç¬¦</th>
<th style="text-align:left">æ›¿æ¢å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">%d</td>
<td style="text-align:left">æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:right">%f</td>
<td style="text-align:left">æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:right">%s</td>
<td style="text-align:left">å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:right">%x</td>
<td style="text-align:left">åå…­è¿›åˆ¶æ•´æ•°</td>
</tr>
</tbody>
</table>
<h3 id="4-pythoné‡Œçš„å››å¤§é›†åˆ"><a class="header-anchor" href="#4-pythoné‡Œçš„å››å¤§é›†åˆ">Â¶</a>4. pythoné‡Œçš„å››å¤§é›†åˆ</h3>
<h5 id="1-List"><a class="header-anchor" href="#1-List">Â¶</a>1. [] -List</h5>
<pre><code>å¦‚æœä¸€ä¸ªlistä¸­ä¸€ä¸ªå…ƒç´ ä¹Ÿæ²¡æœ‰ï¼Œå°±æ˜¯ä¸€ä¸ªç©ºçš„listï¼Œå®ƒçš„é•¿åº¦ä¸º0ã€‚
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ å…ƒç´ </span></span><br><span class="line">classmates.append(<span class="string">'Adam'</span>)</span><br><span class="line"><span class="comment">#æ’å…¥ç‰¹å®šä½ç½®</span></span><br><span class="line">classmates.insert(<span class="number">1</span>, <span class="string">'Jack'</span>)</span><br><span class="line"><span class="comment">#åˆ é™¤æœ«å°¾å…ƒç´ </span></span><br><span class="line">classmates.pop()</span><br><span class="line"><span class="comment">#åˆ é™¤ç‰¹å®šä½ç½®</span></span><br><span class="line">classmates.pop(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h5 id="2-tuple"><a class="header-anchor" href="#2-tuple">Â¶</a>2. () -tuple</h5>
<ul>
<li>tupleä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½ä¿®æ”¹, è¿™é‡Œæ˜¯æŒ‡æŒ‡å‘ä¸å˜ï¼Œæ‰€ä»¥å¦‚æœå…ƒç´ ä¸­æœ‰Listï¼Œæ˜¯å¯ä»¥æ”¹å˜Listä¸­çš„å†…å®¹çš„ã€‚</li>
<li>åªæœ‰1ä¸ªå…ƒç´ çš„tupleå®šä¹‰æ—¶å¿…é¡»åŠ ä¸€ä¸ªé€—å·â€˜,â€™ï¼Œæ¥æ¶ˆé™¤æ­§ä¹‰, å¦åˆ™è¡¨ç¤ºæ•°å­—1</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t = (<span class="number">1</span>,)</span><br></pre></td></tr></table></figure>
<h5 id="4-dict"><a class="header-anchor" href="#4-dict">Â¶</a>4. {} -dict</h5>
<ul>
<li>keyæ— é‡å¤ã€‚</li>
<li>dictå†…éƒ¨æ˜¯æ— åºçš„ï¼Œkeyå¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œlistå°±æ˜¯å¯å˜çš„</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#dictåˆ›å»º</span></span><br><span class="line">d = &#123;&#125;</span><br><span class="line"><span class="comment">#dictæ·»åŠ å…ƒç´ </span></span><br><span class="line">d[<span class="string">'Adam'</span>] = <span class="number">10</span></span><br><span class="line"><span class="comment">#dictæŸ¥æ‰¾å…ƒç´ , ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ²¡æ‰¾åˆ°ï¼Œé»˜è®¤è¿”å›å€¼Noneï¼Œå¯ä»¥è‡ªå®šä¹‰</span></span><br><span class="line">d.get(<span class="string">'Tomas'</span>, <span class="number">-1</span>)</span><br><span class="line"><span class="comment">#åˆ é™¤å…ƒç´ </span></span><br><span class="line">d.pop(<span class="string">'bob'</span>)</span><br></pre></td></tr></table></figure>
<h5 id="5-set"><a class="header-anchor" href="#5-set">Â¶</a>5. ([]) - set</h5>
<p>æ•°å­¦æ„ä¹‰ä¸Šæ— é‡å¤ï¼Œæ— åºçš„é›†åˆã€‚</p>
<ul>
<li>æ— valueç‰ˆçš„dictï¼Œå†…éƒ¨æ— åºï¼Œkeyä¸å¯å˜</li>
<li>åŒæ ·keyæ— é‡å¤</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»º</span></span><br><span class="line">s = set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">#æ·»åŠ å…ƒç´ </span></span><br><span class="line">s.add(<span class="number">4</span>)</span><br><span class="line"><span class="comment">#åˆ é™¤å…ƒç´ </span></span><br><span class="line">s.remove(<span class="number">4</span>)</span><br><span class="line"><span class="comment">#é›†åˆæ“ä½œ</span></span><br><span class="line">s1 &amp; s2</span><br><span class="line">s1 | s2</span><br></pre></td></tr></table></figure>
<h1>å‡½æ•°</h1>
<h2 id="è¿”å›å€¼"><a class="header-anchor" href="#è¿”å›å€¼">Â¶</a>è¿”å›å€¼</h2>
<p>å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œå…¶åŸç†å…¶å®æ˜¯è¿”å›ä¸€ä¸ªtupleï¼ŒæŒ‰ä½ç½®ä¼ ç»™ç‰¹å®šçš„å‚æ•°ã€‚</p>
<h2 id="äº”å¤§å‚æ•°"><a class="header-anchor" href="#äº”å¤§å‚æ•°">Â¶</a>äº”å¤§å‚æ•°</h2>
<h3 id="å¿…é€‰å‚æ•°"><a class="header-anchor" href="#å¿…é€‰å‚æ•°">Â¶</a>å¿…é€‰å‚æ•°</h3>
<p>æŒ‰ä½ç½®åŒ¹é…ï¼Œä¸å¯ä¸å¡«ã€‚</p>
<h3 id="é»˜è®¤å‚æ•°"><a class="header-anchor" href="#é»˜è®¤å‚æ•°">Â¶</a>é»˜è®¤å‚æ•°</h3>
<p>å¦‚æœé»˜è®¤å‚æ•°æ˜¯ç±»ä¼¼listå¯å˜çš„ï¼Œå¤šæ¬¡è°ƒç”¨å¯èƒ½è¾¾ä¸åˆ°æƒ³è¦çš„æ•ˆæœï¼Œå› ä¸ºæ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šä¿®æ”¹åŒä¸€ä¸ªlistã€‚æ‰€ä»¥ä¸€èˆ¬é»˜è®¤å‚æ•°æŒ‡å‘ä¸å¯å˜å¯¹è±¡ã€‚</p>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ä¸å¯å˜å¯¹è±¡å¯ä»¥è§„é¿ä¿®æ”¹æ•°æ®å€’ç½®çš„é”™è¯¯ï¼Œç”±äºå¯¹è±¡ä¸å˜ï¼Œå¤šä»»åŠ¡çš„ç¯å¢ƒä¸‹ï¼ŒåŒæ—¶è¯»å–å¯¹è±¡ä¸éœ€è¦åŠ é”ã€‚</li>
</ul>
<h3 id="å¯å˜å‚æ•°-arg"><a class="header-anchor" href="#å¯å˜å‚æ•°-arg">Â¶</a>å¯å˜å‚æ•° *arg</h3>
<p>å¦‚æœæƒ³ç›´æ¥ä¼ å…¥ä¸å®šæ•°çš„å‚æ•°ï¼Œä¸€ç§æ–¹å¼æ˜¯å®šä¹‰list[],æˆ–è€…tuple()ã€‚<br>
è¿˜å¯ä»¥å®šä¹‰å¯å˜å‚æ•°ï¼šå¯ä»¥ä¸ä¼ </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*nums)</span>:</span></span><br><span class="line">   sum = <span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">      sum += n;</span><br><span class="line">   <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">calc(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“ä¼ å…¥listæˆ–è€…tupleæ—¶ï¼Œåœ¨å…¶å‰é¢åŠ ä¸ª*</span></span><br><span class="line">calc(*nums1)</span><br></pre></td></tr></table></figure>
<p>å¯å˜å‚æ•°åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œè‡ªåŠ¨å°è£…æˆtupleã€‚</p>
<h3 id="å…³é”®å­—å‚æ•°-args"><a class="header-anchor" href="#å…³é”®å­—å‚æ•°-args">Â¶</a>å…³é”®å­—å‚æ•° **args</h3>
<p>å¯ä»¥ä¼ å…¥ä¸å®šæ•°çš„å«å‚æ•°åçš„å‚æ•°ï¼Œè¿™äº›å…³é”®å­—å‚æ•°ä¼šè¢«è‡ªåŠ¨å°è£…æˆdictã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name,city,**kw)</span>:</span></span><br><span class="line">   print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br><span class="line"><span class="comment">#å¯ä»¥åšåˆ¤æ–­ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'city'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># æœ‰cityå‚æ•°</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'job'</span> <span class="keyword">in</span> kw:</span><br><span class="line">        <span class="comment"># æœ‰jobå‚æ•°</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw)</span><br><span class="line"></span><br><span class="line">person(<span class="string">'Bob'</span>, <span class="number">35</span>, city=<span class="string">'Beijing'</span>)</span><br><span class="line">name: Bob age: <span class="number">35</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨è¯¥å‡½æ•°å¯ä»¥åªä¼ å¿…é€‰å‚æ•°ã€‚<br>
å¯ä»¥ç›´æ¥ä¼ å…¥dictï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">extra = &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br><span class="line">person(<span class="string">'Jack'</span>, <span class="number">24</span>, **extra)</span><br><span class="line"><span class="comment"># name: Jack age: 24 other: &#123;'city': 'Beijing', 'job': 'Engineer'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="å‘½åå…³é”®å­—å‚æ•°"><a class="header-anchor" href="#å‘½åå…³é”®å­—å‚æ•°">Â¶</a>å‘½åå…³é”®å­—å‚æ•°</h3>
<p>é¡¾åæ€ä¹‰ï¼Œè§„å®šä¼ å…¥å…³é”®å­—å‚æ•°çš„åå­—ï¼Œç”¨<em>éš”å¼€å¿…é€‰å‚æ•°.<br>
å¦‚æœå‰é¢ç´§è·Ÿå¯å˜å‚æ•°ï¼Œå¯ä»¥çœç•¥</em>ã€‚<br>
å¯ä»¥æœ‰ç¼ºçœå€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, *, city=<span class="string">'Beijing'</span>, job)</span>:</span></span><br><span class="line">    print(name, age, city, job)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è°ƒç”¨å¿…é¡»ä½¿ç”¨å…³é”®å­—ï¼Œå¦åˆ™ä¼šé»˜è®¤ä¸ºä½ç½®å‚æ•°ã€‚</span></span><br><span class="line">person(<span class="string">'Jack'</span>, <span class="number">24</span>, job=<span class="string">'Engineer'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="å‚æ•°ç»„åˆ"><a class="header-anchor" href="#å‚æ•°ç»„åˆ">Â¶</a>å‚æ•°ç»„åˆ</h3>
<p>äº”å¤§å‚æ•°ç»„åˆä¸€èµ·ç”¨æ—¶ï¼Œè¦æŒ‰ç…§æ—¢å®šé¡ºåºï¼šå¿…é€‰å‚æ•°ï¼Œé»˜è®¤å‚æ•°ï¼Œå¯å˜å‚æ•°ï¼Œå…³é”®å­—å‚æ•°ï¼Œå‘½åå…³é”®å­—å‚æ•°ã€‚</p>
<h1>ç‰¹æ€§</h1>
<h3 id="1-åˆ‡ç‰‡"><a class="header-anchor" href="#1-åˆ‡ç‰‡">Â¶</a>1. åˆ‡ç‰‡</h3>
<p>æŠ½å–éƒ¨åˆ†å€¼<br>
åˆ‡ç‰‡æ“ä½œåŸºæœ¬è¡¨è¾¾å¼ï¼šobject[start_index:end_index:step]<br>
è´Ÿæ•°ä¸ºåå‘</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">100</span>)[<span class="number">2</span>::<span class="number">3</span>][<span class="number">-5</span>:]: </span><br><span class="line">       print(i)</span><br><span class="line">n[::<span class="number">-1</span>] <span class="comment">#é€†åºåˆ‡ç‰‡</span></span><br></pre></td></tr></table></figure>
<p>[:]å’Œ.copy()éƒ½å±äºâ€œæµ…æ‹·è´â€ï¼Œåªæ‹·è´æœ€å¤–å±‚å…ƒç´ ï¼Œå†…å±‚åµŒå¥—å…ƒç´ åˆ™é€šè¿‡å¼•ç”¨æ–¹å¼å…±äº«ï¼Œè€Œéç‹¬ç«‹åˆ†é…å†…å­˜ï¼Œå¦‚æœéœ€è¦å½»åº•æ‹·è´åˆ™éœ€é‡‡ç”¨â€œæ·±æ‹·è´â€æ–¹å¼ï¼Œdeepcopy().</p>
<h3 id="2-è¿­ä»£"><a class="header-anchor" href="#2-è¿­ä»£">Â¶</a>2. è¿­ä»£</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">isinstance(<span class="string">'abc'</span>, Iterable) <span class="comment"># stræ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">9</span>)]:</span><br><span class="line">   print(x, y)</span><br><span class="line"><span class="comment">#enumerateå‡½æ•°å¯ä»¥æŠŠä¸€ä¸ªlistå˜æˆç´¢å¼•-å…ƒç´ å¯¹</span></span><br><span class="line"><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]):</span><br><span class="line">   print(i, value)</span><br></pre></td></tr></table></figure>
<h3 id="3-åˆ—è¡¨ç”Ÿæˆå™¨"><a class="header-anchor" href="#3-åˆ—è¡¨ç”Ÿæˆå™¨">Â¶</a>3. åˆ—è¡¨ç”Ÿæˆå™¨</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br><span class="line"><span class="comment">#è¿˜å¯ä»¥åšåˆ¤æ–­</span></span><br><span class="line">[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment">#ä¸¤å±‚å¾ªç¯</span></span><br><span class="line">[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'XYZ'</span>]</span><br><span class="line"><span class="comment">#å¾ªç¯dictçš„key-value pair</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">   print(k, <span class="string">'='</span>, v)</span><br><span class="line">[k + <span class="string">'='</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line"><span class="comment">#æŠŠlistæ‰€æœ‰çš„strè½¬æˆå°å†™</span></span><br><span class="line">[s.lower() <span class="keyword">for</span> s <span class="keyword">in</span> L]</span><br><span class="line"><span class="comment">#åé¢ifæ˜¯ç­›é€‰æ¡ä»¶</span></span><br><span class="line">[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"><span class="comment">#if..elseæ˜¯è¡¨è¾¾å¼</span></span><br><span class="line">[x <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">else</span> -x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="4-ç”Ÿæˆå™¨"><a class="header-anchor" href="#4-ç”Ÿæˆå™¨">Â¶</a>4. ç”Ÿæˆå™¨</h3>
<p>è®°å½•çš„æ˜¯ç®—æ³•ï¼Œåªæœ‰åœ¨è°ƒç”¨çš„æ—¶å€™æ‰å¼€å§‹è®¡ç®—ç»“æœã€‚<br>
next(g)è¿”å›ä¸€æ¬¡è®¡ç®—å€¼ã€‚for i in g</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">g = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>))</span><br><span class="line">next(g) <span class="comment"># 0</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­åŒ…å«yieldå…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªgeneratorï¼Œ<br>
æ¯æ¬¡è°ƒç”¨next()çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°yieldè¯­å¥è¿”å›.<br>
å†æ¬¡æ‰§è¡Œæ—¶ä»ä¸Šæ¬¡è¿”å›çš„yieldè¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 id="5-è¿­ä»£å™¨"><a class="header-anchor" href="#5-è¿­ä»£å™¨">Â¶</a>5. è¿­ä»£å™¨</h3>
<p>Iteratorç”šè‡³å¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ— é™å¤§çš„æ•°æ®æµï¼Œå¯ä»¥è¢«next()å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªå€¼çš„å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼šIteratorã€‚ç”Ÿæˆå™¨éƒ½æ˜¯Iteratorå¯¹è±¡ï¼Œä½†listã€dictã€strè™½ç„¶æ˜¯Iterableï¼Œå´ä¸æ˜¯Iteratorã€‚</p>
<p>æŠŠlistã€dictã€strç­‰Iterableå˜æˆIteratorå¯ä»¥ä½¿ç”¨iter()å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">isinstance(iter([]), Iterator)</span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<h1>å‡½æ•°å¼ç¼–ç¨‹</h1>
<h3 id="é«˜é˜¶å‡½æ•°"><a class="header-anchor" href="#é«˜é˜¶å‡½æ•°">Â¶</a>é«˜é˜¶å‡½æ•°</h3>
<p>å‡½æ•°æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå‡½æ•°åå¯ä»¥çœ‹ä½œå˜é‡èƒ½è¢«å½“ä½œå‚æ•°ä¼ å…¥å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = abs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y,f)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> f(x) + f(y)</span><br></pre></td></tr></table></figure>
<h3 id="åŒ¿åå‡½æ•°-Lambda"><a class="header-anchor" href="#åŒ¿åå‡½æ•°-Lambda">Â¶</a>åŒ¿åå‡½æ•° Lambda</h3>
<p>å…³é”®å­—lambdaè¡¨ç¤ºåŒ¿åå‡½æ•°ï¼Œå†’å·å‰é¢çš„nè¡¨ç¤ºå‡½æ•°å‚æ•°ï¼Œå¯ä»¥æœ‰å¤šä¸ªå‚æ•°ã€‚<br>
åŒ¿åå‡½æ•°æœ‰ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸ç”¨å†™returnï¼Œè¿”å›å€¼å°±æ˜¯è¯¥è¡¨è¾¾å¼çš„ç»“æœã€‚</p>
<h5 id="å¥½å¤„ï¼š"><a class="header-anchor" href="#å¥½å¤„ï¼š">Â¶</a>å¥½å¤„ï¼š</h5>
<ol>
<li>ä¸å¿…æ‹…å¿ƒå‡½æ•°åå†²çªã€‚åŒ¿åå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†åˆ©ç”¨å˜é‡æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼š</li>
<li>æœ‰äº›å‡½æ•°åœ¨ä»£ç ä¸­åªç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨åŒ¿åå‡½æ•°å¯ä»¥å‡å°‘ä»£ç é‡</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x**y</span><br><span class="line"><span class="comment">#æ¢æˆåŒ¿åå‡½æ•°</span></span><br><span class="line">calc = <span class="keyword">lambda</span> x,y:x**y</span><br><span class="line">print(calc(<span class="number">2</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; y:</span><br><span class="line">        <span class="keyword">return</span> x*y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x / y    </span><br><span class="line"><span class="comment">#ä¸‰å…ƒè¿ç®—æ¢æˆåŒ¿åå‡½æ•°</span></span><br><span class="line">calc = <span class="keyword">lambda</span> x,y:x * y <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> x / y</span><br><span class="line">print(calc(<span class="number">2</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸ç”¨å‡½æ•°"><a class="header-anchor" href="#å¸¸ç”¨å‡½æ•°">Â¶</a>å¸¸ç”¨å‡½æ•°</h3>
<ol>
<li>map(f,Iterable)<br>
æ˜ å°„ï¼Œå°†ç»“æœä½œä¸ºæ–°çš„Iteratorè¿”å›ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list[map(str,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])]</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>reduce(f,Iterable)<br>
å åŠ è°ƒç”¨ï¼Œé‡å¤çš„å¯¹ä¸Šä¸€æ¬¡è°ƒç”¨å‡½æ•°çš„ç»“æœä¸ä¸‹ä¸€ä¸ªåºåˆ—è°ƒç”¨å‡½æ•°è®¡ç®—ç»“æœã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> x + y</span><br><span class="line">reduce(add,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])<span class="comment"># 1+2+3+4+5</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>filter(f,Iterable)<br>
ç­›é€‰ï¼Œfçš„è¿”å›å€¼åº”è¯¥ä¼štrueæˆ–falseï¼Œæœ€åç”Ÿæˆä¸€ä¸ªå…¨ä¸ºtrueçš„Iteratorã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä¸€ä¸ªlistä¸­ï¼Œåˆ æ‰å¶æ•°ï¼Œåªä¿ç•™å¥‡æ•°</span></span><br><span class="line">li = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>]</span><br><span class="line">print(list(filter(<span class="keyword">lambda</span> x:x % <span class="number">2</span>==<span class="number">1</span>,li)))  <span class="comment"># [1, 5, 9, 15]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›æ•°æ˜¯æŒ‡ä»å·¦å‘å³è¯»å’Œä»å³å‘å·¦è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•°ï¼Œä¾‹å¦‚12321ï¼Œ909ã€‚è¯·åˆ©ç”¨filter()ç­›é€‰å‡ºå›æ•°</span></span><br><span class="line">li = list(range(<span class="number">1</span>, <span class="number">200</span>))</span><br><span class="line">print(list(filter(<span class="keyword">lambda</span> x:int(str(x))==int(str(x)[::<span class="number">-1</span>]),li)))</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>, <span class="number">88</span>, <span class="number">99</span>, <span class="number">101</span>, <span class="number">111</span>, <span class="number">121</span>, <span class="number">131</span>, <span class="number">141</span>, <span class="number">151</span>, <span class="number">161</span>, <span class="number">171</span>, <span class="number">181</span>, <span class="number">191</span>]</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>sorted(Iterable, key = None, reverse = false)<br>
å¯¹ä¸€ä¸ªIterableè‡ªå®šä¹‰æ’åºï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¹åˆ—è¡¨æŒ‰ç…§ç»å¯¹å€¼è¿›è¡Œæ’åº</span></span><br><span class="line">li= [<span class="number">-21</span>, <span class="number">-12</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">36</span>]</span><br><span class="line">print(sorted(li, key = <span class="keyword">lambda</span> x:abs(x)))</span><br><span class="line"><span class="comment"># [5, 9, -12, -21, 36]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠä¸‹é¢å•è¯ä»¥é¦–å­—æ¯æ’åº</span></span><br><span class="line">li = [<span class="string">'bad'</span>, <span class="string">'about'</span>, <span class="string">'Zoo'</span>, <span class="string">'Credit'</span>]</span><br><span class="line">print(sorted(li, key = <span class="keyword">lambda</span> x : x[<span class="number">0</span>]))</span><br><span class="line"><span class="comment"># è¾“å‡º['Credit', 'Zoo', 'about', 'bad']</span></span><br></pre></td></tr></table></figure>
<h3 id="è¿”å›å‡½æ•°"><a class="header-anchor" href="#è¿”å›å‡½æ•°">Â¶</a>è¿”å›å‡½æ•°</h3>
<p>å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªé—­åŒ…ï¼Œåªæœ‰åœ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œé—­åŒ…æ‰ä¼šæ‰§è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›å‡½æ•°ä¸è¦å¼•ç”¨ä»»ä½•å¾ªç¯å˜é‡ï¼Œæˆ–è€…åç»­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡ã€‚</p>
<h3 id="è£…é¥°å™¨"><a class="header-anchor" href="#è£…é¥°å™¨">Â¶</a>è£…é¥°å™¨</h3>
<p>åœ¨ä»£ç è¿è¡ŒæœŸé—´åŠ¨æ€å¢åŠ åŠŸèƒ½çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸ºâ€œè£…é¥°å™¨â€ï¼ˆDecoratorï¼‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span> <span class="comment">#è£…é¥°å™¨ä¼ å…¥å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">        @functools.wraps(func) #è£…é¥°å™¨ä¼šå°†ä¼ å…¥çš„å‡½æ•°æ”¹åï¼Œè¿™å¥æ”¹å›æ¥</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span> </span><br><span class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</span><br><span class="line">            temp = func(*args, **kw)  <span class="comment">#åœ¨è¿™ä¸ªä½ç½®æ‰§è¡Œ</span></span><br><span class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</span><br><span class="line">            <span class="keyword">return</span> temp <span class="comment">#è¿”å›æ‰§è¡Œä¼ å…¥çš„å‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'2015-3-25'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="åå‡½æ•°"><a class="header-anchor" href="#åå‡½æ•°">Â¶</a>åå‡½æ•°</h3>
<p>ä¸ºå‡½æ•°çš„å‚æ•°è®¾å®šé»˜è®¤å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚ä»ç„¶å¯ä»¥ä¼ å…¥è¿™ä¸ªå‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> functools</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2 = functools.partial(int, base=<span class="number">2</span>) <span class="comment">#è¡¨ç¤ºintä¼ å…¥çš„stræ˜¯äºŒè¿›åˆ¶ï¼Œè½¬å›åè¿›åˆ¶</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1000000'</span>)</span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int2(<span class="string">'1010101'</span>)</span><br><span class="line"><span class="number">85</span></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºåå‡½æ•°æ—¶ï¼Œå¯ä»¥æ¥æ”¶å‡½æ•°å¯¹è±¡ã€*argså’Œ**kwè¿™3ä¸ªå‚æ•°ã€‚</p>
<h1>æ¨¡å—</h1>
<p>å°†pyæ–‡ä»¶æ”¾å…¥æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶å¤¹åå³æ˜¯åŒ…åã€‚<br>
åªè¦é¡¶å±‚çš„åŒ…åä¸ä¸åˆ«äººå†²çªï¼Œé‚£æ‰€æœ‰æ¨¡å—éƒ½ä¸ä¼šä¸åˆ«äººå†²çªã€‚ç°åœ¨ï¼Œabc.pyæ¨¡å—çš„åå­—å°±å˜æˆäº†mycompany.abc</p>
<p>æ¯ä¸€ä¸ªåŒ…ç›®å½•ä¸‹é¢éƒ½ä¼šæœ‰ä¸€ä¸ª__init__.pyçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå¦åˆ™ï¼ŒPythonå°±æŠŠè¿™ä¸ªç›®å½•å½“æˆæ™®é€šç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŒ…ã€‚<strong>init</strong>.pyå¯ä»¥æ˜¯ç©ºæ–‡ä»¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">' a test module '</span> <span class="comment">#æ¨¡å—æ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">'Michael Liao'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    args = sys.argv</span><br><span class="line">    <span class="keyword">if</span> len(args)==<span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'Hello, world!'</span>)</span><br><span class="line">    <span class="keyword">elif</span> len(args)==<span class="number">2</span>:</span><br><span class="line">        print(<span class="string">'Hello, %s!'</span> % args[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'Too many arguments!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>: <span class="comment">#ç”¨äºæµ‹è¯•ï¼Œå…¶ä»–åœ°æ–¹å¯¼å…¥è¿™ä¸ªæ¨¡å—æ—¶åˆ™ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    test()</span><br></pre></td></tr></table></figure>
<h3 id="ä½œç”¨åŸŸ"><a class="header-anchor" href="#ä½œç”¨åŸŸ">Â¶</a>ä½œç”¨åŸŸ</h3>
<p>é»˜è®¤æ˜¯publicçš„ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ã€‚<br>
<strong>xxx__è¿™æ ·çš„å˜é‡æ˜¯ç‰¹æ®Šå˜é‡ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ï¼Œä½†æ˜¯æœ‰ç‰¹æ®Šç”¨é€”ï¼Œæ¯”å¦‚ä¸Šé¢çš„__author</strong>ï¼Œ__name__å°±æ˜¯ç‰¹æ®Šå˜é‡ï¼Œhelloæ¨¡å—å®šä¹‰çš„æ–‡æ¡£æ³¨é‡Šä¹Ÿå¯ä»¥ç”¨ç‰¹æ®Šå˜é‡__doc__è®¿é—®ï¼Œæˆ‘ä»¬è‡ªå·±çš„å˜é‡ä¸€èˆ¬ä¸è¦ç”¨è¿™ç§å˜é‡åï¼›<br>
ç±»ä¼¼_xxxå’Œ__xxxè¿™æ ·çš„å‡½æ•°æˆ–å˜é‡å°±æ˜¯éå…¬å¼€çš„ï¼ˆprivateï¼‰ï¼Œä¸åº”è¯¥è¢«ç›´æ¥å¼•ç”¨ï¼Œæ¯”å¦‚_abcï¼Œ__abcç­‰ã€‚<br>
Pythonå¹¶æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å®Œå…¨é™åˆ¶è®¿é—®privateå‡½æ•°æˆ–å˜é‡ã€‚</p>
]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒ…å«minå‡½æ•°çš„æ ˆï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/22/%E5%8C%85%E5%90%ABmin%E5%87%BD%E6%95%B0%E7%9A%84%E6%A0%88%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šå®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆä¸­æ‰€å«æœ€å°å…ƒç´ çš„minå‡½æ•°ï¼ˆæ—¶é—´å¤æ‚åº¦åº”ä¸ºOï¼ˆ1ï¼‰ï¼‰ã€‚
æ³¨æ„ï¼šä¿è¯æµ‹è¯•ä¸­ä¸ä¼šå½“æ ˆä¸ºç©ºçš„æ—¶å€™ï¼Œå¯¹æ ˆè°ƒç”¨pop()æˆ–è€…min()æˆ–è€…top()æ–¹æ³•ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>ç”¨ä¸€ä¸ªè¾…åŠ©æ ˆå­˜å–ä¸»æ ˆçš„éä¸¥æ ¼é€’å¢åºåˆ—ã€‚ç”¨minï¼ˆï¼‰æ—¶ï¼Œpeekï¼ˆï¼‰è¾…åŠ©æ ˆã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; mainStack,subStack;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mainStack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        subStack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">        mainStack.add(node);</span><br><span class="line">        <span class="keyword">if</span>(subStack.empty()||node&lt;=subStack.peek())&#123;</span><br><span class="line">            subStack.add(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> bepop = mainStack.pop();</span><br><span class="line">        <span class="keyword">if</span>(bepop == subStack.peek())&#123;</span><br><span class="line">            subStack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mainStack.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">min</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> subStack.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/22/%E9%A1%BA%E6%97%B6%E9%92%88%E6%89%93%E5%8D%B0%E7%9F%A9%E9%98%B5%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥å¦‚ä¸‹4 X 4çŸ©é˜µï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 åˆ™ä¾æ¬¡æ‰“å°å‡ºæ•°å­—1,2,3,4,8,12,16,15,14,13,9,5,6,7,11,10.
</code></pre>
<a id="more"></a>
<p>ç”»åœ†å–æ•°ï¼Œç¼©å°èŒƒå›´ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶ï¼Œå–è¿‡çš„æ•°ä¸å¿…å†å–ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printMatrix</span><span class="params">(<span class="keyword">int</span> [][] matrix)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; result =<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(matrix == <span class="keyword">null</span>||matrix.length == <span class="number">0</span>) </span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        <span class="keyword">int</span> row = matrix.length;</span><br><span class="line">        <span class="keyword">int</span> column = matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">int</span> top = <span class="number">0</span>;<span class="keyword">int</span> bottom = row-<span class="number">1</span>;<span class="keyword">int</span> left = <span class="number">0</span>;<span class="keyword">int</span> right = column-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(top&lt;=bottom&amp;&amp;left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = left;i&lt;=right;++i)</span><br><span class="line">                result.add(matrix[top][i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = top+<span class="number">1</span>;i&lt;=bottom;++i)</span><br><span class="line">                result.add(matrix[i][right]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = right-<span class="number">1</span>;top&lt;bottom&amp;&amp;i&gt;=left;--i)</span><br><span class="line">                result.add(matrix[bottom][i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = bottom-<span class="number">1</span>;left&lt;right&amp;&amp;i&gt;top;--i)</span><br><span class="line">                result.add(matrix[i][left]);</span><br><span class="line">            ++left;++top;--right;--bottom;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘çš„é•œåƒï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/21/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%95%9C%E5%83%8F%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæ“ä½œç»™å®šçš„äºŒå‰æ ‘ï¼Œå°†å…¶å˜æ¢ä¸ºæºäºŒå‰æ ‘çš„é•œåƒã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£1 é€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å…ˆå‰åºéå†è¿™æ£µæ ‘çš„æ¯ä¸ªç»“ç‚¹ï¼Œå¦‚æœéå†åˆ°çš„ç»“ç‚¹æœ‰å­ç»“ç‚¹ï¼Œå°±äº¤æ¢å®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œ</span></span><br><span class="line"><span class="comment">å½“äº¤æ¢å®Œæ‰€æœ‰çš„éå¶å­ç»“ç‚¹çš„å·¦å³å­ç»“ç‚¹ä¹‹åï¼Œå°±å¾—åˆ°äº†æ ‘çš„é•œåƒ */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Mirror</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">         </span><br><span class="line">        TreeNode pTemp = root.left;</span><br><span class="line">        root.left = root.right;</span><br><span class="line">        root.right = pTemp;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>(root.left != <span class="keyword">null</span>)</span><br><span class="line">            Mirror(root.left);</span><br><span class="line">        <span class="keyword">if</span>(root.right != <span class="keyword">null</span>)</span><br><span class="line">            Mirror(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£ 2 è¿­ä»£</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Mirror</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//å°†äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹é€å±‚æ”¾å…¥æ ˆä¸­ï¼Œå†è¿­ä»£å¤„ç†æ ˆä¸­çš„å…ƒç´ </span></span><br><span class="line">		LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">        TreeNode tmp = root;</span><br><span class="line">		stack.addFirst(tmp);</span><br><span class="line">		<span class="keyword">while</span>(!stack.isEmpty()) &#123;</span><br><span class="line">			<span class="comment">//æ¯æ¬¡éƒ½ä»æ ˆä¸­æ‹¿ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶äº¤æ¢è¿™ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘</span></span><br><span class="line">			tmp = stack.removeFirst();</span><br><span class="line">			swapLR(tmp);</span><br><span class="line">			<span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™æ”¾å…¥æ ˆç­‰å¾…åç»­å¤„ç†</span></span><br><span class="line">			<span class="keyword">if</span>(tmp.left!=<span class="keyword">null</span>) &#123;</span><br><span class="line">				stack.addFirst(tmp.left);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™æ”¾å…¥æ ˆç­‰å¾…åç»­å¤„ç†</span></span><br><span class="line">			<span class="keyword">if</span>(tmp.right!=<span class="keyword">null</span>) &#123;</span><br><span class="line">				stack.addFirst(tmp.right);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swapLR</span><span class="params">(TreeNode node)</span></span>&#123;</span><br><span class="line">        TreeNode temp = node.left;</span><br><span class="line">        node.left = node.right;</span><br><span class="line">        node.right = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é¢å‘å¯¹è±¡æ€æƒ³</title>
    <url>/2020/03/20/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3/</url>
    <content><![CDATA[<a id="more"></a>
<h1>ä¸‰å¤§ç‰¹æ€§</h1>
<h3 id="1-å°è£…"><a class="header-anchor" href="#1-å°è£…">Â¶</a>1 å°è£…</h3>
<p>åˆ©ç”¨æŠ½è±¡æ•°æ®ç±»å‹å°†æ•°æ®å’Œä½¿ç”¨æ•°æ®çš„æ–¹æ³•å°è£…ï¼Œå¯¹å¤–å¼€æ”¾æ¥å£è€Œä¸æš´éœ²å¯¹è±¡å†…éƒ¨å®ç°çš„ç»†èŠ‚ã€‚ä½¿å¾—ç”¨æˆ·æ— é¡»å…³å¿ƒå¯¹è±¡å†…éƒ¨çš„ç»†èŠ‚ï¼Œè€Œå¯ä»¥é€šè¿‡æ¥å£è®¿é—®å¯¹è±¡çš„æ•°æ®å’Œæ–¹æ³•ã€‚</p>
<h3 id="ä¼˜ç‚¹"><a class="header-anchor" href="#ä¼˜ç‚¹">Â¶</a>ä¼˜ç‚¹</h3>
<ol>
<li>å‡å°‘è€¦åˆï¼šå¯ä»¥ç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•ã€ä¼˜åŒ–ã€ä½¿ç”¨ã€ç†è§£å’Œä¿®æ”¹</li>
<li>å‡è½»ç»´æŠ¤çš„è´Ÿæ‹…ï¼šå¯ä»¥æ›´å®¹æ˜“è¢«ç†è§£ï¼Œå¹¶ä¸”åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥ä¸å½±å“å…¶ä»–æ¨¡å—</li>
<li>æœ‰æ•ˆåœ°è°ƒèŠ‚æ€§èƒ½ï¼šå¯ä»¥é€šè¿‡å‰–ææ¥ç¡®å®šå“ªäº›æ¨¡å—å½±å“äº†ç³»ç»Ÿçš„æ€§èƒ½</li>
<li>æé«˜è½¯ä»¶çš„å¯é‡ç”¨æ€§</li>
<li>é™ä½äº†æ„å»ºå¤§å‹ç³»ç»Ÿçš„é£é™©ï¼šå³ä½¿æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼Œä½†æ˜¯è¿™äº›ç‹¬ç«‹çš„æ¨¡å—å´æœ‰å¯èƒ½æ˜¯å¯ç”¨çš„</li>
</ol>
<h3 id="2-ç»§æ‰¿"><a class="header-anchor" href="#2-ç»§æ‰¿">Â¶</a>2 ç»§æ‰¿</h3>
<p>å®ç°is-Aå…³ç³»ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿è‡ªè¶…ç±»ï¼Œè·å¾—è¶…ç±»éprivateçš„å­—æ®µå’Œæ–¹æ³•ã€‚<br>
è¦éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚åªè¦æœ‰çˆ¶ç±»å‡ºç°çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç”¨å­ç±»æ¥æ›¿ä»£ï¼Œè€Œä¸”ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯å’Œå¼‚å¸¸ã€‚<br>
å³å¯ä»¥å®ç°å‘ä¸Šè½¬å‹ã€‚</p>
<h3 id="3-å¤šæ€"><a class="header-anchor" href="#3-å¤šæ€">Â¶</a>3 å¤šæ€</h3>
<p>åŒ…æ‹¬ç¼–è¯‘æ—¶å¤šæ€å’Œè¿è¡Œæ—¶å¤šæ€ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶å¤šæ€æ˜¯æŒ‡æ–¹æ³•çš„é‡è½½ï¼Œoverloadã€‚</li>
<li>è¿è¡Œæ—¶å¤šæ€æ˜¯æŒ‡åŠ¨æ€ç»‘å®šï¼Œç¨‹åºè¿è¡Œæ—¶èƒ½è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚å³ç¨‹åºä¸­å®šä¹‰çš„å¯¹è±¡å¼•ç”¨æ‰€æŒ‡å‘çš„å®é™…ç±»å‹åœ¨è¿è¡ŒæœŸé—´æ‰ç¡®å®šã€‚</li>
</ul>
<h5 id="è¿è¡Œæ—¶å¤šæ€çš„ä¸‰ä¸ªæ¡ä»¶ï¼š"><a class="header-anchor" href="#è¿è¡Œæ—¶å¤šæ€çš„ä¸‰ä¸ªæ¡ä»¶ï¼š">Â¶</a>è¿è¡Œæ—¶å¤šæ€çš„ä¸‰ä¸ªæ¡ä»¶ï¼š</h5>
<ul>
<li>ç»§æ‰¿</li>
<li>è¦†å†™override</li>
<li>å‘ä¸Šè½¬å‹<br>
ä¹å™¨ç±»ï¼ˆInstrumentï¼‰æœ‰ä¸¤ä¸ªå­ç±»ï¼šWind å’Œ Percussionï¼Œå®ƒä»¬éƒ½è¦†ç›–äº†çˆ¶ç±»çš„ play() æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ main() æ–¹æ³•ä¸­ä½¿ç”¨çˆ¶ç±» Instrument æ¥å¼•ç”¨ Wind å’Œ Percussion å¯¹è±¡ã€‚åœ¨ Instrument å¼•ç”¨è°ƒç”¨ play() æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œå®é™…å¼•ç”¨å¯¹è±¡æ‰€åœ¨ç±»çš„ play() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ Instrument ç±»çš„æ–¹æ³•ã€‚</li>
</ul>
<hr>
<h1>ç±»å›¾</h1>
<ol>
<li>æ³›åŒ–å…³ç³» (Generalization)<br>
ç”¨æ¥æè¿°ç»§æ‰¿å…³ç³»ï¼Œåœ¨ Java ä¸­ä½¿ç”¨ extends å…³é”®å­—ã€‚</li>
<li>å®ç°å…³ç³» (Realization)<br>
ç”¨æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œåœ¨ Java ä¸­ä½¿ç”¨ implements å…³é”®å­—ã€‚</li>
<li>èšåˆå…³ç³»<br>
è¡¨ç¤ºæ•´ä½“ç”±éƒ¨åˆ†ç»„æˆï¼Œä½†æ˜¯æ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–çš„ï¼Œæ•´ä½“ä¸å­˜åœ¨äº†éƒ¨åˆ†è¿˜æ˜¯ä¼šå­˜åœ¨ã€‚</li>
<li>ç»„åˆå…³ç³»<br>
å’Œèšåˆä¸åŒï¼Œç»„åˆä¸­æ•´ä½“å’Œéƒ¨åˆ†æ˜¯å¼ºä¾èµ–çš„ï¼Œæ•´ä½“ä¸å­˜åœ¨äº†éƒ¨åˆ†ä¹Ÿä¸å­˜åœ¨äº†ã€‚æ¯”å¦‚å…¬å¸å’Œéƒ¨é—¨ï¼Œå…¬å¸æ²¡äº†éƒ¨é—¨å°±ä¸å­˜åœ¨äº†ã€‚ä½†æ˜¯å…¬å¸å’Œå‘˜å·¥å°±å±äºèšåˆå…³ç³»äº†ï¼Œå› ä¸ºå…¬å¸æ²¡äº†å‘˜å·¥è¿˜åœ¨ã€‚</li>
<li>å…³è”å…³ç³»<br>
è¡¨ç¤ºä¸åŒç±»å¯¹è±¡ä¹‹é—´æœ‰å…³è”ï¼Œè¿™æ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œä¸è¿è¡Œè¿‡ç¨‹çš„çŠ¶æ€æ— å…³ï¼Œåœ¨æœ€å¼€å§‹å°±å¯ä»¥ç¡®å®šã€‚å› æ­¤ä¹Ÿå¯ä»¥ç”¨ 1 å¯¹ 1ã€å¤šå¯¹ 1ã€å¤šå¯¹å¤šè¿™ç§å…³è”å…³ç³»æ¥è¡¨ç¤ºã€‚æ¯”å¦‚å­¦ç”Ÿå’Œå­¦æ ¡å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ï¼Œä¸€ä¸ªå­¦æ ¡å¯ä»¥æœ‰å¾ˆå¤šå­¦ç”Ÿï¼Œä½†æ˜¯ä¸€ä¸ªå­¦ç”Ÿåªå±äºä¸€ä¸ªå­¦æ ¡ï¼Œå› æ­¤è¿™æ˜¯ä¸€ç§å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œåœ¨è¿è¡Œå¼€å§‹ä¹‹å‰å°±å¯ä»¥ç¡®å®šã€‚</li>
<li>ä¾èµ–å…³ç³»<br>
å’Œå…³è”å…³ç³»ä¸åŒçš„æ˜¯ï¼Œä¾èµ–å…³ç³»æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­èµ·ä½œç”¨çš„ã€‚A ç±»å’Œ B ç±»æ˜¯ä¾èµ–å…³ç³»ä¸»è¦æœ‰ä¸‰ç§å½¢å¼ï¼š</li>
</ol>
<ul>
<li>A ç±»æ˜¯ B ç±»æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼›</li>
<li>A ç±»æ˜¯ B ç±»æ–¹æ³•çš„å‚æ•°ï¼›</li>
<li>A ç±»å‘ B ç±»å‘é€æ¶ˆæ¯ï¼Œä»è€Œå½±å“ B ç±»å‘ç”Ÿå˜åŒ–ã€‚<br>
.</li>
</ul>
<hr>
<h1>å…­å¤§è®¾è®¡åŸåˆ™</h1>
<h3 id="S-O-L-I-D"><a class="header-anchor" href="#S-O-L-I-D">Â¶</a>S.O.L.I.D</h3>
<table>
<thead>
<tr>
<th style="text-align:right">ç®€å†™</th>
<th style="text-align:center">å…¨æ‹¼</th>
<th style="text-align:center">ä¸­æ–‡ç¿»è¯‘</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">SRP</td>
<td style="text-align:center">The Single Responsibility Principle</td>
<td style="text-align:center">å•ä¸€è´£ä»»åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:right">OCP</td>
<td style="text-align:center">The Open Closed Principle</td>
<td style="text-align:center">å¼€æ”¾å°é—­åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:right">LSP</td>
<td style="text-align:center">The Liskov Substitution Principle</td>
<td style="text-align:center">é‡Œæ°æ›¿æ¢åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:right">ISP</td>
<td style="text-align:center">The Interface Segregation Principle</td>
<td style="text-align:center">æ¥å£åˆ†ç¦»åŸåˆ™</td>
</tr>
<tr>
<td style="text-align:right">DIP</td>
<td style="text-align:center">The Dependency Inversion Principle</td>
<td style="text-align:center">ä¾èµ–å€’ç½®åŸåˆ™</td>
</tr>
</tbody>
</table>
<h3 id="1-å•ä¸€è´£ä»»åŸåˆ™ï¼šä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åªæœ‰ä¸€ä¸ª"><a class="header-anchor" href="#1-å•ä¸€è´£ä»»åŸåˆ™ï¼šä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åªæœ‰ä¸€ä¸ª">Â¶</a>1 å•ä¸€è´£ä»»åŸåˆ™ï¼šä¿®æ”¹ä¸€ä¸ªç±»çš„åŸå› åªæœ‰ä¸€ä¸ª</h3>
<p>æ¢å¥è¯è¯´å°±æ˜¯è®©ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä»¶äº‹ï¼Œå½“è¿™ä¸ªç±»éœ€è¦åšè¿‡å¤šäº‹æƒ…çš„æ—¶å€™ï¼Œå°±éœ€è¦åˆ†è§£è¿™ä¸ªç±»ã€‚<br>
é™ä½è€¦åˆ</p>
<h3 id="2-å¼€æ”¾å°é—­åŸåˆ™ï¼šç±»åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­"><a class="header-anchor" href="#2-å¼€æ”¾å°é—­åŸåˆ™ï¼šç±»åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­">Â¶</a>2 å¼€æ”¾å°é—­åŸåˆ™ï¼šç±»åº”è¯¥å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</h3>
<p>æ‰©å±•å°±æ˜¯æ·»åŠ æ–°åŠŸèƒ½çš„æ„æ€ï¼Œå› æ­¤è¯¥åŸåˆ™è¦æ±‚åœ¨æ·»åŠ æ–°åŠŸèƒ½æ—¶ä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚<br>
ç¬¦åˆå¼€é—­åŸåˆ™æœ€å…¸å‹çš„è®¾è®¡æ¨¡å¼æ˜¯è£…é¥°è€…æ¨¡å¼ï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°å°†è´£ä»»é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œè€Œä¸ç”¨å»ä¿®æ”¹ç±»çš„ä»£ç ã€‚</p>
<h3 id="3-é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡å¯ä»¥å®Œå…¨æ›¿æ¢è¶…ç±»å¯¹è±¡"><a class="header-anchor" href="#3-é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡å¯ä»¥å®Œå…¨æ›¿æ¢è¶…ç±»å¯¹è±¡">Â¶</a>3 é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»å¯¹è±¡å¯ä»¥å®Œå…¨æ›¿æ¢è¶…ç±»å¯¹è±¡</h3>
<p>ç»§æ‰¿æ˜¯ä¸€ç§ IS-A å…³ç³»ï¼Œå­ç±»éœ€è¦èƒ½å¤Ÿå½“æˆçˆ¶ç±»æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦æ¯”çˆ¶ç±»æ›´ç‰¹æ®Šã€‚<br>
å¦‚æœä¸æ»¡è¶³è¿™ä¸ªåŸåˆ™ï¼Œé‚£ä¹ˆå„ä¸ªå­ç±»çš„è¡Œä¸ºä¸Šå°±ä¼šæœ‰å¾ˆå¤§å·®å¼‚ï¼Œå¢åŠ ç»§æ‰¿ä½“ç³»çš„å¤æ‚åº¦ã€‚</p>
<h3 id="4-æ¥å£åˆ†ç¦»åŸåˆ™ï¼šä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºå®ƒä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚"><a class="header-anchor" href="#4-æ¥å£åˆ†ç¦»åŸåˆ™ï¼šä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºå®ƒä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚">Â¶</a>4 æ¥å£åˆ†ç¦»åŸåˆ™ï¼šä¸åº”è¯¥å¼ºè¿«å®¢æˆ·ä¾èµ–äºå®ƒä»¬ä¸ç”¨çš„æ–¹æ³•ã€‚</h3>
<p>å› æ­¤ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£æ¯”ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£è¦å¥½ã€‚</p>
<h3 id="5-ä¾èµ–å€’ç½®åŸåˆ™ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚"><a class="header-anchor" href="#5-ä¾èµ–å€’ç½®åŸåˆ™ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚">Â¶</a>5 ä¾èµ–å€’ç½®åŸåˆ™ï¼šé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</h3>
<p>é«˜å±‚æ¨¡å—åŒ…å«ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­é‡è¦çš„ç­–ç•¥é€‰æ‹©å’Œä¸šåŠ¡æ¨¡å—ï¼Œå¦‚æœé«˜å±‚æ¨¡å—ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œé‚£ä¹ˆä½å±‚æ¨¡å—çš„æ”¹åŠ¨å°±ä¼šç›´æ¥å½±å“åˆ°é«˜å±‚æ¨¡å—ï¼Œä»è€Œè¿«ä½¿é«˜å±‚æ¨¡å—ä¹Ÿéœ€è¦æ”¹åŠ¨ã€‚<br>
é¢å‘æŠ½è±¡<br>
ä¾èµ–äºæŠ½è±¡æ„å‘³ç€ï¼š</p>
<ul>
<li>ä»»ä½•å˜é‡éƒ½ä¸åº”è¯¥æŒæœ‰ä¸€ä¸ªæŒ‡å‘å…·ä½“ç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼›</li>
<li>ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿï¼›</li>
<li>ä»»ä½•æ–¹æ³•éƒ½ä¸åº”è¯¥è¦†å†™å®ƒçš„ä»»ä½•åŸºç±»ä¸­çš„å·²ç»å®ç°çš„æ–¹æ³•ã€‚<br>
.</li>
</ul>
<hr>
<h1>å…¶ä»–åŸåˆ™</h1>
<ol>
<li>è¿ªç±³ç‰¹æ³•åˆ™<br>
è¿ªç±³ç‰¹æ³•åˆ™åˆå«ä½œæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼Œç®€å†™ LKPï¼‰ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ï¼Œä¸å’Œé™Œç”Ÿäººè¯´è¯ã€‚</li>
<li>åˆæˆå¤ç”¨åŸåˆ™<br>
å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚</li>
<li>å…±åŒå°é—­åŸåˆ™<br>
ä¸€èµ·ä¿®æ”¹çš„ç±»ï¼Œåº”è¯¥ç»„åˆåœ¨ä¸€èµ·ï¼ˆåŒä¸€ä¸ªåŒ…é‡Œï¼‰ã€‚å¦‚æœå¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºé‡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„ä¿®æ”¹éƒ½å‘ç”Ÿåœ¨ä¸€ä¸ªåŒ…é‡Œï¼ˆä¿®æ”¹å…³é—­ï¼‰ï¼Œè€Œä¸æ˜¯éå¸ƒåœ¨å¾ˆå¤šåŒ…é‡Œã€‚</li>
<li>ç¨³å®šæŠ½è±¡åŸåˆ™<br>
æœ€ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯æœ€æŠ½è±¡çš„åŒ…ï¼Œä¸ç¨³å®šçš„åŒ…åº”è¯¥æ˜¯å…·ä½“çš„åŒ…ï¼Œå³åŒ…çš„æŠ½è±¡ç¨‹åº¦è·Ÿå®ƒçš„ç¨³å®šæ€§æˆæ­£æ¯”ã€‚</li>
<li>ç¨³å®šä¾èµ–åŸåˆ™<br>
åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»éƒ½åº”è¯¥æ˜¯ç¨³å®šæ–¹å‘ä¾èµ–çš„ï¼ŒåŒ…è¦ä¾èµ–çš„åŒ…è¦æ¯”è‡ªå·±æ›´å…·æœ‰ç¨³å®šæ€§ã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>ç¨‹åºè®¾è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘çš„å­ç»“æ„ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/20/%E6%A0%91%E7%9A%84%E5%AD%90%E7%BB%93%E6%9E%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aï¼ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚ï¼ˆpsï¼šæˆ‘ä»¬çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„ï¼‰
</code></pre>
<a id="more"></a>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public class TreeNode &#123;</span></span><br><span class="line"><span class="comment">    int val = 0;</span></span><br><span class="line"><span class="comment">    TreeNode left = null;</span></span><br><span class="line"><span class="comment">    TreeNode right = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public TreeNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">HasSubtree</span><span class="params">(TreeNode root1,TreeNode root2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> result = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(root1!=<span class="keyword">null</span> &amp;&amp; root2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root1.val == root2.val)&#123;</span><br><span class="line">                result = doesRoot2IssubTree(root1,root2);&#125;</span><br><span class="line">            <span class="keyword">if</span>(!result)&#123;</span><br><span class="line">                result = HasSubtree(root1.left,root2);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!result)&#123;</span><br><span class="line">                result = HasSubtree(root1.right,root2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">doesRoot2IssubTree</span><span class="params">(TreeNode root1,TreeNode root2)</span></span>&#123;</span><br><span class="line">        <span class="comment">//root2ä¸ºnullå¿…ä¸ºå­ç»“æ„1ï¼Œä¸€å®šè¦åœ¨root1åˆ¤æ–­ä¹‹å‰ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(root2 == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(root1 == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(root2.val != root1.val) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> doesRoot2IssubTree(root1.left,root2.left)</span><br><span class="line">            &amp;&amp;doesRoot2IssubTree(root1.right,root2.right);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘çš„éå†æ€»ç»“</title>
    <url>/2020/03/19/%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<pre><code>ä»Šå¤©åˆ·åˆ°äºŒå‰æ ‘ï¼Œé¡ºæ‰‹æ€»ç»“ä¸€æ³¢æ ‘çš„éå†ï¼Œå®ç°ä¸€ä¸‹ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1>å‰åºéå†</h1>
<p>æ ¹å·¦å³</p>
<h2 id="é€’å½’"><a class="header-anchor" href="#é€’å½’">Â¶</a>é€’å½’</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        traversal(root, aList);</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">traversal</span><span class="params">(TreeNode root, List&lt;Integer&gt; aList)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        aList.add(root.val);</span><br><span class="line">        traversal(root.left, aList);</span><br><span class="line">        traversal(root.right, aList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="éé€’å½’"><a class="header-anchor" href="#éé€’å½’">Â¶</a>éé€’å½’</h2>
<p>å‹æ ˆï¼Œå…ˆè®¿é—®å½“å‰ç»“ç‚¹å†å‹ä¸€è·¯å¾€å·¦å‹ï¼Œå‹åˆ°åº•popå‡ºæ¥ï¼Œå†è¿­ä»£å³å­æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(root != <span class="keyword">null</span>||!stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                aList.add(root.val);</span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            root = root.right;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ä¸­åºéå†</h1>
<p>å·¦æ ¹å³</p>
<h2 id="é€’å½’-v2"><a class="header-anchor" href="#é€’å½’-v2">Â¶</a>é€’å½’</h2>
<p>æ¢ä¸€ä¸‹è®¿é—®çš„ä½ç½®ï¼Œå…ˆé€’å½’åˆ°å·¦å­æ ‘åº•å†è®¿é—®ç»“ç‚¹ã€‚</p>
<h2 id="éé€’å½’-v2"><a class="header-anchor" href="#éé€’å½’-v2">Â¶</a>éé€’å½’</h2>
<p>å…ˆæŠŠæ‰€æœ‰å·¦å­ç»“ç‚¹å‹æ ˆï¼Œå†popå‡ºæ¥è®¿é—®ï¼Œå†é€’å½’å³å­æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(root!=<span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            aList.add(root.val);</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>ååºéå†</h1>
<h2 id="è§£æ³•ä¸€"><a class="header-anchor" href="#è§£æ³•ä¸€">Â¶</a>è§£æ³•ä¸€</h2>
<p>æ ¹å³å·¦çš„è®¿é—®é¡ºåºå¾—åˆ°åˆšå¥½æ˜¯ä¸ååºéå†ç›¸åçš„ç»“æœï¼Œæœ€åé€†åºè¾“å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; aList = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> aList;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(root);  </span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">            root = stack.pop();  </span><br><span class="line">            aList.push(root.val);      <span class="comment">//ä»å¤´å‹</span></span><br><span class="line">            <span class="keyword">if</span>(root.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root.right);</span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•äºŒ"><a class="header-anchor" href="#è§£æ³•äºŒ">Â¶</a>è§£æ³•äºŒ</h2>
<ol>
<li>ç”¨curè®°å½•å‰ä¸€ä¸ªç»“ç‚¹ã€‚</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ç»“ç‚¹æ˜¯curè€Œå·¦ç»“ç‚¹ä¸æ˜¯curçš„æƒ…å†µï¼Œè¯´æ˜åˆšä»å³å­æ ‘éå†å›æ¥ï¼Œæ²¡è¦å†å°†å·¦ç»“ç‚¹å‹æ ˆã€‚</li>
<li>è€Œå³ç»“ç‚¹çš„åªè¦ä¸æ˜¯curï¼Œè¯´æ˜æ²¡æœ‰éå†è¿‡å³å­æ ‘ï¼Œéœ€è¦å°†å³ç»“ç‚¹å‹æ ˆã€‚</li>
<li>å·¦å³ç»“ç‚¹å‡ä¸èƒ½å‹æ ˆï¼Œè¯´æ˜å·¦å³éƒ½å·²éå†è¿‡ï¼Œæ·»åŠ å½“å‰ç»“ç‚¹å…¥ç»“æœã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> aList;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode cur = root;</span><br><span class="line">        stack.push(root);  </span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">            root = stack.peekFirst();  </span><br><span class="line">            <span class="keyword">if</span>(root.left!=<span class="keyword">null</span> &amp;&amp; root.left!= cur &amp;&amp; root.right!=cur)&#123;</span><br><span class="line">                stack.push(root.left);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>&amp;&amp; root.right!=cur)&#123;</span><br><span class="line">                stack.push(root.right);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                aList.add(stack.pop().val); </span><br><span class="line">                cur = root;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å±‚æ¬¡éå†</h1>
<h2 id="BFS-å®½åº¦ä¼˜å…ˆæœç´¢"><a class="header-anchor" href="#BFS-å®½åº¦ä¼˜å…ˆæœç´¢">Â¶</a>BFS å®½åº¦ä¼˜å…ˆæœç´¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Deque&lt;TreeNode&gt; aQueue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> aList;</span><br><span class="line">        <span class="keyword">int</span> levels = <span class="number">0</span>;</span><br><span class="line">        aQueue.offerLast(root);</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—ç©ºå‰ä¸€ç›´éå†</span></span><br><span class="line">        <span class="keyword">while</span>(!aQueue.isEmpty())&#123;</span><br><span class="line">            <span class="comment">//æ¯å±‚whileå¾ªç¯ä»£è¡¨ä¸€å±‚éå†</span></span><br><span class="line">            aList.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;());</span><br><span class="line">            <span class="keyword">int</span> size = aQueue.size();</span><br><span class="line">            <span class="comment">//æ¯å±‚ç»“ç‚¹çš„æ•°é‡å³ä¸ºé˜Ÿåˆ—çš„å¤§å°</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; ++i)&#123;</span><br><span class="line">                root = aQueue.pollFirst();</span><br><span class="line">                aList.get(levels).add(root.val);</span><br><span class="line">                <span class="keyword">if</span>(root.left!=<span class="keyword">null</span>) aQueue.offerLast(root.left);</span><br><span class="line">                <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>) aQueue.offerLast(root.right);   </span><br><span class="line">            &#125;</span><br><span class="line">            levels++;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="DFS-æ·±åº¦ä¼˜å…ˆæœç´¢"><a class="header-anchor" href="#DFS-æ·±åº¦ä¼˜å…ˆæœç´¢">Â¶</a>DFS æ·±åº¦ä¼˜å…ˆæœç´¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; aList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">travel</span><span class="params">(TreeNode root, <span class="keyword">int</span> levels)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(aList.size() == levels)</span><br><span class="line">            aList.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;());</span><br><span class="line">        aList.get(levels).add(root.val);</span><br><span class="line">        <span class="keyword">if</span>(root.left!=<span class="keyword">null</span>)</span><br><span class="line">            travel(root.left, levels+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(root.right!=<span class="keyword">null</span>)</span><br><span class="line">            travel(root.right, levels+<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>) <span class="keyword">return</span> aList;</span><br><span class="line">        <span class="keyword">int</span> levels = <span class="number">0</span>;</span><br><span class="line">        travel(root, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> aList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æœ‰äº›é¢˜ç›®è¦æ±‚è‡ªåº•å‘ä¸Š"><a class="header-anchor" href="#æœ‰äº›é¢˜ç›®è¦æ±‚è‡ªåº•å‘ä¸Š">Â¶</a>æœ‰äº›é¢˜ç›®è¦æ±‚è‡ªåº•å‘ä¸Š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ ä¸ªé“¾è¡¨åè½¬å®Œäº‹</span></span><br><span class="line">Collections.reverse(ans);</span><br></pre></td></tr></table></figure>
<h3 id="105-ä»å‰åºéå†å’Œä¸­åºéå†æ„å»ºæ ‘ç»“æ„"><a class="header-anchor" href="#105-ä»å‰åºéå†å’Œä¸­åºéå†æ„å»ºæ ‘ç»“æ„">Â¶</a>105.ä»å‰åºéå†å’Œä¸­åºéå†æ„å»ºæ ‘ç»“æ„</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1. é€’å½’ï¼š</span></span><br><span class="line"><span class="comment">    å…³é”®åœ¨äºå‰åºéå†å’Œä¸­åºéå†æ˜¯åŒä¸€é¢—æ ‘çš„éå†ï¼Œä¹Ÿå°±æ˜¯è¯´å­æ ‘çš„æ•°é‡æ˜¯ç›¸åŒçš„ï¼Œé€šè¿‡è¿™ä¸ªå…±åŒç‚¹ï¼Œå¯ä»¥åœ¨å®šä½åˆ°ä¸­åºéå†çš„æ ¹ç»“ç‚¹çš„ä½ç½®çš„æ—¶å€™ï¼ŒåŒæ—¶æ‰¾åˆ°å‰åºéå†ä¸­å·¦å³å­æ ‘çš„è¾¹ç•Œã€‚è€ŒçŸ¥é“äº†å‰åºéå†å·¦å³å­æ ‘çš„è¾¹ç•Œï¼Œå³å¯æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„å·¦å³ç»“ç‚¹ï¼Œå› ä¸ºä¸€æ£µæ ‘çš„å‰åºéå†çš„ç¬¬ä¸€ä¸ªç»“ç‚¹å°±æ˜¯æ ¹ç»“ç‚¹ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    è¿™é‡Œç”¨äº†ä¸€ä¸ªmapï¼Œçœå»äº†æ‰¾æ ¹èŠ‚ç‚¹å¯¹åº”ä¸­åºéå†çš„ä¸‹æ ‡çš„éå†ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] preorder;</span><br><span class="line">    <span class="keyword">int</span>[] inorder;</span><br><span class="line">    HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] preorder, <span class="keyword">int</span>[] inorder)</span> </span>&#123; </span><br><span class="line">        <span class="keyword">this</span>.preorder = preorder;</span><br><span class="line">        <span class="keyword">this</span>.inorder = inorder;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; inorder.length; ++i)&#123;</span><br><span class="line">            map.put(inorder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode root = dfs(<span class="number">0</span>, preorder.length - <span class="number">1</span>, <span class="number">0</span>, inorder.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">TreeNode <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> leftPreorder, <span class="keyword">int</span> rightPreorder, <span class="keyword">int</span> leftInorder, <span class="keyword">int</span> rightInoder)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(leftPreorder &gt; rightPreorder)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> indexOfInorder = map.get(preorder[leftPreorder]);</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(preorder[leftPreorder]);</span><br><span class="line">        <span class="keyword">int</span> leftNum = indexOfInorder - leftInorder;</span><br><span class="line">        root.left = dfs(leftPreorder + <span class="number">1</span>, leftPreorder + leftNum, leftInorder, indexOfInorder - <span class="number">1</span>);</span><br><span class="line">        root.right = dfs(leftPreorder + leftNum + <span class="number">1</span>, rightPreorder, indexOfInorder + <span class="number">1</span>, rightInoder);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">    2. è¿­ä»£ï¼š</span></span><br><span class="line"><span class="comment">    åˆ©ç”¨ä¸€ä¸ªæ ˆå’Œä¸­åºéå†ä½ç½®çš„æ ‡è®°ä½ã€‚</span></span><br><span class="line"><span class="comment">    è¿™é‡Œæ ˆçš„ä½œç”¨æ˜¯æ‰¾åˆ°æ–°ä¸€ä¸ªä¸æ˜¯å·¦ç»“ç‚¹çš„ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] preorder, <span class="keyword">int</span>[] inorder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (preorder == <span class="keyword">null</span> || preorder.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(preorder[<span class="number">0</span>]);</span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">        stack.push(root);</span><br><span class="line">        <span class="keyword">int</span> inorderIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; preorder.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> preorderVal = preorder[i];</span><br><span class="line">            TreeNode node = stack.peek();</span><br><span class="line">            <span class="keyword">if</span> (node.val != inorder[inorderIndex]) &#123;</span><br><span class="line">                node.left = <span class="keyword">new</span> TreeNode(preorderVal);</span><br><span class="line">                stack.push(node.left);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek().val == inorder[inorderIndex]) &#123;</span><br><span class="line">                    node = stack.pop();</span><br><span class="line">                    inorderIndex++;</span><br><span class="line">                &#125;</span><br><span class="line">                node.right = <span class="keyword">new</span> TreeNode(preorderVal);</span><br><span class="line">                stack.push(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>åè½¬é“¾è¡¨ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/19/%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œåè½¬é“¾è¡¨åï¼Œè¾“å‡ºæ–°é“¾è¡¨çš„è¡¨å¤´ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>pre head nextæ¥äº¤æ¢ã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">ReverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">if</span>(head==<span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//headä¸ºå½“å‰èŠ‚ç‚¹ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºçš„è¯ï¼Œé‚£å°±ä»€ä¹ˆä¹Ÿä¸åšï¼Œç›´æ¥è¿”å›nullï¼›</span></span><br><span class="line">        ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">        ListNode next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//å½“å‰èŠ‚ç‚¹æ˜¯headï¼Œpreä¸ºå½“å‰èŠ‚ç‚¹çš„å‰ä¸€èŠ‚ç‚¹ï¼Œnextä¸ºå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">//éœ€è¦preå’Œnextçš„ç›®çš„æ˜¯è®©å½“å‰èŠ‚ç‚¹ä»pre-&gt;head-&gt;next1-&gt;next2å˜æˆpre&lt;-head next1-&gt;next2</span></span><br><span class="line">        <span class="comment">//å³preè®©èŠ‚ç‚¹å¯ä»¥åè½¬æ‰€æŒ‡æ–¹å‘ï¼Œä½†åè½¬ä¹‹åå¦‚æœä¸ç”¨nextèŠ‚ç‚¹ä¿å­˜next1èŠ‚ç‚¹çš„è¯ï¼Œæ­¤å•é“¾è¡¨å°±æ­¤æ–­å¼€äº†</span></span><br><span class="line">        <span class="comment">//æ‰€ä»¥éœ€è¦ç”¨åˆ°preå’Œnextä¸¤ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">//1-&gt;2-&gt;3-&gt;4-&gt;5</span></span><br><span class="line">        <span class="comment">//1&lt;-2&lt;-3 4-&gt;5</span></span><br><span class="line">        <span class="keyword">while</span>(head!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//åšå¾ªç¯ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºçš„è¯ï¼Œå§‹ç»ˆæ‰§è¡Œæ­¤å¾ªç¯ï¼Œæ­¤å¾ªç¯çš„ç›®çš„å°±æ˜¯è®©å½“å‰èŠ‚ç‚¹ä»æŒ‡å‘nextåˆ°æŒ‡å‘pre</span></span><br><span class="line">            <span class="comment">//å¦‚æ­¤å°±å¯ä»¥åšåˆ°åè½¬é“¾è¡¨çš„æ•ˆæœ</span></span><br><span class="line">            <span class="comment">//å…ˆç”¨nextä¿å­˜headçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¿è¯å•é“¾è¡¨ä¸ä¼šå› ä¸ºå¤±å»headèŠ‚ç‚¹çš„åŸnextèŠ‚ç‚¹è€Œå°±æ­¤æ–­è£‚</span></span><br><span class="line">            next = head.next;</span><br><span class="line">            <span class="comment">//ä¿å­˜å®Œnextï¼Œå°±å¯ä»¥è®©headä»æŒ‡å‘nextå˜æˆæŒ‡å‘preäº†ï¼Œä»£ç å¦‚ä¸‹</span></span><br><span class="line">            head.next = pre;</span><br><span class="line">            <span class="comment">//headæŒ‡å‘preåï¼Œå°±ç»§ç»­ä¾æ¬¡åè½¬ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="comment">//è®©preï¼Œheadï¼Œnextä¾æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡çš„æŒ‡é’ˆåè½¬</span></span><br><span class="line">            pre = head;</span><br><span class="line">            head = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœheadä¸ºnullçš„æ—¶å€™ï¼Œpreå°±ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹äº†ï¼Œä½†æ˜¯é“¾è¡¨å·²ç»åè½¬å®Œæ¯•ï¼Œpreå°±æ˜¯åè½¬åé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">//ç›´æ¥è¾“å‡ºpreå°±æ˜¯æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„åè½¬åçš„é“¾è¡¨</span></span><br><span class="line">        <span class="keyword">return</span> pre;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»Ÿæ€»ç»“-è¿›ç¨‹ç®¡ç†</title>
    <url>/2020/03/18/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BB%93-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·ä¸€ã€‹è¯»ä¹¦ç¬”è®°äºŒ</title>
    <url>/2020/03/18/%E3%80%8AJava%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E5%8D%B7%E4%B8%80%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%BA%8C/</url>
    <content><![CDATA[<a id="more"></a>
<h1>ç¬¬äº”ç«  ç»§æ‰¿</h1>
<ol>
<li>
<p>å­ç±»æ²¡æœ‰è°ƒç”¨è¶…ç±»çš„æ„é€ æ–¹æ³•ï¼Œé»˜è®¤ä¼šè°ƒç”¨è¶…ç±»æ— å‚æ„é€ å™¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ¥é”™ã€‚</p>
</li>
<li>
<p>å¤šæ€ï¼šä¸€ä¸ªå¯¹è±¡å˜é‡å¯ä»¥æŒ‡ç¤ºå¤šç§å®é™…ç±»å‹ï¼Œçˆ¶ç±»æ—¢å¯å¼•ç”¨çˆ¶ç±»ç±»å‹ï¼Œä¹Ÿå¯å¼•ç”¨å­ç±»ç±»å‹ï¼Œä½†æ˜¯çˆ¶ç±»ä¸å¯è°ƒç”¨å­ç±»çš„æ–¹æ³•ã€‚åŠ¨æ€ç»‘å®šï¼šè¿è¡Œæ—¶èƒ½è‡ªåŠ¨åœ°é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚Javaé»˜è®¤åŠ¨æ€ç»‘å®šï¼Œå¦åˆ™è¦æ ‡è®°finalã€‚</p>
</li>
<li>
<p>æ ‡è®°äº†privateï¼Œfinalï¼Œstaticçš„æ–¹æ³•è°ƒç”¨åˆ™æ˜¯é™æ€ç»‘å®šï¼Œç¼–è¯‘å™¨æ— é¡»æœå¯»å…¶å­ç±»çš„æ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
</li>
<li>
<p>overrideï¼šå­ç±»è¦†å†™çš„æ–¹æ³•è®¿é—®æ€§ä¸å¾—é«˜äºè¶…ç±»ï¼Œå³è¶…ç±»ä¸ºprivateï¼Œåˆ™å­ç±»ä¸å¾—æ˜¯publicã€‚å¯¹äºä½¿ç”¨é¢‘ç¹ï¼Œè¾ƒçŸ­çš„ï¼Œä¸”æ²¡æœ‰è¢«overrideçš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å†…è”å¤„ç†ï¼Œå°†å‡½æ•°ä½“æ’å…¥å¹¶å–ä»£è°ƒç”¨å‡½æ•°çš„åœ°æ–¹ï¼Œå¢åŠ æ•ˆç‡ã€‚</p>
</li>
<li>
<p>finalï¼šå¯¹ç±»æˆ–è€…æ–¹æ³•æ ‡è®°finalï¼Œåˆ™ä¸èƒ½æœ‰ç»§æ‰¿çš„å­ç±»ï¼Œæˆ–è€…ä¸èƒ½è¢«è¦†å†™ã€‚</p>
</li>
<li>
<p>Object: è¦æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œè¦†å†™equals()æ–¹æ³•ï¼Œè®°å¾—ç”¨é™æ€æ–¹æ³•åˆ¤æ–­å­—æ®µç›¸ç­‰Object.equals(a,b)ã€‚è¦†å†™hashcodeæ–¹æ³•åŒæ ·ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œè€Œä¸”ä¸¤è€…åº”è¯¥ä¸€è‡´ï¼Œå³ç›¸ç­‰æ€§ä½¿ç”¨åˆ¤æ–­çš„å­—æ®µåº”è¯¥ä¸ç”¨äºè®¡ç®—hashcodeçš„å­—æ®µç›¸åŒã€‚<br>
å­—å…¸ç±»å¯¹è±¡å¯ä»¥ç”¨é™æ€æ–¹æ³•Array.equals()å’ŒArray.hashcode()ï¼Œæ— é¡»override.</p>
</li>
<li>
<p>åŒ…è£…ç±»å¯¹è±¡ç±»ä¼¼Integer, Long, Floatæ˜¯ä¸å¯å˜çš„ï¼Œåœ¨è¯¥ä½¿ç”¨å¯¹è±¡ç±»å‹çš„æ–¹æ³•ä¸­ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è£…ç®±ï¼ŒåŒæ—¶ä¹Ÿæœ‰è‡ªåŠ¨æ‹†ç®±ã€‚ä½†æ˜¯æ¯”è¾ƒæ—¶ä¸èƒ½ä½¿ç”¨ == ï¼Œè¦ç”¨equalsæ–¹æ³•ã€‚é™¤äº†boolean,byte,char&lt;=127çš„ï¼Œæˆ–è€…shortï¼Œintåœ¨-128å’Œ127ä¹‹é—´çš„å¯ç”¨ ==ï¼Œç¼–è¯‘å™¨ä¼šåœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå› æ­¤å¤šä¸ªå€¼ç›¸åŒä¸”å€¼åœ¨ç¼“å­˜æ± èŒƒå›´å†…çš„ Integer å®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>new Integer(123) ä¸ Integer.valueOf(123) çš„åŒºåˆ«åœ¨äºï¼š</p>
</li>
</ol>
<ul>
<li>new Integer(123) æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼›</li>
<li>Integer.valueOf(123) ä¼šä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨ä¼šå–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚<br>
åœ¨ jdk 1.8 æ‰€æœ‰çš„æ•°å€¼ç±»ç¼“å†²æ± ä¸­ï¼ŒInteger çš„ç¼“å†²æ±  IntegerCache å¾ˆç‰¹æ®Šï¼Œè¿™ä¸ªç¼“å†²æ± çš„ä¸‹ç•Œæ˜¯ - 128ï¼Œä¸Šç•Œé»˜è®¤æ˜¯ 127ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œæ˜¯å¯è°ƒçš„ï¼Œåœ¨å¯åŠ¨ jvm çš„æ—¶å€™ï¼Œé€šè¿‡ -XX:AutoBoxCacheMax=<size> æ¥æŒ‡å®šè¿™ä¸ªç¼“å†²æ± çš„å¤§å°ï¼Œè¯¥é€‰é¡¹åœ¨ JVM åˆå§‹åŒ–çš„æ—¶å€™ä¼šè®¾å®šä¸€ä¸ªåä¸º java.lang.IntegerCache.high ç³»ç»Ÿå±æ€§ï¼Œç„¶å IntegerCache åˆå§‹åŒ–çš„æ—¶å€™å°±ä¼šè¯»å–è¯¥ç³»ç»Ÿå±æ€§æ¥å†³å®šä¸Šç•Œã€‚</size></li>
</ul>
<p>åŸºæœ¬ç±»å‹å¯¹åº”çš„ç¼“å†²æ± å¦‚ä¸‹ï¼š<br>
boolean values true and false<br>
all byte values<br>
short values between -128 and 127<br>
int values between -128 and 127<br>
char in the range \u0000 to \u007F</p>
<ol start="7">
<li>
<p>åˆ¤æ–­ä¸¤å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ç±»ï¼šç”¨åå°„ï¼Œif(e.getclass() == Emloyee.class)ï¼Œinstanceofæ˜¯åŒ…æ‹¬å­ç±»çš„ã€‚</p>
</li>
<li>
<p>Stringï¼š<br>
å£°æ˜ä¸ºfinalï¼Œä¸å¯ç»§æ‰¿ã€‚ä¸å¯å˜ã€‚<br>
value æ•°ç»„è¢«å£°æ˜ä¸º finalï¼Œè¿™æ„å‘³ç€ value æ•°ç»„åˆå§‹åŒ–ä¹‹åå°±ä¸èƒ½å†å¼•ç”¨å…¶å®ƒæ•°ç»„ã€‚å¹¶ä¸” String å†…éƒ¨æ²¡æœ‰æ”¹å˜ value æ•°ç»„çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ä¿è¯ String ä¸å¯å˜ã€‚</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** The identifier of the encoding used to encode the bytes in &#123;<span class="doctag">@code</span> value&#125;. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span> coder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Java 9 ä¹‹åï¼ŒString ç±»çš„å®ç°æ”¹ç”¨ byte æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä½¿ç”¨ coder æ¥æ ‡è¯†ä½¿ç”¨äº†å“ªç§ç¼–ç ã€‚</p>
<h1>ç¬¬å…­ç«  æ¥å£</h1>
<ol>
<li>x.compareTo(y) æ–¹æ³•ä¸€å®šè¦å®ç°comparableæ¥å£å¦åˆ™Jvmä¼šæŠ¥é”™ã€‚å½“å­ç±»ç»§æ‰¿è¶…ç±»ä¹Ÿè¦å®ç°compareToæ–¹æ³•æ—¶ï¼Œç±»å‹è¦ç›¸åŒï¼Œif(getclass()!= other.getclass) throw new ClassCastException å¦åˆ™è¿ååå¯¹ç§°åŸåˆ™ã€‚è¶…ç±»çš„æ–¹æ³•æ˜¯é€šç”¨æ–¹æ³•ï¼Œåˆ™è®°å¾—è¦ç”Ÿå‘½ finalã€‚</li>
<li>éœ€è¦ä½¿ç”¨æ·±æ‹·è´ï¼šç±»çš„å­—æ®µä¸­å¼•ç”¨äº†å…¶ä»–ç±»å¯¹è±¡ã€‚åˆ™è¦å®ç°clonableæ¥å£ï¼Œå¹¶è¦†å†™clone()æ–¹æ³•ã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/18/%E8%B0%83%E6%95%B4%E6%95%B0%E7%BB%84%E9%A1%BA%E5%BA%8F%E4%BD%BF%E5%A5%87%E6%95%B0%E4%BD%8D%E4%BA%8E%E5%81%B6%E6%95%B0%E5%89%8D%E9%9D%A2%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰çš„å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰çš„å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†ï¼Œå¹¶ä¿è¯å¥‡æ•°å’Œå¥‡æ•°ï¼Œå¶æ•°å’Œå¶æ•°ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ä¸å˜ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£</h1>
<p>è®¡ç®—å·²æ”¾å¥½ä½ç½®çš„å¥‡æ•°ä¸ªæ•°ï¼Œå½“å½“å‰ä½ç½®ä¸ºå¥‡æ•°ä¸”å‰é¢ä¸ªæ•°å¤šäºå¥‡æ•°ä¸ªæ•°ï¼Œè¯æ˜å­˜åœ¨å¶æ•°ï¼Œå¶æ•°çš„æ•°é‡å³ä¸ºå½“å‰ä¸ªæ•°-å¥‡æ•°ä¸ªæ•°ï¼Œå°†å¶æ•°ä¸€æ¬¡å¾€åæŒªï¼ŒæŠŠå¥‡æ•°æ”¾äºå¯¹åº”ä½ç½®ã€‚<br>
è§£æ³•ç±»ä¼¼æ’å…¥æ’åºã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reOrderArray</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length==<span class="number">0</span>||array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> obb = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;array.length;++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>((array[i]%<span class="number">2</span>==<span class="number">1</span>))&#123;</span><br><span class="line">                num = i;</span><br><span class="line">                <span class="keyword">int</span> current = array[i];</span><br><span class="line">                <span class="keyword">while</span>(num&gt;obb)&#123;</span><br><span class="line">                    array[num] = array[num-<span class="number">1</span>];</span><br><span class="line">                    num--;</span><br><span class="line">                &#125;</span><br><span class="line">                array[num] = current;</span><br><span class="line">                obb++;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
  </entry>
  <entry>
    <title>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/18/%E6%95%B0%E5%80%BC%E7%9A%84%E6%95%B4%E6%95%B0%E6%AC%A1%E6%96%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªdoubleç±»å‹çš„æµ®ç‚¹æ•°baseå’Œintç±»å‹çš„æ•´æ•°exponentã€‚æ±‚baseçš„exponentæ¬¡æ–¹ã€‚ä¿è¯baseå’Œexponentä¸åŒæ—¶ä¸º0
</code></pre>
<a id="more"></a>
<h1>codeï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">Power</span><span class="params">(<span class="keyword">double</span> base, <span class="keyword">int</span> exponent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æµ®ç‚¹æ•°æ¯”è¾ƒä¸èƒ½ç”¨ ==ï¼Œä¼šæŸå¤±ç²¾åº¦</span></span><br><span class="line">        <span class="keyword">if</span>(equal(base,<span class="number">0.0</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(exponent==<span class="number">0</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(exponent&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            base = <span class="number">1</span>/base;</span><br><span class="line">            exponent = <span class="number">0</span> - exponent;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> exp = base;</span><br><span class="line">        <span class="comment">//æ³¨æ„ï¼š== çš„ä¼˜å…ˆçº§æ¯”&amp;å¤§</span></span><br><span class="line">        <span class="keyword">if</span>((exponent&amp;(exponent-<span class="number">1</span>)) == <span class="number">1</span>)</span><br><span class="line">            base = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(exponent&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            exp *= exp;</span><br><span class="line">            exponent &gt;&gt;=<span class="number">1</span>; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> exp*base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equal</span><span class="params">(<span class="keyword">double</span> num1,<span class="keyword">double</span> num2)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(num1-num2&gt;-<span class="number">0.000001</span>&amp;&amp;num1-num2&lt;<span class="number">0.000001</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°ï½œã€Šå‰‘æŒ‡Offerã€‹</title>
    <url>/2020/03/18/%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%AD1%E7%9A%84%E4%B8%AA%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87Offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚å…¶ä¸­è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">NumberOf1</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line">            n = n&amp;(n-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>å‰‘æŒ‡offer</tag>
      </tags>
  </entry>
  <entry>
    <title>Java_Design_Patterns</title>
    <url>/2020/03/17/Java-Design-Patterns/</url>
    <content><![CDATA[<h1>åˆ›æ–°å‹æ¨¡å¼</h1>
<p>å…³æ³¨ç‚¹æ˜¯å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨ç›¸åˆ†ç¦»ï¼Œè¿™æ ·ä½¿å¾—ä¸¤è€…èƒ½ç›¸å¯¹ç‹¬ç«‹åœ°å˜æ¢ã€‚</p>
<h3 id="å·¥å‚æ–¹æ³•-Factory-Method"><a class="header-anchor" href="#å·¥å‚æ–¹æ³•-Factory-Method">Â¶</a>å·¥å‚æ–¹æ³• Factory Method</h3>
<p>è§£å†³å…³é”®å­—newé€ æˆçš„å®¢æˆ·ç«¯å’Œå®é™…ç±»å‹è€¦åˆé—®é¢˜ã€‚<br>
æ¥å£å®šä¹‰æ ‡å‡†ï¼Œå­ç±»é€šè¿‡å®ç°æ¥å£ï¼Œé€šè¿‡åˆ©ç”¨å­ç±»çš„å¯¹è±¡å‘ä¸Šè½¬å‹åˆ›å»ºæ¥å£çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚<br>
äº§å“ï¼šè¿”å›çš„å¯¹è±¡ã€‚<br>
é™æ€å·¥å‚æ–¹æ³•ï¼šåœ¨æ¥å£å¤„ï¼Œé€šè¿‡é™æ€æ–¹æ³•ç›´æ¥è¿”å›äº§å“ã€‚<br>
å¦‚: valueOf()æ¥åˆ›å»ºInteger</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Integer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½å¤„ï¼šå·¥å‚æ–¹æ³•å¯ä»¥éšè—åˆ›å»ºäº§å“çš„ç»†èŠ‚ï¼Œä¸”ä¸ä¸€å®šæ¯æ¬¡éƒ½ä¼šçœŸæ­£åˆ›å»ºäº§å“ï¼Œå®Œå…¨å¯ä»¥è¿”å›ç¼“å­˜çš„äº§å“ï¼Œä»è€Œæå‡é€Ÿåº¦å¹¶å‡å°‘å†…å­˜æ¶ˆè€—ã€‚æ‹“å±•å­ç±»ï¼Œä¹Ÿåªéœ€è¦ä¿®æ”¹valueOfå³å¯ã€‚</p>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šè¿”å›å®ç°æ¥å£çš„ä»»æ„å­ç±»éƒ½å¯ä»¥æ»¡è¶³è¯¥æ–¹æ³•çš„è¦æ±‚ï¼Œä¸”ä¸å½±å“è°ƒç”¨æ–¹ã€‚å°½å¯èƒ½çš„é¢å‘æŠ½è±¡ç¼–ç¨‹ã€‚<br>
é™æ€å·¥å‚æ–¹æ³•ä¹Ÿå¯ä»¥æ¥æ”¶å¯å˜å‚æ•°ï¼Œè¿”å›æ¥å£ã€‚å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å‘ä¸Šè½¬å‹çš„å®ç°ï¼Œè°ƒç”¨æ–¹æ€»æ˜¯è·å–Listæ¥å£ï¼Œè€Œä¸å…³å¿ƒå®ƒçš„å®é™…ç±»å‹ã€‚<br>
å†å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">MessageDigest md5 = MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">MessageDigest sha1 = MessageDigest.getInstance(<span class="string">"SHA-1"</span>);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨æ–¹é€šè¿‡äº§å“åç§°è·å¾—äº§å“å®ä¾‹ï¼Œä¸ä½†è°ƒç”¨ç®€å•ï¼Œè€Œä¸”è·å¾—çš„å¼•ç”¨ä»ç„¶æ˜¯MessageDigestè¿™ä¸ªæŠ½è±¡ç±»ã€‚</p>
<h4 id="æŠ½è±¡å·¥å‚-Abstract-Factory"><a class="header-anchor" href="#æŠ½è±¡å·¥å‚-Abstract-Factory">Â¶</a>æŠ½è±¡å·¥å‚ Abstract Factory</h4>
<pre><code>æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚
</code></pre>
<p>å®¢æˆ·ç«¯åˆ›å»ºå·¥å‚ï¼Œåªéœ€è¦ä¸å·¥å‚æ¥å£é™æ€æ–¹æ³•å¯¹æ¥ï¼Œæ ¹æ®éœ€æ±‚ä¼ å…¥ä¸åŒçš„å‚æ•°ï¼Œåˆ›å»ºç‰¹å®šçš„å®ä¾‹åŒ–å¯¹è±¡å·¥å‚ã€‚åˆ›å»ºäº§å“ï¼Œä¹Ÿæ ¹æ®ä¸åŒå·¥å‚ä½¿ç”¨ä¸åŒçš„æ–¹æ³•åˆ›å»ºç‰¹å®šçš„äº§å“ã€‚</p>
<h4 id="Builderæ¨¡å¼"><a class="header-anchor" href="#Builderæ¨¡å¼">Â¶</a>Builderæ¨¡å¼</h4>
<p>åˆ›å»ºå¤æ‚å¯¹è±¡æ—¶ï¼Œå°†æ­¥éª¤åˆ†è§£æˆå¤šä¸ªæ–¹æ³•ï¼Œæ®ç‰¹æ€§æŠŠæ¯ä¸€è¡Œéƒ½â€œå§”æ‰˜â€ç»™ä¸€ä¸ªXxxBuilderå»è½¬æ¢ï¼Œæœ€åï¼ŒæŠŠæ‰€æœ‰è½¬æ¢çš„ç»“æœç»„åˆèµ·æ¥ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<h4 id="åŸå‹æ¨¡å¼-Prototype"><a class="header-anchor" href="#åŸå‹æ¨¡å¼-Prototype">Â¶</a>åŸå‹æ¨¡å¼ Prototype</h4>
<p>åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œæ ¹æ®ç°æœ‰çš„ä¸€ä¸ªåŸå‹æ¥åˆ›å»ºã€‚<br>
å®ç°åŸå‹çš„æ‹·è´ï¼Œç”¨Objectæä¾›çš„clone()æ–¹æ³•ï¼Œéœ€è¦å®ç°Cloneableæ¥å£æ¥æ ‡è¯†ä¸€ä¸ªå¯¹è±¡æ˜¯å¯å¤åˆ¶çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤åˆ¶æ–°å¯¹è±¡å¹¶è¿”å›:</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student std = <span class="keyword">new</span> Student();</span><br><span class="line">        std.id = <span class="keyword">this</span>.id;</span><br><span class="line">        std.name = <span class="keyword">this</span>.name;</span><br><span class="line">        std.score = <span class="keyword">this</span>.score;</span><br><span class="line">        <span class="keyword">return</span> std;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ—¶ï¼Œè¦å¼ºåˆ¶è½¬å‹ï¼Œå› ä¸ºObjectè¿”å›ç±»å‹ä¹Ÿæ˜¯Objectï¼š</span></span><br><span class="line">Student std2 = (Student) std1.clone();</span><br></pre></td></tr></table></figure>
<p>æ›´å¥½çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ªcopy()æ–¹æ³•ï¼Œæ˜ç¡®ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">copy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Student std = <span class="keyword">new</span> Student();</span><br><span class="line">        std.id = <span class="keyword">this</span>.id;</span><br><span class="line">        std.name = <span class="keyword">this</span>.name;</span><br><span class="line">        std.score = <span class="keyword">this</span>.score;</span><br><span class="line">        <span class="keyword">return</span> std;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸå‹æ¨¡å¼åº”ç”¨ä¸æ˜¯å¾ˆå¹¿æ³›ï¼Œå› ä¸ºå¾ˆå¤šå®ä¾‹ä¼šæŒæœ‰ç±»ä¼¼æ–‡ä»¶ã€Socketè¿™æ ·çš„èµ„æºï¼Œè€Œè¿™äº›èµ„æºæ˜¯æ— æ³•å¤åˆ¶ç»™å¦ä¸€ä¸ªå¯¹è±¡å…±äº«çš„ï¼Œåªæœ‰å­˜å‚¨ç®€å•ç±»å‹çš„â€œå€¼â€å¯¹è±¡å¯ä»¥å¤åˆ¶ã€‚</p>
<h4 id="å•ä¾‹-Singleton"><a class="header-anchor" href="#å•ä¾‹-Singleton">Â¶</a>å•ä¾‹ Singleton</h4>
<pre><code>ä¿è¯æŸä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚
</code></pre>
<p>æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼š</p>
<ul>
<li>é™æ€å­—æ®µå¼•ç”¨å…¨å±€å”¯ä¸€å®ä¾‹ã€‚</li>
</ul>
<ol>
<li>åªæœ‰privateæ„é€ æ–¹æ³•ï¼Œç¡®ä¿å¤–éƒ¨æ— æ³•å®ä¾‹åŒ–ï¼›</li>
<li>é€šè¿‡private staticå˜é‡æŒæœ‰å”¯ä¸€å®ä¾‹ï¼Œä¿è¯å…¨å±€å”¯ä¸€æ€§ï¼›</li>
<li>é€šè¿‡public staticæ–¹æ³•è¿”å›æ­¤å”¯ä¸€å®ä¾‹ï¼Œä½¿å¤–éƒ¨è°ƒç”¨æ–¹èƒ½è·å–åˆ°å®ä¾‹ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é™æ€å­—æ®µå¼•ç”¨å”¯ä¸€å®ä¾‹:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•è¿”å›å®ä¾‹:</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// privateæ„é€ æ–¹æ³•ä¿è¯å¤–éƒ¨æ— æ³•å®ä¾‹åŒ–:</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…å°†staticå˜é‡æš´éœ²ç»™å¤–éƒ¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é™æ€å­—æ®µå¼•ç”¨å”¯ä¸€å®ä¾‹:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// privateæ„é€ æ–¹æ³•ä¿è¯å¤–éƒ¨æ— æ³•å®ä¾‹åŒ–:</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¼–å†™åªæœ‰ä¸€ä¸ªæšä¸¾çš„ç±»</li>
</ul>
<p>é™¤éç¡®æœ‰å¿…è¦ï¼Œå¦åˆ™Singletonæ¨¡å¼ä¸€èˆ¬ä»¥â€œçº¦å®šâ€ä¸ºä¸»ï¼Œè®©æ¡†æ¶æ¥å®ä¾‹è¯è¿™äº›ç±»ï¼Œä¸ä¼šåˆ»æ„å®ç°å®ƒã€‚</p>
<h1>ç»“æ„å‹æ¨¡å¼</h1>
<p>é€šè¿‡æ¥å£é—´çš„ç»„åˆå®Œæˆéœ€æ±‚ã€‚</p>
<h3 id="é€‚é…å™¨-Adapter"><a class="header-anchor" href="#é€‚é…å™¨-Adapter">Â¶</a>é€‚é…å™¨ Adapter</h3>
<p>é¡¾åæ€ä¹‰ï¼Œæ¥æ”¶ä¸€ä¸ªæ¥å£ï¼Œåœ¨ç›®æ ‡æ¥å£çš„å®ç°å†…éƒ¨è°ƒç”¨å¸¦è½¬æ¢æ¥å£çš„æ–¹æ³•ã€‚</p>
<ol>
<li>å®ç°ç›®æ ‡æ¥å£ï¼Œè¿™é‡Œæ˜¯Runnableï¼›</li>
<li>å†…éƒ¨æŒæœ‰ä¸€ä¸ªå¾…è½¬æ¢æ¥å£çš„å¼•ç”¨ï¼Œè¿™é‡Œæ˜¯é€šè¿‡å­—æ®µæŒæœ‰Callableæ¥å£ï¼›</li>
<li>åœ¨ç›®æ ‡æ¥å£çš„å®ç°æ–¹æ³•å†…éƒ¨ï¼Œè°ƒç”¨å¾…è½¬æ¢æ¥å£çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> BAdapter implements B &#123;</span><br><span class="line">    <span class="keyword">private</span> A a;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BAdapter</span><span class="params">(A a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">b</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a.a();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰Aã€Bæ¥å£å‡ä¸ºæŠ½è±¡æ¥å£æ—¶ï¼Œæ‰èƒ½éå¸¸ç®€å•åœ°å®ç°Adapteræ¨¡å¼ã€‚</p>
<h3 id="ä»£ç†æ¨¡å¼Proxy"><a class="header-anchor" href="#ä»£ç†æ¨¡å¼Proxy">Â¶</a>ä»£ç†æ¨¡å¼Proxy</h3>
<pre><code>å¯¹å…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> AProxy implements A &#123;</span><br><span class="line">    <span class="keyword">private</span> A a;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AProxy</span><span class="params">(A a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a.a();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰ç‚¹åƒAdapter,ä½†æ˜¯å®ƒè¿˜æ˜¯è½¬æ¢æˆAæ¥å£ã€‚<br>
ç¨‹åºè®¾è®¡çš„åŸåˆ™ï¼š</p>
<ul>
<li>èŒè´£æ¸…æ™°ï¼šä¸€ä¸ªç±»è´Ÿè´£ä¸€ä»¶äº‹</li>
<li>æ˜“äºæµ‹è¯•<br>
ä½œç”¨ï¼šè·å¾—æ›´æ¸…æ™°ã€ç®€æ´çš„ä»£ç </li>
<li>Aæ¥å£ï¼šåªå®šä¹‰æ¥å£ï¼›</li>
<li>ABusinessç±»ï¼šåªå®ç°Aæ¥å£çš„ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>APermissionProxyç±»ï¼šåªå®ç°Aæ¥å£çš„æƒé™æ£€æŸ¥ä»£ç†ã€‚</li>
</ul>
<h4 id="æƒé™æ£€æŸ¥"><a class="header-anchor" href="#æƒé™æ£€æŸ¥">Â¶</a>æƒé™æ£€æŸ¥</h4>
<p>å¦‚aæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (getCurrentUser().isRoot()) &#123;</span><br><span class="line">        <span class="keyword">this</span>.a.a();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> SecurityException(<span class="string">"Forbidden"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿œç¨‹ä»£ç†"><a class="header-anchor" href="#è¿œç¨‹ä»£ç†">Â¶</a>è¿œç¨‹ä»£ç†</h4>
<p>è¿œç¨‹ä»£ç†å³Remote Proxyï¼ŒJavaå†…ç½®çš„RMIæœºåˆ¶å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¿œç¨‹ä»£ç†æ¨¡å¼ã€‚</p>
<h4 id="è™šä»£ç†"><a class="header-anchor" href="#è™šä»£ç†">Â¶</a>è™šä»£ç†</h4>
<p>ç›´åˆ°å®¢æˆ·ç«¯çœŸæ­£è°ƒç”¨æ–¹æ³•æ—¶æ‰åˆ›å»ºçœŸæ­£çš„å¯¹è±¡ï¼ŒJDBCçš„è¿æ¥æ± è¿”å›çš„JDBCè¿æ¥ï¼ˆConnectionå¯¹è±¡ï¼‰å°±å¯ä»¥æ˜¯ä¸€ä¸ªè™šä»£ç†ï¼Œå³è·å–è¿æ¥æ—¶æ ¹æœ¬æ²¡æœ‰ä»»ä½•å®é™…çš„æ•°æ®åº“è¿æ¥ï¼Œç›´åˆ°ç¬¬ä¸€æ¬¡æ‰§è¡ŒJDBCæŸ¥è¯¢æˆ–æ›´æ–°æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ›å»ºå®é™…çš„JDBCè¿æ¥ã€‚</p>
<h4 id="æ™ºèƒ½å¼•ç”¨"><a class="header-anchor" href="#æ™ºèƒ½å¼•ç”¨">Â¶</a>æ™ºèƒ½å¼•ç”¨</h4>
<p>å¦‚æœæœ‰å¾ˆå¤šå®¢æˆ·ç«¯å¯¹å®ƒè¿›è¡Œè®¿é—®ï¼Œé€šè¿‡å†…éƒ¨çš„è®¡æ•°å™¨å¯ä»¥åœ¨å¤–éƒ¨è°ƒç”¨è€…éƒ½ä¸ä½¿ç”¨åè‡ªåŠ¨é‡Šæ”¾å®ƒã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>è·å½¢è¦†ç›–ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/17/%E8%B7%9D%E5%BD%A2%E8%A6%86%E7%9B%96%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæˆ‘ä»¬å¯ä»¥ç”¨2*1çš„å°çŸ©å½¢æ¨ªç€æˆ–è€…ç«–ç€å»è¦†ç›–æ›´å¤§çš„çŸ©å½¢ã€‚è¯·é—®ç”¨nä¸ª2*1çš„å°çŸ©å½¢æ— é‡å åœ°è¦†ç›–ä¸€ä¸ª2*nçš„å¤§çŸ©å½¢ï¼Œæ€»å…±æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Ÿ
</code></pre>
<h1>é¢˜è§£</h1>
<p>æ–æ³¢é‚£å¥‘æ•°åˆ—å˜ç›¸å½¢å¼ï¼ŒåŒç±»å‹çš„è¿˜æœ‰è·³é˜¶æ¢¯ã€‚</p>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">RectCover</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(target == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(target  == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(target*<span class="number">2</span> == <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(target*<span class="number">2</span> == <span class="number">4</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> RectCover((target-<span class="number">1</span>))+RectCover(target-<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ—‹è½¬æ•°ç»„æœ€å°çš„æ•°å­—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/16/%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0%E5%AD%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šæŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚è¾“å…¥ä¸€ä¸ªéé€’å‡æ’åºçš„æ•°ç»„çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚æ•°ç»„{3,4,5,1,2}ä¸º{1,2,3,4,5}çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º1ã€‚NOTEï¼šç»™å‡ºçš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äº0ï¼Œè‹¥æ•°ç»„å¤§å°ä¸º0ï¼Œè¯·è¿”å›0ã€‚
</code></pre>
<a id="more"></a>
<h2 id="é¢˜è§£"><a class="header-anchor" href="#é¢˜è§£">Â¶</a>é¢˜è§£</h2>
<p>åœ¨startå¤„çš„å…ƒç´ &gt;=endå¤„å…ƒç´ çš„ä½ç½®äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œmiddleå¤§äºstartä½ç½®çš„å…ƒç´ ï¼Œåˆ™æŸ¥å³åŠåŒºã€‚middleå°äºstartä½ç½®çš„å…ƒç´ ï¼Œåˆ™æŸ¥å·¦åŠåŒºã€‚</p>
<h2 id="Code"><a class="header-anchor" href="#Code">Â¶</a>Code</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minNumberInRotateArray</span><span class="params">(<span class="keyword">int</span> [] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end = array.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> middle = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(array[start] &gt;= array[end])&#123;</span><br><span class="line">            <span class="keyword">if</span>(end - start &lt;= <span class="number">1</span>)&#123;</span><br><span class="line">                middle = end;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">             middle = start + (end-start)/<span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span>(array[middle] &gt;= array[start])&#123;</span><br><span class="line">                start = middle;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(array[middle] &lt;= array[end])</span><br><span class="line">                end = middle;</span><br><span class="line">            </span><br><span class="line">    &#125;    </span><br><span class="line">         <span class="keyword">return</span> array[middle];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaçš„å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/2020/03/15/Java%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<pre><code>åˆåLambdaè®¡ç®—ï¼Œå‡½æ•°å¼ç¼–ç¨‹è¿˜æ˜¯æŒºå¥½ç©çš„ï¼Œå¯ä»¥æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä¸è¿‡è¿™ç±»ç¼–ç¨‹ä¸ç¨³å®šï¼Œå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼Œç›¸åŒçš„è¾“å…¥å¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºã€‚è€Œä¸”æŠ½è±¡ç¨‹åº¦é«˜ï¼Œé‚£ä¹ˆè¿è¡Œæ•ˆç‡å°±ä¼šåä½ã€‚
</code></pre>
<a id="more"></a>
<h3 id="Lambdaè¡¨è¾¾å¼"><a class="header-anchor" href="#Lambdaè¡¨è¾¾å¼">Â¶</a>Lambdaè¡¨è¾¾å¼</h3>
<p>å•æ–¹æ³•æ¥å£(FunctionalInterface)ï¼šä¸€ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>Comparator</li>
<li>Runnable</li>
<li>Callable<br>
å¦‚ï¼Œä½¿ç”¨Arrays.sort()æ—¶ï¼Œå¯ä»¥ä¼ å…¥Comparatorå®ä¾‹ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line">Arrays.sort(array, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ›¿æ¢å•æ–¹æ³•æ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.sort(array, (s1, s2) -&gt; &#123;</span><br><span class="line">           <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåªæœ‰ä¸€è¡Œreturn xxxçš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥ç”¨æ›´ç®€å•çš„å†™æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.sort(array, (s1, s2) -&gt; s1.compareTo(s2));</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹ã€‚</p>
<h3 id="FunctionalInterface"><a class="header-anchor" href="#FunctionalInterface">Â¶</a>@FunctionalInterface</h3>
<p>å•æ–¹æ³•æ¥å£ä¼šåœ¨æ¥å£å®šä¹‰å‰åŠ ä¸Š@FunctionalInterfaceçš„æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(T o1, T o2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Comparator&lt;T&gt; <span class="title">reversed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.reverseOrder(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">default</span> Comparator&lt;T&gt; <span class="title">thenComparing</span><span class="params">(Comparator&lt;? <span class="keyword">super</span> T&gt; other)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶Comparatoræ¥å£æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•int compare(T o1, T o2)ï¼Œå…¶ä»–çš„æ–¹æ³•éƒ½æ˜¯defaultæ–¹æ³•æˆ–staticæ–¹æ³•ã€‚å¦å¤–æ³¨æ„åˆ°boolean equals(Object obj)æ˜¯Objectå®šä¹‰çš„æ–¹æ³•ï¼Œä¸ç®—åœ¨æ¥å£æ–¹æ³•å†…ã€‚å› æ­¤ï¼ŒComparatorä¹Ÿæ˜¯ä¸€ä¸ªFunctionalInterfaceã€‚</p>
<h1>æ–¹æ³•å¼•ç”¨</h1>
<p>æ˜¯æŒ‡å¦‚æœæŸä¸ªæ–¹æ³•ç­¾åå’Œæ¥å£æ°å¥½ä¸€è‡´ï¼Œå°±å¯ä»¥ç›´æ¥ä¼ å…¥æ–¹æ³•å¼•ç”¨ã€‚<br>
å› ä¸ºComparator<String>æ¥å£å®šä¹‰çš„æ–¹æ³•æ˜¯int compare(String, String)ï¼Œå’Œé™æ€æ–¹æ³•int cmp(String, String)ç›¸æ¯”ï¼Œé™¤äº†æ–¹æ³•åå¤–ï¼Œæ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œè¿”å›ç±»å‹ç›¸åŒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¯´ä¸¤è€…çš„æ–¹æ³•ç­¾åä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–¹æ³•åä½œä¸ºLambdaè¡¨è¾¾å¼ä¼ å…¥ï¼š</String></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.sort(array, Main::cmp);</span><br></pre></td></tr></table></figure>
<p>String.compareTo()æ–¹æ³•ä¹Ÿç¬¦åˆLambdaå®šä¹‰ã€‚<br>
è¿™ä¸ªæ–¹æ³•çš„ç­¾ååªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸ºä»€ä¹ˆå’Œint Comparator<String>.compare(String, String)èƒ½åŒ¹é…å‘¢ï¼Ÿ<br>
å› ä¸ºæœ‰éšå«å‚æ•°this,ç›¸å½“äºé™æ€æ–¹æ³•ã€‚</String></p>
<h3 id="æ„é€ æ–¹æ³•å¼•ç”¨"><a class="header-anchor" href="#æ„é€ æ–¹æ³•å¼•ç”¨">Â¶</a>æ„é€ æ–¹æ³•å¼•ç”¨</h3>
<p>å¯ä»¥ç”¨æ¥å¿«é€Ÿè½¬æ¢ç±»å‹ï¼šå¦‚æœè¦æŠŠä¸€ä¸ªList<String>è½¬æ¢ä¸ºList<Person>ã€‚</Person></String></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Person&gt; persons = names.stream().map(Person::<span class="keyword">new</span>).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸æ¥è¯´æ˜¯è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ArrayList<Person>,ç„¶åä¸€ä¸ªä¸ªæ·»åŠ ã€‚</Person></p>
<h1>stream</h1>
<p>æµå¼APIï¼šåœ¨java.util.streamåŒ…ä¸­ã€‚<br>
å®ƒä¸åŒäºjava.ioçš„InputStreamå’ŒOutputStream,å®ƒä»£è¡¨çš„æ˜¯ä»»æ„Javaå¯¹è±¡çš„åºåˆ—ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:right">*</th>
<th style="text-align:center"><a href="http://java.io" target="_blank" rel="noopener">java.io</a></th>
<th style="text-align:center">java.util.stream</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">å­˜å‚¨</td>
<td style="text-align:center">é¡ºåºè¯»å†™çš„byteæˆ–char</td>
<td style="text-align:center">é¡ºåºè¾“å‡ºçš„ä»»æ„Javaå¯¹è±¡å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:right">ç”¨é€”</td>
<td style="text-align:center">åºåˆ—åŒ–è‡³æ–‡ä»¶æˆ–ç½‘ç»œ</td>
<td style="text-align:center">å†…å­˜è®¡ç®—/ä¸šåŠ¡é€»è¾‘</td>
</tr>
</tbody>
</table>
<p>Streamä¸Listçš„ä¸åŒï¼šStreamè¾“å‡ºçš„å…ƒç´ å¯èƒ½æ˜¯å®æ—¶è®¡ç®—å‡ºæ¥çš„ï¼Œæ²¡æœ‰é¢„å­˜åœ¨å†…å­˜ä¸­ã€‚æ˜¯æƒ°æ€§è®¡ç®—ï¼Œå³çœŸæ­£çš„è®¡ç®—å‘ç”Ÿåœ¨æœ€åç»“æœçš„è·å–ã€‚<br>
ä¸€ä¸ªStream è½¬æ¢ä¸ºå¦ä¸€ä¸ªStream å®é™…ä¸Šåªå­˜å‚¨äº†è½¬æ¢è§„åˆ™ï¼Œå¹¶æ²¡æœ‰ä»»ä½•è®¡ç®—å‘ç”Ÿã€‚</p>
<h3 id="streamçš„ç”¨æ³•"><a class="header-anchor" href="#streamçš„ç”¨æ³•">Â¶</a>streamçš„ç”¨æ³•</h3>
<p>æˆ‘ä»¬é€šå¸¸æŠŠStreamçš„æ“ä½œå†™æˆé“¾å¼æ“ä½œï¼Œä»£ç æ›´ç®€æ´ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;BigInteger&gt; naturals = createNaturalStream();</span><br><span class="line">naturals.map(n -&gt; n.multiply(n)) <span class="comment">// 1, 4, 9, 16, 25...</span></span><br><span class="line">        .limit(<span class="number">100</span>)</span><br><span class="line">        .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> result = createNaturalStream() <span class="comment">// åˆ›å»ºStream,æ‰€æœ‰è‡ªç„¶æ•°</span></span><br><span class="line">             .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>) <span class="comment">// ä»»æ„ä¸ªè½¬æ¢</span></span><br><span class="line">             .map(n -&gt; n * n) <span class="comment">// ä»»æ„ä¸ªè½¬æ¢</span></span><br><span class="line">             .limit(<span class="number">100</span>) <span class="comment">// ä»»æ„ä¸ªè½¬æ¢</span></span><br><span class="line">             .sum(); <span class="comment">// æœ€ç»ˆè®¡ç®—ç»“æœ</span></span><br></pre></td></tr></table></figure>
<h3 id="Stream-map"><a class="header-anchor" href="#Stream-map">Â¶</a>Stream.map()</h3>
<p>æ˜ å°„ï¼Œå¯¹ä¸€ç»„åŸºæœ¬ç±»å‹æˆ–è€…å¯¹è±¡åº”ç”¨ç‰¹å®šå‡½æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;R&gt; <span class="function">Stream&lt;R&gt; <span class="title">map</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends R&gt; mapper)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// å°†Tç±»å‹è½¬æ¢ä¸ºR:</span></span><br><span class="line">    <span class="function">R <span class="title">apply</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠTç±»å‹è½¬æ¢æˆRç±»å‹ã€‚<br>
å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.*;</span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; s = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">Stream&lt;Integer&gt; s2 = s.map(n -&gt; n * n);</span><br><span class="line"></span><br><span class="line">List.of(<span class="string">"  Apple "</span>, <span class="string">" pear "</span>, <span class="string">" ORANGE"</span>, <span class="string">" BaNaNa "</span>)</span><br><span class="line">        .stream()</span><br><span class="line">        .map(String::trim) <span class="comment">// å»ç©ºæ ¼</span></span><br><span class="line">        .map(String::toLowerCase) <span class="comment">// å˜å°å†™</span></span><br><span class="line">        .forEach(System.out::println); <span class="comment">// æ‰“å°</span></span><br></pre></td></tr></table></figure>
<p>è½¬åŒ–å­—ç¬¦ä¸²å¹¶è¾“å‡ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] array = <span class="keyword">new</span> String[] &#123; <span class="string">" 2019-12-31 "</span>, <span class="string">"2020 - 01-09 "</span>, <span class="string">"2020- 05 - 01 "</span>, <span class="string">"2022 - 02 - 01"</span>,</span><br><span class="line">				<span class="string">" 2025-01 -01"</span> &#125;;</span><br><span class="line">		<span class="comment">// è¯·ä½¿ç”¨mapæŠŠString[]è½¬æ¢ä¸ºLocalDateå¹¶æ‰“å°:</span></span><br><span class="line">		Arrays.stream(array)</span><br><span class="line">			.map(s -&gt; s.replaceAll(<span class="string">"\\s+"</span>, <span class="string">""</span>))</span><br><span class="line">			.map(LocalDate::parse)</span><br><span class="line">			.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<h3 id="Stream-reduce"><a class="header-anchor" href="#Stream-reduce">Â¶</a>Stream.reduce()</h3>
<p>å°†Streamæ‰€æœ‰çš„å…ƒç´ æŒ‰ç…§èšåˆå‡½æ•°èšåˆæˆä¸€ä¸ªç»“æœã€‚<br>
reduce()æ–¹æ³•ä¼ å…¥çš„å¯¹è±¡æ˜¯BinaryOperatoræ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BinaryOperator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// Biæ“ä½œï¼šä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º</span></span><br><span class="line">    <span class="function">T <span class="title">apply</span><span class="params">(T t, T u)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ“ä½œï¼šé¦–å…ˆè®¾å®šåˆå§‹å€¼ï¼Œç„¶åæ˜¯å‚æ•°å’Œæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.stream.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> s = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>).reduce(<span class="number">1</span>, (acc, n) -&gt; acc * n);</span><br><span class="line">        System.out.println(s); <span class="comment">// 362880</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MapReduceæ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŒ‰è¡Œè¯»å–é…ç½®æ–‡ä»¶:</span></span><br><span class="line">        List&lt;String&gt; props = List.of(<span class="string">"profile=native"</span>, <span class="string">"debug=true"</span>, <span class="string">"logging=warn"</span>, <span class="string">"interval=500"</span>);</span><br><span class="line">        Map&lt;String, String&gt; map = props.stream()</span><br><span class="line">                <span class="comment">// æŠŠk=vè½¬æ¢ä¸ºMap[k]=v:</span></span><br><span class="line">                .map(kv -&gt; &#123;</span><br><span class="line">                    String[] ss = kv.split(<span class="string">"\\="</span>, <span class="number">2</span>);</span><br><span class="line">                    <span class="keyword">return</span> Map.of(ss[<span class="number">0</span>], ss[<span class="number">1</span>]);</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// æŠŠæ‰€æœ‰Mapèšåˆåˆ°ä¸€ä¸ªMap:</span></span><br><span class="line">                .reduce(<span class="keyword">new</span> HashMap&lt;String, String&gt;(), (m, kv) -&gt; &#123;</span><br><span class="line">                    m.putAll(kv);</span><br><span class="line">                    <span class="keyword">return</span> m;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="comment">// æ‰“å°ç»“æœ:</span></span><br><span class="line">        map.forEach((k, v) -&gt; &#123;</span><br><span class="line">            System.out.println(k + <span class="string">" = "</span> + v);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="filter"><a class="header-anchor" href="#filter">Â¶</a>filter</h3>
<p>é¡¾åæ€ä¹‰ï¼Œç­›é€‰ã€‚<br>
filter()æ–¹æ³•æ¥æ”¶çš„å¯¹è±¡æ˜¯Predicateæ¥å£å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªtest()æ–¹æ³•ï¼Œè´Ÿè´£åˆ¤æ–­å…ƒç´ æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å…ƒç´ tæ˜¯å¦ç¬¦åˆæ¡ä»¶:</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IntStream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line">                .filter(n -&gt; n % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">                .forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥åº”ç”¨äºä»»ä½•Javaå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream.generate(<span class="keyword">new</span> LocalDateSupplier())</span><br><span class="line">        .limit(<span class="number">31</span>)</span><br><span class="line">        .filter(ldt -&gt; ldt.getDayOfWeek() == DayOfWeek.SATURDAY || ldt.getDayOfWeek() == DayOfWeek.SUNDAY)</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡ºé›†åˆ"><a class="header-anchor" href="#è¾“å‡ºé›†åˆ">Â¶</a>è¾“å‡ºé›†åˆ</h3>
<p>è½¬åŒ–æ“ä½œå¦‚map, filteræ˜¯ä¸ä¼šè¿›è¡Œä»»ä½•è®¡ç®—ï¼Œåªæ˜¯æ”¹å˜äº†Streamå†…éƒ¨çš„è§„åˆ™ï¼Œè€Œè¿›è¡Œäº†èšåˆæ“ä½œå¦‚reduceï¼Œåˆ™ä¼šçœŸæ­£çš„å‘Streamè¯·æ±‚æ•°æ®ï¼Œæ‰€ä»¥å…¶è¾“å‡ºç»“æœä¹Ÿä¸å†æ˜¯Streamï¼Œè€Œæ˜¯ä¸€ä¸ªJavaå¯¹è±¡ã€‚<br>
èšåˆæ“ä½œæ˜¯ä¸æ–­çš„å‘ä¸Šæ¸¸è¯·æ±‚æ•°æ®ï¼Œç›´è‡³åœ¨å®ä¾‹ä¸­è¯·æ±‚åˆ°çœŸæ­£çš„å…ƒç´ ã€‚</p>
<h4 id="è¾“å‡ºä¸ºList"><a class="header-anchor" href="#è¾“å‡ºä¸ºList">Â¶</a>è¾“å‡ºä¸ºList</h4>
<p>æŠŠStreamçš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°Listçš„æ–¹æ³•æ˜¯è°ƒç”¨collect()å¹¶ä¼ å…¥Collectors.toList()å¯¹è±¡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªCollectorå®ä¾‹ï¼Œé€šè¿‡ç±»ä¼¼reduce()çš„æ“ä½œï¼ŒæŠŠæ¯ä¸ªå…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ”¶é›†å™¨ä¸­ï¼ˆå®é™…ä¸Šæ˜¯ArrayListï¼‰ã€‚<br>
ç±»ä¼¼çš„ï¼Œcollect(Collectors.toSet())å¯ä»¥æŠŠStreamçš„æ¯ä¸ªå…ƒç´ æ”¶é›†åˆ°Setä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">tream&lt;String&gt; stream = Stream.of(<span class="string">"Apple"</span>, <span class="string">""</span>, <span class="keyword">null</span>, <span class="string">"Pear"</span>, <span class="string">"  "</span>, <span class="string">"Orange"</span>);</span><br><span class="line">List&lt;String&gt; list = stream.filter</span><br><span class="line">        (s -&gt; s != <span class="keyword">null</span> &amp;&amp; !s.isBlank())</span><br><span class="line">        .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<h4 id="è¾“å‡ºä¸ºArray"><a class="header-anchor" href="#è¾“å‡ºä¸ºArray">Â¶</a>è¾“å‡ºä¸ºArray</h4>
<p>è°ƒç”¨toArray()å³å¯ï¼Œä¼ å…¥æ•°ç»„çš„æ„é€ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">"Apple"</span>, <span class="string">"Banana"</span>, <span class="string">"Orange"</span>);</span><br><span class="line">String[] array = list.stream().toArray(String[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure>
<h4 id="è¾“å‡ºä¸ºMap"><a class="header-anchor" href="#è¾“å‡ºä¸ºMap">Â¶</a>è¾“å‡ºä¸ºMap</h4>
<p>è¦æŒ‡å®šä¸¤ä¸ªæ˜ å°„å‡½æ•°ï¼Œåˆ†åˆ«æŠŠå…ƒç´ æ˜ å°„ä¸ºkeyå’Œvalueï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Stream&lt;String&gt; stream = Stream.of(<span class="string">"APPL:Apple"</span>, <span class="string">"MSFT:Microsoft"</span>);</span><br><span class="line">        Map&lt;String, String&gt; map = stream</span><br><span class="line">                .collect(Collectors.toMap(</span><br><span class="line">                        <span class="comment">// æŠŠå…ƒç´ sæ˜ å°„ä¸ºkey:</span></span><br><span class="line">                        s -&gt; s.substring(<span class="number">0</span>, s.indexOf(<span class="string">':'</span>)),</span><br><span class="line">                        <span class="comment">// æŠŠå…ƒç´ sæ˜ å°„ä¸ºvalue:</span></span><br><span class="line">                        s -&gt; s.substring(s.indexOf(<span class="string">':'</span>) + <span class="number">1</span>)));</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ†ç»„è¾“å‡º"><a class="header-anchor" href="#åˆ†ç»„è¾“å‡º">Â¶</a>åˆ†ç»„è¾“å‡º</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = List.of(<span class="string">"Apple"</span>, <span class="string">"Banana"</span>, <span class="string">"Blackberry"</span>, <span class="string">"Coconut"</span>, <span class="string">"Avocado"</span>, <span class="string">"Cherry"</span>, <span class="string">"Apricots"</span>);</span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; groups = list.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(s -&gt; s.substring(<span class="number">0</span>, <span class="number">1</span>), Collectors.toList()));</span><br><span class="line">        System.out.println(groups);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ†ç»„è¾“å‡ºä½¿ç”¨Collectors.groupingBy()ï¼Œå®ƒéœ€è¦æä¾›ä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯åˆ†ç»„çš„keyï¼Œç¬¬äºŒä¸ªæ˜¯åˆ†ç»„çš„valueï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨Collectors.toList()ï¼Œè¡¨ç¤ºè¾“å‡ºä¸ºList.</p>
<h2 id="å…¶ä»–æ“ä½œ"><a class="header-anchor" href="#å…¶ä»–æ“ä½œ">Â¶</a>å…¶ä»–æ“ä½œ</h2>
<h3 id="æ’åº-sorted"><a class="header-anchor" href="#æ’åº-sorted">Â¶</a>æ’åº sorted()</h3>
<p>è½¬æ¢æ“ä½œï¼Œæ­¤æ–¹æ³•è¦æ±‚Streamçš„æ¯ä¸ªå…ƒç´ å¿…é¡»å®ç°Comparableæ¥å£ã€‚å¦‚æœè¦è‡ªå®šä¹‰æ’åºï¼Œä¼ å…¥æŒ‡å®šçš„Comparatorå³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">"Orange"</span>, <span class="string">"apple"</span>, <span class="string">"Banana"</span>)</span><br><span class="line">    .stream()</span><br><span class="line">    .sorted(String::compareToIgnoreCase)</span><br><span class="line">    .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<h3 id="å»é‡-distinct"><a class="header-anchor" href="#å»é‡-distinct">Â¶</a>å»é‡ distinct()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List.of(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"A"</span>, <span class="string">"C"</span>, <span class="string">"B"</span>, <span class="string">"D"</span>)</span><br><span class="line">    .stream()</span><br><span class="line">    .distinct()</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [A, B, C, D]</span></span><br></pre></td></tr></table></figure>
<h3 id="æˆªå–-skip-n-limit-n"><a class="header-anchor" href="#æˆªå–-skip-n-limit-n">Â¶</a>æˆªå– skip(n) limit(n)</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List.of(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"E"</span>, <span class="string">"F"</span>)</span><br><span class="line">    .stream()</span><br><span class="line">    .skip(<span class="number">2</span>) <span class="comment">// è·³è¿‡A, B</span></span><br><span class="line">    .limit(<span class="number">3</span>) <span class="comment">// æˆªå–C, D, E</span></span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [C, D, E]</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆå¹¶-concat"><a class="header-anchor" href="#åˆå¹¶-concat">Â¶</a>åˆå¹¶ concat()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;String&gt; s1 = List.of(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>).stream();</span><br><span class="line">Stream&lt;String&gt; s2 = List.of(<span class="string">"D"</span>, <span class="string">"E"</span>).stream();</span><br><span class="line"><span class="comment">// åˆå¹¶:</span></span><br><span class="line">Stream&lt;String&gt; s = Stream.concat(s1, s2);</span><br><span class="line">System.out.println(s.collect(Collectors.toList())); <span class="comment">// [A, B, C, D, E]</span></span><br></pre></td></tr></table></figure>
<h3 id="flatMap"><a class="header-anchor" href="#flatMap">Â¶</a>flatMap</h3>
<p>åˆå¹¶æˆæ–°çš„Stream:æŠŠæ¯ä¸ªç»“æ„å†…çš„å…ƒç´ å–å‡ºæ¥ï¼Œæ˜ å°„ä¸€ä¸ªæ–°çš„Streamã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;List&lt;Integer&gt;&gt; s = Stream.of(</span><br><span class="line">        Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>),</span><br><span class="line">        Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>),</span><br><span class="line">        Arrays.asList(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è€Œæˆ‘ä»¬å¸Œæœ›æŠŠä¸Šè¿°Streamè½¬æ¢ä¸ºStream&lt;Integer&gt;ï¼Œå°±å¯ä»¥ä½¿ç”¨flatMap()ï¼š</span></span><br><span class="line">Stream&lt;Integer&gt; i = s.flatMap(list -&gt; list.stream());</span><br></pre></td></tr></table></figure>
<h3 id="å¹¶è¡Œ"><a class="header-anchor" href="#å¹¶è¡Œ">Â¶</a>å¹¶è¡Œ</h3>
<p>åªéœ€è¦ç”¨parallel()è¿›è¡Œè½¬æ¢ä¸ºå¯å¹¶è¡Œçš„Streamï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;String&gt; s = ...</span><br><span class="line">String[] result = s.parallel() <span class="comment">// å˜æˆä¸€ä¸ªå¯ä»¥å¹¶è¡Œå¤„ç†çš„Stream</span></span><br><span class="line">                   .sorted() <span class="comment">// å¯ä»¥è¿›è¡Œå¹¶è¡Œæ’åº</span></span><br><span class="line">                   .toArray(String[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure>
<h3 id="å…¶ä»–æ–¹æ³•"><a class="header-anchor" href="#å…¶ä»–æ–¹æ³•">Â¶</a>å…¶ä»–æ–¹æ³•</h3>
<p>èšåˆæ–¹æ³•ï¼š<br>
count()ï¼šç”¨äºè¿”å›å…ƒç´ ä¸ªæ•°ï¼›<br>
max(Comparator&lt;? super T&gt; cp)ï¼šæ‰¾å‡ºæœ€å¤§å…ƒç´ ï¼›<br>
min(Comparator&lt;? super T&gt; cp)ï¼šæ‰¾å‡ºæœ€å°å…ƒç´ ã€‚</p>
<p>é’ˆå¯¹IntStreamã€LongStreamå’ŒDoubleStreamï¼Œè¿˜é¢å¤–æä¾›äº†ä»¥ä¸‹èšåˆæ–¹æ³•ï¼š<br>
sum()ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å’Œï¼›<br>
average()ï¼šå¯¹æ‰€æœ‰å…ƒç´ æ±‚å¹³å‡æ•°ã€‚</p>
<p>æ¡ä»¶åˆ¤æ–­ï¼š<br>
boolean allMatch(Predicate&lt;? super T&gt;)ï¼šæµ‹è¯•æ˜¯å¦æ‰€æœ‰å…ƒç´ å‡æ»¡è¶³æµ‹è¯•æ¡ä»¶ï¼›<br>
boolean anyMatch(Predicate&lt;? super T&gt;)ï¼šæµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æµ‹è¯•æ¡ä»¶ã€‚</p>
<p>å¾ªç¯æ“ä½œï¼šforEach(æ³¨æ„è¿™ä¸ªE)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;String&gt; s = ...</span><br><span class="line">s.forEach(str -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">"Hello, "</span> + str);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/2020/03/15/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<pre><code>Javaæ ‡å‡†åº“çš„java.util.regexåŒ…å†…ç½®äº†æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚Javaä½¿ç”¨æ­£åˆ™è®°å¾—å‰é¢åŠ å¤šä¸€ä¸ªè½¬æ„å­—ç¬¦\ã€‚
</code></pre>
<a id="more"></a>
<h4 id="ä½¿ç”¨"><a class="header-anchor" href="#ä½¿ç”¨">Â¶</a>ä½¿ç”¨</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String regex = <span class="string">"20\\d\\d"</span>;</span><br><span class="line">        System.out.println(<span class="string">"2019"</span>.matches(regex)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">"2100"</span>.matches(regex)); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŒ¹é…ç¬¦"><a class="header-anchor" href="#åŒ¹é…ç¬¦">Â¶</a>åŒ¹é…ç¬¦</h4>
<p>ä»»æ„å­—ç¬¦ï¼š.<br>
æ•°å­—ï¼š\d<br>
éæ•°å­—ï¼š\D(å¤§å†™å°±æ˜¯åç€æ¥)<br>
ç©ºæ ¼: \s,<br>
tab:\t</p>
<h4 id="é‡å¤åŒ¹é…"><a class="header-anchor" href="#é‡å¤åŒ¹é…">Â¶</a>é‡å¤åŒ¹é…</h4>
<ol>
<li>åŒ¹é…0~nä¸ªå­—ç¬¦ï¼š*<br>
\d*</li>
<li>åŒ¹é…è‡³å°‘ä¸€ä¸ªå­—ç¬¦ï¼š+<br>
\d+</li>
<li>0ä¸ªæˆ–è€…ä¸€ä¸ªå­—ç¬¦ï¼šï¼Ÿ</li>
<li>ç²¾ç¡®æŒ‡å®šnä¸ªå­—ç¬¦ï¼š{n}æˆ–è€…{n,m}:<br>
\d{3},\d{3,5}åŒ¹é…3-5ä¸ª<br>
æ²¡æœ‰ä¸Šé™å°±{n,}</li>
</ol>
<p>å…ˆè®°è¿™ä¹ˆå¤šæŠŠï¼Œå¤æ‚çš„ä»¥åç”¨åˆ°çš„æ—¶å€™å†æŸ¥æŸ¥ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>æ±‰è¯ºå¡”å’Œå“ˆå¤«æ›¼ç¼–ç </title>
    <url>/2020/03/15/%E6%B1%89%E8%AF%BA%E5%A1%94%E5%92%8C%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81/</url>
    <content><![CDATA[<h1>æ±‰è¯ºå¡”</h1>
<p>an = 2 * an-1 + 1ï¼Œan = 2n - 1ï¼Œn ä¸ªåœ†ç›˜éœ€è¦ç§»åŠ¨ 2n - 1 æ¬¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hanoi</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> n, String from, String buffer, String to)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"from "</span> + from + <span class="string">" to "</span> + to);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        move(n - <span class="number">1</span>, from, to, buffer);</span><br><span class="line">        move(<span class="number">1</span>, from, buffer, to);</span><br><span class="line">        move(n - <span class="number">1</span>, buffer, from, to);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Hanoi.move(<span class="number">3</span>, <span class="string">"H1"</span>, <span class="string">"H2"</span>, <span class="string">"H3"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ±‰å¤«æ›¼ç¼–ç </h1>
<p>æ ¹æ®æ•°æ®å‡ºç°çš„é¢‘ç‡å¯¹æ•°æ®è¿›è¡Œç¼–ç ï¼Œä»è€Œå‹ç¼©åŸå§‹æ•°æ®ã€‚<br>
ä¾‹å¦‚å¯¹äºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­å„ç§å­—ç¬¦å‡ºç°çš„æ¬¡æ•°å¦‚ä¸‹ï¼š</p>
<ul>
<li>a : 10</li>
<li>b : 20</li>
<li>c : 40</li>
<li>d : 80<br>
å¯ä»¥å°†æ¯ç§å­—ç¬¦è½¬æ¢æˆäºŒè¿›åˆ¶ç¼–ç ï¼Œä¾‹å¦‚å°† a è½¬æ¢ä¸º 00ï¼Œb è½¬æ¢ä¸º 01ï¼Œc è½¬æ¢ä¸º 10ï¼Œd è½¬æ¢ä¸º 11ã€‚è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§ç¼–ç æ–¹å¼ï¼Œæ²¡æœ‰è€ƒè™‘å„ä¸ªå­—ç¬¦çš„æƒå€¼ï¼ˆå‡ºç°é¢‘ç‡ï¼‰ã€‚è€Œå“ˆå¤«æ›¼ç¼–ç é‡‡ç”¨äº†è´ªå¿ƒç­–ç•¥ï¼Œä½¿å‡ºç°é¢‘ç‡æœ€é«˜çš„å­—ç¬¦çš„ç¼–ç æœ€çŸ­ï¼Œä»è€Œä¿è¯æ•´ä½“çš„ç¼–ç é•¿åº¦æœ€çŸ­ã€‚</li>
</ul>
<p>é¦–å…ˆç”Ÿæˆä¸€é¢—å“ˆå¤«æ›¼æ ‘ï¼Œæ¯æ¬¡ç”Ÿæˆè¿‡ç¨‹ä¸­é€‰å–é¢‘ç‡æœ€å°‘çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç”Ÿæˆä¸€ä¸ªæ–°èŠ‚ç‚¹ä½œä¸ºå®ƒä»¬çš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ–°èŠ‚ç‚¹çš„é¢‘ç‡ä¸ºä¸¤ä¸ªèŠ‚ç‚¹çš„å’Œã€‚é€‰å–é¢‘ç‡æœ€å°‘çš„åŸå› æ˜¯ï¼Œç”Ÿæˆè¿‡ç¨‹ä½¿å¾—å…ˆé€‰å–çš„èŠ‚ç‚¹ä½äºæ ‘çš„æ›´ä½å±‚ï¼Œé‚£ä¹ˆéœ€è¦çš„ç¼–ç é•¿åº¦æ›´é•¿ï¼Œé¢‘ç‡æ›´å°‘å¯ä»¥ä½¿å¾—æ€»ç¼–ç é•¿åº¦æ›´å°‘ã€‚</p>
<p>ç”Ÿæˆç¼–ç æ—¶ï¼Œä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œå‘å·¦éå†åˆ™æ·»åŠ äºŒè¿›åˆ¶ä½ 0ï¼Œå‘å³åˆ™æ·»åŠ äºŒè¿›åˆ¶ä½ 1ï¼Œç›´åˆ°éå†åˆ°å¶å­èŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹ä»£è¡¨çš„å­—ç¬¦çš„ç¼–ç å°±æ˜¯è¿™ä¸ªè·¯å¾„ç¼–ç ã€‚</p>
<h4 id="å“ˆå¤«æ›¼æ ‘"><a class="header-anchor" href="#å“ˆå¤«æ›¼æ ‘">Â¶</a>å“ˆå¤«æ›¼æ ‘</h4>
<p>åˆä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œnä¸ªå¸¦æƒå¶å­ç»“ç‚¹æ„æˆçš„æ‰€æœ‰äºŒå‰æ ‘ä¸­ï¼Œå¸¦æƒè·¯å¾„é•¿åº¦æœ€å°çš„äºŒå‰æ ‘ï¼ˆå„ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦ä¸å¯¹åº”æƒå€¼çš„ä¹˜ç§¯ä¹‹å’Œï¼‰ã€‚</p>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå•å…ƒæµ‹è¯•</title>
    <url>/2020/03/14/Java%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<h1>JUnit</h1>
<p>TDD: æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œæ˜¯æŒ‡å…ˆç¼–å†™æ¥å£ï¼Œç´§æ¥ç€ç¼–å†™æµ‹è¯•ã€‚ç¼–å†™å®Œæµ‹è¯•åï¼Œæˆ‘ä»¬æ‰å¼€å§‹çœŸæ­£ç¼–å†™å®ç°ä»£ç ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itranswarp.learnjava;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactorialTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testFact</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        assertEquals(<span class="number">1</span>, Factorial.fact(<span class="number">1</span>));</span><br><span class="line">        assertEquals(<span class="number">2</span>, Factorial.fact(<span class="number">2</span>));</span><br><span class="line">        assertEquals(<span class="number">6</span>, Factorial.fact(<span class="number">3</span>));</span><br><span class="line">        assertEquals(<span class="number">3628800</span>, Factorial.fact(<span class="number">10</span>));</span><br><span class="line">        assertEquals(<span class="number">2432902008176640000L</span>, Factorial.fact(<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>assertEquals(expected, actual)æ˜¯æœ€å¸¸ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒåœ¨Assertionç±»ä¸­å®šä¹‰ã€‚Assertionè¿˜å®šä¹‰äº†å…¶ä»–æ–­è¨€æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>assertTrue(): æœŸå¾…ç»“æœä¸ºtrue</li>
<li>assertFalse(): æœŸå¾…ç»“æœä¸ºfalse</li>
<li>assertNotNull(): æœŸå¾…ç»“æœä¸ºénull</li>
<li>assertArrayEquals(): æœŸå¾…ç»“æœä¸ºæ•°ç»„å¹¶ä¸æœŸæœ›æ•°ç»„æ¯ä¸ªå…ƒç´ çš„å€¼å‡ç›¸ç­‰</li>
</ul>
<h3 id="Fixture"><a class="header-anchor" href="#Fixture">Â¶</a>Fixture</h3>
<ol>
<li>å¯¹äºå®ä¾‹å˜é‡ï¼Œåœ¨@BeforeEachä¸­åˆå§‹åŒ–ï¼Œåœ¨@AfterEachä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª@Testæ–¹æ³•ä¸­äº’ä¸å½±å“ï¼Œå› ä¸ºæ˜¯ä¸åŒçš„å®ä¾‹ï¼›</li>
<li>å¯¹äºé™æ€å˜é‡ï¼ˆå¦‚æ•°æ®åº“çš„å¼€å…³ï¼‰ï¼Œåœ¨@BeforeAllä¸­åˆå§‹åŒ–ï¼Œåœ¨@AfterAllä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª@Testæ–¹æ³•ä¸­å‡æ˜¯å”¯ä¸€å®ä¾‹ï¼Œä¼šå½±å“å„ä¸ª@Testæ–¹æ³•ã€‚<br>
æœ€åï¼Œæ³¨æ„åˆ°æ¯æ¬¡è¿è¡Œä¸€ä¸ª@Testæ–¹æ³•å‰ï¼ŒJUnité¦–å…ˆåˆ›å»ºä¸€ä¸ªXxxTestå®ä¾‹ï¼Œå› æ­¤ï¼Œæ¯ä¸ª@Testæ–¹æ³•å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ä¹Ÿæ— æ³•æŠŠæˆå‘˜å˜é‡çš„çŠ¶æ€ä»ä¸€ä¸ª@Testæ–¹æ³•å¸¦åˆ°å¦ä¸€ä¸ª@Testæ–¹æ³•ã€‚</li>
</ol>
<h1>å¼‚å¸¸æµ‹è¯•</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testNegative</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThrows(IllegalArgumentException<span class="class">.<span class="keyword">class</span>, <span class="title">new</span> <span class="title">Executable</span>() </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">            Factorial.fact(-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JUnitæä¾›assertThrows()æ¥æœŸæœ›æ•è·ä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸ã€‚ç¬¬äºŒä¸ªå‚æ•°Executableå°è£…äº†æˆ‘ä»¬è¦æ‰§è¡Œçš„ä¼šäº§ç”Ÿå¼‚å¸¸çš„ä»£ç ã€‚å½“æˆ‘ä»¬æ‰§è¡ŒFactorial.fact(-1)æ—¶ï¼Œå¿…å®šæŠ›å‡ºIllegalArgumentExceptionã€‚</p>
<p>Java 8åï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ‰€æœ‰å•æ–¹æ³•æ¥å£éƒ½å¯ä»¥ç®€å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testNegative</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertThrows(IllegalArgumentException<span class="class">.<span class="keyword">class</span>, () -&gt; </span>&#123;</span><br><span class="line">        Factorial.fact(-<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ¡ä»¶æµ‹è¯•</h1>
<h3 id="Disabled"><a class="header-anchor" href="#Disabled">Â¶</a>@Disabled</h3>
<p>éœ€è¦æ³¨é‡Šæ‰æŸäº›æ–¹æ³•ï¼Œå¯ä»¥æ ‡è®°@Disabledã€‚</p>
<h3 id="EnableOnOsï¼ˆåˆ¤æ–­æ“ä½œç³»ç»Ÿï¼‰"><a class="header-anchor" href="#EnableOnOsï¼ˆåˆ¤æ–­æ“ä½œç³»ç»Ÿï¼‰">Â¶</a>@EnableOnOsï¼ˆåˆ¤æ–­æ“ä½œç³»ç»Ÿï¼‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledOnOs</span>(OS.WINDOWS)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testWindows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertEquals(<span class="string">"C:\\test.ini"</span>, config.getConfigFile(<span class="string">"test.ini"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledOnOs</span>(&#123; OS.LINUX, OS.MAC &#125;)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testLinuxAndMac</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    assertEquals(<span class="string">"/usr/local/test.cfg"</span>, config.getConfigFile(<span class="string">"test.cfg"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DisabledOnOs"><a class="header-anchor" href="#DisabledOnOs">Â¶</a>@DisabledOnOs</h3>
<p>åœ¨æŸäº›æ“ä½œç³»ç»Ÿæ‰§è¡Œã€‚</p>
<h3 id="EnabledIfEnvironmentVariable"><a class="header-anchor" href="#EnabledIfEnvironmentVariable">Â¶</a>@EnabledIfEnvironmentVariable</h3>
<p>ä¼ å…¥ç¯å¢ƒå˜é‡ DEBUG=true æ‰èƒ½æ‰§è¡Œã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledIfEnvironmentVariable</span>(named = <span class="string">"DEBUG"</span>, matches = <span class="string">"true"</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testOnlyOnDebugMode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> this test is only run on DEBUG=true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‡èƒ½çš„-EnableIf"><a class="header-anchor" href="#ä¸‡èƒ½çš„-EnableIf">Â¶</a>ä¸‡èƒ½çš„@EnableIf</h3>
<p>å¯ä»¥æ‰§è¡Œä»»æ„Javaè¯­å¥å¹¶æ ¹æ®è¿”å›çš„booleanå†³å®šæ˜¯å¦æ‰§è¡Œæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledIf</span>(<span class="string">"java.time.LocalDate.now().getDayOfWeek()==java.time.DayOfWeek.SUNDAY"</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testOnlyOnSunday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> this test is only run on Sunday</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å‚æ•°åŒ–æµ‹è¯•</h1>
<h2 id="ParameterizedTest"><a class="header-anchor" href="#ParameterizedTest">Â¶</a>@ParameterizedTest</h2>
<p>ç”¨è¿™ä¸ªæ³¨è§£ã€‚<br>
@ValueSource(ints = { -1, -5, -100 })å¯ä»¥ç”¨æ¥ä¼ é€’å€¼ã€‚</p>
<h3 id="1-MethodSource"><a class="header-anchor" href="#1-MethodSource">Â¶</a>1 @MethodSource</h3>
<p>å®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŒåçš„é™æ€æ–¹æ³•æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCapitalize</span><span class="params">(String input, String result)</span> </span>&#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> List&lt;Arguments&gt; <span class="title">testCapitalize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> List.of( <span class="comment">// arguments:</span></span><br><span class="line">            Arguments.arguments(<span class="string">"abc"</span>, <span class="string">"Abc"</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">"APPLE"</span>, <span class="string">"Apple"</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">"gooD"</span>, <span class="string">"Good"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-CsvSource"><a class="header-anchor" href="#2-CsvSource">Â¶</a>2 @CsvSource</h3>
<p>ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œå‚æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@CsvSource</span>(&#123; <span class="string">"abc, Abc"</span>, <span class="string">"APPLE, Apple"</span>, <span class="string">"gooD, Good"</span> &#125;)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCapitalize</span><span class="params">(String input, String result)</span> </span>&#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æŠŠæµ‹è¯•æ•°æ®æåˆ°ä¸€ä¸ªç‹¬ç«‹çš„CSVæ–‡ä»¶ä¸­ï¼Œç„¶åæ ‡æ³¨ä¸Š@CsvFileSourceï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@CsvFileSource</span>(resources = &#123; <span class="string">"/test-capitalize.csv"</span> &#125;)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCapitalizeUsingCsvFile</span><span class="params">(String input, String result)</span> </span>&#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·ä¸€ã€‹è¯»ä¹¦ç¬”è®°ä¸€</title>
    <url>/2020/03/13/%E3%80%8AJava%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%80%E3%80%8B/</url>
    <content><![CDATA[<pre><code>éšæ„è®°å½•ä¸€ä¸‹æœ‰è¶£çš„ã€‚
</code></pre>
<a id="more"></a>
<h2 id="ç¬¬ä¸‰ç« "><a class="header-anchor" href="#ç¬¬ä¸‰ç« ">Â¶</a>ç¬¬ä¸‰ç« </h2>
<ol>
<li>æ ¼å¼åŒ–åˆ›å»ºå­—ç¬¦ä¸²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String formatStr = String.format(<span class="string">"Hello, %s. Next year, you'll be %d"</span>, name, age);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>doâ€¦whileå’Œwhile<br>
doâ€¦whileæ˜¯å…ˆæ‰§è¡Œå†å¾ªç¯ï¼Œå—ä¸­çš„è¯­å¥ä¼šè‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li>å¾ªç¯ä¸­ï¼Œç”¨æµ®ç‚¹æ•°ä½œä¸ºåˆ¤æ–­è¯­å¥<br>
å¯èƒ½æ°¸è¿œä¸ä¼šç»“æŸï¼Œå› ä¸ºä¸€äº›æµ®ç‚¹æ•°æ— æ³•ç²¾ç¡®çš„ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºã€‚</li>
<li>ä¸‰å…ƒæ“ä½œç¬¦<br>
b ? x:y bæˆç«‹ï¼Œè¿”å›xï¼›ä¸æˆç«‹è¿”å›yã€‚</li>
<li>å–ä½™<br>
x % 3 == 0</li>
<li>æ•´æ•°åŠ æ³•æº¢å‡º<br>
intçš„æœ€å¤§æ­£æ•´æ•°ä¸º2147483647ï¼ŒåŠ 1åˆ™å˜æˆ-2147483648ï¼ŒåŠ 2åˆ™ä¸º-2147483647ã€‚</li>
<li>è‡ªå¢ï¼Œè‡ªå‡è¿ç®—ç¬¦<br>
x= <ins>x*2ï¼›æ˜¯å…ˆè‡ªå¢å†ä¹˜ä»¥2ï¼Œx= x</ins>*2ï¼› æ˜¯å…ˆç®—å‡ºæ–°çš„xå€¼ï¼Œå†è‡ªå¢ã€‚</li>
</ol>
<h2 id="ç¬¬å››ç« "><a class="header-anchor" href="#ç¬¬å››ç« ">Â¶</a>ç¬¬å››ç« </h2>
<ol>
<li>å¯¹è±¡å­˜å‚¨åœ¨å †ä¸­ï¼Œå¯¹è±¡å˜é‡å…¶å®æ˜¯å¯¹è±¡çš„å¯¹è±¡æŒ‡é’ˆï¼Œå½“ä¸€ä¸ªå¯¹è±¡åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡çš„å˜é‡æ—¶ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡çš„æŒ‡é’ˆã€‚è¦è¿›è¡Œå¯¹è±¡çš„æ·±æ‹·è´ï¼Œå¿…é¡»ç”¨cloneæ–¹æ³•ã€‚</li>
<li>varåªèƒ½ç”¨åœ¨æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ï¼Œè¿˜æœ‰ä¸å¯¹æ•°å€¼ç±»å‹ä½¿ç”¨varï¼Œä¸ç„¶èµ‹å€¼å¾ˆéº»çƒ¦ï¼š0,0.1f,0L.</li>
<li>è®¿é—®å™¨æ–¹æ³•ä¸è¦è¿”å›å¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œå› ä¸ºå¤–ç•Œåˆ›å»ºçš„å¼•ç”¨è·Ÿç±»å†…éƒ¨çš„å¼•ç”¨æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„æ›´æ”¹å™¨æ–¹æ³•å°±å¯ä»¥æ”¹å˜ç±»å†…å¯¹è±¡çš„privateçŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œåº”è¯¥å…ˆå¯¹å®ƒè¿›è¡Œå…‹éš†ï¼Œå†è¿›è¡Œè¿”å›ã€‚<br>
Javaçš„å‚æ•°ä¼ é€’æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå¯¹è±¡å¼•ç”¨åˆ°æ–¹æ³•ä¸­ï¼Œå®é™…æ˜¯æ–¹æ³•è·å¾—äº†å¯¹è±¡å¼•ç”¨çš„å‰¯æœ¬ï¼Œé€šè¿‡è¿™ä¸ªå‰¯æœ¬å»æ”¹å˜æ‰€å¼•ç”¨çš„å¯¹è±¡çš„çŠ¶æ€æ˜¯å¯è¡Œçš„ã€‚ä½†æ˜¯å¦‚æœæ”¹å˜å¯¹è±¡å¼•ç”¨çš„å‰¯æœ¬ï¼Œæ˜¯å¯¹å¯¹è±¡æœ¬èº«æ²¡æœ‰ä»»ä½•å½±å“ã€‚å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå³ä½¿æ”¹å˜äº†çŠ¶æ€ï¼Œä¹Ÿæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå†æ›´æ–°åˆ°æ‰€æœ‰å¼•ç”¨åˆ°è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¸Šã€‚</li>
<li>staticï¼šé™æ€å­—æ®µå’Œæ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œåˆä¸ºç±»å­—æ®µã€‚ä¸ä¼šä½¿ç”¨ä»»ä½•thiså‚æ•°ï¼Œä¸ä¼šåˆ›å»ºä»»ä½•ç±»å¯¹è±¡ï¼Œæ‰€ä»¥é™æ€æ–¹æ³•æ˜¯ä¸å¯ä»¥è®¿é—®å¯¹è±¡å­—æ®µçš„ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®é™æ€å­—æ®µã€‚ä½¿ç”¨æ—¶ç”¨ç±»åå¼•ç”¨ã€‚</li>
<li>finalï¼šä¸ºå¸¸é‡ï¼Œæ„é€ å‡½æ•°ä¹‹åå³åˆ›å»ºï¼Œæ°¸ä¸æ”¹å˜ï¼Œå…¬å…±å­—æ®µä¸é¼“åŠ±ï¼Œä½†æ˜¯å…¬å…±å¸¸é‡æ˜¯å¯å–çš„ã€‚</li>
<li>mainæ–¹æ³•ï¼Œä¸å¯¹ä»»ä½•å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶æ„å»ºå¹¶æ‰§è¡Œç¨‹åºæ‰€éœ€è¦çš„å¯¹è±¡ï¼Œå¯åœ¨ç±»ä¸­åŠ å…¥ç”¨äºå•å…ƒæµ‹è¯•ã€‚è€Œå…¶ä»–ç±»ä½œä¸ºä¸»mainæ—¶ï¼Œè¿™ä¸ªç±»çš„mainå°†ä¸å†æ‰§è¡Œã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ—¶é—´</title>
    <url>/2020/03/13/Java%E6%97%B6%E9%97%B4/</url>
    <content><![CDATA[<pre><code>å¦‚æœä»¥GMTæˆ–è€…UTCä½œä¸ºæ—¶åŒºï¼Œè¿™ä¸ä¸¤ç®—å¤ä»¤æ—¶ï¼Œæ— è®ºæ—¥æœŸæ˜¯å¤šå°‘ï¼Œæ—¶é—´éƒ½æ˜¯æ ‡å‡†çš„ã€‚
å¦‚æœä»¥å›½å®¶ï¼åŸå¸‚è¡¨ç¤ºï¼Œä¾‹å¦‚Americaï¼NewYorkï¼Œè™½ç„¶çº½çº¦ä¹Ÿåœ¨è¥¿äº”åŒºï¼Œä½†æ˜¯ï¼Œå› ä¸ºå¤ä»¤æ—¶çš„å­˜åœ¨ï¼Œåœ¨ä¸åŒçš„æ—¥æœŸï¼ŒGMTæ—¶é—´å’Œçº½çº¦æ—¶é—´å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚

åœ¨è®¡ç®—æœºä¸­ï¼Œé€šå¸¸ä½¿ç”¨Localeè¡¨ç¤ºä¸€ä¸ªå›½å®¶æˆ–åœ°åŒºçš„æ—¥æœŸã€æ—¶é—´ã€æ•°å­—ã€è´§å¸ç­‰æ ¼å¼ã€‚Localeç”±è¯­è¨€_å›½å®¶çš„å­—æ¯ç¼©å†™æ„æˆï¼Œä¾‹å¦‚ï¼Œzh_CNè¡¨ç¤ºä¸­æ–‡+ä¸­å›½ï¼Œen_USè¡¨ç¤ºè‹±æ–‡+ç¾å›½ã€‚è¯­è¨€ä½¿ç”¨å°å†™ï¼Œå›½å®¶ä½¿ç”¨å¤§å†™ã€‚
</code></pre>
<a id="more"></a>
<h1>Dateå’ŒCalendar</h1>
<p>Epoch Timeæ˜¯è®¡ç®—ä»1970å¹´1æœˆ1æ—¥é›¶ç‚¹ï¼ˆæ ¼æ—å¨æ²»æ—¶åŒºï¼GMT+00:00ï¼‰åˆ°ç°åœ¨æ‰€ç»å†çš„ç§’æ•°.<br>
Epoch Timeåˆç§°ä¸ºæ—¶é—´æˆ³ï¼Œåœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¼šæœ‰å‡ ç§å­˜å‚¨æ–¹å¼ï¼š</p>
<ul>
<li>ä»¥ç§’ä¸ºå•ä½çš„æ•´æ•°ï¼š1574208900ï¼Œç¼ºç‚¹æ˜¯ç²¾åº¦åªèƒ½åˆ°ç§’ï¼›</li>
<li>ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ•´æ•°ï¼š1574208900123ï¼Œæœ€å3ä½è¡¨ç¤ºæ¯«ç§’æ•°ï¼›</li>
<li>ä»¥ç§’ä¸ºå•ä½çš„æµ®ç‚¹æ•°ï¼š1574208900.123ï¼Œå°æ•°ç‚¹åé¢è¡¨ç¤ºé›¶ç‚¹å‡ ç§’ã€‚<br>
åœ¨Javaç¨‹åºä¸­ï¼Œæ—¶é—´æˆ³é€šå¸¸æ˜¯ç”¨longè¡¨ç¤ºçš„æ¯«ç§’æ•°:</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">long</span> t = <span class="number">1574208900123L</span>;</span><br></pre></td></tr></table></figure>
<p>è¦è·å–å½“å‰æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨System.currentTimeMillis()ï¼Œè¿™æ˜¯Javaç¨‹åºè·å–æ—¶é—´æˆ³æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<h3 id="æ ‡å‡†åº“API"><a class="header-anchor" href="#æ ‡å‡†åº“API">Â¶</a>æ ‡å‡†åº“API</h3>
<p>Javaæ ‡å‡†åº“æœ‰ä¸¤å¥—å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„APIï¼š</p>
<ul>
<li>ä¸€å¥—å®šä¹‰åœ¨java.utilè¿™ä¸ªåŒ…é‡Œé¢ï¼Œä¸»è¦åŒ…æ‹¬Dateã€Calendarå’ŒTimeZoneè¿™å‡ ä¸ªç±»ï¼›</li>
<li>ä¸€å¥—æ–°çš„APIæ˜¯åœ¨Java 8å¼•å…¥çš„ï¼Œå®šä¹‰åœ¨java.timeè¿™ä¸ªåŒ…é‡Œé¢ï¼Œä¸»è¦åŒ…æ‹¬LocalDateTimeã€ZonedDateTimeã€ZoneIdç­‰ã€‚</li>
</ul>
<h3 id="Date"><a class="header-anchor" href="#Date">Â¶</a>Date</h3>
<p>è§‚å¯ŸDateçš„æºç ï¼Œå¯ä»¥å‘ç°å®ƒå®é™…ä¸Šå­˜å‚¨äº†ä¸€ä¸ªlongç±»å‹çš„ä»¥æ¯«ç§’è¡¨ç¤ºçš„æ—¶é—´æˆ³ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span> <span class="keyword">implements</span> <span class="title">Serializable</span>, <span class="title">Cloneable</span>, <span class="title">Comparable</span>&lt;<span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">long</span> fastTime;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ—¶é—´:</span></span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        System.out.println(date.getYear() + <span class="number">1900</span>); <span class="comment">// å¿…é¡»åŠ ä¸Š1900</span></span><br><span class="line">        System.out.println(date.getMonth() + <span class="number">1</span>); <span class="comment">// 0~11ï¼Œå¿…é¡»åŠ ä¸Š1</span></span><br><span class="line">        System.out.println(date.getDate()); <span class="comment">// 1~31ï¼Œä¸èƒ½åŠ 1</span></span><br><span class="line">        <span class="comment">// è½¬æ¢ä¸ºString:</span></span><br><span class="line">        System.out.println(date.toString());</span><br><span class="line">        <span class="comment">// è½¬æ¢ä¸ºGMTæ—¶åŒº:</span></span><br><span class="line">        System.out.println(date.toGMTString());</span><br><span class="line">        <span class="comment">// è½¬æ¢ä¸ºæœ¬åœ°æ—¶åŒº:</span></span><br><span class="line">        System.out.println(date.toLocaleString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>getYear()è¦åŠ ä¸Š1900ï¼ŒgetMonth()è¦åŠ 1.<br>
å¯ä»¥ä½¿ç”¨SimpleDateFormatå¯¹ä¸€ä¸ªDateè¿›è¡Œè½¬æ¢ã€‚å®ƒç”¨é¢„å®šä¹‰çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ ¼å¼åŒ–ï¼š</p>
<ul>
<li>yyyyï¼šå¹´</li>
<li>MMï¼šæœˆ</li>
<li>dd: æ—¥</li>
<li>HH: å°æ—¶</li>
<li>mm: åˆ†é’Ÿ</li>
<li>ss: ç§’</li>
<li>E: å‘¨<br>
å­—æ¯è¶Šé•¿ï¼Œè¾“å‡ºè¶Šé•¿ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ—¶é—´:</span></span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        <span class="keyword">var</span> sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        System.out.println(sdf.format(date));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Dateå¯¹è±¡æœ‰å‡ ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šå®ƒä¸èƒ½è½¬æ¢æ—¶åŒºï¼Œé™¤äº†toGMTString()å¯ä»¥æŒ‰GMT+0:00è¾“å‡ºå¤–ï¼ŒDateæ€»æ˜¯ä»¥å½“å‰è®¡ç®—æœºç³»ç»Ÿçš„é»˜è®¤æ—¶åŒºä¸ºåŸºç¡€è¿›è¡Œè¾“å‡ºã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆéš¾å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡ŒåŠ å‡ï¼Œè®¡ç®—ä¸¤ä¸ªæ—¥æœŸç›¸å·®å¤šå°‘å¤©ï¼Œè®¡ç®—æŸä¸ªæœˆç¬¬ä¸€ä¸ªæ˜ŸæœŸä¸€çš„æ—¥æœŸç­‰ã€‚</p>
<h1>Calendar</h1>
<p>å®ƒå’ŒDateæ¯”ï¼Œä¸»è¦å¤šäº†ä¸€ä¸ªå¯ä»¥åšç®€å•çš„æ—¥æœŸå’Œæ—¶é—´è¿ç®—çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ—¶é—´:</span></span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="keyword">int</span> y = c.get(Calendar.YEAR);</span><br><span class="line">        <span class="keyword">int</span> m = <span class="number">1</span> + c.get(Calendar.MONTH);</span><br><span class="line">        <span class="keyword">int</span> d = c.get(Calendar.DAY_OF_MONTH);</span><br><span class="line">        <span class="keyword">int</span> w = c.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        <span class="keyword">int</span> hh = c.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">int</span> mm = c.get(Calendar.MINUTE);</span><br><span class="line">        <span class="keyword">int</span> ss = c.get(Calendar.SECOND);</span><br><span class="line">        <span class="keyword">int</span> ms = c.get(Calendar.MILLISECOND);</span><br><span class="line">        System.out.println(y + <span class="string">"-"</span> + m + <span class="string">"-"</span> + d + <span class="string">" "</span> + w + <span class="string">" "</span> + hh + <span class="string">":"</span> + mm + <span class="string">":"</span> + ss + <span class="string">"."</span> + ms);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°Calendarè·å–å¹´æœˆæ—¥è¿™äº›ä¿¡æ¯å˜æˆäº†get(int field)ï¼Œè¿”å›çš„å¹´ä»½ä¸å¿…è½¬æ¢ï¼Œè¿”å›çš„æœˆä»½ä»ç„¶è¦åŠ 1ï¼Œè¿”å›çš„æ˜ŸæœŸè¦ç‰¹åˆ«æ³¨æ„ï¼Œ1~7åˆ†åˆ«è¡¨ç¤ºå‘¨æ—¥ï¼Œå‘¨ä¸€ï¼Œâ€¦â€¦ï¼Œå‘¨å…­ã€‚<br>
Calendaråªæœ‰ä¸€ç§æ–¹å¼è·å–ï¼Œå³Calendar.getInstance()ï¼Œè€Œä¸”ä¸€è·å–åˆ°å°±æ˜¯å½“å‰æ—¶é—´ã€‚<br>
å¦‚æœæˆ‘ä»¬æƒ³ç»™å®ƒè®¾ç½®æˆç‰¹å®šçš„ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´ï¼Œå°±å¿…é¡»å…ˆæ¸…é™¤æ‰€æœ‰å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´:</span></span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="comment">// æ¸…é™¤æ‰€æœ‰:</span></span><br><span class="line">        c.clear();</span><br><span class="line">        <span class="comment">// è®¾ç½®2019å¹´:</span></span><br><span class="line">        c.set(Calendar.YEAR, <span class="number">2019</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®9æœˆ:æ³¨æ„8è¡¨ç¤º9æœˆ:</span></span><br><span class="line">        c.set(Calendar.MONTH, <span class="number">8</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®2æ—¥:</span></span><br><span class="line">        c.set(Calendar.DATE, <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®æ—¶é—´:</span></span><br><span class="line">        c.set(Calendar.HOUR_OF_DAY, <span class="number">21</span>);</span><br><span class="line">        c.set(Calendar.MINUTE, <span class="number">22</span>);</span><br><span class="line">        c.set(Calendar.SECOND, <span class="number">23</span>);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>).format(c.getTime()));</span><br><span class="line">        <span class="comment">// 2019-09-02 21:22:23</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨Calendar.getTime()å¯ä»¥å°†ä¸€ä¸ªCalendarå¯¹è±¡è½¬æ¢æˆDateå¯¹è±¡ï¼Œç„¶åå°±å¯ä»¥ç”¨SimpleDateFormatè¿›è¡Œæ ¼å¼åŒ–äº†ã€‚</p>
<h4 id="Timezone"><a class="header-anchor" href="#Timezone">Â¶</a>Timezone</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´:</span></span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="comment">// æ¸…é™¤æ‰€æœ‰:</span></span><br><span class="line">        c.clear();</span><br><span class="line">        <span class="comment">// è®¾ç½®ä¸ºåŒ—äº¬æ—¶åŒº:</span></span><br><span class="line">        c.setTimeZone(TimeZone.getTimeZone(<span class="string">"Asia/Shanghai"</span>));</span><br><span class="line">        <span class="comment">// è®¾ç½®å¹´æœˆæ—¥æ—¶åˆ†ç§’:</span></span><br><span class="line">        c.set(<span class="number">2019</span>, <span class="number">10</span> <span class="comment">/* 11æœˆ */</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºæ—¶é—´:</span></span><br><span class="line">        <span class="keyword">var</span> sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        sdf.setTimeZone(TimeZone.getTimeZone(<span class="string">"America/New_York"</span>));</span><br><span class="line">        System.out.println(sdf.format(c.getTime()));</span><br><span class="line">        <span class="comment">// 2019-11-19 19:15:00</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ—¥æœŸè¿ç®—"><a class="header-anchor" href="#æ—¥æœŸè¿ç®—">Â¶</a>æ—¥æœŸè¿ç®—</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´:</span></span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="comment">// æ¸…é™¤æ‰€æœ‰:</span></span><br><span class="line">        c.clear();</span><br><span class="line">        <span class="comment">// è®¾ç½®å¹´æœˆæ—¥æ—¶åˆ†ç§’:</span></span><br><span class="line">        c.set(<span class="number">2019</span>, <span class="number">10</span> <span class="comment">/* 11æœˆ */</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">15</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// åŠ 5å¤©å¹¶å‡å»2å°æ—¶:</span></span><br><span class="line">        c.add(Calendar.DAY_OF_MONTH, <span class="number">5</span>);</span><br><span class="line">        c.add(Calendar.HOUR_OF_DAY, -<span class="number">2</span>);</span><br><span class="line">        <span class="comment">// æ˜¾ç¤ºæ—¶é—´:</span></span><br><span class="line">        <span class="keyword">var</span> sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        Date d = c.getTime();</span><br><span class="line">        System.out.println(sdf.format(d));</span><br><span class="line">        <span class="comment">// 2019-11-25 6:15:00</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¦å·è¡¨</title>
    <url>/2020/03/13/%E7%AC%A6%E5%8F%B7%E8%A1%A8/</url>
    <content><![CDATA[<pre><code>ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰æ˜¯ä¸€ç§å­˜å‚¨é”®å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥æ”¯æŒå¿«é€ŸæŸ¥æ‰¾æ“ä½œã€‚

ç¬¦å·è¡¨åˆ†ä¸ºæœ‰åºå’Œæ— åºä¸¤ç§ï¼Œæœ‰åºç¬¦å·è¡¨ä¸»è¦æŒ‡æ”¯æŒ min()ã€max() ç­‰æ ¹æ®é”®çš„å¤§å°å…³ç³»æ¥å®ç°çš„æ“ä½œã€‚

æœ‰åºç¬¦å·è¡¨çš„é”®éœ€è¦å®ç° Comparable æ¥å£ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UnorderedST</span>&lt;<span class="title">Key</span>,<span class="title">Value</span>&gt;</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Value <span class="title">get</span><span class="params">(Key key)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderedST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Value <span class="title">get</span><span class="params">(Key key)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Key <span class="title">min</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Key <span class="title">max</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Key&gt; <span class="title">keys</span><span class="params">(Key l, Key h)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨"><a class="header-anchor" href="#1-é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨">Â¶</a>1 é“¾è¡¨å®ç°æ— åºç¬¦å·è¡¨</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListUnorderedST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt; <span class="keyword">implements</span> <span class="title">UnorderedST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Key key;</span><br><span class="line">        Value value;</span><br><span class="line">        Node next;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value value, Node next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        Node cur = first;</span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span> </span>&#123;</span><br><span class="line">        Node cur = first;</span><br><span class="line">        <span class="comment">// å¦‚æœåœ¨é“¾è¡¨ä¸­æ‰¾åˆ°èŠ‚ç‚¹çš„é”®ç­‰äº key å°±æ›´æ–°è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º value</span></span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.key.equals(key)) &#123;</span><br><span class="line">                cur.value = value;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦åˆ™ä½¿ç”¨å¤´æ’æ³•æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹</span></span><br><span class="line">        first = <span class="keyword">new</span> Node(key, value, first);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (first == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (first.key.equals(key))</span><br><span class="line">            first = first.next;</span><br><span class="line">        Node pre = first, cur = first.next;</span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.key.equals(key)) &#123;</span><br><span class="line">                pre.next = cur.next;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pre = pre.next;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        Node cur = first;</span><br><span class="line">        <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cur.key.equals(key))</span><br><span class="line">                <span class="keyword">return</span> cur.value;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨"><a class="header-anchor" href="#äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨">Â¶</a>äºŒåˆ†æŸ¥æ‰¾å®ç°æœ‰åºç¬¦å·è¡¨</h2>
<p>ä½¿ç”¨ä¸€å¯¹å¹³è¡Œæ•°ç»„ï¼Œä¸€ä¸ªå­˜å‚¨é”®ä¸€ä¸ªå­˜å‚¨å€¼ã€‚</p>
<p>äºŒåˆ†æŸ¥æ‰¾çš„ rank() æ–¹æ³•è‡³å…³é‡è¦ï¼Œå½“é”®åœ¨è¡¨ä¸­æ—¶ï¼Œå®ƒèƒ½å¤ŸçŸ¥é“è¯¥é”®çš„ä½ç½®ï¼›å½“é”®ä¸åœ¨è¡¨ä¸­æ—¶ï¼Œå®ƒä¹Ÿèƒ½çŸ¥é“åœ¨ä½•å¤„æ’å…¥æ–°é”®ã€‚</p>
<p>äºŒåˆ†æŸ¥æ‰¾æœ€å¤šéœ€è¦ logN+1 æ¬¡æ¯”è¾ƒï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å®ç°çš„ç¬¦å·è¡¨çš„æŸ¥æ‰¾æ“ä½œæ‰€éœ€è¦çš„æ—¶é—´æœ€å¤šæ˜¯å¯¹æ•°çº§åˆ«çš„ã€‚ä½†æ˜¯æ’å…¥æ“ä½œéœ€è¦ç§»åŠ¨æ•°ç»„å…ƒç´ ï¼Œæ˜¯çº¿æ€§çº§åˆ«çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearchOrderedST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt; <span class="keyword">implements</span> <span class="title">OrderedST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Key[] keys;</span><br><span class="line">    <span class="keyword">private</span> Value[] values;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinarySearchOrderedST</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        keys = (Key[]) <span class="keyword">new</span> Comparable[capacity];</span><br><span class="line">        values = (Value[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = <span class="number">0</span>, h = N - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt;= h) &#123;</span><br><span class="line">            <span class="keyword">int</span> m = l + (h - l) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> cmp = key.compareTo(keys[m]);</span><br><span class="line">            <span class="keyword">if</span> (cmp == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> m;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                h = m - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                l = m + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Key&gt; <span class="title">keys</span><span class="params">(Key l, Key h)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = rank(l);</span><br><span class="line">        List&lt;Key&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (keys[index].compareTo(h) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            list.add(keys[index]);</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = rank(key);</span><br><span class="line">        <span class="comment">// å¦‚æœæ‰¾åˆ°å·²ç»å­˜åœ¨çš„èŠ‚ç‚¹é”®ä¸º keyï¼Œå°±æ›´æ–°è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ä¸º value</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; N &amp;&amp; keys[index].compareTo(key) == <span class="number">0</span>) &#123;</span><br><span class="line">            values[index] = value;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦åˆ™åœ¨æ•°ç»„ä¸­æ’å…¥æ–°çš„èŠ‚ç‚¹ï¼Œéœ€è¦å…ˆå°†æ’å…¥ä½ç½®ä¹‹åçš„å…ƒç´ éƒ½å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = N; j &gt; index; j--) &#123;</span><br><span class="line">            keys[j] = keys[j - <span class="number">1</span>];</span><br><span class="line">            values[j] = values[j - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        keys[index] = key;</span><br><span class="line">        values[index] = value;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = rank(key);</span><br><span class="line">        <span class="keyword">if</span> (index &lt; N &amp;&amp; keys[index].compareTo(key) == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> values[index];</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">max</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> keys[N - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äºŒå‰æŸ¥æ‰¾æ ‘"><a class="header-anchor" href="#äºŒå‰æŸ¥æ‰¾æ ‘">Â¶</a>äºŒå‰æŸ¥æ‰¾æ ‘</h2>
<p>äºŒå‰æŸ¥æ‰¾æ ‘ ï¼ˆBSTï¼‰æ˜¯ä¸€é¢—äºŒå‰æ ‘ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå…¶å·¦å­æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼è€Œå°äºç­‰äºå³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ã€‚<br>
BST æœ‰ä¸€ä¸ªé‡è¦æ€§è´¨ï¼Œå°±æ˜¯å®ƒçš„ä¸­åºéå†ç»“æœé€’å¢æ’åºã€‚</p>
<h3 id="æ•°æ®ç»“æ„"><a class="header-anchor" href="#æ•°æ®ç»“æ„">Â¶</a>æ•°æ®ç»“æ„</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt; <span class="keyword">implements</span> <span class="title">OrderedST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Node root;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Key key;</span><br><span class="line">        Value val;</span><br><span class="line">        Node left;</span><br><span class="line">        Node right;</span><br><span class="line">        <span class="comment">// ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹æ€»æ•°</span></span><br><span class="line">        <span class="keyword">int</span> N;</span><br><span class="line">        <span class="comment">// çº¢é»‘æ ‘ä¸­ä½¿ç”¨</span></span><br><span class="line">        <span class="keyword">boolean</span> color;</span><br><span class="line"></span><br><span class="line">        Node(Key key, Value val, <span class="keyword">int</span> N) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.val = val;</span><br><span class="line">            <span class="keyword">this</span>.N = N;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">(Node x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> x.N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">recalculateSize</span><span class="params">(Node x)</span> </span>&#123;</span><br><span class="line">        x.N = size(x.left) + size(x.right) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-get"><a class="header-anchor" href="#1-get">Â¶</a>1 get()</h3>
<ul>
<li>å¦‚æœæ ‘æ˜¯ç©ºçš„ï¼Œåˆ™æŸ¥æ‰¾æœªå‘½ä¸­ï¼›</li>
<li>å¦‚æœè¢«æŸ¥æ‰¾çš„é”®å’Œæ ¹èŠ‚ç‚¹çš„é”®ç›¸ç­‰ï¼ŒæŸ¥æ‰¾å‘½ä¸­ï¼›</li>
<li>å¦åˆ™é€’å½’åœ°åœ¨å­æ ‘ä¸­æŸ¥æ‰¾ï¼šå¦‚æœè¢«æŸ¥æ‰¾çš„é”®è¾ƒå°å°±åœ¨å·¦å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œè¾ƒå¤§å°±åœ¨å³å­æ ‘ä¸­æŸ¥æ‰¾ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> get(root, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Value <span class="title">get</span><span class="params">(Node x, Key key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> x.val;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> get(x.left, key);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> get(x.right, key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-put"><a class="header-anchor" href="#2-put">Â¶</a>2 put()</h3>
<p>å½“æ’å…¥çš„é”®ä¸å­˜åœ¨äºæ ‘ä¸­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ›´æ–°ä¸Šå±‚èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œä½¿å¾—è¯¥èŠ‚ç‚¹æ­£ç¡®åœ°é“¾æ¥åˆ°æ ‘ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value value)</span> </span>&#123;</span><br><span class="line">    root = put(root, key, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, Key key, Value value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Node(key, value, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp == <span class="number">0</span>)</span><br><span class="line">        x.val = value;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        x.left = put(x.left, key, value);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        x.right = put(x.right, key, value);</span><br><span class="line">    recalculateSize(x);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-åˆ†æ"><a class="header-anchor" href="#3-åˆ†æ">Â¶</a>3 åˆ†æ</h3>
<p>äºŒå‰æŸ¥æ‰¾æ ‘çš„ç®—æ³•è¿è¡Œæ—¶é—´å–å†³äºæ ‘çš„å½¢çŠ¶ï¼Œè€Œæ ‘çš„å½¢çŠ¶åˆå–å†³äºé”®è¢«æ’å…¥çš„å…ˆåé¡ºåºã€‚<br>
æœ€å¥½çš„æƒ…å†µä¸‹æ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„ï¼Œæ¯æ¡ç©ºé“¾æ¥å’Œæ ¹èŠ‚ç‚¹çš„è·ç¦»éƒ½ä¸º logNã€‚<br>
åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ ‘çš„é«˜åº¦ä¸º Nã€‚</p>
<h3 id="4-floor"><a class="header-anchor" href="#4-floor">Â¶</a>4 floor()</h3>
<p>floor(key)ï¼šå°äºç­‰äºé”®çš„æœ€å¤§é”®</p>
<ul>
<li>å¦‚æœé”®å°äºæ ¹èŠ‚ç‚¹çš„é”®ï¼Œé‚£ä¹ˆ floor(key) ä¸€å®šåœ¨å·¦å­æ ‘ä¸­ï¼›</li>
<li>å¦‚æœé”®å¤§äºæ ¹èŠ‚ç‚¹çš„é”®ï¼Œéœ€è¦å…ˆåˆ¤æ–­å³å­æ ‘ä¸­æ˜¯å¦å­˜åœ¨ floor(key)ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ï¼Œå¦åˆ™æ ¹èŠ‚ç‚¹å°±æ˜¯ floor(key)ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">floor</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">    Node x = floor(root, key);</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> x.key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">floor</span><span class="params">(Node x, Key key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> floor(x.left, key);</span><br><span class="line">    Node t = floor(x.right, key);</span><br><span class="line">    <span class="keyword">return</span> t != <span class="keyword">null</span> ? t : x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-rank"><a class="header-anchor" href="#5-rank">Â¶</a>5 rank()</h3>
<p>rank(key) è¿”å› key çš„æ’åã€‚<br>
å¦‚æœé”®å’Œæ ¹èŠ‚ç‚¹çš„é”®ç›¸ç­‰ï¼Œè¿”å›å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°ï¼›<br>
å¦‚æœå°äºï¼Œé€’å½’è®¡ç®—åœ¨å·¦å­æ ‘ä¸­çš„æ’åï¼›<br>
å¦‚æœå¤§äºï¼Œé€’å½’è®¡ç®—åœ¨å³å­æ ‘ä¸­çš„æ’åï¼ŒåŠ ä¸Šå·¦å­æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œå†åŠ ä¸Š 1ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rank(key, root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key, Node x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> size(x.left);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> rank(key, x.left);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + size(x.left) + rank(key, x.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-min"><a class="header-anchor" href="#6-min">Â¶</a>6 min()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">min</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> min(root).key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">min</span><span class="params">(Node x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (x.left == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> min(x.left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-deleteMin"><a class="header-anchor" href="#7-deleteMin">Â¶</a>7 deleteMin()</h3>
<p>ä»¤æŒ‡å‘æœ€å°èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘æœ€å°èŠ‚ç‚¹çš„å³å­æ ‘ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    root = deleteMin(root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Node <span class="title">deleteMin</span><span class="params">(Node x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x.left == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> x.right;</span><br><span class="line">    x.left = deleteMin(x.left);</span><br><span class="line">    recalculateSize(x);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-delete"><a class="header-anchor" href="#8-delete">Â¶</a>8 delete()</h3>
<p>å¦‚æœå¾…åˆ é™¤çš„èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­æ ‘ï¼Œ é‚£ä¹ˆåªéœ€è¦è®©æŒ‡å‘å¾…åˆ é™¤èŠ‚ç‚¹çš„é“¾æ¥æŒ‡å‘å”¯ä¸€çš„å­æ ‘å³å¯ï¼›<br>
å¦åˆ™ï¼Œè®©å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹æ›¿æ¢è¯¥èŠ‚ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">    root = delete(root, key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">delete</span><span class="params">(Node x, Key key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">        x.left = delete(x.left, key);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">        x.right = delete(x.right, key);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x.right == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> x.left;</span><br><span class="line">        <span class="keyword">if</span> (x.left == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> x.right;</span><br><span class="line">        Node t = x;</span><br><span class="line">        x = min(t.right);</span><br><span class="line">        x.right = deleteMin(t.right);</span><br><span class="line">        x.left = t.left;</span><br><span class="line">    &#125;</span><br><span class="line">    recalculateSize(x);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-keys"><a class="header-anchor" href="#9-keys">Â¶</a>9 keys()</h3>
<p>åˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸­åºéå†çš„ç»“æœä¸ºé€’å¢çš„ç‰¹ç‚¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Key&gt; <span class="title">keys</span><span class="params">(Key l, Key h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> keys(root, l, h);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> List&lt;Key&gt; <span class="title">keys</span><span class="params">(Node x, Key l, Key h)</span> </span>&#123;</span><br><span class="line">    List&lt;Key&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    <span class="keyword">int</span> cmpL = l.compareTo(x.key);</span><br><span class="line">    <span class="keyword">int</span> cmpH = h.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmpL &lt; <span class="number">0</span>)</span><br><span class="line">        list.addAll(keys(x.left, l, h));</span><br><span class="line">    <span class="keyword">if</span> (cmpL &lt;= <span class="number">0</span> &amp;&amp; cmpH &gt;= <span class="number">0</span>)</span><br><span class="line">        list.add(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmpH &gt; <span class="number">0</span>)</span><br><span class="line">        list.addAll(keys(x.right, l, h));</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-åˆ†æ"><a class="header-anchor" href="#10-åˆ†æ">Â¶</a>10 åˆ†æ</h3>
<p>äºŒå‰æŸ¥æ‰¾æ ‘æ‰€æœ‰æ“ä½œåœ¨æœ€åçš„æƒ…å†µä¸‹æ‰€éœ€è¦çš„æ—¶é—´éƒ½å’Œæ ‘çš„é«˜åº¦æˆæ­£æ¯”ã€‚</p>
<h2 id="2-3æŸ¥æ‰¾æ ‘"><a class="header-anchor" href="#2-3æŸ¥æ‰¾æ ‘">Â¶</a>2-3æŸ¥æ‰¾æ ‘</h2>
<p>ä¸€æ£µ2-3æŸ¥æ‰¾æ ‘æˆ–ä¸ºä¸€é¢—ç©ºæ ‘ï¼Œæˆ–ç”±ä»¥ä¸‹èŠ‚ç‚¹ç»„æˆï¼š<br>
2-èŠ‚ç‚¹ï¼šå«æœ‰ä¸€ä¸ªé”®å’Œä¸¤æ¡é“¾æ¥ï¼Œå·¦é“¾æ¥æŒ‡å‘çš„2-3æ ‘ä¸­çš„é”®éƒ½å°äºè¯¥èŠ‚ç‚¹ï¼Œå³é“¾æ¥æŒ‡å‘çš„2-3æ ‘ä¸­çš„é”®éƒ½å¤§äºè¯¥èŠ‚ç‚¹ã€‚<br>
3-èŠ‚ç‚¹ï¼šå«æœ‰ä¸¤ä¸ªé”®å’Œä¸‰æ¡é“¾æ¥ï¼Œå·¦é“¾æ¥æŒ‡å‘çš„2-3æ ‘ä¸­çš„é”®éƒ½å°äºè¯¥èŠ‚ç‚¹ï¼Œä¸­é“¾æ¥æŒ‡å‘çš„2-3æ ‘ä¸­çš„é”®éƒ½ä½äºè¯¥èŠ‚ç‚¹çš„ä¸¤ä¸ªé”®ä¹‹é—´ï¼Œå³é“¾æ¥æŒ‡å‘çš„2-3æ ‘ä¸­çš„é”®éƒ½å¤§äºè¯¥èŠ‚ç‚¹ã€‚</p>
<h3 id="1-æ’å…¥æ“ä½œ"><a class="header-anchor" href="#1-æ’å…¥æ“ä½œ">Â¶</a>1 æ’å…¥æ“ä½œ</h3>
<p>æ’å…¥æ“ä½œå’Œ BST çš„æ’å…¥æ“ä½œæœ‰å¾ˆå¤§åŒºåˆ«ï¼ŒBST çš„æ’å…¥æ“ä½œæ˜¯å…ˆè¿›è¡Œä¸€æ¬¡æœªå‘½ä¸­çš„æŸ¥æ‰¾ï¼Œç„¶åå†å°†èŠ‚ç‚¹æ’å…¥åˆ°å¯¹åº”çš„ç©ºé“¾æ¥ä¸Šã€‚ä½†æ˜¯ 2-3 æŸ¥æ‰¾æ ‘å¦‚æœä¹Ÿè¿™ä¹ˆåšçš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šç ´åäº†å¹³è¡¡æ€§ã€‚å®ƒæ˜¯å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°å¶å­èŠ‚ç‚¹ä¸Šã€‚</p>
<p>æ ¹æ®å¶å­èŠ‚ç‚¹çš„ç±»å‹ä¸åŒï¼Œæœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>å¦‚æœæ’å…¥åˆ° 2- èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆç›´æ¥å°†æ–°èŠ‚ç‚¹å’ŒåŸæ¥çš„èŠ‚ç‚¹ç»„æˆ 3- èŠ‚ç‚¹å³å¯ã€‚</li>
<li>å¦‚æœæ˜¯æ’å…¥åˆ° 3- èŠ‚ç‚¹ä¸Šï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶ 4- èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦å°† 4- èŠ‚ç‚¹åˆ†è£‚æˆ 3 ä¸ª 2- èŠ‚ç‚¹ï¼Œå¹¶å°†ä¸­é—´çš„ 2- èŠ‚ç‚¹ç§»åˆ°ä¸Šå±‚èŠ‚ç‚¹ä¸­ã€‚å¦‚æœä¸Šç§»æ“ä½œç»§ç»­äº§ç”Ÿä¸´æ—¶ 4- èŠ‚ç‚¹åˆ™ä¸€ç›´è¿›è¡Œåˆ†è£‚ä¸Šç§»ï¼Œç›´åˆ°ä¸å­˜åœ¨ä¸´æ—¶ 4- èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 id="2-æ€§è´¨"><a class="header-anchor" href="#2-æ€§è´¨">Â¶</a>2 æ€§è´¨</h3>
<p>2-3 æŸ¥æ‰¾æ ‘æ’å…¥æ“ä½œçš„å˜æ¢éƒ½æ˜¯å±€éƒ¨çš„ï¼Œé™¤äº†ç›¸å…³çš„èŠ‚ç‚¹å’Œé“¾æ¥ä¹‹å¤–ä¸å¿…ä¿®æ”¹æˆ–è€…æ£€æŸ¥æ ‘çš„å…¶å®ƒéƒ¨åˆ†ï¼Œè€Œè¿™äº›å±€éƒ¨å˜æ¢ä¸ä¼šå½±å“æ ‘çš„å…¨å±€æœ‰åºæ€§å’Œå¹³è¡¡æ€§ã€‚</p>
<p>2-3 æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œå¤æ‚åº¦å’Œæ’å…¥é¡ºåºæ— å…³ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œè®¿é—®çš„èŠ‚ç‚¹å¿…ç„¶ä¸è¶…è¿‡ logN ä¸ªï¼Œå«æœ‰ 10 äº¿ä¸ªèŠ‚ç‚¹çš„ 2-3 æŸ¥æ‰¾æ ‘æœ€å¤šåªéœ€è¦è®¿é—® 30 ä¸ªèŠ‚ç‚¹å°±èƒ½è¿›è¡Œä»»æ„çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œã€‚</p>
<h1>çº¢é»‘æ ‘</h1>
<p>AVL æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œé¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤ï¼Œä¼šå¼•èµ·é¢‘ç¹çš„rebalanceï¼Œå¯¼è‡´æ•ˆç‡ä¸‹é™ï¼›çº¢é»‘æ ‘ä¸æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œç®—æ˜¯ä¸€ç§æŠ˜ä¸­ï¼Œæ’å…¥æœ€å¤šä¸¤æ¬¡æ—‹è½¬ï¼Œåˆ é™¤æœ€å¤šä¸‰æ¬¡æ—‹è½¬ã€‚<br>
æ‰€ä»¥çº¢é»‘æ ‘åœ¨æŸ¥æ‰¾ï¼Œæ’å…¥åˆ é™¤çš„æ€§èƒ½éƒ½æ˜¯O(logn)ï¼Œä¸”æ€§èƒ½ç¨³å®šï¼Œæ‰€ä»¥å¾ˆå¤šç»“æ„åŒ…æ‹¬mapåº•å±‚å®ç°éƒ½æ˜¯ä½¿ç”¨çš„çº¢é»‘æ ‘ã€‚</p>
<h3 id="æ€§è´¨"><a class="header-anchor" href="#æ€§è´¨">Â¶</a>æ€§è´¨</h3>
<ol>
<li>æ ¹ç»“ç‚¹å¿…ä¸ºé»‘è‰²</li>
<li>ç›¸è¿çš„ä¸èƒ½åŒä¸ºçº¢è‰²</li>
<li>æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…ä¸ºé»‘è‰²ï¼Œå¶å­èŠ‚ç‚¹å¿…ä¸ºé»‘è‰²ï¼ˆNullï¼‰ã€‚</li>
<li>ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å‘ä¸‹éå†åˆ°å…¶å­å­™çš„å¶å­èŠ‚ç‚¹ï¼Œæ‰€ç»è¿‡çš„é»‘èŠ‚ç‚¹ä¸ªæ•°å¿…é¡»ç›¸ç­‰</li>
</ol>
<h3 id="å˜æ¢æ“ä½œ"><a class="header-anchor" href="#å˜æ¢æ“ä½œ">Â¶</a>å˜æ¢æ“ä½œ</h3>
<ol>
<li>å˜æ¢é¢œè‰²</li>
<li>å·¦æ—‹ï¼šå³å­å˜çˆ¶ï¼Œå³å­èŠ‚ç‚¹çš„å·¦å­æ ‘å˜çˆ¶çš„å³å­æ ‘ã€‚</li>
<li>å³æ—‹ï¼šå·¦å­å˜çˆ¶ï¼Œå·¦å­èŠ‚ç‚¹çš„å³å­æ ‘å˜çˆ¶çš„å·¦å­æ ‘ã€‚</li>
</ol>
<h3 id="å˜æ¢è§„åˆ™"><a class="header-anchor" href="#å˜æ¢è§„åˆ™">Â¶</a>å˜æ¢è§„åˆ™</h3>
<p>æ‰€æœ‰æ’å…¥çš„ç‚¹é»˜è®¤çº¢è‰²ã€‚</p>
<ol>
<li>æ’å…¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å’Œå”å”èŠ‚ç‚¹ä¸ºçº¢è‰²ï¼š<br>
å°†çˆ¶å”å˜ä¸ºé»‘è‰²ï¼Œå°†çˆ·çˆ·èŠ‚ç‚¹è®¾ä¸ºçº¢è‰²ã€‚</li>
<li>æ’å…¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œå”å”èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼š
<ol>
<li>å½“å‰èŠ‚ç‚¹ä¸ºå³å­æ ‘ï¼š<br>
åˆ™å·¦æ—‹ï¼šä»¥çˆ¶èŠ‚ç‚¹</li>
<li>å½“å‰èŠ‚ç‚¹ä¸ºå·¦å­æ ‘ï¼š<br>
åˆ™å³æ—‹ï¼šçˆ¶å˜é»‘ï¼Œçˆ·çˆ·å˜çº¢ï¼Œä»¥çˆ·çˆ·èŠ‚ç‚¹å³æ—‹ã€‚</li>
</ol>
</li>
</ol>
<h1>æ•£åˆ—è¡¨ï¼Œå“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰</h1>
<p>è®¿é—®å’Œæ’å…¥å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®ç°ã€‚<br>
ç”±äºæ— æ³•é€šè¿‡æ•£åˆ—å€¼çŸ¥é“é”®çš„å¤§å°å…³ç³»ï¼Œå› æ­¤æ•£åˆ—è¡¨æ— æ³•å®ç°æœ‰åºæ€§æ“ä½œã€‚</p>
<h3 id="1-å“ˆå¸Œå‡½æ•°"><a class="header-anchor" href="#1-å“ˆå¸Œå‡½æ•°">Â¶</a>1 å“ˆå¸Œå‡½æ•°</h3>
<p>å¯¹äºä¸€ä¸ªå¤§å°ä¸º M çš„æ•£åˆ—è¡¨ï¼Œæ•£åˆ—å‡½æ•°èƒ½å¤ŸæŠŠä»»æ„é”®è½¬æ¢ä¸º [0, M-1] å†…çš„æ­£æ•´æ•°ï¼Œè¯¥æ­£æ•´æ•°å³ä¸º hash å€¼ã€‚</p>
<p>æ•£åˆ—è¡¨å­˜åœ¨å†²çªï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®å¯èƒ½æœ‰ç›¸åŒçš„ hash å€¼ã€‚</p>
<p>æ•£åˆ—å‡½æ•°åº”è¯¥æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<p>ä¸€è‡´æ€§ï¼šç›¸ç­‰çš„é”®åº”å½“æœ‰ç›¸ç­‰çš„ hash å€¼ï¼Œä¸¤ä¸ªé”®ç›¸ç­‰è¡¨ç¤ºè°ƒç”¨ equals() è¿”å›çš„å€¼ç›¸ç­‰ã€‚<br>
é«˜æ•ˆæ€§ï¼šè®¡ç®—åº”å½“ç®€ä¾¿ï¼Œæœ‰å¿…è¦çš„è¯å¯ä»¥æŠŠ hash å€¼ç¼“å­˜èµ·æ¥ï¼Œåœ¨è°ƒç”¨ hash å‡½æ•°æ—¶ç›´æ¥è¿”å›ã€‚<br>
å‡åŒ€æ€§ï¼šæ‰€æœ‰é”®çš„ hash å€¼åº”å½“å‡åŒ€åœ°åˆ†å¸ƒåˆ° [0, M-1] ä¹‹é—´ï¼Œå¦‚æœä¸èƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œæœ‰å¯èƒ½äº§ç”Ÿå¾ˆå¤šå†²çªï¼Œä»è€Œå¯¼è‡´æ•£åˆ—è¡¨çš„æ€§èƒ½ä¸‹é™ã€‚<br>
é™¤ç•™ä½™æ•°æ³•å¯ä»¥å°†æ•´æ•°æ•£åˆ—åˆ° [0, M-1] ä¹‹é—´ï¼Œä¾‹å¦‚ä¸€ä¸ªæ­£æ•´æ•° kï¼Œè®¡ç®— k%M æ—¢å¯å¾—åˆ°ä¸€ä¸ª [0, M-1] ä¹‹é—´çš„ hash å€¼ã€‚æ³¨æ„ M æœ€å¥½æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨é”®åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä¾‹å¦‚ M ä¸º 10kï¼Œé‚£ä¹ˆåªèƒ½åˆ©ç”¨é”®çš„å k ä½ã€‚</p>
<p>å¯¹äºå…¶å®ƒæ•°ï¼Œå¯ä»¥å°†å…¶è½¬æ¢æˆæ•´æ•°çš„å½¢å¼ï¼Œç„¶ååˆ©ç”¨é™¤ç•™ä½™æ•°æ³•ã€‚ä¾‹å¦‚å¯¹äºæµ®ç‚¹æ•°ï¼Œå¯ä»¥å°†å…¶çš„äºŒè¿›åˆ¶å½¢å¼è½¬æ¢æˆæ•´æ•°ã€‚</p>
<p>å¯¹äºå¤šéƒ¨åˆ†ç»„åˆçš„ç±»å‹ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½éœ€è¦è®¡ç®— hash å€¼ï¼Œè¿™äº› hash å€¼éƒ½å…·æœ‰åŒç­‰é‡è¦çš„åœ°ä½ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œå¯ä»¥å°†è¯¥ç±»å‹çœ‹æˆ R è¿›åˆ¶çš„æ•´æ•°ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å…·æœ‰ä¸åŒçš„æƒå€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²çš„æ•£åˆ—å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)</span><br><span class="line">    hash = (R * hash + s.charAt(i)) % M;</span><br></pre></td></tr></table></figure>
<p>å†æ¯”å¦‚ï¼Œæ‹¥æœ‰å¤šä¸ªæˆå‘˜çš„è‡ªå®šä¹‰ç±»çš„å“ˆå¸Œå‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = (((day * R + month) % M) * R + year) % M;</span><br></pre></td></tr></table></figure>
<p>R é€šå¸¸å– 31ã€‚</p>
<h5 id="Javaå†…"><a class="header-anchor" href="#Javaå†…">Â¶</a>Javaå†…</h5>
<p>Java ä¸­çš„ hashCode() å®ç°äº†å“ˆå¸Œå‡½æ•°ï¼Œä½†æ˜¯é»˜è®¤ä½¿ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€å€¼ã€‚åœ¨ä½¿ç”¨ hashCode() æ—¶ï¼Œåº”å½“ç»“åˆé™¤ç•™ä½™æ•°æ³•æ¥ä½¿ç”¨ã€‚å› ä¸ºå†…å­˜åœ°å€æ˜¯ 32 ä½æ•´æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦ 31 ä½çš„éè´Ÿæ•´æ•°ï¼Œå› æ­¤åº”å½“å±è”½ç¬¦å·ä½ä¹‹åå†ä½¿ç”¨é™¤ç•™ä½™æ•°æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = (x.hashCode() &amp; <span class="number">0x7fffffff</span>) % M;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ Java çš„ HashMap ç­‰è‡ªå¸¦çš„å“ˆå¸Œè¡¨å®ç°æ—¶ï¼Œåªéœ€è¦å»å®ç° Key ç±»å‹çš„ hashCode() å‡½æ•°å³å¯ã€‚Java è§„å®š hashCode() èƒ½å¤Ÿå°†é”®å‡åŒ€åˆ†å¸ƒäºæ‰€æœ‰çš„ 32 ä½æ•´æ•°ï¼ŒJava ä¸­çš„ Stringã€Integer ç­‰å¯¹è±¡çš„ hashCode() éƒ½èƒ½å®ç°è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹å±•ç¤ºäº†è‡ªå®šä¹‰ç±»å‹å¦‚ä½•å®ç° hashCode()ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String who;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Date when;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Transaction</span><span class="params">(String who, Date when, <span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.who = who;</span><br><span class="line">        <span class="keyword">this</span>.when = when;</span><br><span class="line">        <span class="keyword">this</span>.amount = amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> hash = <span class="number">17</span>;</span><br><span class="line">        <span class="keyword">int</span> R = <span class="number">31</span>;</span><br><span class="line">        hash = R * hash + who.hashCode();</span><br><span class="line">        hash = R * hash + when.hashCode();</span><br><span class="line">        hash = R * hash + ((Double) amount).hashCode();</span><br><span class="line">        <span class="keyword">return</span> hash;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-æ‹‰é“¾æ³•"><a class="header-anchor" href="#2-æ‹‰é“¾æ³•">Â¶</a>2 æ‹‰é“¾æ³•</h3>
<p>æ‹‰é“¾æ³•ä½¿ç”¨é“¾è¡¨æ¥å­˜å‚¨ hash å€¼ç›¸åŒçš„é”®ï¼Œä»è€Œè§£å†³å†²çªã€‚</p>
<p>æŸ¥æ‰¾éœ€è¦åˆ†ä¸¤æ­¥ï¼Œé¦–å…ˆæŸ¥æ‰¾ Key æ‰€åœ¨çš„é“¾è¡¨ï¼Œç„¶ååœ¨é“¾è¡¨ä¸­é¡ºåºæŸ¥æ‰¾ã€‚</p>
<p>å¯¹äº N ä¸ªé”®ï¼ŒM æ¡é“¾è¡¨ (N&gt;M)ï¼Œå¦‚æœå“ˆå¸Œå‡½æ•°èƒ½å¤Ÿæ»¡è¶³å‡åŒ€æ€§çš„æ¡ä»¶ï¼Œæ¯æ¡é“¾è¡¨çš„å¤§å°è¶‹å‘äº N/Mï¼Œå› æ­¤æœªå‘½ä¸­çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œæ‰€éœ€è¦çš„æ¯”è¾ƒæ¬¡æ•°ä¸º ~N/Mã€‚</p>
<h3 id="3-çº¿æ€§æ¢æµ‹æ³•"><a class="header-anchor" href="#3-çº¿æ€§æ¢æµ‹æ³•">Â¶</a>3 çº¿æ€§æ¢æµ‹æ³•</h3>
<p>çº¿æ€§æ¢æµ‹æ³•ä½¿ç”¨ç©ºä½æ¥è§£å†³å†²çªï¼Œå½“å†²çªå‘ç”Ÿæ—¶ï¼Œå‘å‰æ¢æµ‹ä¸€ä¸ªç©ºä½æ¥å­˜å‚¨å†²çªçš„é”®ã€‚</p>
<p>ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•ï¼Œæ•°ç»„çš„å¤§å° M åº”å½“å¤§äºé”®çš„ä¸ªæ•° Nï¼ˆM&gt;N)ã€‚</p>
<h1>å°ç»“</h1>
<ol>
<li>Symbol tableç®—æ³•æ¯”è¾ƒï¼š<br>
ç®—æ³•|æ’å…¥|æŸ¥æ‰¾|æ˜¯å¦æœ‰åº<br>
|-:|:-:|:-:|:-|<br>
é“¾è¡¨å®ç°çš„æ— åºç¬¦å·è¡¨|N|N|yes<br>
äºŒåˆ†æŸ¥æ‰¾å®ç°çš„æœ‰åºç¬¦å·è¡¨|N|logN	yes<br>
äºŒå‰æŸ¥æ‰¾æ ‘|logN|logN|yes<br>
2-3 æŸ¥æ‰¾æ ‘|logN|logN|yes<br>
æ‹‰é“¾æ³•å®ç°çš„æ•£åˆ—è¡¨|N/M|N/M|no<br>
çº¿æ€§æ¢æµ‹æ³•å®ç°çš„æ•£åˆ—è¡¨|1|1|no</li>
</ol>
<p>åº”å½“ä¼˜å…ˆè€ƒè™‘æ•£åˆ—è¡¨ï¼Œå½“éœ€è¦æœ‰åºæ€§æ“ä½œæ—¶ä½¿ç”¨çº¢é»‘æ ‘ã€‚<br>
2. Javaçš„å®ç°<br>
java.util.TreeMapï¼šçº¢é»‘æ ‘<br>
java.util.HashMapï¼šæ‹‰é“¾æ³•çš„æ•£åˆ—è¡¨<br>
3. ç¨€ç–å‘é‡çš„ä¹˜æ³•<br>
å½“å‘é‡ä¸ºç¨€ç–å‘é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç¬¦å·è¡¨æ¥å­˜å‚¨å‘é‡ä¸­çš„é 0 ç´¢å¼•å’Œå€¼ï¼Œä½¿å¾—ä¹˜æ³•è¿ç®—åªéœ€è¦å¯¹é‚£äº›é 0 å…ƒç´ è¿›è¡Œå³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SparseVector</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Integer, Double&gt; hashMap;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SparseVector</span><span class="params">(<span class="keyword">double</span>[] vector)</span> </span>&#123;</span><br><span class="line">        hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vector.length; i++)</span><br><span class="line">            <span class="keyword">if</span> (vector[i] != <span class="number">0</span>)</span><br><span class="line">                hashMap.put(i, vector[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hashMap.getOrDefault(i, <span class="number">0.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">dot</span><span class="params">(SparseVector other)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : hashMap.keySet())</span><br><span class="line">            sum += <span class="keyword">this</span>.get(i) * other.get(i);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ˆå’Œé˜Ÿåˆ—</title>
    <url>/2020/03/12/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/</url>
    <content><![CDATA[<pre><code>æ ˆå’Œé˜Ÿåˆ—çš„ç®—æ³•å®ç°ã€‚
</code></pre>
<a id="more"></a>
<h1>æ ˆ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyStack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">MyStack&lt;Item&gt; <span class="title">push</span><span class="params">(Item item)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Item <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-æ•°ç»„å®ç°"><a class="header-anchor" href="#1-æ•°ç»„å®ç°">Â¶</a>1 æ•°ç»„å®ç°</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">MyStack</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ˆå…ƒç´ æ•°ç»„ï¼Œåªèƒ½é€šè¿‡è½¬å‹æ¥åˆ›å»ºæ³›å‹æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> Item[] a = (Item[]) <span class="keyword">new</span> Object[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ƒç´ æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyStack&lt;Item&gt; <span class="title">push</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        check();</span><br><span class="line">        a[N++] = item;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"stack is empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Item item = a[--N];</span><br><span class="line"></span><br><span class="line">        check();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é¿å…å¯¹è±¡æ¸¸ç¦»</span></span><br><span class="line">        a[N] = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (N &gt;= a.length) &#123;</span><br><span class="line">            resize(<span class="number">2</span> * a.length);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (N &gt; <span class="number">0</span> &amp;&amp; N &lt;= a.length / <span class="number">4</span>) &#123;</span><br><span class="line">            resize(a.length / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒæ•´æ•°ç»„å¤§å°ï¼Œä½¿å¾—æ ˆå…·æœ‰ä¼¸ç¼©æ€§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Item[] tmp = (Item[]) <span class="keyword">new</span> Object[size];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            tmp[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        a = tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å›é€†åºéå†çš„è¿­ä»£å™¨</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;Item&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">int</span> i = N;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> i &gt; <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> a[--i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-é“¾è¡¨å®ç°"><a class="header-anchor" href="#2-é“¾è¡¨å®ç°">Â¶</a>2 é“¾è¡¨å®ç°</h2>
<p>éœ€è¦ä½¿ç”¨é“¾è¡¨çš„å¤´æ’æ³•æ¥å®ç°ï¼Œå› ä¸ºå¤´æ’æ³•ä¸­æœ€åå‹å…¥æ ˆçš„å…ƒç´ åœ¨é“¾è¡¨çš„å¼€å¤´ï¼Œå®ƒçš„ next æŒ‡é’ˆæŒ‡å‘å‰ä¸€ä¸ªå‹å…¥æ ˆçš„å…ƒç´ ï¼Œåœ¨å¼¹å‡ºå…ƒç´ æ—¶å°±å¯ä»¥é€šè¿‡ next æŒ‡é’ˆéå†åˆ°å‰ä¸€ä¸ªå‹å…¥æ ˆçš„å…ƒç´ ä»è€Œè®©è¿™ä¸ªå…ƒç´ æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListStack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">MyStack</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node top = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyStack&lt;Item&gt; <span class="title">push</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node newTop = <span class="keyword">new</span> Node();</span><br><span class="line"></span><br><span class="line">        newTop.item = item;</span><br><span class="line">        newTop.next = top;</span><br><span class="line"></span><br><span class="line">        top = newTop;</span><br><span class="line"></span><br><span class="line">        N++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"stack is empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Item item = top.item;</span><br><span class="line"></span><br><span class="line">        top = top.next;</span><br><span class="line">        N--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;Item&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">private</span> Node cur = top;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> cur != <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Item item = cur.item;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">                <span class="keyword">return</span> item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é˜Ÿåˆ—"><a class="header-anchor" href="#é˜Ÿåˆ—">Â¶</a>é˜Ÿåˆ—</h2>
<p>ä¸‹é¢æ˜¯é˜Ÿåˆ—çš„é“¾è¡¨å®ç°ï¼Œéœ€è¦ç»´æŠ¤ first å’Œ last èŠ‚ç‚¹æŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘é˜Ÿé¦–å’Œé˜Ÿå°¾ã€‚</p>
<p>è¿™é‡Œéœ€è¦è€ƒè™‘ first å’Œ last æŒ‡é’ˆå“ªä¸ªä½œä¸ºé“¾è¡¨çš„å¼€å¤´ã€‚å› ä¸ºå‡ºé˜Ÿåˆ—æ“ä½œéœ€è¦è®©é˜Ÿé¦–å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ æˆä¸ºé˜Ÿé¦–ï¼Œæ‰€ä»¥éœ€è¦å®¹æ˜“è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè€Œé“¾è¡¨çš„å¤´éƒ¨èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤å¯ä»¥è®© first æŒ‡é’ˆé“¾è¡¨çš„å¼€å¤´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyQueue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">MyQueue&lt;Item&gt; <span class="title">add</span><span class="params">(Item item)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Item <span class="title">remove</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyQueue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">MyQueue&lt;Item&gt; <span class="title">add</span><span class="params">(Item item)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Item <span class="title">remove</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListQueue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">MyQueue</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyQueue&lt;Item&gt; <span class="title">add</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node();</span><br><span class="line">        newNode.item = item;</span><br><span class="line">        newNode.next = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            last = newNode;</span><br><span class="line">            first = newNode;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            last.next = newNode;</span><br><span class="line">            last = newNode;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        N++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">remove</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"queue is empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node node = first;</span><br><span class="line">        first = first.next;</span><br><span class="line">        N--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            last = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;Item&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            Node cur = first;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> cur != <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Item item = cur.item;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">                <span class="keyword">return</span> item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¹¶æŸ¥é›†</title>
    <url>/2020/03/12/%E5%B9%B6%E6%9F%A5%E9%9B%86/</url>
    <content><![CDATA[<pre><code>ç”¨æ¥è§£å†³åŠ¨æ€è¿é€šæ€§çš„é—®é¢˜ï¼Œèƒ½åŠ¨æ€è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œèƒ½åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€šã€‚
</code></pre>
<a id="more"></a>
<h3 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">Â¶</a>æ–¹æ³•</h3>
<p>UF(int N)     æ„å»ºä¸€ä¸ªå¤§å°ä¸ºNçš„å¹¶æŸ¥é›†<br>
void union(int p, int q)     è¿æ¥ p å’Œ q èŠ‚ç‚¹<br>
int find(int p)     æŸ¥æ‰¾pèŠ‚ç‚¹çš„è¿é€šåˆ†é‡ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰<br>
boolean connected(int p, int q)     åˆ¤æ–­pï¼Œqä¸¤ç‚¹æ˜¯å¦è¿é€š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">UF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UF</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            id[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(p) == find(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ç°"><a class="header-anchor" href="#å®ç°">Â¶</a>å®ç°</h2>
<h3 id="Quick-find"><a class="header-anchor" href="#Quick-find">Â¶</a>Quick find</h3>
<p>å¿«é€ŸæŸ¥æ‰¾ï¼Œéœ€è¦ä¿è¯åŒä¸€è¿é€šåˆ†é‡çš„æ‰€æœ‰èŠ‚ç‚¹çš„ id å€¼ç›¸ç­‰ï¼Œå°±å¯ä»¥é€šè¿‡åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹çš„ id å€¼æ˜¯å¦ç›¸ç­‰ä»è€Œåˆ¤æ–­å…¶è¿é€šæ€§ã€‚<br>
ä½†æ˜¯ union æ“ä½œä»£ä»·å´å¾ˆé«˜ï¼Œéœ€è¦å°†å…¶ä¸­ä¸€ä¸ªè¿é€šåˆ†é‡ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ id å€¼éƒ½ä¿®æ”¹ä¸ºå¦ä¸€ä¸ªèŠ‚ç‚¹çš„ id å€¼ã€‚</p>
<h3 id="Quick-union"><a class="header-anchor" href="#Quick-union">Â¶</a>Quick union</h3>
<p>å¯ä»¥å¿«é€Ÿè¿›è¡Œ union æ“ä½œï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸ªèŠ‚ç‚¹çš„ id å€¼å³å¯ã€‚<br>
ä½†æ˜¯ find æ“ä½œå¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºåŒä¸€ä¸ªè¿é€šåˆ†é‡çš„èŠ‚ç‚¹ id å€¼ä¸åŒï¼Œid å€¼åªæ˜¯ç”¨æ¥æŒ‡å‘å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚å› æ­¤éœ€è¦ä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾æ“ä½œï¼Œç›´åˆ°æ‰¾åˆ°æœ€ä¸Šå±‚çš„èŠ‚ç‚¹ã€‚</p>
<h3 id="åŠ æƒ-Quick-Union"><a class="header-anchor" href="#åŠ æƒ-Quick-Union">Â¶</a>åŠ æƒ Quick Union</h3>
<p>ä¸ºäº†è§£å†³ quick-union çš„æ ‘é€šå¸¸ä¼šå¾ˆé«˜çš„é—®é¢˜ï¼ŒåŠ æƒ quick-union åœ¨ union æ“ä½œæ—¶ä¼šè®©è¾ƒå°çš„æ ‘è¿æ¥è¾ƒå¤§çš„æ ‘ä¸Šé¢ã€‚<br>
ç†è®ºç ”ç©¶è¯æ˜ï¼ŒåŠ æƒ quick-union ç®—æ³•æ„é€ çš„æ ‘æ·±åº¦æœ€å¤šä¸è¶…è¿‡ logNã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeightedQuickUnionUF</span> <span class="keyword">extends</span> <span class="title">UF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜èŠ‚ç‚¹çš„æ•°é‡ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] sz;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WeightedQuickUnionUF</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(N);</span><br><span class="line">        <span class="keyword">this</span>.sz = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>.sz[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (p != id[p]) &#123;</span><br><span class="line">            p = id[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> i = find(p);</span><br><span class="line">        <span class="keyword">int</span> j = find(q);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i == j) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sz[i] &lt; sz[j]) &#123;</span><br><span class="line">            id[i] = j;</span><br><span class="line">            sz[j] += sz[i];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            id[j] = i;</span><br><span class="line">            sz[i] += sz[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·¯å¾„å‹ç¼©çš„åŠ æƒQuick-Union"><a class="header-anchor" href="#è·¯å¾„å‹ç¼©çš„åŠ æƒQuick-Union">Â¶</a>è·¯å¾„å‹ç¼©çš„åŠ æƒQuick Union</h3>
<p>åœ¨æ£€æŸ¥èŠ‚ç‚¹çš„åŒæ—¶å°†å®ƒä»¬ç›´æ¥é“¾æ¥åˆ°æ ¹èŠ‚ç‚¹ï¼Œåªéœ€è¦åœ¨ find ä¸­æ·»åŠ ä¸€ä¸ªå¾ªç¯å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(temp != id[p])&#123;</span><br><span class="line"><span class="keyword">int</span> tempId = id[temp];</span><br><span class="line">id[temp] = id[p];</span><br><span class="line">temp = tempId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ€§èƒ½æ¯”è¾ƒ</h1>
<table>
<thead>
<tr>
<th style="text-align:right">ç®—æ³•</th>
<th style="text-align:center">union</th>
<th style="text-align:center">find</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Quick Find</td>
<td style="text-align:center">N</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:right">Quick Union</td>
<td style="text-align:center">æ ‘é«˜ï½œæ ‘é«˜</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:right">åŠ æƒQuick Union</td>
<td style="text-align:center">logN</td>
<td style="text-align:center">logN</td>
</tr>
<tr>
<td style="text-align:right">è·¯å¾„å‹ç¼©çš„åŠ æƒQuick Union</td>
<td style="text-align:center">å¸¸æ•°</td>
<td style="text-align:center">å¸¸æ•°</td>
</tr>
</tbody>
</table>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ’åºç®—æ³•æ€»ç»“</title>
    <url>/2020/03/11/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<pre><code>æ€»ç»“ä¸€æ³¢åŸºç¡€ç®—æ³•å†åˆ·é¢˜æŠŠ
</code></pre>
<a id="more"></a>
<h1>çº¦å®š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®ç°Comparableæ¥å£ï¼Œæœ‰compareTo()æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Sort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(T v, T w)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(T[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        T t = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>èœèœæ’åºç»„åˆ</h1>
<h1>é€‰æ‹©æ’åº</h1>
<p>é€‰æ‹©æœ€å°çš„æ•°ä¸ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå†ä»å‰©ä¸‹çš„é€‰æœ€å°çš„æ•°ä¸ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Selection</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> min = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (less(nums[j], nums[min])) &#123;</span><br><span class="line">                    min = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(nums, i, min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å†’æ³¡æ’åº</h1>
<p>å·¦å³ä¸æ–­äº¤æ¢é€†åºçš„å…ƒç´ ï¼Œæ¯ä¸€è½®æ’åºéƒ½è®©ä¸€ä¸ªå…ƒç´ æ’åˆ°æœ€å³ä¾§ã€‚<br>
åœ¨ä¸€è½®æ’åºä¸­ï¼Œå¦‚æœæ²¡æœ‰å‘ç”Ÿäº¤æ¢è¯´æ˜æ•°ç»„å·²æœ‰åºï¼Œå¯ä»¥è·³å‡ºå¾ªç¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bubble</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = nums.length;</span><br><span class="line">        <span class="keyword">boolean</span> isSorted = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = N - <span class="number">1</span>; i &gt; <span class="number">0</span> &amp;&amp; !isSorted; i--) &#123;</span><br><span class="line">            isSorted = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (less(nums[j + <span class="number">1</span>], nums[j])) &#123;</span><br><span class="line">                    isSorted = <span class="keyword">false</span>;</span><br><span class="line">                    swap(nums, j, j + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(isSorted)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ’å…¥æ’åº</h1>
<p>æ¯æ¬¡éƒ½å°†å½“å‰å…ƒç´ æ’å…¥å·¦ä¾§å·²æ’å¥½åºçš„æ•°ç»„ä¸­ï¼Œæ¯æ¬¡éƒ½ä¸ç›¸é‚»çš„å…ƒç´ äº¤æ¢ï¼Œæ¯è¶Ÿé€†åºæ•°é‡å‡1ã€‚å…¶äº¤æ¢çš„æ¬¡æ•°å–å†³ä¸é€†åºçš„æ•°é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insertion</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; less(nums[j], nums[j - <span class="number">1</span>]); j--) &#123;</span><br><span class="line">                swap(nums, j, j - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å¸Œå°”æ’åº</h1>
<p>å¯¹äºå¤§è§„æ¨¡çš„æ•°ç»„ï¼Œæ’å…¥æ’åºå¾ˆæ…¢ï¼Œå› ä¸ºå®ƒåªèƒ½äº¤æ¢ç›¸é‚»çš„å…ƒç´ ï¼Œæ¯æ¬¡åªèƒ½å°†é€†åºæ•°é‡å‡å°‘ 1ã€‚å¸Œå°”æ’åºçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³æ’å…¥æ’åºçš„è¿™ç§å±€é™æ€§ï¼Œå®ƒé€šè¿‡äº¤æ¢ä¸ç›¸é‚»çš„å…ƒç´ ï¼Œæ¯æ¬¡å¯ä»¥å°†é€†åºæ•°é‡å‡å°‘å¤§äº 1ã€‚</p>
<p>å¸Œå°”æ’åºä½¿ç”¨æ’å…¥æ’åºå¯¹é—´éš” h çš„åºåˆ—è¿›è¡Œæ’åºã€‚é€šè¿‡ä¸æ–­å‡å° hï¼Œæœ€åä»¤ h=1ï¼Œå°±å¯ä»¥ä½¿å¾—æ•´ä¸ªæ•°ç»„æ˜¯æœ‰åºçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shell</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> N = nums.length;</span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (h &lt; N / <span class="number">3</span>) &#123;</span><br><span class="line">            h = <span class="number">3</span> * h + <span class="number">1</span>; <span class="comment">// 1, 4, 13, 40, ...</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; N; i++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt;= h &amp;&amp; less(nums[j], nums[j - h]); j -= h) &#123;</span><br><span class="line">                    swap(nums, j, j - h);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            h = h / <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å½’å¹¶æ’åº</h1>
<p>åˆ†æˆå¤šä¸ªå­æ•°ç»„ï¼Œç„¶ååˆå¹¶èµ·æ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> T[] aux;</span><br><span class="line"><span class="comment">//mergeæ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(T[] nums, <span class="keyword">int</span> low, <span class="keyword">int</span> middle, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = low;</span><br><span class="line">        <span class="keyword">int</span> low2 = middle + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=low; k&lt;= high; ++k)&#123;</span><br><span class="line">            aux[k] = nums[k];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=low; k&lt;= high; ++k)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;middle)&#123;</span><br><span class="line">                nums[k] == aux[low2++];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(low2 &gt; high)&#123;</span><br><span class="line">                nums[k] == aux[i++];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(aux[i].compareTo(aux[j]) &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                nums[k] == aux[i++];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                nums[k] == aux[low2++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è‡ªé¡¶è€Œä¸‹ï¼Œé€’å½’</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Up2DownMergeSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">MergeSort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span></span>&#123;</span><br><span class="line">        aux = (T[]) <span class="keyword">new</span> Comparable[nums.length];</span><br><span class="line">        sort(nums, <span class="number">0</span>, nums.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = l +(h-l)&gt;&gt;<span class="number">1</span>;    </span><br><span class="line">        sort(nums, l, m);</span><br><span class="line">        sort(nums,m+<span class="number">1</span>,h);</span><br><span class="line">        merge(nums, l,m,h);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è‡ªä¸‹è€Œä¸Šï¼ŒåŠ¨æ€è§„åˆ’</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Down2UpMergeSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">MergeSort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = nums.length;</span><br><span class="line">        aux = (T[]) <span class="keyword">new</span> Comparable[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt; N; sz+=sz)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> lo = <span class="number">0</span>; lo&lt;N-sz; lo=lo+sz+sz)&#123;</span><br><span class="line">                merge(nums, lo, lo + sz - <span class="number">1</span>, Math.min(lo + sz + sz - <span class="number">1</span>, N - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å¿«é€Ÿæ’åº</h1>
<p>å¿«é€Ÿæ’åºé€šè¿‡ä¸€ä¸ªåˆ‡åˆ†å…ƒç´ å°†æ•°ç»„åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„ï¼Œå·¦å­æ•°ç»„å°äºç­‰äºåˆ‡åˆ†å…ƒç´ ï¼Œå³å­æ•°ç»„å¤§äºç­‰äºåˆ‡åˆ†å…ƒç´ ï¼Œå°†è¿™ä¸¤ä¸ªå­æ•°ç»„æ’åºä¹Ÿå°±å°†æ•´ä¸ªæ•°ç»„æ’åºäº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        shuffle(nums);</span><br><span class="line">        sort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (h &lt;= l)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> j = partition(nums, l, h);</span><br><span class="line">        sort(nums, l, j - <span class="number">1</span>);</span><br><span class="line">        sort(nums, j + <span class="number">1</span>, h);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//å¦‚æ­¤ä¹±åºæ•°ç»„ï¼Œä¾¿å¯ä»¥æ›´åŠ ä¼˜ç§€çš„å°†å¿«æ’æ€§èƒ½æ¥è¿‘NlogNï¼Œè€Œä¸”å‡ ä¹å¯ä»¥é¿å…å‡ºç°n2çš„æ•ˆç‡æƒ…å†µã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        List&lt;Comparable&gt; list = Arrays.asList(nums);</span><br><span class="line">        Collections.shuffle(list);</span><br><span class="line">        list.toArray(nums);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*Partition</span></span><br><span class="line"><span class="comment">å– a[l] ä½œä¸ºåˆ‡åˆ†å…ƒç´ ï¼Œç„¶åä»æ•°ç»„çš„å·¦ç«¯å‘å³æ‰«æç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºå®ƒçš„å…ƒç´ ï¼Œå†ä»æ•°ç»„çš„å³ç«¯å‘å·¦æ‰«ææ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºå®ƒçš„å…ƒç´ ï¼Œäº¤æ¢è¿™ä¸¤ä¸ªå…ƒç´ ã€‚ä¸æ–­è¿›è¡Œè¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å¯ä»¥ä¿è¯å·¦æŒ‡é’ˆ i çš„å·¦ä¾§å…ƒç´ éƒ½ä¸å¤§äºåˆ‡åˆ†å…ƒç´ ï¼Œå³æŒ‡é’ˆ j çš„å³ä¾§å…ƒç´ éƒ½ä¸å°äºåˆ‡åˆ†å…ƒç´ ã€‚å½“ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡æ—¶ï¼Œå°†åˆ‡åˆ†å…ƒç´  a[l] å’Œ a[j] äº¤æ¢ä½ç½®ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(T[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = l, j = h + <span class="number">1</span>;</span><br><span class="line">    T v = nums[l];</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (less(nums[++i], v) &amp;&amp; i != h) ;</span><br><span class="line">        <span class="keyword">while</span> (less(v, nums[--j]) &amp;&amp; j != l) ;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        swap(nums, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    swap(nums, l, j);</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€§èƒ½åˆ†æ"><a class="header-anchor" href="#æ€§èƒ½åˆ†æ">Â¶</a>æ€§èƒ½åˆ†æ</h3>
<p>å¿«é€Ÿæ’åºæ˜¯åŸåœ°æ’åºï¼Œä¸éœ€è¦è¾…åŠ©æ•°ç»„ï¼Œä½†æ˜¯é€’å½’è°ƒç”¨éœ€è¦è¾…åŠ©æ ˆã€‚<br>
å¿«é€Ÿæ’åºæœ€å¥½çš„æƒ…å†µä¸‹æ˜¯æ¯æ¬¡éƒ½æ­£å¥½å°†æ•°ç»„å¯¹åŠåˆ†ï¼Œè¿™æ ·é€’å½’è°ƒç”¨æ¬¡æ•°æ‰æ˜¯æœ€å°‘çš„ã€‚è¿™ç§æƒ…å†µä¸‹æ¯”è¾ƒæ¬¡æ•°ä¸º CN=2CN/2+Nï¼Œå¤æ‚åº¦ä¸º O(NlogN)ã€‚<br>
æœ€åçš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡ä»æœ€å°çš„å…ƒç´ åˆ‡åˆ†ï¼Œç¬¬äºŒæ¬¡ä»ç¬¬äºŒå°çš„å…ƒç´ åˆ‡åˆ†ï¼Œå¦‚æ­¤è¿™èˆ¬ã€‚å› æ­¤æœ€åçš„æƒ…å†µä¸‹éœ€è¦æ¯”è¾ƒ N2/2ã€‚ä¸ºäº†é˜²æ­¢æ•°ç»„æœ€å¼€å§‹å°±æ˜¯æœ‰åºçš„ï¼Œåœ¨è¿›è¡Œå¿«é€Ÿæ’åºæ—¶éœ€è¦éšæœºæ‰“ä¹±æ•°ç»„ã€‚</p>
<h3 id="ç®—æ³•æ”¹è¿›"><a class="header-anchor" href="#ç®—æ³•æ”¹è¿›">Â¶</a>ç®—æ³•æ”¹è¿›</h3>
<ol>
<li>åˆ‡æ¢åˆ°æ’å…¥æ’åºä¸­ï¼š<br>
å› ä¸ºå¿«é€Ÿæ’åºåœ¨å°æ•°ç»„ä¸­ä¹Ÿä¼šé€’å½’è°ƒç”¨è‡ªå·±ï¼Œå¯¹äºå°æ•°ç»„ï¼Œæ’å…¥æ’åºæ¯”å¿«é€Ÿæ’åºçš„æ€§èƒ½æ›´å¥½ï¼Œå› æ­¤åœ¨å°æ•°ç»„ä¸­å¯ä»¥åˆ‡æ¢åˆ°æ’å…¥æ’åºã€‚</li>
<li>ä¸‰æ•°å–ä¸­ï¼š<br>
æœ€å¥½çš„æƒ…å†µä¸‹æ˜¯æ¯æ¬¡éƒ½èƒ½å–æ•°ç»„çš„ä¸­ä½æ•°ä½œä¸ºåˆ‡åˆ†å…ƒç´ ï¼Œä½†æ˜¯è®¡ç®—ä¸­ä½æ•°çš„ä»£ä»·å¾ˆé«˜ã€‚ä¸€ç§æŠ˜ä¸­æ–¹æ³•æ˜¯å– 3 ä¸ªå…ƒç´ ï¼Œå¹¶å°†å¤§å°å±…ä¸­çš„å…ƒç´ ä½œä¸ºåˆ‡åˆ†å…ƒç´ ã€‚</li>
<li>ä¸‰å‘åˆ‡åˆ†ï¼š<br>
å¯¹äºæœ‰å¤§é‡é‡å¤å…ƒç´ çš„æ•°ç»„ï¼Œå¯ä»¥å°†æ•°ç»„åˆ‡åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«å¯¹åº”å°äºã€ç­‰äºå’Œå¤§äºåˆ‡åˆ†å…ƒç´ ã€‚<br>
ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åºå¯¹äºæœ‰å¤§é‡é‡å¤å…ƒç´ çš„éšæœºæ•°ç»„å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…å®Œæˆæ’åºã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreeWayQuickSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">QuickSort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (h &lt;= l) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> lt = l, i = l + <span class="number">1</span>, gt = h;</span><br><span class="line">        T v = nums[l];</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= gt) &#123;</span><br><span class="line">            <span class="keyword">int</span> cmp = nums[i].compareTo(v);</span><br><span class="line">            <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                swap(nums, lt++, i++);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                swap(nums, i, gt--);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sort(nums, l, lt - <span class="number">1</span>);</span><br><span class="line">        sort(nums, gt + <span class="number">1</span>, h);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>åŸºäºåˆ‡åˆ†çš„å¿«é€Ÿé€‰æ‹©ç®—æ³•<br>
å¿«é€Ÿæ’åºçš„ partition() æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªæ•´æ•° j ä½¿å¾— a[lâ€¦j-1] å°äºç­‰äº a[j]ï¼Œä¸” a[j+1â€¦h] å¤§äºç­‰äº a[j]ï¼Œæ­¤æ—¶ a[j] å°±æ˜¯æ•°ç»„çš„ç¬¬ j å¤§å…ƒç´ ã€‚</li>
</ol>
<h3 id="å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‰¾å‡ºæ•°ç»„çš„ç¬¬-k-ä¸ªå…ƒç´ "><a class="header-anchor" href="#å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‰¾å‡ºæ•°ç»„çš„ç¬¬-k-ä¸ªå…ƒç´ ">Â¶</a>å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‰¾å‡ºæ•°ç»„çš„ç¬¬ k ä¸ªå…ƒç´ </h3>
<p>è¯¥ç®—æ³•æ˜¯çº¿æ€§çº§åˆ«çš„ï¼Œå‡è®¾æ¯æ¬¡èƒ½å°†æ•°ç»„äºŒåˆ†ï¼Œé‚£ä¹ˆæ¯”è¾ƒçš„æ€»æ¬¡æ•°ä¸º (N+N/2+N/4+â€¦)ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ k ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå’Œæ˜¾ç„¶å°äº 2Nã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">select</span><span class="params">(T[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, h = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &gt; l) &#123;</span><br><span class="line">        <span class="keyword">int</span> j = partition(nums, l, h);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (j == k) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[k];</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; k) &#123;</span><br><span class="line">            h = j - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = j + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums[k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="BFPRTç®—æ³•ï¼šä¸­ä½æ•°çš„ä¸­ä½æ•°"><a class="header-anchor" href="#BFPRTç®—æ³•ï¼šä¸­ä½æ•°çš„ä¸­ä½æ•°">Â¶</a>BFPRTç®—æ³•ï¼šä¸­ä½æ•°çš„ä¸­ä½æ•°</h3>
<p>ç©å¼„é€’å½’äºé¼“æŒä¹‹ä¸­ O(N)çš„ç®—æ³•<br>
ä¸Topkä¸åŒçš„åœ¨é€‰åˆ’åˆ†å€¼ä¸Šï¼Œå¿«æ’æ˜¯éšæœºé€‰ã€‚</p>
<ol>
<li>å…ˆåˆ†ç»„ï¼š<br>
æ¯”å¦‚å…ˆç›¸é‚»çš„5ä¸ªæ•°åˆ†ä¸€ç»„ï¼Œæœ€åä¸æ»¡5ä¸ªåˆ†ä¸€ç»„ã€‚(å› ä¸ºå‘æ˜è€…æ˜¯äº”ä¸ªäººâ€¦)</li>
<li>åˆ†ç»„åç»„å†…æ’åºï¼Œè·¨ç»„ä¹‹é—´ä¸ä¿è¯æœ‰åºã€‚ N/5 O(N)</li>
<li>æ¯ä¸ªç»„çš„ä¸€ä¸ªä¸­ä½æ•°æ‹¿å‡ºæ¥æ„æˆæ–°æ•°ç»„ï¼Œé•¿åº¦ N/5</li>
<li>é€’å½’è°ƒç”¨BFPRTæ‰¾æ–°æ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¾—åˆ°çš„æ•°å³å¯æ‹¿å›åŸæ•°ç»„åˆ’åˆ† T(N/5)</li>
<li>ç„¶åçœ‹åˆ’åˆ†ç»“æœæ˜¯å¦å‘½ä¸­TopK  T(7N/10)</li>
</ol>
<h5 id="ä¸ºä»€ä¹ˆé€‰5"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰5">Â¶</a>ä¸ºä»€ä¹ˆé€‰5</h5>
<p>åœ¨BFPRTç®—æ³•ä¸­ï¼Œä¸ºä»€ä¹ˆæ˜¯é€‰5ä¸ªä½œä¸ºåˆ†ç»„ï¼Ÿ<br>
é¦–å…ˆï¼Œå¶æ•°æ’é™¤ï¼Œå› ä¸ºå¯¹äºå¥‡æ•°æ¥è¯´ï¼Œä¸­ä½æ•°æ›´å®¹æ˜“è®¡ç®—ã€‚<br>
å¦‚æœé€‰ç”¨3ï¼Œå…¶æ“ä½œå…ƒç´ ä¸ªæ•°è¿˜æ˜¯ nã€‚<br>
å¦‚æœé€‰å–7ï¼Œ9æˆ–è€…æ›´å¤§ï¼Œåœ¨æ’å…¥æ’åºæ—¶è€—æ—¶å¢åŠ ï¼Œå¸¸æ•° [å…¬å¼] ä¼šå¾ˆå¤§ï¼Œæœ‰äº›å¾—ä¸å¿å¤±ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BFPRT</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//äº¤æ¢ä¸¤å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">        arr[i] = arr[j];</span><br><span class="line">        arr[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’å…¥æ’åº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> h)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt;= h; ++i)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &gt; l; --j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[j - <span class="number">1</span>] &gt; arr[j])&#123;</span><br><span class="line">                    swap(arr, j - <span class="number">1</span>, j);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰¾åˆ°ä¸­ä½æ•°çš„ä¸­ä½æ•°ï¼Œè¿™é‡Œæ˜¯å°†æ¯5ä¸ªå…ƒç´ æ’åºç„¶åä¸æ•°ç»„å‰N/5ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œå†é€’å½’è°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findMedianOfMedians</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l == r)<span class="keyword">return</span> l;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>; <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ°å¥½èƒ½åˆ†5ä¸ªä¸€ç»„çš„å‰é¢å…ƒç´ </span></span><br><span class="line">        <span class="keyword">for</span>(i = l;i &lt; r - <span class="number">5</span>; i+=<span class="number">5</span>)&#123;</span><br><span class="line">            insertSort(arr, i, i + <span class="number">4</span>);</span><br><span class="line">            n = i - l;</span><br><span class="line">            swap(arr,l + n/<span class="number">5</span>, i + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‰©ä½™çš„å…ƒç´ æ‰¾ä¸­ä½æ•°</span></span><br><span class="line">        <span class="keyword">int</span> num = r - i + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(num &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            insertSort(arr, i, i + num - <span class="number">1</span>);</span><br><span class="line">            n = i - l;</span><br><span class="line">            swap(arr, l + n/<span class="number">5</span>, i + num/<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¡ç®—æ±‚å‡ºå‡ ä¸ªä¸­ä½æ•°</span></span><br><span class="line">        n /= <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€’å½’è‡³åªå‰©ä¸€ä¸ªå…ƒç´ , è¿™é‡Œ==lè¯´æ˜åªå‰©lé‚£ä¸ªä½ç½®æœ‰ä¸­ä½æ•°ï¼Œå³æœ€åä¸€ä¸ª</span></span><br><span class="line">        <span class="keyword">if</span>(n == l) <span class="keyword">return</span> l;</span><br><span class="line">        <span class="keyword">return</span> findMedianOfMedians(arr, l , l + n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸‰é¡¹åˆ‡åˆ†Partition</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] partition(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> pivot, <span class="keyword">int</span> l, <span class="keyword">int</span> h)&#123;</span><br><span class="line">        <span class="keyword">int</span> i = l;</span><br><span class="line">        <span class="keyword">int</span> lbound = i; <span class="keyword">int</span> rbound = h;</span><br><span class="line">        <span class="keyword">while</span>(i &lt;= rbound)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i]&lt;pivot)&#123;</span><br><span class="line">                swap(arr, i++, lbound++);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &gt; pivot)&#123;</span><br><span class="line">                swap(arr, i, rbound--);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ++i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;lbound, rbound&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€’å½’æ‰¾ï¼š</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">BFPRT</span><span class="params">(<span class="keyword">int</span>[] arr,<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pivot = arr[findMedianOfMedians(arr, l, r)];</span><br><span class="line">        <span class="keyword">int</span>[] index = partition(arr,pivot, l, r);</span><br><span class="line">        <span class="keyword">if</span>(k - <span class="number">1</span>&lt;index[<span class="number">0</span>])&#123;</span><br><span class="line">            r = index[<span class="number">0</span>] - <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(k - <span class="number">1</span> &gt; index[<span class="number">1</span>])&#123;</span><br><span class="line">            l = index[<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> pivot;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> BFPRT(arr, l, r, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>å †æ’åº</h1>
<h3 id="1-å †"><a class="header-anchor" href="#1-å †">Â¶</a>1 å †</h3>
<p>å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯å¤§äºç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶ä¸”å †æ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ã€‚</p>
<p>å †å¯ä»¥ç”¨æ•°ç»„æ¥è¡¨ç¤ºï¼Œè¿™æ˜¯å› ä¸ºå †æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘å¾ˆå®¹æ˜“å°±å­˜å‚¨åœ¨æ•°ç»„ä¸­ã€‚ä½ç½® k çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä½ç½®ä¸º k/2ï¼Œè€Œå®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹çš„ä½ç½®åˆ†åˆ«ä¸º 2k å’Œ 2k+1ã€‚è¿™é‡Œä¸ä½¿ç”¨æ•°ç»„ç´¢å¼•ä¸º 0 çš„ä½ç½®ï¼Œæ˜¯ä¸ºäº†æ›´æ¸…æ™°åœ°æè¿°èŠ‚ç‚¹çš„ä½ç½®å…³ç³»ã€‚</p>
<h3 id="2-å †çš„ä¸Šæµ®ä¸‹æ²‰"><a class="header-anchor" href="#2-å †çš„ä¸Šæµ®ä¸‹æ²‰">Â¶</a>2 å †çš„ä¸Šæµ®ä¸‹æ²‰</h3>
<p>åœ¨å †ä¸­ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å¤§ï¼Œé‚£ä¹ˆéœ€è¦äº¤æ¢è¿™ä¸ªä¸¤ä¸ªèŠ‚ç‚¹ã€‚äº¤æ¢åè¿˜å¯èƒ½æ¯”å®ƒæ–°çš„çˆ¶èŠ‚ç‚¹å¤§ï¼Œå› æ­¤éœ€è¦ä¸æ–­åœ°è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢æ“ä½œï¼ŒæŠŠè¿™ç§æ“ä½œç§°ä¸ºä¸Šæµ®ã€‚<br>
ç±»ä¼¼åœ°ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹æ¯”å­èŠ‚ç‚¹æ¥å¾—å°ï¼Œä¹Ÿéœ€è¦ä¸æ–­åœ°å‘ä¸‹è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢æ“ä½œï¼ŒæŠŠè¿™ç§æ“ä½œç§°ä¸ºä¸‹æ²‰ã€‚ä¸€ä¸ªèŠ‚ç‚¹å¦‚æœæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåº”å½“ä¸ä¸¤ä¸ªå­èŠ‚ç‚¹ä¸­æœ€å¤§é‚£ä¸ªèŠ‚ç‚¹è¿›è¡Œäº¤æ¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k / <span class="number">2</span>, k)) &#123;</span><br><span class="line">        swap(k / <span class="number">2</span>, k);</span><br><span class="line">        k = k / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">2</span> * k &lt;= N) &#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">2</span> * k;</span><br><span class="line">        <span class="keyword">if</span> (j &lt; N &amp;&amp; less(j, j + <span class="number">1</span>))</span><br><span class="line">            j++;</span><br><span class="line">        <span class="keyword">if</span> (!less(k, j))</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        swap(k, j);</span><br><span class="line">        k = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-æ’å…¥å…ƒç´ "><a class="header-anchor" href="#3-æ’å…¥å…ƒç´ ">Â¶</a>3 æ’å…¥å…ƒç´ </h3>
<p>æ’å…¥åˆ°æ•°ç»„é˜Ÿå°¾ï¼Œç„¶åä¸Šæµ®åˆ°åˆé€‚çš„ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Comparable v)</span> </span>&#123;</span><br><span class="line">    heap[++N] = v;</span><br><span class="line">    swim(N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-åˆ é™¤æœ€å¤§çš„å…ƒç´ "><a class="header-anchor" href="#4-åˆ é™¤æœ€å¤§çš„å…ƒç´ ">Â¶</a>4 åˆ é™¤æœ€å¤§çš„å…ƒç´ </h3>
<p>ä»æ•°ç»„é¡¶ç«¯åˆ é™¤æœ€å¤§çš„å…ƒç´ ï¼Œå¹¶å°†æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ æ”¾åˆ°é¡¶ç«¯ï¼Œå¹¶è®©è¿™ä¸ªå…ƒç´ ä¸‹æ²‰åˆ°åˆé€‚çš„ä½ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">delMax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    T max = heap[<span class="number">1</span>];</span><br><span class="line">    swap(<span class="number">1</span>, N--);</span><br><span class="line">    heap[N + <span class="number">1</span>] = <span class="keyword">null</span>;</span><br><span class="line">    sink(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-å †æ’åº"><a class="header-anchor" href="#5-å †æ’åº">Â¶</a>5 å †æ’åº</h3>
<p>æŠŠæœ€å¤§å…ƒç´ å’Œå½“å‰å †ä¸­æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ä½ç½®ï¼Œå¹¶ä¸”ä¸åˆ é™¤å®ƒï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªä»å°¾åˆ°å¤´çš„é€’å‡åºåˆ—ï¼Œä»æ­£å‘æ¥çœ‹å°±æ˜¯ä¸€ä¸ªé€’å¢åºåˆ—ï¼Œè¿™å°±æ˜¯å †æ’åºã€‚</p>
<h4 id="5-1-æ„å»ºå †"><a class="header-anchor" href="#5-1-æ„å»ºå †">Â¶</a>5.1 æ„å»ºå †</h4>
<p>æ— åºæ•°ç»„å»ºç«‹å †æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ä»å·¦åˆ°å³éå†æ•°ç»„è¿›è¡Œä¸Šæµ®æ“ä½œã€‚ä¸€ä¸ªæ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯ä»å³è‡³å·¦è¿›è¡Œä¸‹æ²‰æ“ä½œï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å·²ç»æ˜¯å †æœ‰åºï¼Œé‚£ä¹ˆè¿›è¡Œä¸‹æ²‰æ“ä½œå¯ä»¥ä½¿å¾—è¿™ä¸ªèŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å †æœ‰åºã€‚å¶å­èŠ‚ç‚¹ä¸éœ€è¦è¿›è¡Œä¸‹æ²‰æ“ä½œï¼Œå¯ä»¥å¿½ç•¥å¶å­èŠ‚ç‚¹çš„å…ƒç´ ï¼Œå› æ­¤åªéœ€è¦éå†ä¸€åŠçš„å…ƒç´ å³å¯ã€‚</p>
<h4 id="5-2-äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ "><a class="header-anchor" href="#5-2-äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ ">Â¶</a>5.2 äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ </h4>
<p>äº¤æ¢ä¹‹åéœ€è¦è¿›è¡Œä¸‹æ²‰æ“ä½œç»´æŒå †çš„æœ‰åºçŠ¶æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapSort</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">T</span>&gt;&gt; <span class="keyword">extends</span> <span class="title">Sort</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°ç»„ç¬¬ 0 ä¸ªä½ç½®ä¸èƒ½æœ‰å…ƒç´ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = N / <span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</span><br><span class="line">            sink(nums, k, N);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (N &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            swap(nums, <span class="number">1</span>, N--);</span><br><span class="line">            sink(nums, <span class="number">1</span>, N);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(T[] nums, <span class="keyword">int</span> k, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">2</span> * k &lt;= N) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">2</span> * k;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; N &amp;&amp; less(nums, j, j + <span class="number">1</span>))</span><br><span class="line">                j++;</span><br><span class="line">            <span class="keyword">if</span> (!less(nums, k, j))</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            swap(nums, k, j);</span><br><span class="line">            k = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(T[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nums[i].compareTo(nums[j]) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-åˆ†æ"><a class="header-anchor" href="#6-åˆ†æ">Â¶</a>6 åˆ†æ</h3>
<p>ä¸€ä¸ªå †çš„é«˜åº¦ä¸º logNï¼Œå› æ­¤åœ¨å †ä¸­æ’å…¥å…ƒç´ å’Œåˆ é™¤æœ€å¤§å…ƒç´ çš„å¤æ‚åº¦éƒ½ä¸º logNã€‚</p>
<p>å¯¹äºå †æ’åºï¼Œç”±äºè¦å¯¹ N ä¸ªèŠ‚ç‚¹è¿›è¡Œä¸‹æ²‰æ“ä½œï¼Œå› æ­¤å¤æ‚åº¦ä¸º NlogNã€‚</p>
<p>å †æ’åºæ˜¯ä¸€ç§åŸåœ°æ’åºï¼Œæ²¡æœ‰åˆ©ç”¨é¢å¤–çš„ç©ºé—´ã€‚</p>
<p>ç°ä»£æ“ä½œç³»ç»Ÿå¾ˆå°‘ä½¿ç”¨å †æ’åºï¼Œå› ä¸ºå®ƒæ— æ³•åˆ©ç”¨å±€éƒ¨æ€§åŸç†è¿›è¡Œç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„å…ƒç´ å¾ˆå°‘å’Œç›¸é‚»çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢ã€‚</p>
<h1>å°ç»“</h1>
<ol>
<li>æ’åºç®—æ³•çš„æ¯”è¾ƒ<br>
ç®—æ³•|ç¨³å®šæ€§|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|å¤‡æ³¨<br>
-:|:-:|:-:|:-:|:-<br>
é€‰æ‹©æ’åº|âŒ|N^2|1|<br>
å†’æ³¡æ’åº|ğŸ‘Œ|N^2|1|<br>
æ’å…¥æ’åº|ğŸ‘Œ|Nï½N^2|1|æ—¶é—´å¤æ‚åº¦å’Œåˆå§‹é¡ºåºæœ‰å…³<br>
å¸Œå°”æ’åº|âŒ|Nçš„è‹¥å¹²å€ä¹˜ä»¥é€’å¢åºåˆ—çš„é•¿åº¦|1|æ”¹è¿›ç‰ˆçš„æ’å…¥æ’åº<br>
å¿«é€Ÿæ’åº|âŒ|NlogN|logN|<br>
ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åº|âŒ|Nï½NlogN|logN|é€‚ç”¨äºæœ‰å¤§é‡é‡å¤ä¸»é”®<br>
å½’å¹¶æ’åº|ğŸ‘Œ|NlogN|N|<br>
å †æ’åº|âŒ|NlogN|1|æ— æ³•åˆ©ç”¨å±€éƒ¨æ€§åŸç†<br>
å¿«é€Ÿæ’åºæ˜¯æœ€å¿«çš„é€šç”¨æ’åºç®—æ³•ï¼Œå®ƒçš„å†…å¾ªç¯çš„æŒ‡ä»¤å¾ˆå°‘ï¼Œè€Œä¸”å®ƒè¿˜èƒ½åˆ©ç”¨ç¼“å­˜ï¼Œå› ä¸ºå®ƒæ€»æ˜¯é¡ºåºåœ°è®¿é—®æ•°æ®ã€‚å®ƒçš„è¿è¡Œæ—¶é—´è¿‘ä¼¼ä¸º ~cNlogNï¼Œè¿™é‡Œçš„ c æ¯”å…¶å®ƒçº¿æ€§å¯¹æ•°çº§åˆ«çš„æ’åºç®—æ³•éƒ½è¦å°ã€‚</li>
</ol>
<p>ä½¿ç”¨ä¸‰å‘åˆ‡åˆ†å¿«é€Ÿæ’åºï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½å‡ºç°çš„æŸäº›åˆ†å¸ƒçš„è¾“å…¥èƒ½å¤Ÿè¾¾åˆ°çº¿æ€§çº§åˆ«ï¼Œè€Œå…¶å®ƒæ’åºç®—æ³•ä»ç„¶éœ€è¦çº¿æ€§å¯¹æ•°æ—¶é—´ã€‚</p>
<ol start="2">
<li>Javaçš„æ’åºç®—æ³•å®ç°<br>
Java ä¸»è¦æ’åºæ–¹æ³•ä¸º java.util.Arrays.sort()ï¼Œå¯¹äºåŸå§‹æ•°æ®ç±»å‹ä½¿ç”¨ä¸‰å‘åˆ‡åˆ†çš„å¿«é€Ÿæ’åºï¼Œå¯¹äºå¼•ç”¨ç±»å‹ä½¿ç”¨å½’å¹¶æ’åºã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaIO</title>
    <url>/2020/03/10/JavaIO/</url>
    <content><![CDATA[<pre><code>Iï¼šinputæŠŠæ•°æ®ä»å¤–éƒ¨è¯»å…¥å†…å­˜
Oï¼šoutputæŠŠæ•°æ®ä»å†…å­˜è¾“å‡ºåˆ°å¤–éƒ¨
</code></pre>
<a id="more"></a>
<h1>Fileå¯¹è±¡</h1>
<p>æ„å»ºFileå¯¹è±¡ï¼Œéœ€è¦ä¼ å…¥æ–‡ä»¶è·¯å¾„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line">File f1 = <span class="keyword">new</span> File(<span class="string">"/usr/bin/javac"</span>);</span><br><span class="line">File f2 = <span class="keyword">new</span> File(<span class="string">"./sub/javac"</span>); <span class="comment">// ç»å¯¹è·¯å¾„æ˜¯C:\Docs\sub\javac</span></span><br><span class="line">File f3 = <span class="keyword">new</span> File(<span class="string">"../sub/javac"</span>); <span class="comment">// ç»å¯¹è·¯å¾„æ˜¯C:\sub\javac</span></span><br></pre></td></tr></table></figure>
<p>.å½“å‰è·¯å¾„ï¼Œâ€¦ä¸Šçº§ç›®å½•ã€‚<br>
Fileå¯¹è±¡æœ‰3ç§å½¢å¼è¡¨ç¤ºçš„è·¯å¾„ï¼Œä¸€ç§æ˜¯getPath()ï¼Œè¿”å›æ„é€ æ–¹æ³•ä¼ å…¥çš„è·¯å¾„ï¼Œä¸€ç§æ˜¯getAbsolutePath()ï¼Œè¿”å›ç»å¯¹è·¯å¾„ï¼Œä¸€ç§æ˜¯getCanonicalPathï¼Œå®ƒå’Œç»å¯¹è·¯å¾„ç±»ä¼¼ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯è§„èŒƒè·¯å¾„ã€‚</p>
<h3 id="æ–‡ä»¶å’Œç›®å½•"><a class="header-anchor" href="#æ–‡ä»¶å’Œç›®å½•">Â¶</a>æ–‡ä»¶å’Œç›®å½•</h3>
<p>Fileå¯¹è±¡æ—¢å¯ä»¥è¡¨ç¤ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç›®å½•ã€‚ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œæ„é€ ä¸€ä¸ªFileå¯¹è±¡ï¼Œå³ä½¿ä¼ å…¥çš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œä»£ç ä¹Ÿä¸ä¼šå‡ºé”™ï¼Œå› ä¸ºæ„é€ ä¸€ä¸ªFileå¯¹è±¡ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ä»»ä½•ç£ç›˜æ“ä½œã€‚åªæœ‰å½“æˆ‘ä»¬è°ƒç”¨Fileå¯¹è±¡çš„æŸäº›æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰çœŸæ­£è¿›è¡Œç£ç›˜æ“ä½œã€‚</p>
<p>ä¾‹å¦‚ï¼Œè°ƒç”¨.isFile()ï¼Œåˆ¤æ–­è¯¥Fileå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œè°ƒç”¨.isDirectory()ï¼Œåˆ¤æ–­è¯¥Fileå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ã€‚</p>
<p>ç”¨Fileå¯¹è±¡è·å–åˆ°ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥åˆ¤æ–­æ–‡ä»¶çš„æƒé™å’Œå¤§å°ï¼š</p>
<ul>
<li>boolean canRead()ï¼šæ˜¯å¦å¯è¯»ï¼›</li>
<li>boolean canWrite()ï¼šæ˜¯å¦å¯å†™ï¼›</li>
<li>boolean canExecute()ï¼šæ˜¯å¦å¯æ‰§è¡Œï¼›</li>
<li>long length()ï¼šæ–‡ä»¶å­—èŠ‚å¤§å°ã€‚<br>
å¯¹ç›®å½•è€Œè¨€ï¼Œæ˜¯å¦å¯æ‰§è¡Œè¡¨ç¤ºèƒ½å¦åˆ—å‡ºå®ƒåŒ…å«çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚</li>
</ul>
<h3 id="åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶"><a class="header-anchor" href="#åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶">Â¶</a>åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶</h3>
<p>å½“Fileå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡createNewFile()åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œç”¨delete()åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p>
<p>æœ‰äº›æ—¶å€™ï¼Œç¨‹åºéœ€è¦è¯»å†™ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼ŒFileå¯¹è±¡æä¾›äº†createTempFile()æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä»¥åŠdeleteOnExit()åœ¨JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File f = File.createTempFile(<span class="string">"tmp-"</span>, <span class="string">".txt"</span>); <span class="comment">// æä¾›ä¸´æ—¶æ–‡ä»¶çš„å‰ç¼€å’Œåç¼€</span></span><br><span class="line">        f.deleteOnExit(); <span class="comment">// JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line">        System.out.println(f.isFile());</span><br><span class="line">        System.out.println(f.getAbsolutePath());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="éå†æ–‡ä»¶å’Œç›®å½•"><a class="header-anchor" href="#éå†æ–‡ä»¶å’Œç›®å½•">Â¶</a>éå†æ–‡ä»¶å’Œç›®å½•</h3>
<p>å½“Fileå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªç›®å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨list()å’ŒlistFiles()åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•åã€‚listFiles()æä¾›äº†ä¸€ç³»åˆ—é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è¿‡æ»¤ä¸æƒ³è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"C:\\Windows"</span>);</span><br><span class="line">        File[] fs1 = f.listFiles(); <span class="comment">// åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span></span><br><span class="line">        printFiles(fs1);</span><br><span class="line">        File[] fs2 = f.listFiles(<span class="keyword">new</span> FilenameFilter() &#123; <span class="comment">// ä»…åˆ—å‡º.exeæ–‡ä»¶</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> name.endsWith(<span class="string">".exe"</span>); <span class="comment">// è¿”å›trueè¡¨ç¤ºæ¥å—è¯¥æ–‡ä»¶</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        printFiles(fs2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printFiles</span><span class="params">(File[] files)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"=========="</span>);</span><br><span class="line">        <span class="keyword">if</span> (files != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">                System.out.println(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"=========="</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œæ–‡ä»¶æ“ä½œç±»ä¼¼ï¼ŒFileå¯¹è±¡å¦‚æœè¡¨ç¤ºä¸€ä¸ªç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå’Œåˆ é™¤ç›®å½•ï¼š</p>
<ul>
<li>boolean mkdir()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼›</li>
<li>boolean mkdirs()ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥ï¼›</li>
<li>boolean delete()ï¼šåˆ é™¤å½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå½“å‰ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤æˆåŠŸã€‚</li>
</ul>
<h1>Path</h1>
<p>Javaæ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ªPathå¯¹è±¡ï¼Œå®ƒä½äºjava.nio.fileåŒ…ã€‚Pathå¯¹è±¡å’ŒFileå¯¹è±¡ç±»ä¼¼ï¼Œä½†æ“ä½œæ›´åŠ ç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Path p1 = Paths.get(<span class="string">"."</span>, <span class="string">"project"</span>, <span class="string">"study"</span>); <span class="comment">// æ„é€ ä¸€ä¸ªPathå¯¹è±¡</span></span><br><span class="line">        System.out.println(p1);</span><br><span class="line">        Path p2 = p1.toAbsolutePath(); <span class="comment">// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„</span></span><br><span class="line">        System.out.println(p2);</span><br><span class="line">        Path p3 = p2.normalize(); <span class="comment">// è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„</span></span><br><span class="line">        System.out.println(p3);</span><br><span class="line">        File f = p3.toFile(); <span class="comment">// è½¬æ¢ä¸ºFileå¯¹è±¡</span></span><br><span class="line">        System.out.println(f);</span><br><span class="line">        <span class="keyword">for</span> (Path p : Paths.get(<span class="string">".."</span>).toAbsolutePath()) &#123; <span class="comment">// å¯ä»¥ç›´æ¥éå†Path</span></span><br><span class="line">            System.out.println(<span class="string">"  "</span> + p);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦å¯¹ç›®å½•è¿›è¡Œå¤æ‚çš„æ‹¼æ¥ã€éå†ç­‰æ“ä½œï¼Œä½¿ç”¨Pathå¯¹è±¡æ›´æ–¹ä¾¿ã€‚</p>
<h1>InputStream</h1>
<p>InputStreamå¹¶ä¸æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å…¥æµçš„è¶…ç±»ã€‚è¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯int read()ï¼Œç­¾åå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›å­—èŠ‚è¡¨ç¤ºçš„intå€¼ï¼ˆ0~255ï¼‰ã€‚å¦‚æœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›-1è¡¨ç¤ºä¸èƒ½ç»§ç»­è¯»å–äº†ã€‚<br>
FileInputStreamæ˜¯InputStreamçš„ä¸€ä¸ªå­ç±»ã€‚é¡¾åæ€ä¹‰ï¼ŒFileInputStreamå°±æ˜¯ä»æ–‡ä»¶æµä¸­è¯»å–æ•°æ®ã€‚<br>
ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼šå¦‚æœè¯»å–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†IOé”™è¯¯ï¼ŒInputStreamå°±æ²¡æ³•æ­£ç¡®åœ°å…³é—­ï¼Œèµ„æºä¹Ÿå°±æ²¡æ³•åŠæ—¶é‡Šæ”¾ã€‚<br>
å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨try â€¦ finallyæ¥ä¿è¯InputStreamåœ¨æ— è®ºæ˜¯å¦å‘ç”ŸIOé”™è¯¯çš„æ—¶å€™éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å…³é—­ã€‚<br>
ç”¨try â€¦ finallyæ¥ç¼–å†™ä¸Šè¿°ä»£ç ä¼šæ„Ÿè§‰æ¯”è¾ƒå¤æ‚ï¼Œæ›´å¥½çš„å†™æ³•æ˜¯åˆ©ç”¨Java 7å¼•å…¥çš„æ–°çš„try(resource)çš„è¯­æ³•ï¼Œåªéœ€è¦ç¼–å†™tryè¯­å¥ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬å…³é—­èµ„æºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (InputStream input = <span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>)) &#123;</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="keyword">while</span> ((n = input.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// ç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close()</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šç‰¹åˆ«åœ°ä¸ºInputStreamåŠ ä¸Šè‡ªåŠ¨å…³é—­ã€‚ç¼–è¯‘å™¨åªçœ‹try(resource = â€¦)ä¸­çš„å¯¹è±¡æ˜¯å¦å®ç°äº†java.lang.AutoCloseableæ¥å£ï¼Œå¦‚æœå®ç°äº†ï¼Œå°±è‡ªåŠ¨åŠ ä¸Šfinallyè¯­å¥å¹¶è°ƒç”¨close()æ–¹æ³•ã€‚InputStreamå’ŒOutputStreaméƒ½å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå› æ­¤ï¼Œéƒ½å¯ä»¥ç”¨åœ¨try(resource)ä¸­ã€‚</p>
<h3 id="ç¼“å†²"><a class="header-anchor" href="#ç¼“å†²">Â¶</a>ç¼“å†²</h3>
<p>åœ¨è¯»å–æµçš„æ—¶å€™ï¼Œä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚å¹¶ä¸æ˜¯æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚å¾ˆå¤šæµæ”¯æŒä¸€æ¬¡æ€§è¯»å–å¤šä¸ªå­—èŠ‚åˆ°ç¼“å†²åŒºï¼Œå¯¹äºæ–‡ä»¶å’Œç½‘ç»œæµæ¥è¯´ï¼Œåˆ©ç”¨ç¼“å†²åŒºä¸€æ¬¡æ€§è¯»å–å¤šä¸ªå­—èŠ‚æ•ˆç‡å¾€å¾€è¦é«˜å¾ˆå¤šã€‚InputStreamæä¾›äº†ä¸¤ä¸ªé‡è½½æ–¹æ³•æ¥æ”¯æŒè¯»å–å¤šä¸ªå­—èŠ‚ï¼š</p>
<ul>
<li>int read(byte[] b)ï¼šè¯»å–è‹¥å¹²å­—èŠ‚å¹¶å¡«å……åˆ°byte[]æ•°ç»„ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°</li>
<li>int read(byte[] b, int off, int len)ï¼šæŒ‡å®šbyte[]æ•°ç»„çš„åç§»é‡å’Œæœ€å¤§å¡«å……æ•°<br>
åˆ©ç”¨ä¸Šè¿°æ–¹æ³•ä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚æ—¶ï¼Œéœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªbyte[]æ•°ç»„ä½œä¸ºç¼“å†²åŒºï¼Œread()æ–¹æ³•ä¼šå°½å¯èƒ½å¤šåœ°è¯»å–å­—èŠ‚åˆ°ç¼“å†²åŒºï¼Œ ä½†ä¸ä¼šè¶…è¿‡ç¼“å†²åŒºçš„å¤§å°ã€‚read()æ–¹æ³•çš„è¿”å›å€¼ä¸å†æ˜¯å­—èŠ‚çš„intå€¼ï¼Œè€Œæ˜¯è¿”å›å®é™…è¯»å–äº†å¤šå°‘ä¸ªå­—èŠ‚ã€‚å¦‚æœè¿”å›-1ï¼Œè¡¨ç¤ºæ²¡æœ‰æ›´å¤šçš„æ•°æ®äº†ã€‚<br>
åˆ©ç”¨ç¼“å†²åŒºä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚çš„ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (InputStream input = <span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>)) &#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰1000ä¸ªå­—èŠ‚å¤§å°çš„ç¼“å†²åŒº:</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1000</span>];</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="keyword">while</span> ((n = input.read(buffer)) != -<span class="number">1</span>) &#123; <span class="comment">// è¯»å–åˆ°ç¼“å†²åŒº</span></span><br><span class="line">            System.out.println(<span class="string">"read "</span> + n + <span class="string">" bytes."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é˜»å¡"><a class="header-anchor" href="#é˜»å¡">Â¶</a>é˜»å¡</h3>
<p>åœ¨è°ƒç”¨InputStreamçš„read()æ–¹æ³•è¯»å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¯´read()æ–¹æ³•æ˜¯é˜»å¡ï¼ˆBlockingï¼‰çš„ã€‚å¿…é¡»ç­‰å¾…read()æ–¹æ³•è¿”å›æ‰èƒ½æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ã€‚</p>
<h3 id="InputStreamå®ç°ç±»"><a class="header-anchor" href="#InputStreamå®ç°ç±»">Â¶</a>InputStreamå®ç°ç±»</h3>
<p>ByteArrayInputStreamå¯ä»¥åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿä¸€ä¸ªInputStreamã€‚å®é™…ä¸Šæ˜¯æŠŠä¸€ä¸ªbyte[]æ•°ç»„åœ¨å†…å­˜ä¸­å˜æˆä¸€ä¸ªInputStreamï¼Œè™½ç„¶å®é™…åº”ç”¨ä¸å¤šï¼Œä½†æµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å®ƒæ¥æ„é€ ä¸€ä¸ªInputStreamã€‚<br>
æˆ‘ä»¬æƒ³ä»æ–‡ä»¶ä¸­è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå¹¶è½¬æ¢æˆcharç„¶åæ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = readAsString(input);</span><br></pre></td></tr></table></figure>
<h1>OutputStream</h1>
<p>OutputStreamä¹Ÿæ˜¯æŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å‡ºæµçš„è¶…ç±»ã€‚è¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯void write(int b)ï¼Œç­¾åå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> b)</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ä¼šå†™å…¥ä¸€ä¸ªå­—èŠ‚åˆ°è¾“å‡ºæµã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ä¼ å…¥çš„æ˜¯intå‚æ•°ï¼Œä½†åªä¼šå†™å…¥ä¸€ä¸ªå­—èŠ‚ï¼Œå³åªå†™å…¥intæœ€ä½8ä½è¡¨ç¤ºå­—èŠ‚çš„éƒ¨åˆ†ï¼ˆç›¸å½“äºb &amp; 0xffï¼‰ã€‚</p>
<p>å’ŒInputStreamç±»ä¼¼ï¼ŒOutputStreamä¹Ÿæä¾›äº†close()æ–¹æ³•å…³é—­è¾“å‡ºæµï¼Œä»¥ä¾¿é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚è¦ç‰¹åˆ«æ³¨æ„ï¼šOutputStreamè¿˜æä¾›äº†ä¸€ä¸ªflush()æ–¹æ³•ï¼Œå®ƒçš„ç›®çš„æ˜¯å°†ç¼“å†²åŒºçš„å†…å®¹çœŸæ­£è¾“å‡ºåˆ°ç›®çš„åœ°ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦æœ‰flush()ï¼Ÿå› ä¸ºå‘ç£ç›˜ã€ç½‘ç»œå†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯è¾“å‡ºä¸€ä¸ªå­—èŠ‚å°±ç«‹åˆ»å†™å…¥åˆ°æ–‡ä»¶æˆ–è€…å‘é€åˆ°ç½‘ç»œï¼Œè€Œæ˜¯æŠŠè¾“å‡ºçš„å­—èŠ‚å…ˆæ”¾åˆ°å†…å­˜çš„ä¸€ä¸ªç¼“å†²åŒºé‡Œï¼ˆæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªbyte[]æ•°ç»„ï¼‰ï¼Œç­‰åˆ°ç¼“å†²åŒºå†™æ»¡äº†ï¼Œå†ä¸€æ¬¡æ€§å†™å…¥æ–‡ä»¶æˆ–è€…ç½‘ç»œã€‚å¯¹äºå¾ˆå¤šIOè®¾å¤‡æ¥è¯´ï¼Œä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚å’Œä¸€æ¬¡å†™1000ä¸ªå­—èŠ‚ï¼ŒèŠ±è´¹çš„æ—¶é—´å‡ ä¹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæ‰€ä»¥OutputStreamæœ‰ä¸ªflush()æ–¹æ³•ï¼Œèƒ½å¼ºåˆ¶æŠŠç¼“å†²åŒºå†…å®¹è¾“å‡ºã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨è¿™ä¸ªflush()æ–¹æ³•ï¼Œå› ä¸ºç¼“å†²åŒºå†™æ»¡äº†OutputStreamä¼šè‡ªåŠ¨è°ƒç”¨å®ƒï¼Œå¹¶ä¸”ï¼Œåœ¨è°ƒç”¨close()æ–¹æ³•å…³é—­OutputStreamä¹‹å‰ï¼Œä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨flush()æ–¹æ³•ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨è°ƒç”¨flush()æ–¹æ³•ã€‚ä¸¾ä¸ªæ —å­ï¼š</p>
<p>å°æ˜æ­£åœ¨å¼€å‘ä¸€æ¬¾åœ¨çº¿èŠå¤©è½¯ä»¶ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€å¥è¯åï¼Œå°±é€šè¿‡OutputStreamçš„write()æ–¹æ³•å†™å…¥ç½‘ç»œæµã€‚å°æ˜æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå‘é€æ–¹è¾“å…¥åï¼Œæ¥æ”¶æ–¹æ ¹æœ¬æ”¶ä¸åˆ°ä»»ä½•ä¿¡æ¯ï¼Œæ€ä¹ˆè‚¥å››ï¼Ÿ</p>
<p>åŸå› å°±åœ¨äºå†™å…¥ç½‘ç»œæµæ˜¯å…ˆå†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œç­‰ç¼“å†²åŒºæ»¡äº†æ‰ä¼šä¸€æ¬¡æ€§å‘é€åˆ°ç½‘ç»œã€‚å¦‚æœç¼“å†²åŒºå¤§å°æ˜¯4Kï¼Œåˆ™å‘é€æ–¹è¦æ•²å‡ åƒä¸ªå­—ç¬¦åï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šæŠŠç¼“å†²åŒºçš„å†…å®¹å‘é€å‡ºå»ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ¥æ”¶æ–¹ä¼šä¸€æ¬¡æ€§æ”¶åˆ°å¤§é‡æ¶ˆæ¯ã€‚</p>
<p>è§£å†³åŠæ³•å°±æ˜¯æ¯è¾“å…¥ä¸€å¥è¯åï¼Œç«‹åˆ»è°ƒç”¨flush()ï¼Œä¸ç®¡å½“å‰ç¼“å†²åŒºæ˜¯å¦å·²æ»¡ï¼Œå¼ºè¿«æ“ä½œç³»ç»ŸæŠŠç¼“å†²åŒºçš„å†…å®¹ç«‹åˆ»å‘é€å‡ºå»ã€‚</p>
<p>å®é™…ä¸Šï¼ŒInputStreamä¹Ÿæœ‰ç¼“å†²åŒºã€‚ä¾‹å¦‚ï¼Œä»FileInputStreamè¯»å–ä¸€ä¸ªå­—èŠ‚æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¾€å¾€ä¼šä¸€æ¬¡æ€§è¯»å–è‹¥å¹²å­—èŠ‚åˆ°ç¼“å†²åŒºï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æœªè¯»çš„ç¼“å†²åŒºã€‚ç„¶åï¼Œæ¯æ¬¡æˆ‘ä»¬è°ƒç”¨int read()è¯»å–ä¸‹ä¸€ä¸ªå­—èŠ‚æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿”å›ç¼“å†²åŒºçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œé¿å…æ¯æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚éƒ½å¯¼è‡´IOæ“ä½œã€‚å½“ç¼“å†²åŒºå…¨éƒ¨è¯»å®Œåç»§ç»­è°ƒç”¨read()ï¼Œåˆ™ä¼šè§¦å‘æ“ä½œç³»ç»Ÿçš„ä¸‹ä¸€æ¬¡è¯»å–å¹¶å†æ¬¡å¡«æ»¡ç¼“å†²åŒºã€‚</p>
<h3 id="FileOutputStream"><a class="header-anchor" href="#FileOutputStream">Â¶</a>FileOutputStream</h3>
<p>å’ŒInputStreamä¸€æ ·ï¼Œä¸Šè¿°ä»£ç æ²¡æœ‰è€ƒè™‘åˆ°åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹å¦‚ä½•æ­£ç¡®åœ°å…³é—­èµ„æºã€‚å†™å…¥è¿‡ç¨‹ä¹Ÿä¼šç»å¸¸å‘ç”ŸIOé”™è¯¯ï¼Œä¾‹å¦‚ï¼Œç£ç›˜å·²æ»¡ï¼Œæ— æƒé™å†™å…¥ç­‰ç­‰ã€‚æˆ‘ä»¬éœ€è¦ç”¨try(resource)æ¥ä¿è¯OutputStreamåœ¨æ— è®ºæ˜¯å¦å‘ç”ŸIOé”™è¯¯çš„æ—¶å€™éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å…³é—­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (OutputStream output = <span class="keyword">new</span> FileOutputStream(<span class="string">"out/readme.txt"</span>)) &#123;</span><br><span class="line">        output.write(<span class="string">"Hello"</span>.getBytes(<span class="string">"UTF-8"</span>)); <span class="comment">// Hello</span></span><br><span class="line">    &#125; <span class="comment">// ç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é˜»å¡-v2"><a class="header-anchor" href="#é˜»å¡-v2">Â¶</a>é˜»å¡</h3>
<p>å’ŒInputStreamä¸€æ ·ï¼ŒOutputStreamçš„write()æ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„ã€‚</p>
<h3 id="OutputStreamå®ç°ç±»"><a class="header-anchor" href="#OutputStreamå®ç°ç±»">Â¶</a>OutputStreamå®ç°ç±»</h3>
<p>ByteArrayOutputStreamå¯ä»¥åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿä¸€ä¸ªOutputStreamï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ByteArrayOutputStream output = <span class="keyword">new</span> ByteArrayOutputStream();</span><br></pre></td></tr></table></figure>
<h1>Filteræ¨¡å¼</h1>
<p>Javaçš„IOæ ‡å‡†åº“ä½¿ç”¨Filteræ¨¡å¼ä¸ºInputStreamå’ŒOutputStreamå¢åŠ åŠŸèƒ½ï¼š</p>
<ul>
<li>å¯ä»¥æŠŠä¸€ä¸ªInputStreamå’Œä»»æ„ä¸ªFilterInputStreamç»„åˆï¼›</li>
<li>å¯ä»¥æŠŠä¸€ä¸ªOutputStreamå’Œä»»æ„ä¸ªFilterOutputStreamç»„åˆã€‚<br>
Filteræ¨¡å¼å¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€å¢åŠ åŠŸèƒ½ï¼ˆåˆç§°Decoratoræ¨¡å¼ï¼‰ã€‚<br>
å¯ä»¥å åŠ å¤šä¸ªFilterInputStreamæ¥æä¾›åŠŸèƒ½ã€‚</li>
</ul>
<h1>æ“ä½œzip</h1>
<p>JarInputStreamæ˜¯ä»ZipInputStreamæ´¾ç”Ÿï¼Œå®ƒå¢åŠ çš„ä¸»è¦åŠŸèƒ½æ˜¯ç›´æ¥è¯»å–jaræ–‡ä»¶é‡Œé¢çš„MANIFEST.MFæ–‡ä»¶ã€‚å› ä¸ºæœ¬è´¨ä¸ŠjaråŒ…å°±æ˜¯zipåŒ…ï¼Œåªæ˜¯é¢å¤–é™„åŠ äº†ä¸€äº›å›ºå®šçš„æè¿°æ–‡ä»¶ã€‚</p>
<h2 id="è¯»å–zipåŒ…"><a class="header-anchor" href="#è¯»å–zipåŒ…">Â¶</a>è¯»å–zipåŒ…</h2>
<p>åˆ›å»ºä¸€ä¸ªZipInputStreamï¼Œé€šå¸¸æ˜¯ä¼ å…¥ä¸€ä¸ªFileInputStreamä½œä¸ºæ•°æ®æºï¼Œç„¶åï¼Œå¾ªç¯è°ƒç”¨getNextEntry()ï¼Œç›´åˆ°è¿”å›nullï¼Œè¡¨ç¤ºzipæµç»“æŸã€‚</p>
<p>ä¸€ä¸ªZipEntryè¡¨ç¤ºä¸€ä¸ªå‹ç¼©æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç”¨read()æ–¹æ³•ä¸æ–­è¯»å–ï¼Œç›´åˆ°è¿”å›-1ã€‚</p>
<h2 id="å†™å…¥zipåŒ…"><a class="header-anchor" href="#å†™å…¥zipåŒ…">Â¶</a>å†™å…¥zipåŒ…</h2>
<p>ZipOutputStreamæ˜¯ä¸€ç§FilterOutputStreamï¼Œå®ƒå¯ä»¥ç›´æ¥å†™å…¥å†…å®¹åˆ°zipåŒ…ã€‚æˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ªZipOutputStreamï¼Œé€šå¸¸æ˜¯åŒ…è£…ä¸€ä¸ªFileOutputStreamï¼Œç„¶åï¼Œæ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶å‰ï¼Œå…ˆè°ƒç”¨putNextEntry()ï¼Œç„¶åç”¨write()å†™å…¥byte[]æ•°æ®ï¼Œå†™å…¥å®Œæ¯•åè°ƒç”¨closeEntry()ç»“æŸè¿™ä¸ªæ–‡ä»¶çš„æ‰“åŒ…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (ZipOutputStream zip = <span class="keyword">new</span> ZipOutputStream(<span class="keyword">new</span> FileOutputStream(...))) &#123;</span><br><span class="line">    File[] files = ...</span><br><span class="line">    <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">        zip.putNextEntry(<span class="keyword">new</span> ZipEntry(file.getName()));</span><br><span class="line">        zip.write(getFileDataAsBytes(file));</span><br><span class="line">        zip.closeEntry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç æ²¡æœ‰è€ƒè™‘æ–‡ä»¶çš„ç›®å½•ç»“æ„ã€‚å¦‚æœè¦å®ç°ç›®å½•å±‚æ¬¡ç»“æ„ï¼Œnew ZipEntry(name)ä¼ å…¥çš„nameè¦ç”¨ç›¸å¯¹è·¯å¾„ã€‚</p>
<h1>classpath</h1>
<p>ä»classpathè¯»å–æ–‡ä»¶å°±å¯ä»¥é¿å…ä¸åŒç¯å¢ƒä¸‹æ–‡ä»¶è·¯å¾„ä¸ä¸€è‡´çš„é—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬æŠŠdefault.propertiesæ–‡ä»¶æ”¾åˆ°classpathä¸­ï¼Œå°±ä¸ç”¨å…³å¿ƒå®ƒçš„å®é™…å­˜æ”¾è·¯å¾„ã€‚<br>
åœ¨classpathä¸­çš„èµ„æºæ–‡ä»¶ï¼Œè·¯å¾„æ€»æ˜¯ä»¥ï¼å¼€å¤´ï¼Œæˆ‘ä»¬å…ˆè·å–å½“å‰çš„Classå¯¹è±¡ï¼Œç„¶åè°ƒç”¨getResourceAsStream()å°±å¯ä»¥ç›´æ¥ä»classpathè¯»å–ä»»æ„çš„èµ„æºæ–‡ä»¶.<br>
è°ƒç”¨getResourceAsStream()éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœèµ„æºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå®ƒå°†è¿”å›nullã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥è¿”å›çš„InputStreamæ˜¯å¦ä¸ºnullï¼Œå¦‚æœä¸ºnullï¼Œè¡¨ç¤ºèµ„æºæ–‡ä»¶åœ¨classpathä¸­æ²¡æœ‰æ‰¾åˆ°ã€‚</p>
<h1>åºåˆ—åŒ–</h1>
<p>åºåˆ—åŒ–åå¯ä»¥æŠŠbyte[]ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæˆ–è€…æŠŠbyte[]é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°è¿œç¨‹ï¼Œè¿™æ ·ï¼Œå°±ç›¸å½“äºæŠŠJavaå¯¹è±¡å­˜å‚¨åˆ°æ–‡ä»¶æˆ–è€…é€šè¿‡ç½‘ç»œä¼ è¾“å‡ºå»äº†ã€‚</p>
<p>ååºåˆ—åŒ–ï¼Œå³æŠŠä¸€ä¸ªäºŒè¿›åˆ¶å†…å®¹ï¼ˆä¹Ÿå°±æ˜¯byte[]æ•°ç»„ï¼‰å˜å›Javaå¯¹è±¡ã€‚æœ‰äº†ååºåˆ—åŒ–ï¼Œä¿å­˜åˆ°æ–‡ä»¶ä¸­çš„byte[]æ•°ç»„åˆå¯ä»¥â€œå˜å›â€Javaå¯¹è±¡ï¼Œæˆ–è€…ä»ç½‘ç»œä¸Šè¯»å–byte[]å¹¶æŠŠå®ƒâ€œå˜å›â€Javaå¯¹è±¡ã€‚</p>
<p>è¦èƒ½åºåˆ—åŒ–ï¼Œå®ç°java.io.Serializableæ¥å£ã€‚Serializableæ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œç§°ä¸ºâ€œæ ‡è®°æ¥å£â€ï¼ˆMarker Interfaceï¼‰ï¼Œå®ç°äº†æ ‡è®°æ¥å£çš„ç±»ä»…ä»…æ˜¯ç»™è‡ªèº«è´´äº†ä¸ªâ€œæ ‡è®°â€ï¼Œå¹¶æ²¡æœ‰å¢åŠ ä»»ä½•æ–¹æ³•ã€‚</p>
<h3 id="åºåˆ—åŒ–"><a class="header-anchor" href="#åºåˆ—åŒ–">Â¶</a>åºåˆ—åŒ–</h3>
<p>ä½¿ç”¨ObjectOutputStreamã€‚å®ƒè´Ÿè´£æŠŠä¸€ä¸ªJavaå¯¹è±¡å†™å…¥ä¸€ä¸ªå­—èŠ‚æµï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    ByteArrayOutputStream buffer = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">    <span class="keyword">try</span> (ObjectOutputStream output = <span class="keyword">new</span> ObjectOutputStream(buffer)) &#123;</span><br><span class="line">        <span class="comment">// å†™å…¥int:</span></span><br><span class="line">        output.writeInt(<span class="number">12345</span>);</span><br><span class="line">            <span class="comment">// å†™å…¥String:</span></span><br><span class="line">        output.writeUTF(<span class="string">"Hello"</span>);</span><br><span class="line">            <span class="comment">// å†™å…¥Object:</span></span><br><span class="line">        output.writeObject(Double.valueOf(<span class="number">123.456</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Arrays.toString(buffer.toByteArray()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥å†™å…¥å®ç°äº†Serializableæ¥å£çš„Objectã€‚</p>
<h3 id="ååºåˆ—åŒ–"><a class="header-anchor" href="#ååºåˆ—åŒ–">Â¶</a>ååºåˆ—åŒ–</h3>
<p>ObjectInputStreamè´Ÿè´£ä»ä¸€ä¸ªå­—èŠ‚æµè¯»å–Javaå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (ObjectInputStream input = <span class="keyword">new</span> ObjectInputStream(...)) &#123;</span><br><span class="line">    <span class="keyword">int</span> n = input.readInt();</span><br><span class="line">    String s = input.readUTF();</span><br><span class="line">    Double d = (Double) input.readObject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨readObject()å¯ä»¥ç›´æ¥è¿”å›ä¸€ä¸ªObjectå¯¹è±¡ã€‚<br>
Javaçš„åºåˆ—åŒ–å…è®¸classå®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„serialVersionUIDé™æ€å˜é‡ï¼Œç”¨äºæ ‡è¯†Javaç±»çš„åºåˆ—åŒ–â€œç‰ˆæœ¬â€ï¼Œé€šå¸¸å¯ä»¥ç”±IDEè‡ªåŠ¨ç”Ÿæˆã€‚<br>
ååºåˆ—åŒ–æ—¶ï¼Œç”±JVMç›´æ¥æ„é€ å‡ºJavaå¯¹è±¡ï¼Œä¸è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•å†…éƒ¨çš„ä»£ç ï¼Œåœ¨ååºåˆ—åŒ–æ—¶æ ¹æœ¬ä¸å¯èƒ½æ‰§è¡Œã€‚</p>
<h3 id="å®‰å…¨å‹"><a class="header-anchor" href="#å®‰å…¨å‹">Â¶</a>å®‰å…¨å‹</h3>
<p>å› ä¸ºJavaçš„åºåˆ—åŒ–æœºåˆ¶å¯ä»¥å¯¼è‡´ä¸€ä¸ªå®ä¾‹èƒ½ç›´æ¥ä»byte[]æ•°ç»„åˆ›å»ºï¼Œè€Œä¸ç»è¿‡æ„é€ æ–¹æ³•ï¼Œå› æ­¤ï¼Œå®ƒå­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ã€‚ä¸€ä¸ªç²¾å¿ƒæ„é€ çš„byte[]æ•°ç»„è¢«ååºåˆ—åŒ–åå¯ä»¥æ‰§è¡Œç‰¹å®šçš„Javaä»£ç ï¼Œä»è€Œå¯¼è‡´ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚</p>
<p>å®é™…ä¸Šï¼ŒJavaæœ¬èº«æä¾›çš„åŸºäºå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœºåˆ¶æ—¢å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¹Ÿå­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚æ›´å¥½çš„åºåˆ—åŒ–æ–¹æ³•æ˜¯é€šè¿‡JSONè¿™æ ·çš„é€šç”¨æ•°æ®ç»“æ„æ¥å®ç°ï¼Œåªè¾“å‡ºåŸºæœ¬ç±»å‹ï¼ˆåŒ…æ‹¬Stringï¼‰çš„å†…å®¹ï¼Œè€Œä¸å­˜å‚¨ä»»ä½•ä¸ä»£ç ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<h1>Reader</h1>
<p>Readeræ˜¯ä»¥å­—ç¬¦æµï¼Œå³charä¸ºå•ä½è¯»å–ã€‚<br>
è¿™ä¸ªæ–¹æ³•è¯»å–å­—ç¬¦æµçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿”å›å­—ç¬¦è¡¨ç¤ºçš„intï¼ŒèŒƒå›´æ˜¯0~65535ã€‚å¦‚æœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›-1ã€‚</p>
<h2 id="FileReader"><a class="header-anchor" href="#FileReader">Â¶</a>FileReader</h2>
<p>FileReaderæ˜¯Readerçš„ä¸€ä¸ªå­ç±»ï¼Œå®ƒå¯ä»¥æ‰“å¼€æ–‡ä»¶å¹¶è·å–Readerã€‚<br>
è¦é¿å…ä¹±ç é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆ›å»ºFileReaderæ—¶æŒ‡å®šç¼–ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Reader reader = <span class="keyword">new</span> FileReader(<span class="string">"src/readme.txt"</span>,StandardCharsets.UTF_8);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å…ˆè®¾ç½®ä¸€ä¸ªç¼“å†²åŒºï¼Œç„¶åï¼Œæ¯æ¬¡å°½å¯èƒ½åœ°å¡«å……ç¼“å†²åŒºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> (Reader reader = <span class="keyword">new</span> FileReader(<span class="string">"src/readme.txt"</span>, StandardCharsets.UTF_8)) &#123;</span><br><span class="line">        <span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1000</span>];</span><br><span class="line">        <span class="keyword">int</span> n;</span><br><span class="line">        <span class="keyword">while</span> ((n = reader.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"read "</span> + n + <span class="string">" chars."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="CharArrayReader"><a class="header-anchor" href="#CharArrayReader">Â¶</a>CharArrayReader</h3>
<p>CharArrayReaderå¯ä»¥åœ¨å†…å­˜ä¸­æ¨¡æ‹Ÿä¸€ä¸ªReaderï¼Œå®ƒçš„ä½œç”¨å®é™…ä¸Šæ˜¯æŠŠä¸€ä¸ªchar[]æ•°ç»„å˜æˆä¸€ä¸ªReaderï¼Œè¿™å’ŒByteArrayInputStreaméå¸¸ç±»ä¼¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (Reader reader = <span class="keyword">new</span> CharArrayReader(<span class="string">"Hello"</span>.toCharArray())) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="StringReader"><a class="header-anchor" href="#StringReader">Â¶</a>StringReader</h3>
<p>StringReaderå¯ä»¥ç›´æ¥æŠŠStringä½œä¸ºæ•°æ®æºã€‚</p>
<h3 id="InputStreamReader"><a class="header-anchor" href="#InputStreamReader">Â¶</a>InputStreamReader</h3>
<p>FileReaderçš„æºç ï¼Œå®ƒåœ¨å†…éƒ¨å®é™…ä¸ŠæŒæœ‰ä¸€ä¸ªFileInputStreamã€‚Readeréœ€è¦ä»InputStreamä¸­è¯»å…¥å­—èŠ‚æµï¼ˆbyteï¼‰ï¼Œç„¶åï¼Œæ ¹æ®ç¼–ç è®¾ç½®ï¼Œå†è½¬æ¢ä¸ºcharå°±å¯ä»¥å®ç°å­—ç¬¦æµã€‚<br>
InputStreamReaderå°±æ˜¯è¿™æ ·ä¸€ä¸ªè½¬æ¢å™¨ï¼Œå®ƒå¯ä»¥æŠŠä»»ä½•InputStreamè½¬æ¢ä¸ºReaderã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (Reader reader = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"src/readme.txt"</span>), <span class="string">"UTF-8"</span>)) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Writer</h1>
<p>Writerå¸¦ç¼–ç è½¬æ¢å™¨çš„OutputStreamï¼Œcharè½¬æ¢ä¸ºbyteå¹¶è¾“å‡ºã€‚</p>
<h3 id="FileWriter"><a class="header-anchor" href="#FileWriter">Â¶</a>FileWriter</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (Writer writer = <span class="keyword">new</span> FileWriter(<span class="string">"readme.txt"</span>, StandardCharsets.UTF_8)) &#123;</span><br><span class="line">    writer.write(<span class="string">'H'</span>); <span class="comment">// å†™å…¥å•ä¸ªå­—ç¬¦</span></span><br><span class="line">    writer.write(<span class="string">"Hello"</span>.toCharArray()); <span class="comment">// å†™å…¥char[]</span></span><br><span class="line">    writer.write(<span class="string">"Hello"</span>); <span class="comment">// å†™å…¥String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="CharArrayWriter"><a class="header-anchor" href="#CharArrayWriter">Â¶</a>CharArrayWriter</h3>
<p>CharArrayWriterå¯ä»¥åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªWriterï¼Œå®ƒçš„ä½œç”¨å®é™…ä¸Šæ˜¯æ„é€ ä¸€ä¸ªç¼“å†²åŒºï¼Œå¯ä»¥å†™å…¥charï¼Œæœ€åå¾—åˆ°å†™å…¥çš„char[]æ•°ç»„ï¼Œè¿™å’ŒByteArrayOutputStreaméå¸¸ç±»ä¼¼ã€‚</p>
<h3 id="StringWriter"><a class="header-anchor" href="#StringWriter">Â¶</a>StringWriter</h3>
<p>å®é™…ä¸Šï¼ŒStringWriteråœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªStringBufferï¼Œå¹¶å¯¹å¤–æä¾›äº†Writeræ¥å£ã€‚</p>
<h3 id="OutputStreamWriter"><a class="header-anchor" href="#OutputStreamWriter">Â¶</a>OutputStreamWriter</h3>
<p>æ™®é€šçš„Writerå®é™…ä¸Šæ˜¯åŸºäºOutputStreamæ„é€ çš„ï¼Œå®ƒæ¥æ”¶charï¼Œç„¶ååœ¨å†…éƒ¨è‡ªåŠ¨è½¬æ¢æˆä¸€ä¸ªæˆ–å¤šä¸ªbyteï¼Œå¹¶å†™å…¥OutputStreamã€‚å› æ­¤ï¼ŒOutputStreamWriterå°±æ˜¯ä¸€ä¸ªå°†ä»»æ„çš„OutputStreamè½¬æ¢ä¸ºWriterçš„è½¬æ¢å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (Writer writer = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"readme.txt"</span>), <span class="string">"UTF-8"</span>)) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>PrintStreamå’ŒPrintWriter</h1>
<p>PrintStreamæ˜¯ä¸€ç§FilterOutputStreamï¼Œå®ƒåœ¨OutputStreamçš„æ¥å£ä¸Šï¼Œé¢å¤–æä¾›äº†ä¸€äº›å†™å…¥å„ç§æ•°æ®ç±»å‹çš„æ–¹æ³•ï¼š<br>
println()æ–¹æ³•ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ ä¸Šæ¢è¡Œç¬¦ã€‚<br>
System.outæ˜¯ç³»ç»Ÿé»˜è®¤æä¾›çš„PrintStreamï¼Œè¡¨ç¤ºæ ‡å‡†è¾“å‡ºã€‚<br>
System.erræ˜¯ç³»ç»Ÿé»˜è®¤æä¾›çš„æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚<br>
å®ƒè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯ä¸ä¼šæŠ›å‡ºIOExceptionã€‚</p>
<h3 id="PrintWriter"><a class="header-anchor" href="#PrintWriter">Â¶</a>PrintWriter</h3>
<p>PrintStreamæœ€ç»ˆè¾“å‡ºçš„æ€»æ˜¯byteæ•°æ®ï¼Œè€ŒPrintWriteråˆ™æ˜¯æ‰©å±•äº†Writeræ¥å£ï¼Œå®ƒçš„print()/println()æ–¹æ³•æœ€ç»ˆè¾“å‡ºçš„æ˜¯charæ•°æ®ã€‚ä¸¤è€…çš„ä½¿ç”¨æ–¹æ³•å‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>     </span>&#123;</span><br><span class="line">        StringWriter buffer = <span class="keyword">new</span> StringWriter();</span><br><span class="line">        <span class="keyword">try</span> (PrintWriter pw = <span class="keyword">new</span> PrintWriter(buffer)) &#123;</span><br><span class="line">            pw.println(<span class="string">"Hello"</span>);</span><br><span class="line">            pw.println(<span class="number">12345</span>);</span><br><span class="line">            pw.println(<span class="keyword">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(buffer.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/10/%E4%B8%A4%E4%B8%AA%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜è§£ï¼šç”¨ä¸¤ä¸ªæ ˆæ¥å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®Œæˆé˜Ÿåˆ—çš„Pushå’ŒPopæ“ä½œã€‚ é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ºintç±»å‹ã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack1 = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; stack2 = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">        stack1.push(node);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stack2.empty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(!stack1.empty())&#123;</span><br><span class="line">                stack2.push(stack1.pop());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> stack2.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack2.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/09/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%BB%93%E7%82%B9%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œå…¶ä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œè¯·æ‰¾å‡ºä¸­åºéå†é¡ºåºçš„ä¸‹ä¸€ä¸ªç»“ç‚¹å¹¶ä¸”è¿”å›ã€‚æ³¨æ„ï¼Œæ ‘ä¸­çš„ç»“ç‚¹ä¸ä»…åŒ…å«å·¦å³å­ç»“ç‚¹ï¼ŒåŒæ—¶åŒ…å«æŒ‡å‘çˆ¶ç»“ç‚¹çš„æŒ‡é’ˆã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ï¼š</h1>
<ol>
<li>è‹¥è¯¥èŠ‚ç‚¹å­˜åœ¨å³å­æ ‘ï¼šåˆ™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå³å­æ ‘æœ€å·¦å­èŠ‚ç‚¹ï¼ˆå¦‚å›¾èŠ‚ç‚¹ B ï¼‰</li>
<li>è‹¥è¯¥èŠ‚ç‚¹ä¸å­˜åœ¨å³å­æ ‘ï¼šè¿™æ—¶åˆ†ä¸¤ç§æƒ…å†µï¼š</li>
</ol>
<ul>
<li>è¯¥èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼Œåˆ™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå…¶çˆ¶èŠ‚ç‚¹ï¼ˆå¦‚å›¾èŠ‚ç‚¹ D ï¼‰</li>
<li>è¯¥èŠ‚ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œåˆ™æ²¿ç€çˆ¶èŠ‚ç‚¹å‘ä¸Šéå†ï¼ŒçŸ¥é“æ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä¸ºè¯¥èŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚å›¾èŠ‚ç‚¹ I ï¼Œæ²¿ç€çˆ¶èŠ‚ç‚¹ä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾æ‰¾åˆ° B ï¼ˆ B ä¸ºå…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼‰ï¼Œåˆ™ B çš„çˆ¶èŠ‚ç‚¹ A ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚</li>
</ul>
<h1>Code</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class TreeLinkNode &#123;</span></span><br><span class="line"><span class="comment">    int val;</span></span><br><span class="line"><span class="comment">    TreeLinkNode left = null;</span></span><br><span class="line"><span class="comment">    TreeLinkNode right = null;</span></span><br><span class="line"><span class="comment">    TreeLinkNode next = null;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    TreeLinkNode(int val) &#123;</span></span><br><span class="line"><span class="comment">        this.val = val;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeLinkNode <span class="title">GetNext</span><span class="params">(TreeLinkNode pNode)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pNode == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(pNode.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            pNode = pNode.right;</span><br><span class="line">            <span class="keyword">while</span>(pNode.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                pNode = pNode.left;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> pNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(pNode.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pNode.next.left==pNode) <span class="keyword">return</span> pNode.next;</span><br><span class="line">            pNode = pNode.next;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é‡å»ºäºŒå‰æ ‘ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/09/%E9%87%8D%E5%BB%BA%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚è¾“å…¥å‰åºéå†åºåˆ—{1,2,4,7,3,5,6,8}å’Œä¸­åºéå†åºåˆ—{4,7,2,1,5,3,8,6}ï¼Œåˆ™é‡å»ºäºŒå‰æ ‘å¹¶è¿”å›ã€‚
</code></pre>
<h1>é¢˜è§£ä¸€</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">reConstructBinaryTree</span><span class="params">(<span class="keyword">int</span> [] pre,<span class="keyword">int</span> [] in)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pre.length == <span class="number">0</span>||pre.length!=in.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> rootVal = pre[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(pre.length == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°rootåœ¨ä¸­åºä¸­çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">int</span> rootIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=in.length -<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(in[i] == rootVal)&#123;</span><br><span class="line">                rootIndex = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¸­åºä¸­rootçš„å·¦è¾¹å³ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹ä¸ºå³å­æ ‘</span></span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line">        root.left = reConstructBinaryTree(Arrays.copyOfRange(pre,<span class="number">1</span>,rootIndex+<span class="number">1</span>),Arrays.copyOfRange(in,<span class="number">0</span>,rootIndex));</span><br><span class="line">        root.right = reConstructBinaryTree(Arrays.copyOfRange(pre,rootIndex+<span class="number">1</span>,pre.length),Arrays.copyOfRange(in,rootIndex+<span class="number">1</span>,in.length));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒ</h1>
<p>çœå†…å­˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">reConstructBinaryTree</span><span class="params">(<span class="keyword">int</span> [] pre,<span class="keyword">int</span> [] in)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> reConBTree(pre,<span class="number">0</span>,pre.length-<span class="number">1</span>,in,<span class="number">0</span>,in.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">reConBTree</span><span class="params">(<span class="keyword">int</span> [] pre,<span class="keyword">int</span> preleft,<span class="keyword">int</span> preright,<span class="keyword">int</span> [] in,<span class="keyword">int</span> inleft,<span class="keyword">int</span> inright)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(preleft &gt; preright || inleft&gt; inright)<span class="comment">//å½“åˆ°è¾¾è¾¹ç•Œæ¡ä»¶æ—¶å€™è¿”å›null</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//æ–°å»ºä¸€ä¸ªTreeNode</span></span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(pre[preleft]);</span><br><span class="line">        <span class="comment">//å¯¹ä¸­åºæ•°ç»„è¿›è¡Œè¾“å…¥è¾¹ç•Œçš„éå†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = inleft; i&lt;= inright; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pre[preleft] == in[i])&#123;</span><br><span class="line">                <span class="comment">//é‡æ„å·¦å­æ ‘ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                root.left = reConBTree(pre,preleft+<span class="number">1</span>,preleft+i-inleft,in,inleft,i-<span class="number">1</span>);</span><br><span class="line">                <span class="comment">//é‡æ„å³å­æ ‘ï¼Œæ³¨æ„è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">                root.right = reConBTree(pre,preleft+i+<span class="number">1</span>-inleft,preright,in,i+<span class="number">1</span>,inright);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;     </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
        <tag>äºŒå‰æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/08/%E4%BB%8E%E5%B0%BE%E5%88%B0%E5%A4%B4%E6%89%93%E5%8D%B0%E9%93%BE%E8%A1%A8%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼ŒæŒ‰é“¾è¡¨ä»å°¾åˆ°å¤´çš„é¡ºåºè¿”å›ä¸€ä¸ªArrayListã€‚
</code></pre>
<a id="more"></a>
<h1>é¢˜è§£ä¸€ï¼šé€’å½’</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;Integer&gt; arrayList=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printListFromTailToHead</span><span class="params">(ListNode listNode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(listNode!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.printListFromTailToHead(listNode.next);</span><br><span class="line">            arrayList.add(listNode.val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arrayList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>é¢˜è§£äºŒï¼šæ ˆ</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">printListFromTailToHead</span><span class="params">(ListNode listNode)</span> </span>&#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack=<span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">while</span>(listNode!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            stack.push(listNode.val);</span><br><span class="line">            listNode=listNode.next;     </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        ArrayList&lt;Integer&gt; list=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">            list.add(stack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/08/%E8%A1%A8%E7%A4%BA%E6%95%B0%E5%80%BC%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²&quot;+100&quot;,&quot;5e2&quot;,&quot;-123&quot;,&quot;3.1416&quot;å’Œ&quot;-1E-16&quot;éƒ½è¡¨ç¤ºæ•°å€¼ã€‚ ä½†æ˜¯&quot;12e&quot;,&quot;1a3.14&quot;,&quot;1.2.3&quot;,&quot;+-5&quot;å’Œ&quot;12e+4.3&quot;éƒ½ä¸æ˜¯ã€‚
</code></pre>
<a id="more"></a>
<h1>è§£æ³•ä¸€ï¼šå¸¸è§„è§£æ³• é¡ºåºæ‰«æ</h1>
<ol>
<li>12eè¯´æ˜eçš„åé¢å¿…é¡»æœ‰æ•°å­—ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªe</li>
<li>Â±5è¯´æ˜ç¬¦å·ä½è¦ä¹ˆå‡ºç°ä¸€æ¬¡åœ¨é¦–ä½ï¼Œè¦ä¹ˆå‡ºç°ä¸€æ¬¡åœ¨eçš„åä¸€ä½ï¼Œå…¶ä»–åœ°æ–¹éƒ½ä¸èƒ½æœ‰</li>
<li>12e4.3è¯´æ˜eçš„åé¢ä¸èƒ½æœ‰å°æ•°ï¼Œ1.2.3è¯´æ˜ä¸èƒ½æœ‰ä¸¤ä¸ªå°æ•°ç‚¹</li>
<li>1a3.14è¯´æ˜ä¸èƒ½æœ‰å…¶ä»–çš„éæ³•å­—ç¬¦ï¼Œæ¯”å¦‚è¿™é‡Œçš„a</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNumeric</span><span class="params">(<span class="keyword">char</span>[] str)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//signalè¡¨ç¤ºç¬¦å·ï¼Œdecimalè¡¨ç¤ºå°æ ‘ç‚¹ï¼ŒhasEè¡¨ç¤ºå«æœ‰ç¬¦å·e</span></span><br><span class="line">        <span class="keyword">boolean</span> signal = <span class="keyword">false</span>,decimal = <span class="keyword">false</span>,hasE = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;str.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str[i] == <span class="string">'E'</span> || str[i] == <span class="string">'e'</span>)&#123;</span><br><span class="line">                <span class="comment">//eåé¢å¿…é¡»æœ‰æ•°å­—ï¼Œæ‰€ä»¥æ˜¯æœ€åä¸€ä½è‚¯å®šä¸é€šè¿‡</span></span><br><span class="line">                <span class="keyword">if</span>(i==str.length-<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¸èƒ½æœ‰ä¸¤ä¸ªe</span></span><br><span class="line">                <span class="keyword">if</span>(hasE)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                hasE = <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str[i] == <span class="string">'+'</span> || str[i] == <span class="string">'-'</span>)&#123;</span><br><span class="line">                <span class="comment">//ä¸æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œé‚£ä¹ˆåé¢èƒ½å‡ºç°ç¬¦åˆçš„åœ°æ–¹åªæœ‰ç´§è´´ç€eçš„åé¢ä¸€ä½ï¼Œä¸æ˜¯åˆ™ä¸é€šè¿‡</span></span><br><span class="line">                <span class="keyword">if</span>(signal &amp;&amp; str[i-<span class="number">1</span>] != <span class="string">'E'</span> &amp;&amp; str[i-<span class="number">1</span>] != <span class="string">'e'</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œå¦‚æœä¸æ˜¯å‡ºç°åœ¨ç¬¬ä¸€ä½ï¼Œé‚£ä¹ˆè¿˜æ˜¯åˆ¤æ–­ä¸€ä¸‹æ˜¯ä¸æ˜¯å‡ºç°åœ¨eçš„åé¢ä¸€ä½</span></span><br><span class="line">                <span class="keyword">if</span>(!signal &amp;&amp; i&gt;<span class="number">0</span> &amp;&amp; str[i-<span class="number">1</span>] != <span class="string">'E'</span> &amp;&amp; str[i-<span class="number">1</span>] != <span class="string">'e'</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                signal = <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str[i] == <span class="string">'.'</span>)&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœå­˜åœ¨eå¹¶ä¸”eåé¢ä¸ºå°æ•°åˆ™ä¸é€šè¿‡</span></span><br><span class="line">                <span class="keyword">if</span>(hasE)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(str[i] == <span class="string">'e'</span> || str[i] == <span class="string">'E'</span>)&#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¸èƒ½æœ‰ä¸¤ä¸ªå°æ•°ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(decimal)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                decimal = <span class="keyword">true</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str[i] &lt; <span class="string">'0'</span> || str[i] &gt; <span class="string">'9'</span>)&#123;</span><br><span class="line">                <span class="comment">//ä¸æ˜¯eä¹Ÿä¸æ˜¯+-ç¬¦å·ä¹Ÿä¸æ˜¯å°æ•°ç‚¹ï¼Œé‚£ä¹ˆåªèƒ½æ˜¯æ•°å­—ï¼Œä¸æ˜¯æ•°å­—å°±æ˜¯éæ³•çš„å­—ç¬¦</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è§£æ³•äºŒï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNumeric</span><span class="params">(<span class="keyword">char</span>[] str)</span> </span>&#123;</span><br><span class="line">        String string = String.valueOf(str);</span><br><span class="line">        <span class="keyword">return</span> string.matches(<span class="string">"[\\+\\-]?\\d*(\\.\\d+)?([eE][\\+\\-]?\\d+)?"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä»¥ä¸‹å¯¹æ­£åˆ™è¿›è¡Œè§£é‡Š:</span></span><br><span class="line"><span class="comment">[\\+\\-]?            -&gt; æ­£æˆ–è´Ÿç¬¦å·å‡ºç°ä¸å¦</span></span><br><span class="line"><span class="comment">\\d*                 -&gt; æ•´æ•°éƒ¨åˆ†æ˜¯å¦å‡ºç°ï¼Œå¦‚-.34 æˆ– +3.34å‡ç¬¦åˆ</span></span><br><span class="line"><span class="comment">(\\.\\d+)?           -&gt; å¦‚æœå‡ºç°å°æ•°ç‚¹ï¼Œé‚£ä¹ˆå°æ•°ç‚¹åé¢å¿…é¡»æœ‰æ•°å­—ï¼›</span></span><br><span class="line"><span class="comment">                        å¦åˆ™ä¸€èµ·ä¸å‡ºç°</span></span><br><span class="line"><span class="comment">([eE][\\+\\-]?\\d+)? -&gt; å¦‚æœå­˜åœ¨æŒ‡æ•°éƒ¨åˆ†ï¼Œé‚£ä¹ˆeæˆ–Eè‚¯å®šå‡ºç°ï¼Œ+æˆ–-å¯ä»¥ä¸å‡ºç°ï¼Œ</span></span><br><span class="line"><span class="comment">                        ç´§æ¥ç€å¿…é¡»è·Ÿç€æ•´æ•°ï¼›æˆ–è€…æ•´ä¸ªéƒ¨åˆ†éƒ½ä¸å‡ºç°</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1>è§£æ³•ä¸‰: åˆ†æƒ…å†µæ„é€ å‡½æ•°</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNumeric</span><span class="params">(<span class="keyword">char</span>[] str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str.length &lt; <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="comment">//å…ˆæ‰«æå¤§äº0çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">boolean</span> flag = scanInteger(str);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰å°æ•°ç‚¹ï¼Œæœ‰å°æ•°ç‚¹åˆ™æ‰«ææ˜¯å¦æœ‰æ•´æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; str.length &amp;&amp; str[index] == <span class="string">'.'</span>) &#123;</span><br><span class="line">            index++;</span><br><span class="line">            flag = scanUnsignedInteger(str) || flag;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰Eï½œï½œeï¼Œå¦‚æœ‰åˆ™æ‰«æ</span></span><br><span class="line">        <span class="keyword">if</span> (index &lt; str.length &amp;&amp; (str[index] == <span class="string">'E'</span> || str[index] == <span class="string">'e'</span>)) &#123;</span><br><span class="line">            index++;</span><br><span class="line">            flag = flag &amp;&amp; scanInteger(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æœ€åæ£€æµ‹æ˜¯å¦èµ°åˆ°å°¾ï¼Œèµ°åˆ°å°¾è¯´æ˜æ£€æµ‹å‡é€šè¿‡ </span></span><br><span class="line">        <span class="keyword">return</span> flag &amp;&amp; index == str.length;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰«æç¬¬ä¸€ä½æ˜¯å¦æœ‰ +ï¼Œ-ï¼Œæœ‰å°±è·³è¿‡ï¼Œæ²¡æœ‰ä¹Ÿæ²¡å…³ç³»</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">scanInteger</span><span class="params">(<span class="keyword">char</span>[] str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; str.length &amp;&amp; (str[index] == <span class="string">'+'</span> || str[index] == <span class="string">'-'</span>) )</span><br><span class="line">            index++;</span><br><span class="line">        <span class="keyword">return</span> scanUnsignedInteger(str);</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰«æå„ä½æ˜¯å¦ä¸ºæ•´æ•° </span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">scanUnsignedInteger</span><span class="params">(<span class="keyword">char</span>[] str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> start = index;</span><br><span class="line">        <span class="keyword">while</span> (index &lt; str.length &amp;&amp; str[index] &gt;= <span class="string">'0'</span> &amp;&amp; str[index] &lt;= <span class="string">'9'</span>)</span><br><span class="line">            index++;</span><br><span class="line">        <span class="keyword">return</span> start &lt; index; <span class="comment">//æ˜¯å¦å­˜åœ¨æ•´æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/07/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…æ‹¬'.'å’Œ'*'çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦'.'è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ'*'è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆåŒ…å«0æ¬¡ï¼‰ã€‚ åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²&quot;aaa&quot;ä¸æ¨¡å¼&quot;a.a&quot;å’Œ&quot;ab*ac*a&quot;åŒ¹é…ï¼Œä½†æ˜¯ä¸&quot;aa.a&quot;å’Œ&quot;ab*a&quot;å‡ä¸åŒ¹é…
</code></pre>
<h1>é¢˜è§£ï¼š</h1>
<p>å½“æ¨¡å¼ä¸­çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸æ˜¯â€œ*â€æ—¶ï¼š<br>
1ã€å¦‚æœå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦å’Œæ¨¡å¼ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸åŒ¹é…ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²å’Œæ¨¡å¼éƒ½åç§»ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶ååŒ¹é…å‰©ä½™çš„ã€‚<br>
2ã€å¦‚æœ å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦å’Œæ¨¡å¼ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸ä¸åŒ¹é…ï¼Œç›´æ¥è¿”å›falseã€‚</p>
<p>è€Œå½“æ¨¡å¼ä¸­çš„ç¬¬äºŒä¸ªå­—ç¬¦æ˜¯â€œ<em>â€æ—¶ï¼š<br>
å¦‚æœå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦è·Ÿæ¨¡å¼ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸åŒ¹é…ï¼Œåˆ™æ¨¡å¼åç§»2ä¸ªå­—ç¬¦ï¼Œç»§ç»­åŒ¹é…ã€‚å¦‚æœå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦è·Ÿæ¨¡å¼ç¬¬ä¸€ä¸ªå­—ç¬¦åŒ¹é…ï¼Œå¯ä»¥æœ‰3ç§åŒ¹é…æ–¹å¼ï¼š<br>
1ã€æ¨¡å¼åç§»2å­—ç¬¦ï¼Œç›¸å½“äºx</em>è¢«å¿½ç•¥ï¼›<br>
2ã€å­—ç¬¦ä¸²åç§»1å­—ç¬¦ï¼Œæ¨¡å¼åç§»2å­—ç¬¦ï¼›<br>
3ã€å­—ç¬¦ä¸²åç§»1å­—ç¬¦ï¼Œæ¨¡å¼ä¸å˜ï¼Œå³ç»§ç»­åŒ¹é…å­—ç¬¦ä¸‹ä¸€ä½ï¼Œå› ä¸º*å¯ä»¥åŒ¹é…å¤šä½ï¼›</p>
<h5 id="è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šJavaé‡Œï¼Œè¦æ—¶åˆ»æ£€éªŒæ•°ç»„æ˜¯å¦è¶Šç•Œã€‚"><a class="header-anchor" href="#è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šJavaé‡Œï¼Œè¦æ—¶åˆ»æ£€éªŒæ•°ç»„æ˜¯å¦è¶Šç•Œã€‚">Â¶</a>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šJavaé‡Œï¼Œè¦æ—¶åˆ»æ£€éªŒæ•°ç»„æ˜¯å¦è¶Šç•Œã€‚</h5>
<h1>Codeï¼š</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span>[] str, <span class="keyword">char</span>[] pattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || pattern == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> strIndex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> patternIndex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> matchCore(str, strIndex, pattern, patternIndex);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matchCore</span><span class="params">(<span class="keyword">char</span>[] str, <span class="keyword">int</span> strIndex, <span class="keyword">char</span>[] pattern, <span class="keyword">int</span> patternIndex)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æœ‰æ•ˆæ€§æ£€éªŒï¼šstråˆ°å°¾ï¼Œpatternåˆ°å°¾ï¼ŒåŒ¹é…æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (strIndex == str.length &amp;&amp; patternIndex == pattern.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//patternå…ˆåˆ°å°¾ï¼ŒåŒ¹é…å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (strIndex != str.length &amp;&amp; patternIndex == pattern.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¨¡å¼ç¬¬2ä¸ªæ˜¯*ï¼Œä¸”å­—ç¬¦ä¸²ç¬¬1ä¸ªè·Ÿæ¨¡å¼ç¬¬1ä¸ªåŒ¹é…,åˆ†3ç§åŒ¹é…æ¨¡å¼ï¼›å¦‚ä¸åŒ¹é…ï¼Œæ¨¡å¼åç§»2ä½</span></span><br><span class="line">    <span class="keyword">if</span> (patternIndex + <span class="number">1</span> &lt; pattern.length &amp;&amp; pattern[patternIndex + <span class="number">1</span>] == <span class="string">'*'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((strIndex != str.length &amp;&amp; pattern[patternIndex] == str[strIndex]) || (pattern[patternIndex] == <span class="string">'.'</span> &amp;&amp; strIndex != str.length)) &#123;</span><br><span class="line">            <span class="keyword">return</span> matchCore(str, strIndex, pattern, patternIndex + <span class="number">2</span>)<span class="comment">//æ¨¡å¼åç§»2ï¼Œè§†ä¸ºx*åŒ¹é…0ä¸ªå­—ç¬¦</span></span><br><span class="line">                    || matchCore(str, strIndex + <span class="number">1</span>, pattern, patternIndex + <span class="number">2</span>)<span class="comment">//è§†ä¸ºæ¨¡å¼åŒ¹é…1ä¸ªå­—ç¬¦</span></span><br><span class="line">                    || matchCore(str, strIndex + <span class="number">1</span>, pattern, patternIndex);<span class="comment">//*åŒ¹é…1ä¸ªï¼Œå†åŒ¹é…strä¸­çš„ä¸‹ä¸€ä¸ª</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> matchCore(str, strIndex, pattern, patternIndex + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ¨¡å¼ç¬¬2ä¸ªä¸æ˜¯*ï¼Œä¸”å­—ç¬¦ä¸²ç¬¬1ä¸ªè·Ÿæ¨¡å¼ç¬¬1ä¸ªåŒ¹é…ï¼Œåˆ™éƒ½åç§»1ä½ï¼Œå¦åˆ™ç›´æ¥è¿”å›false</span></span><br><span class="line">    <span class="keyword">if</span> ((strIndex != str.length &amp;&amp; pattern[patternIndex] == str[strIndex]) || (pattern[patternIndex] == <span class="string">'.'</span> &amp;&amp; strIndex != str.length)) &#123;</span><br><span class="line">        <span class="keyword">return</span> matchCore(str, strIndex + <span class="number">1</span>, pattern, patternIndex + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaé›†åˆ</title>
    <url>/2020/03/07/Java%E9%9B%86%E5%90%88/</url>
    <content><![CDATA[<pre><code>åœ¨Javaä¸­ï¼Œå¦‚æœä¸€ä¸ªJavaå¯¹è±¡å¯ä»¥åœ¨å†…éƒ¨æŒæœ‰è‹¥å¹²å…¶ä»–Javaå¯¹è±¡ï¼Œå¹¶å¯¹å¤–æä¾›è®¿é—®æ¥å£ï¼Œæˆ‘ä»¬æŠŠè¿™ç§Javaå¯¹è±¡ç§°ä¸ºé›†åˆã€‚
</code></pre>
<a id="more"></a>
<h3 id="collection"><a class="header-anchor" href="#collection">Â¶</a>collection</h3>
<p>Javaæ ‡å‡†åº“è‡ªå¸¦çš„java.utilåŒ…æä¾›äº†é›†åˆç±»ï¼šCollectionï¼Œå®ƒæ˜¯é™¤Mapå¤–æ‰€æœ‰å…¶ä»–é›†åˆç±»çš„æ ¹æ¥å£ã€‚Javaçš„java.utilåŒ…ä¸»è¦æä¾›äº†ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„é›†åˆï¼š</p>
<ul>
<li>Listï¼šä¸€ç§æœ‰åºåˆ—è¡¨çš„é›†åˆï¼Œä¾‹å¦‚ï¼ŒæŒ‰ç´¢å¼•æ’åˆ—çš„Studentçš„Listï¼›</li>
<li>Setï¼šä¸€ç§ä¿è¯æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆï¼Œä¾‹å¦‚ï¼Œæ‰€æœ‰æ— é‡å¤åç§°çš„Studentçš„Setï¼›</li>
<li>Mapï¼šä¸€ç§é€šè¿‡é”®å€¼ï¼ˆkey-valueï¼‰æŸ¥æ‰¾çš„æ˜ å°„è¡¨é›†åˆï¼Œä¾‹å¦‚ï¼Œæ ¹æ®Studentçš„nameæŸ¥æ‰¾å¯¹åº”Studentçš„Mapã€‚<br>
Javaé›†åˆçš„è®¾è®¡æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼šä¸€æ˜¯å®ç°äº†æ¥å£å’Œå®ç°ç±»ç›¸åˆ†ç¦»ï¼Œä¾‹å¦‚ï¼Œæœ‰åºè¡¨çš„æ¥å£æ˜¯Listï¼Œå…·ä½“çš„å®ç°ç±»æœ‰ArrayListï¼ŒLinkedListç­‰ï¼ŒäºŒæ˜¯æ”¯æŒæ³›å‹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶åœ¨ä¸€ä¸ªé›†åˆä¸­åªèƒ½æ”¾å…¥åŒä¸€ç§æ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(); <span class="comment">// åªèƒ½æ”¾å…¥Stringç±»å‹</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼ŒJavaè®¿é—®é›†åˆæ€»æ˜¯é€šè¿‡ç»Ÿä¸€çš„æ–¹å¼â€”â€”è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ¥å®ç°ï¼Œå®ƒæœ€æ˜æ˜¾çš„å¥½å¤„åœ¨äºæ— éœ€çŸ¥é“é›†åˆå†…éƒ¨å…ƒç´ æ˜¯æŒ‰ä»€ä¹ˆæ–¹å¼å­˜å‚¨çš„ã€‚</p>
<p>ç”±äºJavaçš„é›†åˆè®¾è®¡éå¸¸ä¹…è¿œï¼Œä¸­é—´ç»å†è¿‡å¤§è§„æ¨¡æ”¹è¿›ï¼Œæˆ‘ä»¬è¦æ³¨æ„åˆ°æœ‰ä¸€å°éƒ¨åˆ†é›†åˆç±»æ˜¯é—ç•™ç±»ï¼Œä¸åº”è¯¥ç»§ç»­ä½¿ç”¨ï¼š</p>
<ul>
<li>Hashtableï¼šä¸€ç§çº¿ç¨‹å®‰å…¨çš„Mapå®ç°ï¼›</li>
<li>Vectorï¼šä¸€ç§çº¿ç¨‹å®‰å…¨çš„Listå®ç°ï¼›</li>
<li>Stackï¼šåŸºäºVectorå®ç°çš„LIFOçš„æ ˆã€‚<br>
è¿˜æœ‰ä¸€å°éƒ¨åˆ†æ¥å£æ˜¯é—ç•™æ¥å£ï¼Œä¹Ÿä¸åº”è¯¥ç»§ç»­ä½¿ç”¨ï¼š</li>
</ul>
<p>Enumeration<E>ï¼šå·²è¢«Iterator<E>å–ä»£ã€‚</E></E></p>
<h1>List</h1>
<p>List<E>æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°å‡ ä¸ªä¸»è¦çš„æ¥å£æ–¹æ³•ï¼š</E></p>
<ul>
<li>åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼švoid add(E e)</li>
<li>åœ¨æŒ‡å®šç´¢å¼•æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼švoid add(int index, E e)</li>
<li>åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼šint remove(int index)</li>
<li>åˆ é™¤æŸä¸ªå…ƒç´ ï¼šint remove(Object e)</li>
<li>è·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼šE get(int index)</li>
<li>è·å–é“¾è¡¨å¤§å°ï¼ˆåŒ…å«å…ƒç´ çš„ä¸ªæ•°ï¼‰ï¼šint size()<br>
ä½†æ˜¯ï¼Œå®ç°Listæ¥å£å¹¶éåªèƒ½é€šè¿‡æ•°ç»„ï¼ˆå³ArrayListçš„å®ç°æ–¹å¼ï¼‰æ¥å®ç°ï¼Œå¦ä¸€ç§LinkedListé€šè¿‡â€œé“¾è¡¨â€ä¹Ÿå®ç°äº†Listæ¥å£ã€‚åœ¨LinkedListä¸­ï¼Œå®ƒçš„å†…éƒ¨æ¯ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ArrayListçœå†…å­˜ã€‚</li>
</ul>
<h3 id="Listçš„ç‰¹ç‚¹"><a class="header-anchor" href="#Listçš„ç‰¹ç‚¹">Â¶</a>Listçš„ç‰¹ç‚¹</h3>
<ol>
<li>å…è®¸é‡å¤</li>
<li>å…è®¸æ·»åŠ null</li>
</ol>
<h3 id="éå†List"><a class="header-anchor" href="#éå†List">Â¶</a>éå†List</h3>
<p>ä½¿ç”¨è¿­ä»£å™¨Iteratoræ¥è®¿é—®Listã€‚Iteratoræœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å®ƒæ˜¯ç”±Listçš„å®ä¾‹è°ƒç”¨iterator()æ–¹æ³•çš„æ—¶å€™åˆ›å»ºçš„ã€‚<br>
Iteratorå¯¹è±¡çŸ¥é“å¦‚ä½•éå†ä¸€ä¸ªListï¼Œå¹¶ä¸”ä¸åŒçš„Listç±»å‹ï¼Œè¿”å›çš„Iteratorå¯¹è±¡å®ç°ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä½†æ€»æ˜¯å…·æœ‰æœ€é«˜çš„è®¿é—®æ•ˆç‡ã€‚<br>
Iteratorå¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šboolean hasNext()åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ŒE next()è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å› æ­¤ï¼Œä½¿ç”¨Iteratoréå†Listä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = List.of(<span class="string">"apple"</span>, <span class="string">"pear"</span>, <span class="string">"banana"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Iterator&lt;String&gt; it = list.iterator(); it.hasNext(); ) &#123;</span><br><span class="line">            <span class="comment">//.next()è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            String s = it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><b>ä½†æ˜¯ï¼ŒJavaçš„for eachå¾ªç¯æœ¬èº«å°±å¯ä»¥å¸®æˆ‘ä»¬ä½¿ç”¨Iteratoréå†ã€‚</b></p>
<h3 id="Listä¸Arrayç›¸äº’è½¬æ¢"><a class="header-anchor" href="#Listä¸Arrayç›¸äº’è½¬æ¢">Â¶</a>Listä¸Arrayç›¸äº’è½¬æ¢</h3>
<p>ç»™toArray(T[])ä¼ å…¥ä¸€ä¸ªç±»å‹ç›¸åŒçš„Arrayï¼ŒListå†…éƒ¨è‡ªåŠ¨æŠŠå…ƒç´ å¤åˆ¶åˆ°ä¼ å…¥çš„Arrayä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = List.of(<span class="number">12</span>, <span class="number">34</span>, <span class="number">56</span>);</span><br><span class="line">        Integer[] array = list.toArray(<span class="keyword">new</span> Integer[<span class="number">3</span>]);</span><br><span class="line">        <span class="keyword">for</span> (Integer n : array) &#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ç§æ›´ç®€æ´çš„å†™æ³•æ˜¯é€šè¿‡Listæ¥å£å®šä¹‰çš„T[] toArray(IntFunction&lt;T[]&gt; generator)æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer[] array = list.toArray(Integer[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure>
<p>åè¿‡æ¥ï¼ŒæŠŠArrayå˜ä¸ºListå°±ç®€å•å¤šäº†ï¼Œé€šè¿‡List.of(Tâ€¦)æ–¹æ³•æœ€ç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer[] array = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line">List&lt;Integer&gt; list = List.of(array);</span><br></pre></td></tr></table></figure>
<p>è¿”å›çš„Listä¸ä¸€å®šå°±æ˜¯ArrayListæˆ–è€…LinkedListï¼Œå› ä¸ºListåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨List.of()ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªåªè¯»Listã€‚</p>
<h3 id="åˆ¤æ–­Listä¸­æ˜¯å¦æœ‰æŸå…ƒç´ 1"><a class="header-anchor" href="#åˆ¤æ–­Listä¸­æ˜¯å¦æœ‰æŸå…ƒç´ 1">Â¶</a>åˆ¤æ–­Listä¸­æ˜¯å¦æœ‰æŸå…ƒç´ 1</h3>
<p>Listè¿˜æä¾›äº†boolean contains(Object o)æ–¹æ³•æ¥åˆ¤æ–­Listæ˜¯å¦åŒ…å«æŸä¸ªæŒ‡å®šå…ƒç´ ã€‚æ­¤å¤–ï¼Œint indexOf(Object o)æ–¹æ³•å¯ä»¥è¿”å›æŸä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œå°±è¿”å›-1ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = List.of(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>);</span><br><span class="line">        System.out.println(list.contains(<span class="string">"C"</span>)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(list.contains(<span class="string">"X"</span>)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">"C"</span>)); <span class="comment">// 2</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">"X"</span>)); <span class="comment">// -1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¼ å…¥new String(â€œCâ€)åˆ°list.contains()ä¸­æ¥æŸ¥çœ‹ï¼Œä¾æ—§å¯ä»¥å¾—åˆ°trueã€‚è™½ç„¶æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ï¼Œä½†æ˜¯Listå†…éƒ¨åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ä¸æ˜¯ç”¨â€œ==â€ï¼Œè€Œæ˜¯ç”¨equals()ã€‚</p>
<h3 id="ç¼–å†™equals"><a class="header-anchor" href="#ç¼–å†™equals">Â¶</a>ç¼–å†™equals()</h3>
<p>å› æ­¤ï¼Œå¦‚æœä¼ å…¥çš„å®ä¾‹æ˜¯è‡ªå®šä¹‰å¯¹è±¡ï¼Œåˆ™éœ€è¦overrideè¿™äº›æ–¹æ³•ã€‚è¦æ­£ç¡®ä½¿ç”¨Listçš„contains()ã€indexOf()è¿™äº›æ–¹æ³•ï¼Œæ”¾å…¥çš„å®ä¾‹å¿…é¡»æ­£ç¡®è¦†å†™equals()æ–¹æ³•ï¼Œå¦åˆ™ï¼Œæ”¾è¿›å»çš„å®ä¾‹ï¼ŒæŸ¥æ‰¾ä¸åˆ°ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½æ­£å¸¸æ”¾å…¥Stringã€Integerè¿™äº›å¯¹è±¡ï¼Œæ˜¯å› ä¸ºJavaæ ‡å‡†åº“å®šä¹‰çš„è¿™äº›ç±»å·²ç»æ­£ç¡®å®ç°äº†equals()æ–¹æ³•ã€‚</p>
<p>å¦‚ä½•æ­£ç¡®ç¼–å†™equals()æ–¹æ³•ï¼Ÿequals()æ–¹æ³•è¦æ±‚æˆ‘ä»¬å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>è‡ªåæ€§ï¼ˆReflexiveï¼‰ï¼šå¯¹äºénullçš„xæ¥è¯´ï¼Œx.equals(x)å¿…é¡»è¿”å›trueï¼›</li>
<li>å¯¹ç§°æ€§ï¼ˆSymmetricï¼‰ï¼šå¯¹äºénullçš„xå’Œyæ¥è¯´ï¼Œå¦‚æœx.equals(y)ä¸ºtrueï¼Œåˆ™y.equals(x)ä¹Ÿå¿…é¡»ä¸ºtrueï¼›</li>
<li>ä¼ é€’æ€§ï¼ˆTransitiveï¼‰ï¼šå¯¹äºénullçš„xã€yå’Œzæ¥è¯´ï¼Œå¦‚æœx.equals(y)ä¸ºtrueï¼Œy.equals(z)ä¹Ÿä¸ºtrueï¼Œé‚£ä¹ˆx.equals(z)ä¹Ÿå¿…é¡»ä¸ºtrueï¼›</li>
<li>ä¸€è‡´æ€§ï¼ˆConsistentï¼‰ï¼šå¯¹äºénullçš„xå’Œyæ¥è¯´ï¼Œåªè¦xå’ŒyçŠ¶æ€ä¸å˜ï¼Œåˆ™x.equals(y)æ€»æ˜¯ä¸€è‡´åœ°è¿”å›trueæˆ–è€…falseï¼›</li>
<li>å¯¹nullçš„æ¯”è¾ƒï¼šå³x.equals(null)æ°¸è¿œè¿”å›falseã€‚</li>
</ul>
<p>ä»¥personç±»ä¸ºä¾‹ï¼šå¯¹äºPersonç±»ï¼Œå¦‚æœnameç›¸ç­‰ï¼Œå¹¶ä¸”ageç›¸ç­‰ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºä¸¤ä¸ªPersonå®ä¾‹ç›¸ç­‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">        Person p = (Person) o;</span><br><span class="line">        <span class="keyword">boolean</span> nameEquals = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.name == <span class="keyword">null</span> &amp;&amp; p.name == <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameEquals = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.name != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameEquals = <span class="keyword">this</span>.name.equals(p.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nameEquals &amp;&amp; <span class="keyword">this</span>.age == p.age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>å¯¹äºå¼•ç”¨å­—æ®µnameå°±ç”¨equalsï¼ˆï¼‰ï¼Œå¯¹äºåŸºæœ¬ç±»å‹å°±ç”¨â€œ==â€ã€‚
å¦‚æœthis.nameä¸ºnullï¼Œé‚£ä¹ˆequals()æ–¹æ³•ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¿›è¡Œäº†åˆ¤æ–­ã€‚
</code></pre>
<p>å®é™…ä¸Šå¯ä»¥é€šè¿‡Objects.equals()é™æ€æ–¹æ³•ç®€åŒ–ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">        Person p = (Person) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(<span class="keyword">this</span>.name, p.name) &amp;&amp; <span class="keyword">this</span>.age == p.age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Map</h1>
<p>Mapè¿™ç§é”®å€¼ï¼ˆkey-valueï¼‰æ˜ å°„è¡¨çš„æ•°æ®ç»“æ„ï¼Œä½œç”¨å°±æ˜¯èƒ½é«˜æ•ˆé€šè¿‡keyå¿«é€ŸæŸ¥æ‰¾valueï¼ˆå…ƒç´ ï¼‰ã€‚HashMapä¹‹æ‰€ä»¥èƒ½æ ¹æ®keyç›´æ¥æ‹¿åˆ°valueï¼ŒåŸå› æ˜¯å®ƒå†…éƒ¨é€šè¿‡ç©ºé—´æ¢æ—¶é—´çš„æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå¤§æ•°ç»„å­˜å‚¨æ‰€æœ‰valueï¼Œå¹¶æ ¹æ®keyç›´æ¥è®¡ç®—å‡ºvalueåº”è¯¥å­˜å‚¨åœ¨å“ªä¸ªç´¢å¼•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line">Map&lt;String, Student&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">map.put(<span class="string">"Xiao Ming"</span>, s); <span class="comment">// å°†"Xiao Ming"å’ŒStudentå®ä¾‹æ˜ å°„å¹¶å…³è”</span></span><br><span class="line">Student target = map.get(<span class="string">"Xiao Ming"</span>); <span class="comment">// é€šè¿‡keyæŸ¥æ‰¾å¹¶è¿”å›æ˜ å°„çš„Studentå®ä¾‹</span></span><br></pre></td></tr></table></figure>
<h6 id="Mapä¸­ä¸å­˜åœ¨é‡å¤çš„keyï¼Œå› ä¸ºæ”¾å…¥ç›¸åŒçš„keyï¼Œåªä¼šæŠŠåŸæœ‰çš„key-valueå¯¹åº”çš„valueç»™æ›¿æ¢æ‰ã€‚"><a class="header-anchor" href="#Mapä¸­ä¸å­˜åœ¨é‡å¤çš„keyï¼Œå› ä¸ºæ”¾å…¥ç›¸åŒçš„keyï¼Œåªä¼šæŠŠåŸæœ‰çš„key-valueå¯¹åº”çš„valueç»™æ›¿æ¢æ‰ã€‚">Â¶</a>Mapä¸­ä¸å­˜åœ¨é‡å¤çš„keyï¼Œå› ä¸ºæ”¾å…¥ç›¸åŒçš„keyï¼Œåªä¼šæŠŠåŸæœ‰çš„key-valueå¯¹åº”çš„valueç»™æ›¿æ¢æ‰ã€‚</h6>
<h3 id="éå†Map"><a class="header-anchor" href="#éå†Map">Â¶</a>éå†Map</h3>
<p>ç”¨keyéå†ä½¿ç”¨for eachè¯­å¥ã€‚</p>
<p>åŒæ—¶éå†keyå’Œvalueå¯ä»¥ä½¿ç”¨for eachå¾ªç¯éå†Mapå¯¹è±¡çš„entrySet()é›†åˆï¼Œå®ƒåŒ…å«æ¯ä¸€ä¸ªkey-valueæ˜ å°„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"apple"</span>, <span class="number">123</span>);</span><br><span class="line">        map.put(<span class="string">"pear"</span>, <span class="number">456</span>);</span><br><span class="line">        map.put(<span class="string">"banana"</span>, <span class="number">789</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            String key = entry.getKey();</span><br><span class="line">            Integer value = entry.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">" = "</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Mapå’ŒListä¸åŒçš„æ˜¯ï¼ŒMapå­˜å‚¨çš„æ˜¯key-valueçš„æ˜ å°„å…³ç³»ï¼Œå¹¶ä¸”ï¼Œå®ƒä¸ä¿è¯é¡ºåºã€‚å³éå†æ—¶ï¼Œkeyçš„è¾“å‡ºæ˜¯éšæœºçš„ã€‚</li>
</ul>
<h3 id="ç¼–å†™equalså’ŒhashCode"><a class="header-anchor" href="#ç¼–å†™equalså’ŒhashCode">Â¶</a>ç¼–å†™equalså’ŒhashCode</h3>
<ul>
<li>é€šè¿‡keyè®¡ç®—ç´¢å¼•çš„æ–¹å¼å°±æ˜¯è°ƒç”¨keyå¯¹è±¡çš„hashCode()æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªintæ•´æ•°ã€‚HashMapæ­£æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•ç›´æ¥å®šä½keyå¯¹åº”çš„valueçš„ç´¢å¼•ï¼Œç»§è€Œç›´æ¥è¿”å›valueã€‚</li>
<li>ç›¸åŒçš„keyå¯¹è±¡ï¼ˆä½¿ç”¨equals()åˆ¤æ–­æ—¶è¿”å›trueï¼‰å¿…é¡»è¦è®¡ç®—å‡ºç›¸åŒçš„ç´¢å¼•ï¼Œå¦åˆ™ï¼Œç›¸åŒçš„keyæ¯æ¬¡å–å‡ºçš„valueå°±ä¸ä¸€å®šå¯¹ã€‚</li>
<li>åœ¨Mapçš„å†…éƒ¨ï¼Œå¯¹keyåšæ¯”è¾ƒæ˜¯é€šè¿‡equals()å®ç°çš„ï¼Œè¿™ä¸€ç‚¹å’ŒListæŸ¥æ‰¾å…ƒç´ éœ€è¦æ­£ç¡®è¦†å†™equals()æ˜¯ä¸€æ ·çš„ï¼Œå³æ­£ç¡®ä½¿ç”¨Mapå¿…é¡»ä¿è¯ï¼šä½œä¸ºkeyçš„å¯¹è±¡å¿…é¡»æ­£ç¡®è¦†å†™equals()æ–¹æ³•ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæ­£ç¡®ä½¿ç”¨Mapå¿…é¡»ä¿è¯ï¼š</p>
<ol>
<li>ä½œä¸ºkeyçš„å¯¹è±¡å¿…é¡»æ­£ç¡®è¦†å†™equals()æ–¹æ³•ï¼Œç›¸ç­‰çš„ä¸¤ä¸ªkeyå®ä¾‹è°ƒç”¨equals()å¿…é¡»è¿”å›trueï¼›</li>
<li>ä½œä¸ºkeyçš„å¯¹è±¡è¿˜å¿…é¡»æ­£ç¡®è¦†å†™hashCode()æ–¹æ³•ï¼Œä¸”hashCode()æ–¹æ³•è¦ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</li>
</ol>
<ul>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡çš„hashCode()å¿…é¡»ç›¸ç­‰ï¼›</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡çš„hashCode()å°½é‡ä¸è¦ç›¸ç­‰ã€‚</li>
</ul>
<p>ä¸Šè¿°ç¬¬ä¸€æ¡è§„èŒƒæ˜¯æ­£ç¡®æ€§ï¼Œå¿…é¡»ä¿è¯å®ç°ï¼Œå¦åˆ™HashMapä¸èƒ½æ­£å¸¸å·¥ä½œã€‚<br>
è€Œç¬¬äºŒæ¡å¦‚æœå°½é‡æ»¡è¶³ï¼Œåˆ™å¯ä»¥ä¿è¯æŸ¥è¯¢æ•ˆç‡ï¼Œå› ä¸ºä¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœè¿”å›ç›¸åŒçš„hashCode()ï¼Œä¼šé€ æˆMapå†…éƒ¨å­˜å‚¨å†²çªï¼Œä½¿å­˜å–çš„æ•ˆç‡ä¸‹é™ã€‚</p>
<h3 id="è¦†å†™equals"><a class="header-anchor" href="#è¦†å†™equals">Â¶</a>è¦†å†™equals</h3>
<p>ä¸Listç±»ä¼¼ï¼Œæ‰¾å‡ºå­—æ®µå€¼ï¼Œå¼•ç”¨å­—æ®µç”¨Obgects.equals()æ¯”è¾ƒã€‚</p>
<h3 id="override-hashCode"><a class="header-anchor" href="#override-hashCode">Â¶</a>override hashCode()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String firstName;</span><br><span class="line">    String lastName;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">0</span>;</span><br><span class="line">        h = <span class="number">31</span> * h + firstName.hashCode();</span><br><span class="line">        h = <span class="number">31</span> * h + lastName.hashCode();</span><br><span class="line">        h = <span class="number">31</span> * h + age;</span><br><span class="line">        <span class="keyword">return</span> h;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œå¦‚æœå¼•ç”¨å­—æ®µä¸ºnullï¼Œå°†ä¼šæŠ¥é”™NullPointerExceptionã€‚æ”¹ç”¨Objects.hash(â€¦)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Objects.hash(firstName, lastName, age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œç¼–å†™equals()å’ŒhashCode()éµå¾ªçš„åŸåˆ™æ˜¯ï¼š<br>
equals()ç”¨åˆ°çš„ç”¨äºæ¯”è¾ƒçš„æ¯ä¸€ä¸ªå­—æ®µï¼Œéƒ½å¿…é¡»åœ¨hashCode()ä¸­ç”¨äºè®¡ç®—ï¼›equals()ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°çš„å­—æ®µï¼Œç»ä¸å¯æ”¾åœ¨hashCode()ä¸­è®¡ç®—ã€‚<br>
å¦å¤–æ³¨æ„ï¼Œå¯¹äºæ”¾å…¥HashMapçš„valueå¯¹è±¡ï¼Œæ²¡æœ‰ä»»ä½•è¦æ±‚ã€‚</p>
<h3 id="å»¶ä¼¸é˜…è¯»"><a class="header-anchor" href="#å»¶ä¼¸é˜…è¯»">Â¶</a>å»¶ä¼¸é˜…è¯»</h3>
<ol>
<li>HashMapå†…éƒ¨ä½¿ç”¨çš„æ•°ç»„å¾—æœ‰å¤šå¤§ï¼Ÿ<br>
å®é™…ä¸ŠHashMapåˆå§‹åŒ–æ—¶é»˜è®¤çš„æ•°ç»„å¤§å°åªæœ‰16ï¼Œä»»ä½•keyï¼Œæ— è®ºå®ƒçš„hashCode()æœ‰å¤šå¤§ï¼Œéƒ½å¯ä»¥ç®€å•åœ°é€šè¿‡ï¼š</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> index = key.hashCode() &amp; <span class="number">0xf</span>; <span class="comment">// 0xf = 15</span></span><br></pre></td></tr></table></figure>
<p>æŠŠç´¢å¼•ç¡®å®šåœ¨0ï½15ï¼Œå³æ°¸è¿œä¸ä¼šè¶…å‡ºæ•°ç»„èŒƒå›´ã€‚<br>
2. æ•°ç»„ä¸å¤Ÿç”¨äº†æ€ä¹ˆåŠï¼Ÿ<br>
æ·»åŠ è¶…è¿‡ä¸€å®šæ•°é‡çš„key-valueæ—¶ï¼ŒHashMapä¼šåœ¨å†…éƒ¨è‡ªåŠ¨æ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹ä¸€å€ï¼Œå³é•¿åº¦ä¸º16çš„æ•°ç»„æ‰©å±•ä¸ºé•¿åº¦32ï¼Œç›¸åº”åœ°ï¼Œéœ€è¦é‡æ–°ç¡®å®šhashCode()è®¡ç®—çš„ç´¢å¼•ä½ç½®ã€‚<br>
ç”±äºæ‰©å®¹ä¼šå¯¼è‡´é‡æ–°åˆ†å¸ƒå·²æœ‰çš„key-valueï¼Œæ‰€ä»¥ï¼Œé¢‘ç¹æ‰©å®¹å¯¹HashMapçš„æ€§èƒ½å½±å“å¾ˆå¤§ã€‚å¦‚æœæˆ‘ä»¬ç¡®å®šè¦ä½¿ç”¨ä¸€ä¸ªå®¹é‡ä¸º10000ä¸ªkey-valueçš„HashMapï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯åˆ›å»ºHashMapæ—¶å°±æŒ‡å®šå®¹é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">10000</span>);</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶æŒ‡å®šå®¹é‡æ˜¯10000ï¼Œä½†HashMapå†…éƒ¨çš„æ•°ç»„é•¿åº¦æ€»æ˜¯2nï¼Œå› æ­¤ï¼Œå®é™…æ•°ç»„é•¿åº¦è¢«åˆå§‹åŒ–ä¸ºæ¯”10000å¤§çš„16384ï¼ˆ214ï¼‰ã€‚<br>
3. å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>
åœ¨å†²çªçš„æ—¶å€™ï¼Œä¸€ç§æœ€ç®€å•çš„è§£å†³åŠæ³•æ˜¯ç”¨Listå­˜å‚¨hashCode()ç›¸åŒçš„key-valueã€‚æ˜¾ç„¶ï¼Œå¦‚æœå†²çªçš„æ¦‚ç‡è¶Šå¤§ï¼Œè¿™ä¸ªListå°±è¶Šé•¿ï¼ŒMapçš„get()æ–¹æ³•æ•ˆç‡å°±è¶Šä½ã€‚HashMapå†…éƒ¨é€šè¿‡&quot;a&quot;æ‰¾åˆ°çš„å®é™…ä¸Šæ˜¯List&lt;Entry&lt;String, Person&gt;&gt;ï¼Œå®ƒè¿˜éœ€è¦éå†è¿™ä¸ªListï¼Œå¹¶æ‰¾åˆ°ä¸€ä¸ªEntryï¼Œå®ƒçš„keyå­—æ®µæ˜¯&quot;a&quot;ï¼Œæ‰èƒ½è¿”å›å¯¹åº”çš„Personå®ä¾‹ã€‚</p>
<h1>EnumMap</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.DayOfWeek;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Map&lt;DayOfWeek, String&gt; map = <span class="keyword">new</span> EnumMap&lt;&gt;(DayOfWeek<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        map.put(DayOfWeek.MONDAY, <span class="string">"æ˜ŸæœŸä¸€"</span>);</span><br><span class="line">        map.put(DayOfWeek.TUESDAY, <span class="string">"æ˜ŸæœŸäºŒ"</span>);</span><br><span class="line">        map.put(DayOfWeek.WEDNESDAY, <span class="string">"æ˜ŸæœŸä¸‰"</span>);</span><br><span class="line">        map.put(DayOfWeek.THURSDAY, <span class="string">"æ˜ŸæœŸå››"</span>);</span><br><span class="line">        map.put(DayOfWeek.FRIDAY, <span class="string">"æ˜ŸæœŸäº”"</span>);</span><br><span class="line">        map.put(DayOfWeek.SATURDAY, <span class="string">"æ˜ŸæœŸå…­"</span>);</span><br><span class="line">        map.put(DayOfWeek.SUNDAY, <span class="string">"æ˜ŸæœŸæ—¥"</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">        System.out.println(map.get(DayOfWeek.MONDAY));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>TreeMap</h1>
<p>è¿˜æœ‰ä¸€ç§Mapï¼Œå®ƒåœ¨å†…éƒ¨ä¼šå¯¹Keyè¿›è¡Œæ’åºï¼Œè¿™ç§Mapå°±æ˜¯SortedMapã€‚æ³¨æ„åˆ°SortedMapæ˜¯æ¥å£ï¼Œå®ƒçš„å®ç°ç±»æ˜¯TreeMapã€‚<br>
ä½¿ç”¨TreeMapæ—¶ï¼Œæ”¾å…¥çš„Keyå¿…é¡»å®ç°Comparableæ¥å£ã€‚Stringã€Integerè¿™äº›ç±»å·²ç»å®ç°äº†Comparableæ¥å£ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½œä¸ºKeyä½¿ç”¨ã€‚ä½œä¸ºValueçš„å¯¹è±¡åˆ™æ²¡æœ‰ä»»ä½•è¦æ±‚ã€‚</p>
<p>å¦‚æœä½œä¸ºKeyçš„classæ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œé‚£ä¹ˆï¼Œå¿…é¡»åœ¨åˆ›å»ºTreeMapæ—¶åŒæ—¶æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰æ’åºç®—æ³•ï¼š<br>
æ³¨æ„åˆ°Comparatoræ¥å£è¦æ±‚å®ç°ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•ï¼Œå®ƒè´Ÿè´£æ¯”è¾ƒä¼ å…¥çš„ä¸¤ä¸ªå…ƒç´ aå’Œbï¼Œå¦‚æœa&lt;bï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼Œé€šå¸¸æ˜¯-1ï¼Œå¦‚æœa==bï¼Œåˆ™è¿”å›0ï¼Œå¦‚æœa&gt;bï¼Œåˆ™è¿”å›æ­£æ•°ï¼Œé€šå¸¸æ˜¯1ã€‚TreeMapå†…éƒ¨æ ¹æ®æ¯”è¾ƒç»“æœå¯¹Keyè¿›è¡Œæ’åºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;Student, Integer&gt; map = <span class="keyword">new</span> TreeMap&lt;&gt;(<span class="keyword">new</span> Comparator&lt;Student&gt;() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student p1, Student p2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p1.score == p2.score) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p1.score &gt; p2.score ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œæ³¨æ„åˆ°Personç±»å¹¶æœªè¦†å†™equals()å’ŒhashCode()ï¼Œå› ä¸ºTreeMapä¸ä½¿ç”¨equals()å’ŒhashCode()ã€‚</p>
<h1>Set</h1>
<p>åªéœ€è¦å­˜å‚¨ä¸é‡å¤çš„keyï¼Œå¹¶ä¸éœ€è¦å­˜å‚¨æ˜ å°„çš„valueï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨Setã€‚<br>
Setç”¨äºå­˜å‚¨ä¸é‡å¤çš„å…ƒç´ é›†åˆï¼Œå®ƒä¸»è¦æä¾›ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>
<p>å°†å…ƒç´ æ·»åŠ è¿›Set<E>ï¼šboolean add(E e)<br>
å°†å…ƒç´ ä»Set<E>åˆ é™¤ï¼šboolean remove(Object e)<br>
åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´ ï¼šboolean contains(Object e)<br>
å› ä¸ºæ”¾å…¥Setçš„å…ƒç´ å’ŒMapçš„keyç±»ä¼¼ï¼Œéƒ½è¦æ­£ç¡®å®ç°equals()å’ŒhashCode()æ–¹æ³•ï¼Œå¦åˆ™è¯¥å…ƒç´ æ— æ³•æ­£ç¡®åœ°æ”¾å…¥Setã€‚</E></E></p>
<p>æœ€å¸¸ç”¨çš„Setå®ç°ç±»æ˜¯HashSetï¼Œå®é™…ä¸Šï¼ŒHashSetä»…ä»…æ˜¯å¯¹HashMapçš„ä¸€ä¸ªç®€å•å°è£…ï¼Œå®ƒçš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// æŒæœ‰ä¸€ä¸ªHashMap:</span></span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;E, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ”¾å…¥HashMapçš„value:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(e, PRESENT) == <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.containsKey(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.remove(o) == PRESENT;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Setæ¥å£å¹¶ä¸ä¿è¯æœ‰åºï¼Œè€ŒSortedSetæ¥å£åˆ™ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„ï¼š</p>
<p>HashSetæ˜¯æ— åºçš„ï¼Œå› ä¸ºå®ƒå®ç°äº†Setæ¥å£ï¼Œå¹¶æ²¡æœ‰å®ç°SortedSetæ¥å£ï¼›<br>
TreeSetæ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå®ƒå®ç°äº†SortedSetæ¥å£ã€‚<br>
ä½¿ç”¨TreeSetå’Œä½¿ç”¨TreeMapçš„è¦æ±‚ä¸€æ ·ï¼Œæ·»åŠ çš„å…ƒç´ å¿…é¡»æ­£ç¡®å®ç°Comparableæ¥å£ï¼Œå¦‚æœæ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œé‚£ä¹ˆåˆ›å»ºTreeSetæ—¶å¿…é¡»ä¼ å…¥ä¸€ä¸ªComparatorå¯¹è±¡ã€‚</p>
<h1>Queue</h1>
<p>FIFO(first in first out)<br>
åœ¨Javaçš„æ ‡å‡†åº“ä¸­ï¼Œé˜Ÿåˆ—æ¥å£Queueå®šä¹‰äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>
<p>int size()ï¼šè·å–é˜Ÿåˆ—é•¿åº¦ï¼›<br>
boolean add(E)/boolean offer(E)ï¼šæ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾ï¼›<br>
E remove()/E poll()ï¼šè·å–é˜Ÿé¦–å…ƒç´ å¹¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼›<br>
E element()/E peek()ï¼šè·å–é˜Ÿé¦–å…ƒç´ ä½†å¹¶ä¸ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚<br>
åŒºåˆ«æ˜¯å‡½æ•°å¤±è´¥æ—¶ï¼Œå·¦è¾¹ä¼šthrow exceptionï¼Œå³è¾¹ä¼šè¿”å›nullæˆ–è€…falseã€‚</p>
<p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼ŒLinkedListå³å®ç°äº†Listæ¥å£ï¼Œåˆå®ç°äº†Queueæ¥å£ï¼Œä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒå½“ä½œListï¼Œå°±è·å–Listçš„å¼•ç”¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒå½“ä½œQueueï¼Œå°±è·å–Queueçš„å¼•ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªList:</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªQueue:</span></span><br><span class="line">Queue&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<h1>PriorityQueue</h1>
<p>å®ƒçš„å‡ºé˜Ÿé¡ºåºä¸å…ƒç´ çš„ä¼˜å…ˆçº§æœ‰å…³ï¼Œå¯¹PriorityQueueè°ƒç”¨remove()æˆ–poll()æ–¹æ³•ï¼Œè¿”å›çš„æ€»æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚<br>
æˆ‘ä»¬æ”¾å…¥çš„é¡ºåºæ˜¯&quot;apple&quot;ã€â€œpearâ€ã€â€œbananaâ€ï¼Œä½†æ˜¯å–å‡ºçš„é¡ºåºå´æ˜¯&quot;apple&quot;ã€â€œbananaâ€ã€â€œpearâ€ï¼Œè¿™æ˜¯å› ä¸ºä»å­—ç¬¦ä¸²çš„æ’åºçœ‹ï¼Œ&quot;apple&quot;æ’åœ¨æœ€å‰é¢ï¼Œ&quot;pear&quot;æ’åœ¨æœ€åé¢ã€‚<br>
å› æ­¤ï¼Œæ”¾å…¥PriorityQueueçš„å…ƒç´ ï¼Œå¿…é¡»å®ç°Comparableæ¥å£ï¼ŒPriorityQueueä¼šæ ¹æ®å…ƒç´ çš„æ’åºé¡ºåºå†³å®šå‡ºé˜Ÿçš„ä¼˜å…ˆçº§ã€‚<br>
å¦‚æœæˆ‘ä»¬è¦æ”¾å…¥çš„å…ƒç´ å¹¶æ²¡æœ‰å®ç°Comparableæ¥å£æ€ä¹ˆåŠï¼ŸPriorityQueueå…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ªComparatorå¯¹è±¡æ¥åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ çš„é¡ºåºã€‚æˆ‘ä»¬ä»¥é“¶è¡Œæ’é˜Ÿä¸šåŠ¡ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ªPriorityQueueï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Queue&lt;User&gt; q = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="keyword">new</span> UserComparator());</span><br><span class="line">        <span class="comment">// æ·»åŠ 3ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—:</span></span><br><span class="line">        q.offer(<span class="keyword">new</span> User(<span class="string">"Bob"</span>, <span class="string">"A1"</span>));</span><br><span class="line">        q.offer(<span class="keyword">new</span> User(<span class="string">"Alice"</span>, <span class="string">"A2"</span>));</span><br><span class="line">        q.offer(<span class="keyword">new</span> User(<span class="string">"Boss"</span>, <span class="string">"V1"</span>));</span><br><span class="line">        System.out.println(q.poll()); <span class="comment">// Boss/V1</span></span><br><span class="line">        System.out.println(q.poll()); <span class="comment">// Bob/A1</span></span><br><span class="line">        System.out.println(q.poll()); <span class="comment">// Alice/A2</span></span><br><span class="line">        System.out.println(q.poll()); <span class="comment">// null,å› ä¸ºé˜Ÿåˆ—ä¸ºç©º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(User u1, User u2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (u1.number.charAt(<span class="number">0</span>) == u2.number.charAt(<span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœä¸¤äººçš„å·éƒ½æ˜¯Aå¼€å¤´æˆ–è€…éƒ½æ˜¯Vå¼€å¤´,æ¯”è¾ƒå·çš„å¤§å°:</span></span><br><span class="line">            <span class="keyword">return</span> u1.number.compareTo(u2.number);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (u1.number.charAt(<span class="number">0</span>) == <span class="string">'V'</span>) &#123;</span><br><span class="line">            <span class="comment">// u1çš„å·ç æ˜¯Vå¼€å¤´,ä¼˜å…ˆçº§é«˜:</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String number;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, String number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">"/"</span> + number;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Deque(Double Ended queue)</h1>
<table>
<thead>
<tr>
<th style="text-align:right">&lt;&gt;</th>
<th style="text-align:center">Queue</th>
<th style="text-align:left">Deque</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">æ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾</td>
<td style="text-align:center">add(E e) / offer(E e)</td>
<td style="text-align:left">addLast(E e) / offerLast(E e)</td>
</tr>
<tr>
<td style="text-align:right">å–é˜Ÿé¦–å…ƒç´ å¹¶åˆ é™¤</td>
<td style="text-align:center">E remove() / E poll()</td>
<td style="text-align:left">E removeFirst() / E pollFirst()</td>
</tr>
<tr>
<td style="text-align:right">å–é˜Ÿé¦–å…ƒç´ ä½†ä¸åˆ é™¤</td>
<td style="text-align:center">E element() / E peek()</td>
<td style="text-align:left">E getFirst() / E peekFirst()</td>
</tr>
<tr>
<td style="text-align:right">æ·»åŠ å…ƒç´ åˆ°é˜Ÿé¦–</td>
<td style="text-align:center">æ— </td>
<td style="text-align:left">addFirst(E e) / offerFirst(E e)</td>
</tr>
<tr>
<td style="text-align:right">å–é˜Ÿå°¾å…ƒç´ å¹¶åˆ é™¤</td>
<td style="text-align:center">æ— </td>
<td style="text-align:left">E removeLast() / E pollLast()</td>
</tr>
<tr>
<td style="text-align:right">å–é˜Ÿå°¾å…ƒç´ ä½†ä¸åˆ é™¤</td>
<td style="text-align:center">æ— </td>
<td style="text-align:left">E getLast() / E peekLast()</td>
</tr>
</tbody>
</table>
<p>Dequeæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»æœ‰ArrayDequeå’ŒLinkedListã€‚<br>
æˆ‘ä»¬å‘ç°LinkedListçœŸæ˜¯ä¸€ä¸ªå…¨èƒ½é€‰æ‰‹ï¼Œå®ƒå³æ˜¯Listï¼Œåˆæ˜¯Queueï¼Œè¿˜æ˜¯Dequeã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ€»æ˜¯ç”¨ç‰¹å®šçš„æ¥å£æ¥å¼•ç”¨å®ƒï¼Œè¿™æ˜¯å› ä¸ºæŒæœ‰æ¥å£è¯´æ˜ä»£ç çš„æŠ½è±¡å±‚æ¬¡æ›´é«˜ï¼Œè€Œä¸”æ¥å£æœ¬èº«å®šä¹‰çš„æ–¹æ³•ä»£è¡¨äº†ç‰¹å®šçš„ç”¨é€”ã€‚</p>
<p>é¢å‘æŠ½è±¡ç¼–ç¨‹çš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯ï¼šå°½é‡æŒæœ‰æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚</p>
<h1>æ ˆStack</h1>
<p>LIFO(last in first out)<br>
åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ç”¨Dequeå¯ä»¥å®ç°Stackçš„åŠŸèƒ½ï¼š</p>
<ul>
<li>æŠŠå…ƒç´ å‹æ ˆï¼špush(E)/addFirst(E)ï¼›</li>
<li>æŠŠæ ˆé¡¶çš„å…ƒç´ â€œå¼¹å‡ºâ€ï¼špop(E)/removeFirst()ï¼›</li>
<li>å–æ ˆé¡¶å…ƒç´ ä½†ä¸å¼¹å‡ºï¼špeek(E)/peekFirst()ã€‚</li>
</ul>
<h3 id="æ ˆçš„ä½œç”¨"><a class="header-anchor" href="#æ ˆçš„ä½œç”¨">Â¶</a>æ ˆçš„ä½œç”¨</h3>
<ol>
<li>JVMä¼šåˆ›å»ºæ–¹æ³•è°ƒç”¨æ ˆï¼Œæ¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå…ˆå°†å‚æ•°å‹æ ˆï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼›å½“æ–¹æ³•è¿”å›æ—¶ï¼Œè¿”å›å€¼å‹æ ˆï¼Œè°ƒç”¨æ–¹æ³•é€šè¿‡å‡ºæ ˆæ“ä½œè·å¾—æ–¹æ³•è¿”å›å€¼ã€‚<br>
å› ä¸ºæ–¹æ³•è°ƒç”¨æ ˆæœ‰å®¹é‡é™åˆ¶ï¼ŒåµŒå¥—è°ƒç”¨è¿‡å¤šä¼šé€ æˆæ ˆæº¢å‡ºï¼Œå³å¼•å‘StackOverflowErrorã€‚</li>
<li>è®¡ç®—è¿›åˆ¶è½¬æ¢ï¼Œå°†ä½™æ•°ä¸€æ¬¡å‹æ ˆå†popå‡ºå³ä¸ºç»“æœã€‚</li>
<li>è®¡ç®—ä¸­ç¼€è¡¨è¾¾å¼ï¼šå…ˆè½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œå°†æ•°å­—ä¾æ¬¡å‹æ ˆï¼Œé‡åˆ°è¿ç®—ç¬¦åˆ™popå‡ºä¸¤ä¸ªæ•°å­—è®¡ç®—ï¼Œå°†ç»“æœå‹æ ˆï¼Œç»§ç»­è®¡ç®—ã€‚</li>
</ol>
<h1>iterator</h1>
<p>ä½¿ç”¨è¿­ä»£å™¨çš„å¥½å¤„åœ¨äºï¼Œè°ƒç”¨æ–¹æ€»æ˜¯ä»¥ç»Ÿä¸€çš„æ–¹å¼éå†å„ç§é›†åˆç±»å‹ï¼Œè€Œä¸å¿…å…³ç³»å®ƒä»¬å†…éƒ¨çš„å­˜å‚¨ç»“æ„ã€‚</p>
<h1>Collections</h1>
<p>ä¸€ä¸ªå·¥å…·ç±»ï¼Œå¯ä»¥æ“ä½œé›†åˆçš„å…ƒç´ ã€‚</p>
<h4 id="æ’åº"><a class="header-anchor" href="#æ’åº">Â¶</a>æ’åº</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Collections.sort(list);</span><br></pre></td></tr></table></figure>
<h4 id="æ´—ç‰Œ"><a class="header-anchor" href="#æ´—ç‰Œ">Â¶</a>æ´—ç‰Œ</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Collections.shuffle(list);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ³¨è§£</title>
    <url>/2020/03/07/Java%E6%B3%A8%E8%A7%A3/</url>
    <content><![CDATA[<pre><code>æ³¨é‡Šä¼šè¢«ç¼–è¯‘å™¨ç›´æ¥å¿½ç•¥ï¼Œæ³¨è§£åˆ™å¯ä»¥è¢«ç¼–è¯‘å™¨æ‰“åŒ…è¿›å…¥classæ–‡ä»¶ï¼Œå› æ­¤ï¼Œæ³¨è§£æ˜¯ä¸€ç§ç”¨ä½œæ ‡æ³¨çš„â€œå…ƒæ•°æ®â€ã€‚
</code></pre>
<a id="more"></a>
<h1>Annotationçš„ç§ç±»</h1>
<p>ç¬¬ä¸€ç±»æ˜¯ç”±ç¼–è¯‘å™¨ä½¿ç”¨çš„æ³¨è§£ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>@Overrideï¼šè®©ç¼–è¯‘å™¨æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ­£ç¡®åœ°å®ç°äº†è¦†å†™ï¼›</li>
<li>@SuppressWarningsï¼šå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥æ­¤å¤„ä»£ç äº§ç”Ÿçš„è­¦å‘Šã€‚<br>
è¿™ç±»æ³¨è§£ä¸ä¼šè¢«ç¼–è¯‘è¿›å…¥.classæ–‡ä»¶ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘åå°±è¢«ç¼–è¯‘å™¨æ‰”æ‰äº†ã€‚</li>
</ul>
<p>ç¬¬äºŒç±»æ˜¯ç”±å·¥å…·å¤„ç†.classæ–‡ä»¶ä½¿ç”¨çš„æ³¨è§£ï¼Œæ¯”å¦‚æœ‰äº›å·¥å…·ä¼šåœ¨åŠ è½½classçš„æ—¶å€™ï¼Œå¯¹classåšåŠ¨æ€ä¿®æ”¹ï¼Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚è¿™ç±»æ³¨è§£ä¼šè¢«ç¼–è¯‘è¿›å…¥.classæ–‡ä»¶ï¼Œä½†åŠ è½½ç»“æŸåå¹¶ä¸ä¼šå­˜åœ¨äºå†…å­˜ä¸­ã€‚è¿™ç±»æ³¨è§£åªè¢«ä¸€äº›åº•å±‚åº“ä½¿ç”¨ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸å¿…è‡ªå·±å¤„ç†ã€‚</p>
<p>ç¬¬ä¸‰ç±»æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸèƒ½å¤Ÿè¯»å–çš„æ³¨è§£ï¼Œå®ƒä»¬åœ¨åŠ è½½åä¸€ç›´å­˜åœ¨äºJVMä¸­ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ³¨è§£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé…ç½®äº†@PostConstructçš„æ–¹æ³•ä¼šåœ¨è°ƒç”¨æ„é€ æ–¹æ³•åè‡ªåŠ¨è¢«è°ƒç”¨ï¼ˆè¿™æ˜¯Javaä»£ç è¯»å–è¯¥æ³¨è§£å®ç°çš„åŠŸèƒ½ï¼ŒJVMå¹¶ä¸ä¼šè¯†åˆ«è¯¥æ³¨è§£ï¼‰ã€‚</p>
<h5 id="æ³¨è§£çš„å‚æ•°"><a class="header-anchor" href="#æ³¨è§£çš„å‚æ•°">Â¶</a>æ³¨è§£çš„å‚æ•°</h5>
<p>æ³¨è§£çš„é…ç½®å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œç¼ºå°‘æŸä¸ªé…ç½®å‚æ•°æ—¶å°†ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<h1>å®šä¹‰æ³¨è§£</h1>
<p>ä½¿ç”¨@interfaceè¯­æ³•æ¥å®šä¹‰annotationã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£çš„å‚æ•°ç±»ä¼¼æ— å‚æ•°æ–¹æ³•ï¼Œå¯ä»¥ç”¨defaultè®¾å®šä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¼ºçƒˆæ¨èï¼‰ã€‚æœ€å¸¸ç”¨çš„å‚æ•°åº”å½“å‘½åä¸ºvalueã€‚</p>
<h3 id="å…ƒæ³¨è§£"><a class="header-anchor" href="#å…ƒæ³¨è§£">Â¶</a>å…ƒæ³¨è§£</h3>
<p>å¯ä»¥ä¿®é¥°æ³¨è§£ï¼Œæ·»åŠ è§„åˆ™ã€‚</p>
<h5 id="Target"><a class="header-anchor" href="#Target">Â¶</a>@Target</h5>
<p>ä½¿ç”¨@Targetå¯ä»¥å®šä¹‰Annotationèƒ½å¤Ÿè¢«åº”ç”¨äºæºç çš„å“ªäº›ä½ç½®ï¼š<br>
ç±»æˆ–æ¥å£ï¼šElementType.TYPEï¼›<br>
å­—æ®µï¼šElementType.FIELDï¼›<br>
æ–¹æ³•ï¼šElementType.METHODï¼›<br>
æ„é€ æ–¹æ³•ï¼šElementType.CONSTRUCTORï¼›<br>
æ–¹æ³•å‚æ•°ï¼šElementType.PARAMETERã€‚</p>
<h5 id="Retention"><a class="header-anchor" href="#Retention">Â¶</a>@Retention</h5>
<p>å¦ä¸€ä¸ªé‡è¦çš„å…ƒæ³¨è§£@Retentionå®šä¹‰äº†Annotationçš„ç”Ÿå‘½å‘¨æœŸï¼š<br>
ä»…ç¼–è¯‘æœŸï¼šRetentionPolicy.SOURCEï¼›<br>
ä»…classæ–‡ä»¶ï¼šRetentionPolicy.CLASSï¼›<br>
è¿è¡ŒæœŸï¼šRetentionPolicy.RUNTIMEã€‚<br>
å¦‚æœ@Retentionä¸å­˜åœ¨ï¼Œåˆ™è¯¥Annotationé»˜è®¤ä¸ºCLASSã€‚å› ä¸ºé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„Annotationéƒ½æ˜¯RUNTIMEï¼Œæ‰€ä»¥ï¼ŒåŠ¡å¿…è¦åŠ ä¸Š@Retention(RetentionPolicy.RUNTIME)è¿™ä¸ªå…ƒæ³¨è§£</p>
<h1>å¤„ç†æ³¨è§£</h1>
<p>è®¨è®ºä¸€ä¸‹runtimeçš„æ³¨è§£ï¼Œæ³¨è§£å®šä¹‰åå…¶å®æ˜¯ä¸€ä¸ªclassï¼Œæ‰€æœ‰çš„æ³¨è§£éƒ½ç»§æ‰¿è‡ªjava.lang.annotation.Annotationï¼Œå› æ­¤è¯»å–æ³¨è§£è¦ç”¨åˆ°åå°„APIã€‚</p>
<h3 id="åå°„è¯»å–annotation"><a class="header-anchor" href="#åå°„è¯»å–annotation">Â¶</a>åå°„è¯»å–annotation</h3>
<ol>
<li>
<p>åˆ¤æ–­æŸä¸ªæ³¨è§£æ˜¯å¦å­˜åœ¨äºClassã€Fieldã€Methodæˆ–Constructorï¼š</p>
<p>Class.isAnnotationPresent(Class)<br>
Field.isAnnotationPresent(Class)<br>
Method.isAnnotationPresent(Class)<br>
Constructor.isAnnotationPresent(Class)</p>
</li>
<li>
<p>ä½¿ç”¨åå°„APIè¯»å–Annotationï¼š<br>
Class.getAnnotation(Class)<br>
Field.getAnnotation(Class)<br>
Method.getAnnotation(Class)<br>
Constructor.getAnnotation(Class)</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class cls = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"><span class="keyword">if</span> (cls.isAnnotationPresent(Report<span class="class">.<span class="keyword">class</span>)) </span>&#123;</span><br><span class="line">    Report report = cls.getAnnotation(Report<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨æ³¨è§£"><a class="header-anchor" href="#ä½¿ç”¨æ³¨è§£">Â¶</a>ä½¿ç”¨æ³¨è§£</h3>
<h5 id="1-å®šä¹‰æ³¨è§£"><a class="header-anchor" href="#1-å®šä¹‰æ³¨è§£">Â¶</a>1 å®šä¹‰æ³¨è§£</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Range &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">()</span> <span class="keyword">default</span> 255</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-ä½¿ç”¨æ³¨è§£"><a class="header-anchor" href="#2-ä½¿ç”¨æ³¨è§£">Â¶</a>2 ä½¿ç”¨æ³¨è§£</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Range</span>(min=<span class="number">1</span>, max=<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Range</span>(max=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">public</span> String city;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-æ£€æŸ¥æ–¹æ³•"><a class="header-anchor" href="#3-æ£€æŸ¥æ–¹æ³•">Â¶</a>3 æ£€æŸ¥æ–¹æ³•</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(Person person)</span> <span class="keyword">throws</span> IllegalArgumentException, ReflectiveOperationException </span>&#123;</span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰Field:</span></span><br><span class="line">    <span class="keyword">for</span> (Field field : person.getClass().getFields()) &#123;</span><br><span class="line">        <span class="comment">// è·å–Fieldå®šä¹‰çš„@Range:</span></span><br><span class="line">        Range range = field.getAnnotation(Range<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœ@Rangeå­˜åœ¨:</span></span><br><span class="line">        <span class="keyword">if</span> (range != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// è·å–Fieldçš„å€¼:</span></span><br><span class="line">            Object value = field.get(person);</span><br><span class="line">            <span class="comment">// å¦‚æœå€¼æ˜¯String:</span></span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">                String s = (String) value;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å€¼æ˜¯å¦æ»¡è¶³@Rangeçš„min/max:</span></span><br><span class="line">                <span class="keyword">if</span> (s.length() &lt; range.min() || s.length() &gt; range.max()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid field: "</span> + field.getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬é€šè¿‡@Rangeæ³¨è§£ï¼Œé…åˆcheck()æ–¹æ³•ï¼Œå°±å¯ä»¥å®ŒæˆPersonå®ä¾‹çš„æ£€æŸ¥ã€‚æ³¨æ„æ£€æŸ¥é€»è¾‘å®Œå…¨æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼ŒJVMä¸ä¼šè‡ªåŠ¨ç»™æ³¨è§£æ·»åŠ ä»»ä½•é¢å¤–çš„é€»è¾‘ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦</title>
    <url>/2020/03/07/%E5%AD%97%E7%AC%A6%E6%B5%81%E4%B8%AD%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%B8%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AD%97%E7%AC%A6/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥æ‰¾å‡ºå­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå½“ä»å­—ç¬¦æµä¸­åªè¯»å‡ºå‰ä¸¤ä¸ªå­—ç¬¦&quot;go&quot;æ—¶ï¼Œç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦æ˜¯&quot;g&quot;ã€‚å½“ä»è¯¥å­—ç¬¦æµä¸­è¯»å‡ºå‰å…­ä¸ªå­—ç¬¦â€œgoogle&quot;æ—¶ï¼Œç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦æ˜¯&quot;l&quot;ã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•"><a class="header-anchor" href="#è§£æ³•">Â¶</a>è§£æ³•:</h2>
<pre><code>ä½¿ç”¨ä¸€ä¸ªint[]åšæ ‡è®°ï¼Œç¬¬ä¸€æ¬¡å‡ºç°è®¡ä¸ºindexå€¼ï¼Œç¬¬äºŒæ¬¡å‡ºç°åˆ™è®¡ä¸º-2ã€‚å­—èŠ‚æµè¾“å…¥å®Œåï¼Œç„¶åæ£€æŸ¥è¿™ä¸ª[]é‡Œçš„å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå¤§äºé›¶çš„å³ä¸ºç¬¬ä¸€ä¸ªåªå‡ºç°çš„å­—ç¬¦ï¼Œå…¶æ‰€åœ¨ä½ç½®çš„ä¸‹æ ‡å³ä¸ºè¯¥å­—ç¬¦çš„ASCIIç å€¼ï¼Œç±»å‹è½¬æ¢åè¿”å›ã€‚
</code></pre>
<h2 id="Code"><a class="header-anchor" href="#Code">Â¶</a>Code:</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Insert one char from stringstream</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] occurence = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span>;i&lt;<span class="number">256</span>;i++)&#123;</span><br><span class="line">            occurence[i] = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> ch)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(occurence[ch] == -<span class="number">1</span>)&#123;</span><br><span class="line">            occurence[ch] = index;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(occurence[ch]&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            occurence[ch] = -<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//return the first appearence once char in current stringstream</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">FirstAppearingOnce</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> ch = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="keyword">int</span> minIndex = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">256</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(occurence[i] &gt;=<span class="number">0</span> &amp;&amp; occurence[i]&lt;minIndex)&#123;</span><br><span class="line">                ch = (<span class="keyword">char</span>)i;</span><br><span class="line">                minIndex = occurence[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'\0'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'#'</span>;</span><br><span class="line">        <span class="keyword">return</span> ch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ³›å‹</title>
    <url>/2020/03/06/Java%E6%B3%9B%E5%9E%8B/</url>
    <content><![CDATA[<p>æ³›å‹æ˜¯ä¸€ç§â€œä»£ç æ¨¡æ¿â€ï¼Œå¯ä»¥ç”¨ä¸€å¥—ä»£ç å¥—ç”¨å„ç§ç±»å‹ã€‚ç¼–å†™ä¸€æ¬¡ï¼Œä¸‡èƒ½åŒ¹é…ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T e)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ArrayListï¼Œå®ƒå¯ä»¥çœ‹ä½œâ€œå¯å˜é•¿åº¦â€çš„æ•°ç»„ï¼Œå†…éƒ¨å°±æ˜¯ä¸€ä¸ªObject[]æ•°ç»„ï¼Œé…åˆå­˜å‚¨ä¸€ä¸ªå½“å‰åˆ†é…çš„é•¿åº¦ã€‚</p>
<h4 id="å‘ä¸Šè½¬å‹"><a class="header-anchor" href="#å‘ä¸Šè½¬å‹">Â¶</a>å‘ä¸Šè½¬å‹</h4>
<p>åœ¨Javaæ ‡å‡†åº“ä¸­çš„ArrayList<T>å®ç°äº†List<T>æ¥å£ï¼Œå®ƒå¯ä»¥å‘ä¸Šè½¬å‹ä¸ºList<T>ã€‚<br>
è¦ç‰¹åˆ«æ³¨æ„ï¼šä¸èƒ½æŠŠArrayList<Integer>å‘ä¸Šè½¬å‹ä¸ºArrayList<Number>æˆ–List<Number>ã€‚<br>
æˆ‘ä»¬æŠŠä¸€ä¸ªArrayList<Integer>è½¬å‹ä¸ºArrayList<Number>ç±»å‹åï¼Œè¿™ä¸ªArrayList<Number>å°±å¯ä»¥æ¥å—Floatç±»å‹ï¼Œå› ä¸ºFloatæ˜¯Numberçš„å­ç±»ã€‚ä½†æ˜¯ï¼ŒArrayList<Number>å®é™…ä¸Šå’ŒArrayList<Integer>æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ArrayList<Integer>ç±»å‹ï¼Œå®ƒä¸å¯èƒ½æ¥å—Floatç±»å‹ï¼Œ æ‰€ä»¥åœ¨è·å–Integerçš„æ—¶å€™å°†äº§ç”ŸClassCastExceptionã€‚</Integer></Integer></Number></Number></Number></Integer></Number></Number></Integer></T></T></T></p>
<h1>ä½¿ç”¨æ³›å‹</h1>
<p>ç¼–è¯‘å™¨çœ‹åˆ°æ³›å‹ç±»å‹List<Number>å°±å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºåé¢çš„ArrayList<T>çš„æ³›å‹ç±»å‹å¿…é¡»æ˜¯ArrayList<Number>ï¼Œå› æ­¤ï¼Œå¯ä»¥æŠŠä»£ç ç®€å†™ä¸ºï¼š</Number></T></Number></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥çœç•¥åé¢çš„Numberï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­æ³›å‹ç±»å‹ï¼š</span></span><br><span class="line">List&lt;Number&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<h3 id="æ³›å‹æ¥å£"><a class="header-anchor" href="#æ³›å‹æ¥å£">Â¶</a>æ³›å‹æ¥å£</h3>
<p>é™¤äº†ArrayList<T>ä½¿ç”¨äº†æ³›å‹ï¼Œè¿˜å¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨æ³›å‹ã€‚ä¾‹å¦‚ï¼ŒArrays.sort(Object[])å¯ä»¥å¯¹ä»»æ„æ•°ç»„è¿›è¡Œæ’åºï¼Œä½†å¾…æ’åºçš„å…ƒç´ å¿…é¡»å®ç°Comparable<T>è¿™ä¸ªæ³›å‹æ¥å£ï¼š<br>
å¯ä»¥ç›´æ¥å¯¹Stringæ•°ç»„è¿›è¡Œæ’åº,è¿™æ˜¯å› ä¸ºStringæœ¬èº«å·²ç»å®ç°äº†Comparable<String>æ¥å£ã€‚å¦‚æœæ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„Personç±»å‹è¯•è¯•ï¼š</String></T></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person[] ps = <span class="keyword">new</span> Person[] &#123;</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Bob"</span>, <span class="number">61</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Alice"</span>, <span class="number">88</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Lily"</span>, <span class="number">75</span>),</span><br><span class="line">&#125;;</span><br><span class="line">Arrays.sort(ps);</span><br><span class="line">System.out.println(Arrays.toString(ps));</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ClassCastExceptionï¼Œå³æ— æ³•å°†Personè½¬å‹ä¸ºComparableã€‚æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œè®©Personå®ç°Comparable<T>æ¥å£ï¼š</T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> score;</span><br><span class="line">    Person(String name, <span class="keyword">int</span> score) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person other)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name.compareTo(other.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">","</span> + <span class="keyword">this</span>.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥æ­£ç¡®å®ç°æŒ‰nameè¿›è¡Œæ’åºã€‚ä¹Ÿå¯ä»¥ä¿®æ”¹æ¯”è¾ƒé€»è¾‘ï¼Œä¾‹å¦‚ï¼ŒæŒ‰scoreä»é«˜åˆ°ä½æ’åºã€‚</p>
<h1>ç¼–å†™æ³›å‹</h1>
<p>é€šå¸¸æ¥è¯´ï¼Œæ³›å‹ç±»ä¸€èˆ¬ç”¨åœ¨é›†åˆç±»ä¸­ã€‚<br>
é¦–å…ˆï¼ŒæŒ‰ç…§æŸç§ç±»å‹ï¼Œä¾‹å¦‚ï¼šStringï¼Œæ¥ç¼–å†™ç±»ã€‚<br>
ç„¶åï¼Œæ ‡è®°æ‰€æœ‰çš„ç‰¹å®šç±»å‹ï¼Œè¿™é‡Œæ˜¯Stringã€‚<br>
æœ€åï¼ŒæŠŠç‰¹å®šç±»å‹Stringæ›¿æ¢ä¸ºTï¼Œå¹¶ç”³æ˜<T>ã€‚</T></p>
<h3 id="é™æ€æ–¹æ³•"><a class="header-anchor" href="#é™æ€æ–¹æ³•">Â¶</a>é™æ€æ–¹æ³•</h3>
<p>ç¼–å†™æ³›å‹ç±»æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œæ³›å‹ç±»å‹<T>ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•ã€‚<br>
å¯ä»¥åœ¨staticä¿®é¥°ç¬¦åé¢åŠ ä¸€ä¸ª<T>ï¼Œç¼–è¯‘å°±èƒ½é€šè¿‡ï¼š</T></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getLast</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥ç¼–è¯‘é€šè¿‡:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Pair&lt;T&gt; <span class="title">create</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pair&lt;T&gt;(first, last);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†å®é™…ä¸Šï¼Œè¿™ä¸ª<T>å’ŒPair<T>ç±»å‹çš„<T>å·²ç»æ²¡æœ‰ä»»ä½•å…³ç³»äº†<br>
å¯¹äºé™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬æ”¹å†™ä¸ºâ€œæ³›å‹â€æ–¹æ³•ï¼Œåªéœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹å³å¯ã€‚å¯¹äºä¸Šé¢çš„create()é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒæ”¹ä¸ºå¦ä¸€ç§æ³›å‹ç±»å‹ï¼Œä¾‹å¦‚ï¼Œ<K>ï¼šè¿™æ ·æ‰èƒ½æ¸…æ¥šåœ°å°†é™æ€æ–¹æ³•çš„æ³›å‹ç±»å‹å’Œå®ä¾‹ç±»å‹çš„æ³›å‹ç±»å‹åŒºåˆ†å¼€ã€‚</K></T></T></T></p>
<h3 id="å¤šä¸ªæ³›å‹ç±»å‹"><a class="header-anchor" href="#å¤šä¸ªæ³›å‹ç±»å‹">Â¶</a>å¤šä¸ªæ³›å‹ç±»å‹</h3>
<p>æ³›å‹è¿˜å¯ä»¥å®šä¹‰å¤šç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›Pairä¸æ€»æ˜¯å­˜å‚¨ä¸¤ä¸ªç±»å‹ä¸€æ ·çš„å¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»å‹&lt;T, K&gt;ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>, <span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> K last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, K last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">getLast</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ—¶ç‰¹åˆ«æŒ‡å‡ºä¸¤ç§ç±»å‹ï¼š</span></span><br><span class="line">Pair&lt;String, Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="string">"test"</span>, <span class="number">123</span>);</span><br></pre></td></tr></table></figure>
<p>Javaæ ‡å‡†åº“çš„Map&lt;K, V&gt;å°±æ˜¯ä½¿ç”¨ä¸¤ç§æ³›å‹ç±»å‹çš„ä¾‹å­ã€‚å®ƒå¯¹Keyä½¿ç”¨ä¸€ç§ç±»å‹ï¼Œå¯¹Valueä½¿ç”¨å¦ä¸€ç§ç±»å‹ã€‚</p>
<h1>æ“¦æ‹­æ³•Type Erasure</h1>
<h3 id="å®ç°æ³›å‹çš„åº•å±‚"><a class="header-anchor" href="#å®ç°æ³›å‹çš„åº•å±‚">Â¶</a>å®ç°æ³›å‹çš„åº•å±‚</h3>
<p>Javaä½¿ç”¨æ“¦æ‹­æ³•å®ç°æ³›å‹ï¼Œå¯¼è‡´äº†ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨æŠŠç±»å‹<T>è§†ä¸ºObjectï¼›</T></li>
<li>ç¼–è¯‘å™¨æ ¹æ®<T>å®ç°å®‰å…¨çš„å¼ºåˆ¶è½¬å‹ã€‚<br>
æ‰€ä»¥ï¼ŒJavaçš„æ³›å‹æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®è¡Œçš„ï¼Œç¼–è¯‘å™¨å†…éƒ¨æ°¸è¿œæŠŠæ‰€æœ‰ç±»å‹Tè§†ä¸ºObjectå¤„ç†ï¼Œä½†æ˜¯ï¼Œåœ¨éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®Tçš„ç±»å‹è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®è¡Œå®‰å…¨åœ°å¼ºåˆ¶è½¬å‹ã€‚</T></li>
</ul>
<h3 id="Javaæ³›å‹çš„å±€é™"><a class="header-anchor" href="#Javaæ³›å‹çš„å±€é™">Â¶</a>Javaæ³›å‹çš„å±€é™</h3>
<p>å±€é™ä¸€ï¼š<T>ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¾‹å¦‚intï¼Œå› ä¸ºå®é™…ç±»å‹æ˜¯Objectï¼ŒObjectç±»å‹æ— æ³•æŒæœ‰åŸºæœ¬ç±»å‹ã€‚<br>
å±€é™äºŒï¼šæ— æ³•å–å¾—å¸¦æ³›å‹çš„Classã€‚<br>
å› ä¸ºTæ˜¯Objectï¼Œæˆ‘ä»¬å¯¹Pair<String>å’ŒPair<Integer>ç±»å‹è·å–Classæ—¶ï¼Œè·å–åˆ°çš„æ˜¯åŒä¸€ä¸ªClassï¼Œä¹Ÿå°±æ˜¯Pairç±»çš„Classã€‚<br>
æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰æ³›å‹å®ä¾‹ï¼Œæ— è®ºTçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼ŒgetClass()è¿”å›åŒä¸€ä¸ªClasså®ä¾‹ï¼Œå› ä¸ºç¼–è¯‘åå®ƒä»¬å…¨éƒ¨éƒ½æ˜¯Pair<Object>ã€‚<br>
å±€é™ä¸‰ï¼šæ— æ³•åˆ¤æ–­å¸¦æ³›å‹çš„Class<br>
å±€é™å››ï¼šä¸èƒ½å®ä¾‹åŒ–Tç±»å‹<br>
åˆ›å»ºnew Pair<String>()å’Œåˆ›å»ºnew Pair<Integer>()å°±å…¨éƒ¨æˆäº†Objectï¼Œæ˜¾ç„¶ç¼–è¯‘å™¨è¦é˜»æ­¢è¿™ç§ç±»å‹ä¸å¯¹çš„ä»£ç ã€‚<br>
è¦å®ä¾‹åŒ–Tç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»å€ŸåŠ©é¢å¤–çš„Class<T>å‚æ•°ï¼š</T></Integer></String></Object></Integer></String></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">        first = clazz.newInstance();</span><br><span class="line">        last = clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³›å‹æ–¹æ³•è¦é˜²æ­¢é‡å¤å®šä¹‰æ–¹æ³•ã€‚å®šä¹‰çš„equals(T t)æ–¹æ³•å®é™…ä¸Šä¼šè¢«æ“¦æ‹­æˆequals(Object t)ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ˜¯ç»§æ‰¿è‡ªObjectçš„ï¼Œç¼–è¯‘å™¨ä¼šé˜»æ­¢ä¸€ä¸ªå®é™…ä¸Šä¼šå˜æˆè¦†å†™çš„æ³›å‹æ–¹æ³•å®šä¹‰ã€‚<br>
æ¢ä¸ªæ–¹æ³•åï¼Œé¿å¼€ä¸Object.equals(Object)çš„å†²çªå°±å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œå¦‚same(T t)ã€‚</p>
<h3 id="æ³›å‹ç»§æ‰¿"><a class="header-anchor" href="#æ³›å‹ç»§æ‰¿">Â¶</a>æ³›å‹ç»§æ‰¿</h3>
<p>ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿è‡ªä¸€ä¸ªæ³›å‹ç±»</p>
<h1>extendé€šé…ç¬¦</h1>
<p>æœ‰æ²¡æœ‰åŠæ³•ä½¿å¾—æ–¹æ³•å‚æ•°æ¥å—Pair<Integer>ï¼ŸåŠæ³•æ˜¯æœ‰çš„ï¼Œè¿™å°±æ˜¯ä½¿ç”¨Pair&lt;? extends Number&gt;ä½¿å¾—æ–¹æ³•æ¥æ”¶æ‰€æœ‰æ³›å‹ç±»å‹ä¸ºNumberæˆ–Numberå­ç±»çš„Pairç±»å‹ã€‚åŠ å…¥extendä¹‹åæ³›å‹æ“¦æ‹­å°†ä¸ºNumberè€Œä¸æ˜¯Objectã€‚</Integer></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pair&lt;Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">        <span class="keyword">int</span> n = add(p);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(Pair&lt;? extends Number&gt; p)</span> </span>&#123;</span><br><span class="line">        Number first = p.getFirst();</span><br><span class="line">        Number last = p.getLast();</span><br><span class="line">        <span class="keyword">return</span> first.intValue() + last.intValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œç»™æ–¹æ³•ä¼ å…¥Pair<Integer>ç±»å‹æ—¶ï¼Œå®ƒç¬¦åˆå‚æ•°Pair&lt;? extends Number&gt;ç±»å‹ã€‚è¿™ç§ä½¿ç”¨&lt;? extends Number&gt;çš„æ³›å‹å®šä¹‰ç§°ä¹‹ä¸ºä¸Šç•Œé€šé…ç¬¦ï¼ˆUpper Bounds Wildcardsï¼‰ï¼Œå³æŠŠæ³›å‹ç±»å‹Tçš„ä¸Šç•Œé™å®šåœ¨Numberäº†ã€‚<br>
é™¤äº†å¯ä»¥ä¼ å…¥Pair<Integer>ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¼ å…¥Pair<Double>ç±»å‹ï¼ŒPair<BigDecimal>ç±»å‹ç­‰ç­‰ï¼Œå› ä¸ºDoubleå’ŒBigDecimaléƒ½æ˜¯Numberçš„å­ç±»ã€‚</BigDecimal></Double></Integer></Integer></p>
<h3 id="ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•"><a class="header-anchor" href="#ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•">Â¶</a>ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•</h3>
<p>ç¼–è¯‘é”™è¯¯å‘ç”Ÿåœ¨p.setFirst()ä¼ å…¥çš„å‚æ•°æ˜¯Integerç±»å‹ã€‚æœ‰äº›ç«¥é‹ä¼šé—®äº†ï¼Œæ—¢ç„¶pçš„å®šä¹‰æ˜¯Pair&lt;? extends Number&gt;ï¼Œé‚£ä¹ˆsetFirst(? extends Number)ä¸ºä»€ä¹ˆä¸èƒ½ä¼ å…¥Integerï¼Ÿ<br>
åŸå› è¿˜åœ¨äºæ“¦æ‹­æ³•ã€‚å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„pæ˜¯Pair<Double>ï¼Œæ˜¾ç„¶å®ƒæ»¡è¶³å‚æ•°å®šä¹‰Pair&lt;? extends Number&gt;ï¼Œç„¶è€Œï¼ŒPair<Double>çš„setFirst()æ˜¾ç„¶æ— æ³•æ¥å—Integerç±»å‹ã€‚<br>
è¿™å°±æ˜¯&lt;? extends Number&gt;é€šé…ç¬¦çš„ä¸€ä¸ªé‡è¦é™åˆ¶ï¼šæ–¹æ³•å‚æ•°ç­¾åsetFirst(? extends Number)æ— æ³•ä¼ é€’ä»»ä½•Numberç±»å‹ç»™setFirst(? extends Number)ã€‚<br>
è¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯å¯ä»¥ç»™æ–¹æ³•å‚æ•°ä¼ å…¥nullã€‚</Double></Double></p>
<h3 id="extendçš„ä½œç”¨"><a class="header-anchor" href="#extendçš„ä½œç”¨">Â¶</a>extendçš„ä½œç”¨</h3>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•å‚æ•°ç±»å‹æ˜¯List&lt;? extends Integer&gt;è€Œä¸æ˜¯List<Integer>ï¼Ÿä»æ–¹æ³•å†…éƒ¨ä»£ç çœ‹ï¼Œä¼ å…¥List&lt;? extends Integer&gt;æˆ–è€…List<Integer>æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä½†æ˜¯ï¼Œæ³¨æ„åˆ°List&lt;? extends Integer&gt;çš„é™åˆ¶ï¼š</Integer></Integer></p>
<p>å…è®¸è°ƒç”¨get()æ–¹æ³•è·å–Integerçš„å¼•ç”¨ï¼›<br>
ä¸å…è®¸è°ƒç”¨set(? extends Integer)æ–¹æ³•å¹¶ä¼ å…¥ä»»ä½•Integerçš„å¼•ç”¨ï¼ˆnullé™¤å¤–ï¼‰ã€‚<br>
å› æ­¤ï¼Œæ–¹æ³•å‚æ•°ç±»å‹List&lt;? extends Integer&gt;è¡¨æ˜äº†è¯¥æ–¹æ³•å†…éƒ¨åªä¼šè¯»å–Listçš„å…ƒç´ ï¼Œä¸ä¼šä¿®æ”¹Listçš„å…ƒç´ ï¼ˆå› ä¸ºæ— æ³•è°ƒç”¨add(? extends Integer)ã€remove(? extends Integer)è¿™äº›æ–¹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹å‚æ•°List&lt;? extends Integer&gt;è¿›è¡Œåªè¯»çš„æ–¹æ³•ï¼ˆæ¶æ„è°ƒç”¨set(null)é™¤å¤–ï¼‰ã€‚</p>
<h3 id="ä½¿ç”¨extendé™å®š-T-ç±»å‹"><a class="header-anchor" href="#ä½¿ç”¨extendé™å®š-T-ç±»å‹">Â¶</a>ä½¿ç”¨extendé™å®š<T>ç±»å‹</T></h3>
<p>åœ¨å®šä¹‰æ³›å‹ç±»å‹Pair<T>çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨extendsé€šé…ç¬¦æ¥é™å®šTçš„ç±»å‹ã€‚éNumberç±»å‹å°†æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</T></p>
<h1>superé€šé…ç¬¦</h1>
<p>ä½¿ç”¨çš„ç±»å‹åªèƒ½æ˜¯æ³›å‹çš„çˆ¶ç±»ã€‚<br>
å› æ­¤ï¼Œä½¿ç”¨&lt;? super Integer&gt;é€šé…ç¬¦è¡¨ç¤ºï¼š<br>
å…è®¸è°ƒç”¨set(? super Integer)æ–¹æ³•ä¼ å…¥Integerçš„å¼•ç”¨ï¼›<br>
ä¸å…è®¸è°ƒç”¨get()æ–¹æ³•è·å¾—Integerçš„å¼•ç”¨ã€‚å› ä¸ºä¼ å…¥çš„ç±»å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯numberã€‚<br>
å”¯ä¸€ä¾‹å¤–æ˜¯å¯ä»¥è·å–Objectçš„å¼•ç”¨ï¼šObject o = p.getFirst()ã€‚<br>
æ¢å¥è¯è¯´ï¼Œä½¿ç”¨&lt;? super Integer&gt;é€šé…ç¬¦ä½œä¸ºæ–¹æ³•å‚æ•°ï¼Œè¡¨ç¤ºæ–¹æ³•å†…éƒ¨ä»£ç å¯¹äºå‚æ•°åªèƒ½å†™ï¼Œä¸èƒ½è¯»ã€‚</p>
<h3 id="PECS"><a class="header-anchor" href="#PECS">Â¶</a>PECS</h3>
<p>ä½•æ—¶ä½¿ç”¨extendsï¼Œä½•æ—¶ä½¿ç”¨superï¼Ÿä¸ºäº†ä¾¿äºè®°å¿†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨PECSåŸåˆ™ï¼šProducer Extends Consumer Superã€‚<br>
å³ï¼šå¦‚æœéœ€è¦è¿”å›Tï¼Œå®ƒæ˜¯ç”Ÿäº§è€…ï¼ˆProducerï¼‰ï¼Œè¦ä½¿ç”¨extendsé€šé…ç¬¦ï¼›å¦‚æœéœ€è¦å†™å…¥Tï¼Œå®ƒæ˜¯æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ï¼Œè¦ä½¿ç”¨superé€šé…ç¬¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Collections</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">copy</span><span class="params">(List&lt;? <span class="keyword">super</span> T&gt; dest, List&lt;? extends T&gt; src)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;src.size(); i++) &#123;</span><br><span class="line">            T t = src.get(i); <span class="comment">// srcæ˜¯producer</span></span><br><span class="line">            dest.add(t); <span class="comment">// destæ˜¯consumer</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è¿”å›Tçš„srcæ˜¯ç”Ÿäº§è€…ï¼Œå› æ­¤å£°æ˜ä¸ºList&lt;? extends T&gt;ï¼Œéœ€è¦å†™å…¥Tçš„destæ˜¯æ¶ˆè´¹è€…ï¼Œå› æ­¤å£°æ˜ä¸ºList&lt;? super T&gt;ã€‚</p>
<h1>æ— é™å®šé€šé…ç¬¦</h1>
<p>å› ä¸º&lt;?&gt;é€šé…ç¬¦æ—¢æ²¡æœ‰extendsï¼Œä¹Ÿæ²¡æœ‰superï¼Œå› æ­¤ï¼š<br>
ä¸å…è®¸è°ƒç”¨set(T)æ–¹æ³•å¹¶ä¼ å…¥å¼•ç”¨ï¼ˆnullé™¤å¤–ï¼‰ï¼›<br>
ä¸å…è®¸è°ƒç”¨T get()æ–¹æ³•å¹¶è·å–Tå¼•ç”¨ï¼ˆåªèƒ½è·å–Objectå¼•ç”¨ï¼‰ã€‚<br>
æ¢å¥è¯è¯´ï¼Œæ—¢ä¸èƒ½è¯»ï¼Œä¹Ÿä¸èƒ½å†™ï¼Œé‚£åªèƒ½åšä¸€äº›nullåˆ¤æ–­</p>
<ul>
<li>Pair&lt;?&gt;æ˜¯æ‰€æœ‰Pair<T>çš„è¶…ç±»ï¼Œå¯ä»¥å®‰å…¨çš„å‘ä¸Šè½¬å‹ã€‚</T></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Pair&lt;Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">    Pair&lt;?&gt; p2 = p; <span class="comment">// å®‰å…¨åœ°å‘ä¸Šè½¬å‹</span></span><br><span class="line">    System.out.println(p2.getFirst() + <span class="string">", "</span> + p2.getLast());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ³›å‹å’Œåå°„</h1>
<p>éƒ¨åˆ†åå°„ä¹Ÿæ˜¯æ³›å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// compile warning:</span></span><br><span class="line">Class clazz = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">String str = (String) clazz.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// no warning:</span></span><br><span class="line">Class&lt;String&gt; clazz = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">String str = clazz.newInstance();</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨Classçš„getSuperclass()æ–¹æ³•è¿”å›çš„Classç±»å‹æ˜¯Class&lt;? super T&gt;ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>æ›¿æ¢ç©ºæ ¼ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸ºWe Are Happy.åˆ™ç»è¿‡æ›¿æ¢ä¹‹åçš„å­—ç¬¦ä¸²ä¸ºWe%20Are%20Happyã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•1"><a class="header-anchor" href="#è§£æ³•1">Â¶</a>è§£æ³•1:</h2>
<p>æ­£åˆ™è¡¨è¾¾å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">replaceSpace</span><span class="params">(StringBuffer str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> str.toString().replaceAll(<span class="string">"\\s"</span>,<span class="string">"%20"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•2"><a class="header-anchor" href="#è§£æ³•2">Â¶</a>è§£æ³•2:</h2>
<p>ä»åå‘å‰çš„æ›¿æ¢å­—ç¬¦ä¸²ã€‚</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">replaceSpace</span><span class="params">(StringBuffer str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str.length() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> str.toString();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> oriLength = str.length();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;= oriLength-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(i)==<span class="string">' '</span>)</span><br><span class="line">                count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> str.toString();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> newLength = oriLength + count*<span class="number">2</span>;</span><br><span class="line">        str.setLength(newLength);</span><br><span class="line">        newLength--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = oriLength - <span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(i)==<span class="string">' '</span>)&#123;</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'0'</span>);</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'2'</span>);</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'%'</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                str.setCharAt(newLength--,str.charAt(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•ç”¨ä¾‹"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹">Â¶</a>æµ‹è¯•ç”¨ä¾‹</h5>
<ol>
<li>è¾“å…¥çš„å­—ç¬¦ä¸²åŒ…å«ç©ºæ ¼ã€‚ï¼ˆç©ºæ ¼ä½äºæœ€å‰é¢ï¼Œæœ€åé¢ï¼Œä¸­é—´ï¼Œæœ‰è¿ç»­å¤šä¸ªç©ºæ ¼ï¼‰</li>
<li>è¾“å…¥çš„å­—ç¬¦ä¸²æ²¡æœ‰ç©ºæ ¼</li>
<li>ç‰¹æ®Šè¾“å…¥æµ‹è¯•ï¼ˆå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªnullï¼Œå­—ç¬¦ä¸²ä¸ºç©ºï¼Œå­—ç¬¦ä¸²åªæœ‰ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ï¼‰</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>æ„å»ºä¹˜ç§¯æ•°ç»„ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E2%80%9C%E6%9E%84%E5%BB%BA%E4%B9%98%E7%A7%AF%E6%95%B0%E7%BB%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B%E2%80%9D/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•°ç»„A[0,1,...,n-1],è¯·æ„å»ºä¸€ä¸ªæ•°ç»„B[0,1,...,n-1],å…¶ä¸­Bä¸­çš„å…ƒç´ B[i]=A[0]*A[1]*...*A[i-1]*A[i+1]*...*A[n-1]ã€‚ä¸èƒ½ä½¿ç”¨é™¤æ³•ã€‚ï¼ˆæ³¨æ„ï¼šè§„å®šB[0] = A[1] * A[2] * ... * A[n-1]ï¼ŒB[n-1] = A[0] * A[1] * ... * A[n-2];ï¼‰
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<p>åšä¸¤æ¬¡å¾ªç¯å¤„ç†ï¼Œå…ˆä»ä¸‹åˆ°ä¸Šè®¡ç®—0 ï½ i-1ä¸ªçš„ä¹˜ç§¯ï¼Œå†ä»ä¸Šåˆ°ä¸‹è®¡ç®—n ï½ i+1çš„ä¹˜ç§¯ã€‚</p>
<h2 id="Code"><a class="header-anchor" href="#Code">Â¶</a>Code:</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] multiply(<span class="keyword">int</span>[] A) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span>[] B = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="number">1</span>;</span><br><span class="line">            B[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; ++i)&#123;</span><br><span class="line">                B[i] = B[i-<span class="number">1</span>] * A[i-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = A.length - <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">                temp *= A[i + <span class="number">1</span>];</span><br><span class="line">                B[i] *= temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> B;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•ç”¨ä¾‹"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹">Â¶</a>æµ‹è¯•ç”¨ä¾‹</h5>
<ol>
<li>åŠŸèƒ½æµ‹è¯•ï¼ˆè¾“å…¥æ•°ç»„åŒ…æ‹¬æ­£æ•°ï¼Œè´Ÿæ•°ï¼Œä¸€ä¸ª0ï¼Œå¤šä¸ª0ï¼‰</li>
<li>è¾¹ç•Œæµ‹è¯•ï¼ˆè¾“å…¥æ•°ç»„é•¿åº¦ä¸º0ï¼‰</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E6%95%B0%E7%BB%84%E4%B8%AD%E6%89%BE%E5%88%B0%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<p>å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ï¼Œä¸€æ¬¡å¯ä»¥æ¶ˆé™¤ä¸€åˆ—æˆ–è€…ä¸€è¡Œä¸ç¬¦åˆçš„æ•°ã€‚</p>
<h4 id="code"><a class="header-anchor" href="#code">Â¶</a>code</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> target, <span class="keyword">int</span> [][] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> column = array[<span class="number">0</span>].length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((row &lt;= array[<span class="number">0</span>].length-<span class="number">1</span>)&amp;&amp;(column &gt;= <span class="number">0</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[row][column] == target)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(array[row][column] &gt; target)</span><br><span class="line">                column -= <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(array[row][column] &lt; target)</span><br><span class="line">                row += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<ol>
<li>æ•°ç»„ä¸­æ²¡æœ‰æŸ¥æ‰¾çš„æ•°å­—</li>
<li>ç©ºæ•°ç»„</li>
<li>æ•°ç»„ä¸­æœ‰æŸ¥æ‰¾çš„æ•°å­—</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>MapReduceï¼šSimplified Data Processing on Large Clusters</title>
    <url>/2020/03/06/MapReduce%EF%BC%9ASimplified%20Data%20Processing%20on%20Large%20Clusters/</url>
    <content><![CDATA[<h3 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">Â¶</a>æ‘˜è¦</h3>
<pre><code>MapReduceæ—¢æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸ä¹‹å…³è”çš„ã€ç”¨äºå¤„ç†å’Œäº§ç”Ÿå¤§æ•°æ®é›†çš„å®ç°ã€‚ç”¨æˆ·è¦ç‰¹åŒ–ä¸€ä¸ªmapç¨‹åºå»å¤„ç†key/valueå¯¹ï¼Œå¹¶äº§ç”Ÿä¸­é—´key/valueå¯¹çš„é›†åˆï¼Œä»¥åŠä¸€ä¸ªreduceç¨‹åºå»åˆå¹¶æœ‰ç€ç›¸åŒkeyçš„æ‰€æœ‰ä¸­é—´key/valueå¯¹ã€‚æœ¬æ–‡æŒ‡å‡ºï¼Œè®¸å¤šå®é™…çš„ä»»åŠ¡éƒ½å¯ä»¥ç”¨è¿™ç§æ¨¡å‹æ¥è¡¨ç¤ºã€‚

ç”¨è¿™ç§å‡½æ•°å¼é£æ ¼å†™å‡ºçš„ç¨‹åºè‡ªåŠ¨å°±æ‹¥æœ‰äº†åœ¨ä¸€ä¸ªå¤§çš„PCæœºé›†ç¾¤ä¸Šå¹¶è¡Œæ‰§è¡Œçš„èƒ½åŠ›ã€‚è¿è¡Œæ—¶ç³»ç»Ÿä¼šè´Ÿè´£ç»†èŠ‚ï¼šåˆ‡åˆ†è¾“å…¥æ•°æ®ï¼Œåœ¨ä¸€ç»„æœºå™¨ä¸Šè°ƒåº¦æ‰§è¡Œç¨‹åºï¼Œå¤„ç†æœºå™¨é”™è¯¯ï¼Œä»¥åŠç®¡ç†æ‰€éœ€çš„æœºå™¨é—´é€šä¿¡ã€‚è¿™å…è®¸ä¸å…·å¤‡ä»»ä½•å¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿèƒ½è½»æ¾åœ°åˆ©ç”¨ä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„èµ„æºã€‚

æˆ‘ä»¬çš„MapReduceå®ç°è¿è¡Œåœ¨ä¸€ä¸ªå¤§å‹PCæœºé›†ç¾¤ä¸Šï¼Œä¸”å…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§ï¼šä¸€ä¸ªå…¸å‹çš„MapReduceè®¡ç®—è¦åœ¨æ•°åƒå°æœºå™¨ä¸Šå¤„ç†è‹¥å¹²TBçš„æ•°æ®ã€‚ç¨‹åºå‘˜å¯ä»¥å¾ˆè½»æ¾çš„ä½¿ç”¨è¿™ä¸€ç³»ç»Ÿï¼šç›®å‰å·²ç»å®ç°çš„MapReduceç¨‹åºæ•°ä»¥ç™¾è®¡ï¼Œæ¯å¤©æœ‰ä¸Šåƒä¸ªMapReduceä½œä¸šè¿è¡Œåœ¨Googleçš„é›†ç¾¤ä¸Šã€‚
</code></pre>
<a id="more"></a>
<h3 id="1-ä»‹ç»"><a class="header-anchor" href="#1-ä»‹ç»">Â¶</a>1 ä»‹ç»</h3>
<p>åœ¨è¿‡å»çš„5å¹´ä¸­ï¼Œä½œè€…ä»¥åŠè®¸å¤šå…¶ä»–Googleå‘˜å·¥å®ç°äº†æ•°ç™¾ä¸ªç‰¹å®šç”¨é€”çš„è®¡ç®—è¿‡ç¨‹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å¤„ç†å¤§é‡çš„åŸå§‹æ•°æ®ï¼ˆæŠ“å–æ–‡æ¡£ã€ç½‘ç»œè¯·æ±‚æ—¥å¿—ç­‰ç­‰ï¼‰ï¼Œè®¡ç®—è®¸å¤šç§ç±»çš„è¡ç”Ÿæ•°æ®ï¼ˆå€’æ’ç´¢å¼•ã€ç½‘ç»œæ–‡æ¡£å›¾ç»“æ„çš„å¤šç§è¡¨ç¤ºã€å•å°ä¸»æœºæŠ“å–é¡µé¢æ•°é‡çš„æ¦‚è¦ã€æŒ‡å®šæ—¥æœŸé¢‘æ¬¡æœ€é«˜çš„è¯·æ±‚é›†åˆç­‰ç­‰ï¼‰ã€‚å¤§å¤šæ•°è¿™æ ·çš„è®¡ç®—è¿‡ç¨‹åœ¨æ¦‚å¿µä¸Šéƒ½å¾ˆç›´æ¥ã€‚ä½†è¾“å…¥æ•°æ®é‡é€šå¸¸éƒ½å¾ˆå¤§ï¼Œå› æ­¤è®¡ç®—è¿‡ç¨‹éœ€è¦åˆ†å¸ƒåˆ°æ•°ç™¾æˆ–æ•°åƒå°æœºå™¨ä¸Šè¿›è¡Œï¼Œæ‰èƒ½ä¿è¯è¿‡ç¨‹åœ¨ä¸€ä¸ªåˆç†æ—¶é—´å†…ç»“æŸã€‚è€Œä¸ºäº†å¤„ç†è®¡ç®—å¹¶è¡ŒåŒ–ã€æ•°æ®åˆ†å‘å’Œé”™è¯¯å¤„ç†ç­‰é—®é¢˜è€Œå¼•å…¥å¤§é‡å¤æ‚çš„ä»£ç åˆ™ä»¤åŸæœ¬ç®€å•çš„è®¡ç®—è¿‡ç¨‹å˜çš„æ™¦æ¶©éš¾æ‡‚ã€‚</p>
<p>ä½œä¸ºå¯¹è¿™ç§å¤æ‚æ€§çš„å›åº”ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§æ–°çš„æŠ½è±¡ï¼Œå…è®¸æˆ‘ä»¬è¡¨è¾¾å‡ºåŸæœ¬ç®€å•çš„è®¡ç®—è¿‡ç¨‹ï¼Œä¸”å°†æ¶‰åŠå¹¶è¡Œã€å®¹é”™æ€§ã€æ•°æ®åˆ†å‘å’Œè´Ÿè½½å‡è¡¡çš„å‡Œä¹±ç»†èŠ‚éšè—åœ¨ä¸€ä¸ªå‡½æ•°åº“ä¸­ã€‚æˆ‘ä»¬çš„æŠ½è±¡å—åˆ°äº†Lispç­‰å‡½æ•°å¼è¯­è¨€ä¸­çš„mapå’ŒreduceåŸè¯­çš„å¯å‘ã€‚æˆ‘ä»¬æ„è¯†åˆ°æˆ‘ä»¬å¤§å¤šæ•°çš„è®¡ç®—éƒ½åŒ…å«äº†åœ¨æ¯ä¸ªè¾“å…¥çš„é€»è¾‘â€œè®°å½•â€ä¸Šåº”ç”¨mapæ“ä½œï¼Œä»è€Œè®¡ç®—å‡ºä¸€ç»„ä¸­é—´key/valueå¯¹çš„é›†åˆï¼Œç„¶åå†å‘å…±äº«åŒä¸€ä¸ªkeyçš„æ‰€æœ‰ä¸­é—´valueåº”ç”¨reduceæ“ä½œï¼Œä»è€Œé€‚å½“åœ°åˆå¹¶è¡ç”Ÿæ•°æ®ã€‚æˆ‘ä»¬å¯¹ç”¨æˆ·å®šä¹‰çš„mapå’Œreduceæ“ä½œçš„ä½¿ç”¨å…è®¸æˆ‘ä»¬è½»æ¾åœ°å°†å¤§å‹è®¡ç®—å¹¶è¡ŒåŒ–ï¼Œä»¥åŠå°†å†æ‰§è¡Œä½œä¸ºå®¹é”™æ€§çš„ä¸»è¦æœºåˆ¶ã€‚</p>
<p>æœ¬é¡¹å·¥ä½œçš„ä¸»è¦è´¡çŒ®æ˜¯ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„æ¥å£ï¼Œå…è®¸è‡ªåŠ¨å®ç°å¹¶è¡ŒåŒ–å’Œå¤§èŒƒå›´çš„åˆ†å¸ƒè®¡ç®—ï¼Œå’Œä¸€ä¸ªä¸æ­¤æ¥å£ç»“åˆçš„å®ç°ï¼Œèƒ½åœ¨æ™®é€šPCæœºé›†ç¾¤ä¸Šè¾¾åˆ°å¾ˆé«˜çš„æ€§èƒ½ã€‚</p>
<p>ç¬¬2éƒ¨åˆ†æè¿°äº†åŸºæœ¬çš„ç¼–ç¨‹æ¨¡å‹å¹¶ç»™å‡ºäº†å‡ ä¸ªä¾‹å­ã€‚ç¬¬3éƒ¨åˆ†æè¿°äº†é’ˆå¯¹æˆ‘ä»¬åŸºäºé›†ç¾¤çš„è®¡ç®—ç¯å¢ƒè€Œè£å‰ªçš„MapReduceæ¥å£çš„ä¸€ä¸ªå®ç°ã€‚ç¬¬4éƒ¨åˆ†æè¿°äº†æˆ‘ä»¬è§‰å¾—éå¸¸æœ‰ç”¨çš„ä¸€äº›ç¼–ç¨‹æ¨¡å‹çš„æŠ€å·§ã€‚ç¬¬5éƒ¨åˆ†é’ˆå¯¹å¤šç§ä¸åŒçš„ä»»åŠ¡ï¼Œå¯¹æˆ‘ä»¬çš„å®ç°è¿›è¡Œäº†æ€§èƒ½æµ‹é‡ã€‚ç¬¬6éƒ¨åˆ†æ¢ç´¢äº†åœ¨Googleä¸­MapReduceçš„åº”ç”¨ï¼ŒåŒ…æ‹¬äº†æˆ‘ä»¬åœ¨å°†å…¶ä½œä¸ºç”Ÿäº§ç´¢å¼•ç³»ç»Ÿçš„é‡å†™åŸºç¡€çš„ç»éªŒã€‚ç¬¬7éƒ¨åˆ†è®¨è®ºäº†ç›¸å…³çš„å’Œæœªæ¥è¦åšçš„å·¥ä½œã€‚</p>
<h3 id="2-ç¼–ç¨‹æ¨¡å‹"><a class="header-anchor" href="#2-ç¼–ç¨‹æ¨¡å‹">Â¶</a>2 ç¼–ç¨‹æ¨¡å‹</h3>
<p>è®¡ç®—è¿‡ç¨‹å°±æ˜¯è¾“å…¥ä¸€ç»„key/valueå¯¹ï¼Œå†ç”Ÿæˆè¾“å‡ºä¸€ç»„key/valueå¯¹ã€‚MapReduceåº“çš„ä½¿ç”¨è€…ç”¨ä¸¤ä¸ªå‡½æ•°æ¥è¡¨ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼šmapå’Œreduceã€‚</p>
<p>mapç”±ä½¿ç”¨è€…ç¼–å†™ï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å…¥key/valueå¯¹ï¼Œç”Ÿæˆä¸€ç»„ä¸­é—´key/valueå¯¹ã€‚MapReduceåº“å°†æœ‰ç€ç›¸åŒä¸­é—´key Içš„ä¸­é—´valueéƒ½ç»„åˆåœ¨ä¸€èµ·ï¼Œå†ä¼ ç»™reduceå‡½æ•°ã€‚</p>
<p>reduceä¹Ÿç”±ä½¿ç”¨è€…ç¼–å†™ï¼Œå®ƒæ¥å—ä¸€ä¸ªä¸­é—´key Iå’Œä¸€ç»„ä¸Iå¯¹åº”çš„valueã€‚å®ƒå°†è¿™äº›valueåˆå¹¶ä¸ºä¸€ä¸ªå¯èƒ½æ›´å°çš„valueé›†åˆã€‚é€šå¸¸æ¯ä¸ªreduceè°ƒç”¨åªäº§ç”Ÿ0æˆ–1ä¸ªè¾“å‡ºvalueã€‚ä¸­é—´valueæ˜¯é€šè¿‡ä¸€ä¸ªè¿­ä»£å™¨æä¾›ç»™reduceå‡½æ•°çš„ã€‚è¿™å…è®¸æˆ‘ä»¬æ“ä½œé‚£äº›å› ä¸ºå¤§åˆ°æ‰¾ä¸åˆ°è¿ç»­å­˜æ”¾çš„å†…å­˜è€Œä½¿ç”¨é“¾è¡¨çš„valueé›†åˆã€‚</p>
<h4 id="2-1-ç¤ºä¾‹"><a class="header-anchor" href="#2-1-ç¤ºä¾‹">Â¶</a>2.1 ç¤ºä¾‹</h4>
<p>è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç»Ÿè®¡ä¸€ä¸ªå¾ˆå¤§çš„æ–‡æ¡£é›†åˆä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚ä½¿ç”¨è€…èƒ½å†™å‡ºä¸ä¸‹é¢çš„ä¼ªä»£ç ç›¸ä¼¼çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">map(String key,String value):</span><br><span class="line">    // key: æ–‡æ¡£å</span><br><span class="line">    // value: æ–‡æ¡£å†…å®¹</span><br><span class="line">    <span class="keyword">for</span> each word w <span class="keyword">in</span> value:</span><br><span class="line">        EmitIntermediate(w,<span class="string">"1"</span>);</span><br><span class="line">   </span><br><span class="line">reduce(Stringkey, Iterator values):</span><br><span class="line">    // key: ä¸€ä¸ªå•è¯</span><br><span class="line">    // value: è®¡æ•°å€¼åˆ—è¡¨</span><br><span class="line">    int result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> each v <span class="keyword">in</span> values:</span><br><span class="line">        result += ParseInt(v);</span><br><span class="line">    Emit(AsString(result));</span><br></pre></td></tr></table></figure>
<p>mapå‡½æ•°å°†æ¯ä¸ªå•è¯ä¸å‡ºç°æ¬¡æ•°ä¸€åŒè¾“å‡ºï¼ˆæœ¬ä¾‹ä¸­ç®€å•çš„è¾“å‡ºâ€œ1â€ï¼‰ã€‚reduceå‡½æ•°å°†é’ˆå¯¹æŸä¸ªç‰¹å®šè¯è¾“å‡ºçš„æ¬¡æ•°éƒ½åˆå¹¶ç›¸åŠ ã€‚</p>
<p>å¦å¤–ï¼Œä½¿ç”¨è€…è¦å†™ä»£ç å¡«å……ä¸€ä¸ªç¬¦åˆMapReduceè§„æ ¼çš„å¯¹è±¡ï¼Œå†…å®¹åŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶çš„åå­—ï¼Œä»¥åŠå¯é€‰çš„è°ƒèŠ‚å‚æ•°ã€‚ä¹‹åä½¿ç”¨è€…è°ƒç”¨MapReduceå‡½æ•°ï¼Œå°†æŒ‡å®šçš„å¯¹è±¡ä¼ è¿›å»ã€‚ç”¨æˆ·ä»£ç ä¼šä¸MapReduceåº“ï¼ˆC++å®ç°ï¼‰é“¾æ¥åˆ°ä¸€èµ·ã€‚é™„å½•AåŒ…æ‹¬äº†è¿™ä¸ªä¾‹å­çš„å…¨éƒ¨ç¨‹åºæ–‡æœ¬ã€‚</p>
<h4 id="2-2-ç±»å‹"><a class="header-anchor" href="#2-2-ç±»å‹">Â¶</a>2.2 ç±»å‹</h4>
<p>å°½ç®¡å‰é¢çš„ä¼ªä»£ç å†™æˆäº†ç”¨å­—ç¬¦ä¸²è¿›è¡Œè¾“å…¥è¾“å‡ºï¼Œä½†ä»æ¦‚å¿µä¸Šè®²ç”¨æˆ·æä¾›çš„mapå’Œreduceå‡½æ•°æ˜¯å…³è”ç€ç±»å‹çš„ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:right">map</th>
<th style="text-align:center">(k1,v1)</th>
<th style="text-align:left">ğŸ‘‰list(k2,v2)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">reduce</td>
<td style="text-align:center">(k2,list(v2))</td>
<td style="text-align:left">ğŸ‘‰list(v2)</td>
</tr>
</tbody>
</table>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å…¥çš„keyå’Œvalueä¸è¾“å‡ºçš„keyå’Œvalueçš„åŸŸä¸åŒã€‚è¿›ä¸€æ­¥è¯´ï¼Œä¸­é—´çš„keyå’Œvalueä¸è¾“å‡ºçš„keyå’Œvalueçš„åŸŸç›¸åŒã€‚</p>
<p>æˆ‘ä»¬çš„C++å®ç°ä½¿ç”¨å­—ç¬¦ä¸²ä¸ç”¨æˆ·å®šä¹‰çš„å‡½æ•°äº¤äº’ï¼Œè€Œå°†å­—ç¬¦ä¸²ä¸ç›¸åº”ç±»å‹çš„è½¬æ¢ç•™ç»™ç”¨æˆ·ä»£ç å®Œæˆã€‚</p>
<h4 id="2-3-æ›´å¤šä¾‹å­"><a class="header-anchor" href="#2-3-æ›´å¤šä¾‹å­">Â¶</a>2.3 æ›´å¤šä¾‹å­</h4>
<p>è¿™é‡Œä¾‹ä¸¾äº†ä¸€äº›æœ‰è¶£çš„ç¨‹åºï¼Œå®ƒä»¬éƒ½å¯ä»¥å¾ˆè½»æ¾çš„ç”¨MapReduceæ¨¡å‹è¡¨è¾¾ã€‚</p>
<p><b>åˆ†å¸ƒå¼Grepï¼š</b>mapå‡½æ•°åœ¨åŒ¹é…åˆ°ç»™å®šçš„patternæ—¶è¾“å‡ºä¸€è¡Œã€‚reduceå‡½æ•°åªæ˜¯å°†ç»™å®šçš„ä¸­é—´æ•°æ®å¤åˆ¶åˆ°è¾“å‡ºä¸Šã€‚</p>
<p><b>URLè®¿é—®é¢‘æ¬¡ç»Ÿè®¡ï¼š</b>mapå‡½æ•°å¤„ç†ç½‘é¡µè¯·æ±‚çš„æ—¥å¿—ï¼Œå¯¹æ¯ä¸ªURLè¾“å‡ºã€ˆURL, 1ã€‰ã€‚reduceå‡½æ•°å°†ç›¸åŒURLçš„æ‰€æœ‰å€¼ç›¸åŠ å¹¶è¾“å‡ºã€ˆURL, æ€»æ¬¡æ•°ã€‰å¯¹ã€‚</p>
<p><b>å€’è½¬Webé“¾æ¥å›¾ï¼š</b>mapå‡½æ•°åœ¨sourceé¡µé¢ä¸­é’ˆå¯¹æ¯ä¸ªæŒ‡å‘targetçš„é“¾æ¥éƒ½è¾“å‡ºä¸€ä¸ªã€ˆtarget, sourceã€‰å¯¹ã€‚reduceå‡½æ•°å°†ä¸æŸä¸ªç»™å®šçš„targetç›¸å…³è”çš„æ‰€æœ‰sourceé“¾æ¥åˆå¹¶ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶è¾“å‡ºã€ˆtarget, list(source)ã€‰å¯¹ã€‚</p>
<p><b>æ¯ä¸ªä¸»æœºçš„å…³é”®è¯å‘é‡ï¼š</b>å…³é”®è¯å‘é‡æ˜¯å¯¹å‡ºç°åœ¨ä¸€ä¸ªæ–‡æ¡£æˆ–ä¸€ç»„æ–‡æ¡£ä¸­çš„æœ€é‡è¦çš„å•è¯çš„æ¦‚è¦ï¼Œå…¶å½¢å¼ä¸ºã€ˆå•è¯, é¢‘ç‡ã€‰å¯¹ã€‚mapå‡½æ•°é’ˆå¯¹æ¯ä¸ªè¾“å…¥æ–‡æ¡£ï¼ˆå…¶ä¸»æœºåå¯ä»æ–‡æ¡£URLä¸­æå–åˆ°ï¼‰è¾“å‡ºä¸€ä¸ªã€ˆä¸»æœºå, å…³é”®è¯å‘é‡ã€‰å¯¹ã€‚ç»™å®šä¸»æœºçš„æ‰€æœ‰æ–‡æ¡£çš„å…³é”®è¯å‘é‡éƒ½è¢«ä¼ é€’ç»™reduceå‡½æ•°ã€‚reduceå‡½æ•°å°†è¿™äº›å…³é”®è¯å‘é‡ç›¸åŠ ï¼Œå»æ‰å…¶ä¸­é¢‘ç‡æœ€ä½çš„å…³é”®è¯ï¼Œç„¶åè¾“å‡ºæœ€ç»ˆçš„ã€ˆä¸»æœºå, å…³é”®è¯å‘é‡ã€‰å¯¹ã€‚</p>
<p><b>å€’æ’ç´¢å¼•ï¼š</b>mapå‡½æ•°è§£ææ¯ä¸ªæ–‡æ¡£ï¼Œå¹¶è¾“å‡ºä¸€ç³»åˆ—ã€ˆå•è¯, æ–‡æ¡£IDã€‰å¯¹ã€‚reduceå‡½æ•°æ¥å—ç»™å®šå•è¯çš„æ‰€æœ‰ä¸­é—´å¯¹ï¼Œå°†å®ƒä»¬æŒ‰æ–‡æ¡£IDæ’åºï¼Œå†è¾“å‡ºã€ˆå•è¯, list(æ–‡æ¡£ID)ã€‰å¯¹ã€‚æ‰€æœ‰è¾“å‡ºå¯¹çš„é›†åˆç»„æˆäº†ä¸€ä¸ªç®€å•çš„å€’æ’ç´¢å¼•ã€‚ç”¨æˆ·å¯ä»¥å¾ˆè½»æ¾çš„æ‰©å±•è¿™ä¸ªè¿‡ç¨‹æ¥è·Ÿè¸ªå•è¯çš„ä½ç½®ã€‚</p>
<p><b>åˆ†å¸ƒå¼æ’åºï¼š</b>mapå‡½æ•°ä»æ¯æ¡è®°å½•ä¸­æå–å‡ºkeyï¼Œå¹¶è¾“å‡ºã€ˆkey, è®°å½•ã€‰å¯¹ã€‚reduceå‡½æ•°ä¸æ”¹å˜è¿™äº›ä¸­é—´å¯¹ï¼Œç›´æ¥è¾“å‡ºã€‚è¿™ä¸ªè¿‡ç¨‹ä¾èµ–äº4.1èŠ‚ä»‹ç»çš„åˆ’åˆ†æœºåˆ¶å’Œ4.2èŠ‚ä»‹ç»çš„æ’åºæ€§è´¨ã€‚</p>
<h3 id="å®ç°"><a class="header-anchor" href="#å®ç°">Â¶</a>å®ç°</h3>
<p>è®¸å¤šä¸åŒçš„MapReduceçš„å®ç°éƒ½æ˜¯å¯è¡Œçš„ã€‚é€‰æ‹©å“ªä¸€ä¸ªè¦å–å†³äºç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œä¸€ç§å®ç°å¯èƒ½é€‚åˆäºå°å‹çš„å…±äº«å†…å­˜æœºå™¨ï¼Œä¸€ç§å®ç°å¯èƒ½é€‚åˆäºå¤§å‹çš„NUMAå¤šå¤„ç†å™¨æœºå™¨ï¼Œè€Œå¦ä¸€ç§åˆ™é€‚åˆäºæ›´å¤§å‹çš„è”ç½‘æœºå™¨é›†ã€‚</p>
<p>æœ¬éƒ¨åˆ†æè¿°çš„å®ç°ä¸»è¦é¢å‘Googleå†…éƒ¨å¹¿æ³›ä½¿ç”¨çš„è®¡ç®—ç¯å¢ƒï¼šå¤§å‹çš„å•†ç”¨PCæœºé›†ç¾¤ï¼Œäº’ç›¸ä¹‹é—´ç”¨äº¤æ¢å¼ä»¥å¤ªç½‘è¿æ¥ã€‚æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯ï¼š</p>
<ol>
<li>
<p>ä¸»è¦ä½¿ç”¨çš„æœºå™¨ä¸ºåŒæ ¸X86å¤„ç†å™¨ï¼Œè¿è¡ŒLinuxç³»ç»Ÿï¼Œæ¯å°æœºå™¨çš„å†…å­˜ä»2GBåˆ°4GBä¸ç­‰ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨çš„éƒ½æ˜¯å•†ç”¨ç½‘ç»œç¡¬ä»¶è®¾å¤‡â€”â€”åœ¨æœºå™¨å±‚é¢ä¸Šé€šå¸¸ä»100Mbpsåˆ°1Gbpsä¸ç­‰ï¼Œä½†å¹³å‡èµ·æ¥è¦æ¯”æ€»å¸¦å®½çš„ä¸€åŠå°‘å¾ˆå¤šã€‚</p>
</li>
<li>
<p>é›†ç¾¤ä¸­æ‹¥æœ‰æ•°ç™¾æˆ–æ•°åƒå°æœºå™¨ï¼Œå› æ­¤æœºå™¨é”™è¯¯ç»å¸¸å‡ºç°ã€‚</p>
</li>
<li>
<p>æ¯å°æœºå™¨éƒ½ä½¿ç”¨å»‰ä»·çš„IDEç¡¬ç›˜æ¥æä¾›å­˜å‚¨åŠŸèƒ½ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ç§å†…éƒ¨å¼€å‘çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†è¿™äº›ç£ç›˜ä¸Šçš„æ•°æ®ã€‚è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿé€šè¿‡å¤åˆ¶çš„æ–¹æ³•åœ¨ä¸å¯é çš„ç¡¬ä»¶ä¹‹ä¸Šæä¾›äº†å®ç”¨æ€§ä¸å¯é æ€§ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å‘ä¸€ä¸ªè°ƒåº¦ç³»ç»Ÿæäº¤ä½œä¸šã€‚æ¯ä¸ªä½œä¸šåŒ…æ‹¬äº†ä¸€ä¸ªä»»åŠ¡é›†ï¼Œä¼šç”±è°ƒåº¦å™¨è°ƒåº¦åˆ°é›†ç¾¤å†…å¯ç”¨çš„ä¸€ç»„æœºå™¨ä¸Šã€‚</p>
</li>
</ol>
<h4 id="æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°"><a class="header-anchor" href="#æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°">Â¶</a>æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°</h4>
<p>é€šè¿‡è‡ªåŠ¨å°†è¾“å…¥æ•°æ®åˆ‡åˆ†ä¸ºMå—ï¼Œmapè°ƒç”¨åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šè¿›è¡Œã€‚è¾“å…¥åˆ’åˆ†å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚reduceè°ƒç”¨æ˜¯é€šè¿‡ä¸€ä¸ªåˆ’åˆ†å‡½æ•°ï¼ˆä¾‹å¦‚hash(key) mod R)å°†ä¸­é—´keyç©ºé—´åˆ’åˆ†ä¸ºRå—æ¥åˆ†å¸ƒè¿è¡Œã€‚åˆ’åˆ†çš„å—æ•°Rå’Œåˆ’åˆ†å‡½æ•°éƒ½ç”±ç”¨æˆ·æŒ‡å®šã€‚</p>
<p><img src="/.io//Execution_overview.png" alt="Execution_overview"></p>
<p>å›¾1å±•ç¤ºäº†æˆ‘ä»¬çš„å®ç°ä¸­MapReduceæ“ä½œçš„æ•´ä½“æµç¨‹ã€‚å½“ç”¨æˆ·ç¨‹åºè°ƒç”¨MapReduceå‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿä¸‹é¢ä¸€ç³»åˆ—åŠ¨ä½œï¼ˆå›¾1ä¸­çš„æ ‡å·ä¸ä¸‹é¢åˆ—è¡¨é¡ºåºç›¸åŒï¼‰ï¼š</p>
<ol>
<li>
<p>ç”¨æˆ·ç¨‹åºä¸­çš„MapReduceåº“é¦–å…ˆå°†è¾“å…¥æ–‡ä»¶åˆ‡åˆ†ä¸ºMå—ï¼Œæ¯å—çš„å¤§å°ä»16MBåˆ°64MBï¼ˆç”¨æˆ·å¯é€šè¿‡ä¸€ä¸ªå¯é€‰å‚æ•°æ§åˆ¶æ­¤å¤§å°ï¼‰ã€‚ç„¶åMapReduceåº“ä¼šåœ¨ä¸€ä¸ªé›†ç¾¤çš„è‹¥å¹²å°æœºå™¨ä¸Šå¯åŠ¨ç¨‹åºçš„å¤šä¸ªå‰¯æœ¬ã€‚</p>
</li>
<li>
<p>ç¨‹åºçš„å„ä¸ªå‰¯æœ¬ä¸­æœ‰ä¸€ä¸ªæ˜¯ç‰¹æ®Šçš„â€”â€”ä¸»èŠ‚ç‚¹ï¼Œå…¶å®ƒçš„åˆ™æ˜¯å·¥ä½œèŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹å°†Mä¸ªmapä»»åŠ¡å’ŒRä¸ªreduceä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„å·¥ä½œèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€é¡¹ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>è¢«åˆ†é…mapä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹è¯»å–å¯¹åº”çš„è¾“å…¥åŒºå—å†…å®¹ã€‚å®ƒä»è¾“å…¥æ•°æ®ä¸­è§£æå‡ºkey/valueå¯¹ï¼Œç„¶åå°†æ¯ä¸ªå¯¹ä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„mapå‡½æ•°ã€‚ç”±mapå‡½æ•°äº§ç”Ÿçš„ä¸­é—´key/valueå¯¹éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚</p>
</li>
<li>
<p>ç¼“å­˜çš„æ•°æ®å¯¹ä¼šè¢«å‘¨æœŸæ€§çš„ç”±åˆ’åˆ†å‡½æ•°åˆ†æˆRå—ï¼Œå¹¶å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ã€‚è¿™äº›ç¼“å­˜å¯¹åœ¨æœ¬åœ°ç£ç›˜ä¸­çš„ä½ç½®ä¼šè¢«ä¼ å›ç»™ä¸»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å°†è¿™äº›ä½ç½®å†ä¼ ç»™reduceå·¥ä½œèŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>å½“ä¸€ä¸ªreduceå·¥ä½œèŠ‚ç‚¹å¾—åˆ°äº†ä¸»èŠ‚ç‚¹çš„è¿™äº›ä½ç½®é€šçŸ¥åï¼Œå®ƒä½¿ç”¨RPCè°ƒç”¨å»è¯»mapå·¥ä½œèŠ‚ç‚¹çš„æœ¬åœ°ç£ç›˜ä¸­çš„ç¼“å­˜æ•°æ®ã€‚å½“reduceå·¥ä½œèŠ‚ç‚¹è¯»å–å®Œäº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®ï¼Œå®ƒä¼šå°†è¿™äº›æ•°æ®æŒ‰ä¸­é—´keyæ’åºï¼Œè¿™æ ·ç›¸åŒkeyçš„æ•°æ®å°±è¢«æ’åˆ—åœ¨ä¸€èµ·äº†ã€‚åŒä¸€ä¸ªreduceä»»åŠ¡ç»å¸¸ä¼šåˆ†åˆ°æœ‰ç€ä¸åŒkeyçš„æ•°æ®ï¼Œå› æ­¤è¿™ä¸ªæ’åºå¾ˆæœ‰å¿…è¦ã€‚å¦‚æœä¸­é—´æ•°æ®æ•°é‡è¿‡å¤šï¼Œä¸èƒ½å…¨éƒ¨è½½å…¥å†…å­˜ï¼Œåˆ™ä¼šä½¿ç”¨å¤–éƒ¨æ’åºã€‚</p>
</li>
<li>
<p>reduceå·¥ä½œèŠ‚ç‚¹éå†æ’åºå¥½çš„ä¸­é—´æ•°æ®ï¼Œå¹¶å°†é‡åˆ°çš„æ¯ä¸ªä¸­é—´keyå’Œä¸å®ƒå…³è”çš„ä¸€ç»„ä¸­é—´valueä¼ é€’ç»™ç”¨æˆ·çš„reduceå‡½æ•°ã€‚reduceå‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°ç”±reduceåˆ’åˆ†è¿‡ç¨‹åˆ’åˆ†å‡ºæ¥çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„æœ«å°¾ã€‚</p>
</li>
<li>
<p>å½“æ‰€æœ‰çš„mapå’Œreduceä»»åŠ¡éƒ½å®Œæˆåï¼Œä¸»èŠ‚ç‚¹å”¤é†’ç”¨æˆ·ç¨‹åºã€‚æ­¤æ—¶ï¼Œç”¨æˆ·ç¨‹åºä¸­çš„MapReduceè°ƒç”¨è¿”å›åˆ°ç”¨æˆ·ä»£ç ä¸­ã€‚</p>
</li>
</ol>
<p>æˆåŠŸå®Œæˆåï¼ŒMapReduceæ‰§è¡Œçš„è¾“å‡ºéƒ½åœ¨Rä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ï¼ˆæ¯ä¸ªreduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªï¼Œæ–‡ä»¶åç”±ç”¨æˆ·æŒ‡å®šï¼‰ã€‚é€šå¸¸ç”¨æˆ·ä¸éœ€è¦åˆå¹¶è¿™Rä¸ªè¾“å‡ºæ–‡ä»¶â€”â€”ä»–ä»¬ç»å¸¸ä¼šæŠŠè¿™äº›æ–‡ä»¶å½“ä½œå¦ä¸€ä¸ªMapReduceè°ƒç”¨çš„è¾“å…¥ï¼Œæˆ–æ˜¯ç”¨äºå¦ä¸€ä¸ªå¯ä»¥å¤„ç†åˆ†æˆå¤šä¸ªæ–‡ä»¶è¾“å…¥çš„åˆ†å¸ƒå¼åº”ç”¨ã€‚</p>
<h4 id="3-2-ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„"><a class="header-anchor" href="#3-2-ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„">Â¶</a>3.2 ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„</h4>
<p>ä¸»èŠ‚ç‚¹ç»´æŒå¤šç§æ•°æ®ç»“æ„ã€‚å®ƒä¼šå­˜å‚¨æ¯ä¸ªmapå’Œreduceä»»åŠ¡çš„çŠ¶æ€ï¼ˆç©ºé—²ã€å¤„ç†ä¸­ã€å®Œæˆï¼‰ï¼Œå’Œæ¯å°å·¥ä½œæœºå™¨çš„IDï¼ˆå¯¹åº”éç©ºé—²çš„ä»»åŠ¡ï¼‰ã€‚</p>
<p>ä¸»èŠ‚ç‚¹æ˜¯å°†mapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶çš„ä½ç½®ä¼ é€’ç»™reduceä»»åŠ¡çš„é€šé“ã€‚å› æ­¤ï¼Œä¸»èŠ‚ç‚¹è¦å­˜å‚¨æ¯ä¸ªå·²å®Œæˆçš„mapä»»åŠ¡äº§ç”Ÿçš„Rä¸ªä¸­é—´æ–‡ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚ä½ç½®å’Œå¤§å°ä¿¡æ¯çš„æ›´æ–°æƒ…å†µä¼šåœ¨mapä»»åŠ¡å®Œæˆæ—¶æ¥æ”¶åˆ°ã€‚è¿™äº›ä¿¡æ¯ä¼šè¢«é€æ­¥å‘é€åˆ°æ­£åœ¨å¤„ç†ä¸­çš„reduceä»»åŠ¡èŠ‚ç‚¹å¤„ã€‚</p>
<h4 id="3-3-å®¹é”™æ€§"><a class="header-anchor" href="#3-3-å®¹é”™æ€§">Â¶</a>3.3 å®¹é”™æ€§</h4>
<p>æ—¢ç„¶MapReduceåº“æ˜¯ä¸ºäº†å¸®åŠ©ä½¿ç”¨æˆç™¾ä¸Šåƒå°æœºå™¨å¤„ç†æ•°é‡éå¸¸å¤§çš„æ•°æ®çš„ï¼Œå®ƒå°±å¿…é¡»èƒ½å¤Ÿä¼˜é›…åœ°æ‰¿å—æœºå™¨é”™è¯¯ã€‚</p>
<h5 id="å·¥ä½œèŠ‚ç‚¹é”™è¯¯"><a class="header-anchor" href="#å·¥ä½œèŠ‚ç‚¹é”™è¯¯">Â¶</a>å·¥ä½œèŠ‚ç‚¹é”™è¯¯</h5>
<p>ä¸»èŠ‚ç‚¹å‘¨æœŸæ€§çš„pingæ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚å¦‚æœå·¥ä½œèŠ‚ç‚¹åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰å›åº”ï¼Œä¸»èŠ‚ç‚¹å°±å°†å®ƒæ ‡è®°ä¸ºå·²å¤±è´¥ã€‚è¿™ä¸ªå·¥ä½œèŠ‚ç‚¹å®Œæˆçš„ä»»ä½•mapä»»åŠ¡éƒ½è¢«é‡ç½®ä¸ºç©ºé—²çŠ¶æ€ï¼Œå¹¶å¯è¢«è°ƒåº¦åˆ°å…¶å®ƒå·¥ä½œèŠ‚ç‚¹ä¸Šã€‚åŒæ ·åœ°ï¼Œå¤±è´¥çš„å·¥ä½œèŠ‚ç‚¹ä¸Šæ­£åœ¨å¤„ç†çš„ä»»ä½•mapæˆ–reduceä»»åŠ¡ä¹Ÿè¢«é‡ç½®ä¸ºç©ºé—²çŠ¶æ€ï¼Œå…è®¸è¢«è°ƒåº¦ã€‚</p>
<p>å¤±è´¥èŠ‚ç‚¹ä¸Šå·²å®Œæˆçš„mapä»»åŠ¡éœ€è¦é‡æ‰§è¡Œçš„åŸå› æ˜¯å®ƒä»¬çš„è¾“å‡ºå­˜å‚¨åœ¨å¤±è´¥æœºå™¨çš„æœ¬åœ°ç£ç›˜ä¸Šï¼Œå› æ­¤æ— æ³•è®¿é—®åˆ°äº†ã€‚å·²å®Œæˆçš„reduceä»»åŠ¡ä¸éœ€è¦é‡æ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºå­˜å‚¨åœ¨äº†ä¸€ä¸ªå…¨çƒæ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p>
<p>å½“ä¸€ä¸ªmapä»»åŠ¡å…ˆè¢«AèŠ‚ç‚¹æ‰§è¡Œè¿‡ï¼Œéšååˆè¢«BèŠ‚ç‚¹é‡æ‰§è¡Œï¼ˆAèŠ‚ç‚¹å·²å¤±è´¥ï¼‰ï¼Œæ‰€æœ‰æ‰§è¡Œreduceä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹éƒ½èƒ½æ”¶åˆ°é‡æ‰§è¡Œçš„é€šçŸ¥ã€‚ä»»ä½•æ²¡æœ‰è¯»å–å®ŒAèŠ‚ç‚¹æ•°æ®çš„reduceä»»åŠ¡éƒ½ä¼šä»BèŠ‚ç‚¹è¯»å–æ•°æ®ã€‚</p>
<p>MapReduceå¯ä»¥å¼¹æ€§åº”å¯¹å¤§èŒƒå›´çš„å·¥ä½œèŠ‚ç‚¹å¤±è´¥ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€æ¬¡MapReduceæ“ä½œæœŸé—´ï¼Œè¿è¡Œç³»ç»Ÿä¸Šçš„ç½‘ç»œç»´æŠ¤å¯¼è‡´äº†ä¸€ç»„çº¦80å°æœºå™¨åœ¨åŒä¸€æ—¶é—´æ— æ³•è®¿é—®ï¼ŒæŒç»­äº†æ•°åˆ†é’Ÿã€‚MapReduceä¸»èŠ‚ç‚¹åªæ˜¯ç®€å•çš„é‡æ‰§è¡Œäº†å·²ç”±æ— æ³•è®¿é—®çš„æœºå™¨å®Œæˆçš„ä»»åŠ¡ï¼Œå¹¶ç»§ç»­å‘å‰æ‰§è¡Œï¼Œæœ€ç»ˆå®Œæˆäº†è¿™æ¬¡MapReduceæ“ä½œã€‚</p>
<h5 id="ä¸»èŠ‚ç‚¹é”™è¯¯"><a class="header-anchor" href="#ä¸»èŠ‚ç‚¹é”™è¯¯">Â¶</a>ä¸»èŠ‚ç‚¹é”™è¯¯</h5>
<p>ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä»¤ä¸»èŠ‚ç‚¹å®šæœŸå°†ä¸Šé¢æè¿°çš„æ•°æ®ç»“æ„ä¿å­˜ä¸ºæ¢å¤ç‚¹ã€‚å¦‚æœä¸»èŠ‚ç‚¹ä»»åŠ¡å¤±è´¥ï¼Œå°±å¯ä»¥ä»ä¸Šä¸€ä¸ªæ¢å¤ç‚¹çŠ¶æ€å¯åŠ¨ä¸€ä¸ªæ–°çš„ç¨‹åºå‰¯æœ¬ã€‚ä½†æ˜¯ç»™å®šçš„æ¡ä»¶æ˜¯åªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œå®ƒä¹Ÿä¸å¤ªå¯èƒ½å¤±è´¥ï¼›å› æ­¤æˆ‘ä»¬å½“å‰çš„å®ç°ä¼šåœ¨ä¸»èŠ‚ç‚¹å¤±è´¥æ—¶ä¸­æ­¢MapReduceè®¡ç®— ã€‚å®¢æˆ·å¯ä»¥æ£€æŸ¥åˆ°è¿™ä¸€æƒ…å†µï¼Œå¹¶åœ¨ä»–ä»¬éœ€è¦æ—¶é‡å¯MapReduceæ“ä½œã€‚</p>
<h5 id="å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰"><a class="header-anchor" href="#å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰">Â¶</a>å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰</h5>
<p>å½“ç”¨æˆ·æä¾›çš„mapå’Œreduceæ“ä½œå¯¹äºå®ƒä»¬è¾“å…¥çš„å€¼éƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œæˆ‘ä»¬çš„åˆ†å¸ƒå¼å®ç°äº§ç”Ÿçš„è¾“å‡ºå€¼å°±å¦‚åŒå°†æ•´ä¸ªç¨‹åºåˆ†æˆä¸€ä¸ªä¸é—´æ–­çš„ä¸²è¡Œæ‰§è¡Œè¿‡ç¨‹ä¸€æ ·ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸ªæ€§è´¨ï¼Œæˆ‘ä»¬ä¾èµ–äºmapå’Œreduceä»»åŠ¡è¾“å‡ºç»“æœçš„æäº¤æ˜¯åŸå­çš„ã€‚æ¯ä¸ªå¤„ç†ä¸­çš„ä»»åŠ¡éƒ½ä¼šå°†å®ƒçš„è¾“å‡ºå†™å…¥ç§æœ‰çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ä¸€ä¸ªreduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œè€Œä¸€ä¸ªmapä»»åŠ¡åˆ™äº§ç”ŸRä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼ˆæ¯ä¸ªreduceä»»åŠ¡ä¸€ä¸ªï¼‰ã€‚å½“mapä»»åŠ¡å®Œæˆæ—¶ï¼Œå·¥ä½œèŠ‚ç‚¹å‘é€ç»™ä¸»èŠ‚ç‚¹çš„æ¶ˆæ¯ä¸­å¸¦æœ‰Rä¸ªä¸´æ—¶æ–‡ä»¶çš„åå­—ã€‚å¦‚æœä¸»èŠ‚ç‚¹æ”¶åˆ°äº†ä¸€ä¸ªæ¥è‡ªå·²å®ŒæˆèŠ‚ç‚¹çš„å®Œæˆæ¶ˆæ¯ï¼Œå®ƒå°±ä¼šå¿½ç•¥è¿™ä¸ªæ¶ˆæ¯ã€‚å¦åˆ™ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†Rä¸ªæ–‡ä»¶çš„åå­—è®°å½•åœ¨ç›¸åº”çš„æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>å½“reduceä»»åŠ¡å®Œæˆæ—¶ï¼Œå·¥ä½œèŠ‚ç‚¹ä¼šæ‰§è¡ŒåŸå­æ€§çš„æ›´åæ“ä½œï¼Œå°†ä¸´æ—¶è¾“å‡ºæ–‡ä»¶æ›´åä¸ºæœ€ç»ˆè¾“å‡ºæ–‡ä»¶ã€‚å¦‚æœç›¸åŒçš„reduceä»»åŠ¡åœ¨å¤šä¸ªæœºå™¨ä¸Šæ‰§è¡Œï¼Œå°±ä¼šæœ‰å¤šä¸ªæ›´åè°ƒç”¨åº”ç”¨åœ¨ç›¸åŒçš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ä¸Šã€‚æˆ‘ä»¬ä¾èµ–äºç”±åº•å±‚æ–‡ä»¶ç³»ç»Ÿæä¾›çš„åŸå­æ›´åæ“ä½œï¼Œæ‰èƒ½ä¿è¯æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¸­åªåŒ…å«ç”±å…¶ä¸­ä¸€ä¸ªreduceæ‰§è¡Œäº§ç”Ÿçš„æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬çš„ç»å¤§å¤šæ•°mapå’Œreduceæ“ä½œéƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬çš„è¯­ä¹‰å’Œä¸€ä¸ªä¸²è¡Œæ‰§è¡Œè¿‡ç¨‹æ˜¯ç­‰åŒçš„ï¼Œè¿™ä¹Ÿä½¿ç¨‹åºå‘˜å¾ˆå®¹æ˜“æ¨å‡ºä»–ä»¬ç¨‹åºçš„è¡Œä¸ºã€‚å½“mapå’Œreduceæ“ä½œæœ‰ä¸ç¡®å®šæ€§æ—¶ï¼Œæˆ‘ä»¬æä¾›è¾ƒå¼±ä½†ä»ç„¶åˆç†çš„è¯­ä¹‰ã€‚å½“å­˜åœ¨ä¸ç¡®å®šçš„æ“ä½œæ—¶ï¼ŒæŸä¸ªreduceä»»åŠ¡R1çš„è¾“å‡ºç­‰ä»·äºä¸€ä¸ªä¸ç¡®å®šç¨‹åºçš„ä¸²è¡Œæ‰§è¡Œè¾“å‡ºã€‚ä½†æŸä¸ªreduceä»»åŠ¡R2çš„è¾“å‡ºå¯èƒ½ç¬¦åˆè¿™ä¸ªä¸ç¡®å®šç¨‹åºçš„å¦ä¸€ä¸ªä¸²è¡Œæ‰§è¡Œè¾“å‡ºã€‚</p>
<p>è€ƒè™‘mapä»»åŠ¡Må’Œreduceä»»åŠ¡R1ã€R2ã€‚ä»¤e(Ri)ä¸ºRiçš„å·²æäº¤çš„æ‰§è¡Œç»“æœï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚æ­¤æ—¶å¼±è¯­ä¹‰ç”Ÿæ•ˆï¼Œå› ä¸ºe(R1)å¯èƒ½è¯»å–äº†Mçš„ä¸€æ¬¡è¾“å‡ºï¼Œè€Œe(R2)åˆ™å¯èƒ½è¯»å–äº†Mçš„å¦ä¸€æ¬¡è¾“å‡ºã€‚</p>
<h4 id="3-4-å±€éƒ¨æ€§"><a class="header-anchor" href="#3-4-å±€éƒ¨æ€§">Â¶</a>3.4  å±€éƒ¨æ€§</h4>
<p>åœ¨æˆ‘ä»¬çš„è®¡ç®—ç¯å¢ƒä¸­ï¼Œç½‘ç»œå¸¦å®½æ˜¯ä¸€ç§æ¯”è¾ƒç¨€ç¼ºçš„èµ„æºã€‚æˆ‘ä»¬åˆ©ç”¨ä¸‹é¢çš„äº‹å®æ¥èŠ‚çœå¸¦å®½ï¼šè¾“å…¥æ•°æ®ï¼ˆç”±GFSç®¡ç†ï¼‰å°±å­˜å‚¨åœ¨ç»„æˆé›†ç¾¤çš„æœºå™¨çš„æœ¬åœ°ç£ç›˜ä¸Šã€‚GFSå°†æ¯ä¸ªæ–‡ä»¶åˆ†æˆ64MBå¤§å°çš„åŒºå—ï¼Œæ¯å—å¤åˆ¶è‹¥å¹²ä»½ï¼ˆé€šå¸¸ä¸º3ä»½ï¼‰å­˜å‚¨åˆ°ä¸åŒçš„æœºå™¨ä¸Šã€‚MapReduceä¸»èŠ‚ç‚¹ä¼šæŠŠè¾“å…¥æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯è€ƒè™‘è¿›å»ï¼Œå¹¶å°è¯•å°†mapä»»åŠ¡åˆ†é…åˆ°ä¿å­˜æœ‰ç›¸åº”è¾“å…¥æ•°æ®çš„æœºå™¨ä¸Šã€‚å¦‚æœå¤±è´¥çš„è¯ï¼Œå®ƒä¼šè¯•å›¾å°†mapä»»åŠ¡è°ƒåº¦åˆ°ä¸´è¿‘è¿™äº›æ•°æ®çš„æœºå™¨ä¸Šï¼ˆä¾‹å¦‚ä¸ä¿å­˜è¾“å…¥æ•°æ®çš„æœºå™¨å¤„äºåŒä¸€ç½‘å…³çš„å·¥ä½œèŠ‚ç‚¹ï¼‰ã€‚å½“åœ¨ä¸€ä¸ªé›†ç¾¤çš„ç›¸å½“ä¸€éƒ¨åˆ†èŠ‚ç‚¹ä¸Šè¿è¡ŒMapReduceæ“ä½œæ—¶ï¼Œå¤§å¤šæ•°è¾“å…¥æ•°æ®éƒ½æ˜¯æœ¬åœ°è¯»å–ï¼Œå¹¶ä¸æ¶ˆè€—ç½‘ç»œå¸¦å®½ã€‚</p>
<h4 id="3-5-ä»»åŠ¡ç²’åº¦"><a class="header-anchor" href="#3-5-ä»»åŠ¡ç²’åº¦">Â¶</a>3.5  ä»»åŠ¡ç²’åº¦</h4>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°†mapé˜¶æ®µåˆ†æˆMä»½ï¼Œå°†reduceé˜¶æ®µåˆ†æˆRä»½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒMå’ŒRåº”è¯¥æ¯”å·¥ä½œèŠ‚ç‚¹æœºå™¨çš„æ•°é‡å¤§å¾ˆå¤šã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹å¤„ç†å¾ˆå¤šä¸åŒçš„ä»»åŠ¡ï¼Œå¯ä»¥å¢å¼ºåŠ¨æ€è´Ÿè´£å‡è¡¡èƒ½åŠ›ï¼Œä¹Ÿèƒ½åŠ é€Ÿæœ‰å·¥ä½œèŠ‚ç‚¹å¤±è´¥æ—¶çš„æ¢å¤æƒ…å†µï¼šå¤±è´¥èŠ‚ç‚¹å·²ç»å®Œæˆçš„mapä»»åŠ¡æœ‰å¾ˆå¤šçš„æ—¶å€™ä¹Ÿèƒ½ä¼ é€’ç»™å…¶å®ƒæ‰€æœ‰å·¥ä½œèŠ‚ç‚¹æ¥å®Œæˆã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å®ç°ä¸­Må’ŒRçš„æ•°é‡æœ‰ä¸€ä¸ªå®é™…çš„ä¸Šé™ï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œä¸»èŠ‚ç‚¹å¿…é¡»åšO(M+R)çš„è°ƒåº¦å†³å®šä»¥åŠåœ¨å†…å­˜ä¸­ä¿æŒO(M<em>R)ä¸ªçŠ¶æ€ã€‚ï¼ˆä½†æ˜¯å†…å­˜ä½¿ç”¨çš„å¸¸æ•°é¡¹å¾ˆå°ï¼šO(M</em>R)ä¸ªçŠ¶æ€ä¸­æ¯ä¸ªmap/reduceä»»åŠ¡å¯¹åªéœ€è¦å·®ä¸å¤š1å­—èŠ‚æ•°æ®ã€‚ï¼‰</p>
<p>è¿›ä¸€æ­¥åˆ†æï¼ŒRé€šå¸¸ç”±ç”¨æˆ·æŒ‡å®šï¼Œå› ä¸ºæ¯ä¸ªreduceä»»åŠ¡éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªç‹¬ç«‹çš„è¾“å‡ºæ–‡ä»¶ã€‚åœ¨å®è·µä¸­æˆ‘ä»¬å€¾å‘äºè¿™æ ·é€‰æ‹©Mï¼Œå³å¯ä»¥å°†æ¯ä¸ªå•ç‹¬çš„ä»»åŠ¡åˆ†æˆ16-64MBå¤§çš„è¾“å…¥æ•°æ®ï¼ˆæ­¤æ—¶ä¸Šé¢æ‰€è¯´çš„å±€éƒ¨æ€§ä¼˜åŒ–æ•ˆæœæœ€å¥½ï¼‰ï¼ŒåŒæ—¶æˆ‘ä»¬ä»¤Rä¸ºå¾…ä½¿ç”¨çš„å·¥ä½œèŠ‚ç‚¹æ•°é‡è¾ƒå°çš„æ•´æ•°å€ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨M=200000ï¼ŒR=5000ï¼Œä½¿ç”¨2000å°æœºå™¨æ¥è¿è¡ŒMapReduceè®¡ç®—ã€‚</p>
<h4 id="3-6-å¤‡ç”¨ä»»åŠ¡"><a class="header-anchor" href="#3-6-å¤‡ç”¨ä»»åŠ¡">Â¶</a>3.6  å¤‡ç”¨ä»»åŠ¡</h4>
<p>å¯¼è‡´MapReduceæ“ä½œç”¨æ—¶å»¶é•¿çš„ä¸€ä¸ªå¸¸è§åŸå› æ˜¯å‡ºç°äº†â€œè½åè€…â€ï¼šæŸå°æœºå™¨åœ¨å®Œæˆæœ€åçš„ä¸€ä¸ªmapæˆ–reduceä»»åŠ¡æ—¶èŠ±è´¹äº†åå¸¸çš„æ¼«é•¿æ—¶é—´ã€‚å¾ˆå¤šåŸå› éƒ½ä¼šå¯¼è‡´è½åè€…çš„äº§ç”Ÿã€‚ä¾‹å¦‚ï¼Œä¸€å°ç£ç›˜æŸåçš„æœºå™¨å¯èƒ½ä¼šé­é‡é¢‘ç¹çš„å¯æ ¡æ­£é”™è¯¯ï¼Œå¯¼è‡´å®ƒçš„è¯»å–æ€§èƒ½ä»30MB/sé™è‡³1MB/sã€‚é›†ç¾¤è°ƒåº¦ç³»ç»Ÿå¯èƒ½å·²ç»è°ƒåº¦äº†å…¶å®ƒä»»åŠ¡åˆ°è¿™å°æœºå™¨ï¼Œå¯¼è‡´å®ƒåœ¨æ‰§è¡ŒMapReduceä»£ç æ—¶å› ä¸ºCPUã€å†…å­˜ã€æœ¬åœ°ç£ç›˜æˆ–ç½‘ç»œå¸¦å®½çš„ç«äº‰è€Œæ›´åŠ ç¼“æ…¢ã€‚æœ€è¿‘æˆ‘ä»¬é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯æœºå™¨çš„åˆå§‹åŒ–ä»£ç æœ‰ä¸€ä¸ªbugï¼Œå¯¼è‡´å¤„ç†å™¨ç¼“å­˜è¢«ç¦ç”¨ï¼šå—å½±å“çš„æœºå™¨ä¸Šçš„è®¡ç®—é€Ÿåº¦ä¸‹é™äº†è¶…è¿‡100å€ã€‚</p>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨çš„æœºåˆ¶æ¥å‡è½»è½åè€…é—®é¢˜ã€‚å½“MapReduceæ“ä½œæ¥è¿‘å®Œæˆæ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†ä»åœ¨å¤„ç†ä¸­çš„å‰©ä½™ä»»åŠ¡è°ƒåº¦ç»™å…¶å®ƒæœºå™¨ä½œå¤‡ç”¨æ‰§è¡Œã€‚åŸæœ¬çš„æ‰§è¡Œå’Œå¤‡ç”¨æ‰§è¡Œä¸­çš„ä»»ä¸€ä¸ªå®Œæˆæ—¶éƒ½ä¼šå°†å¯¹åº”ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚æˆ‘ä»¬å·²ç»è°ƒæ•´è¿‡è¿™ä¸ªæœºåˆ¶ï¼Œä½¿å®ƒå› è¿™ä¸ªæœºåˆ¶è€Œå¢åŠ çš„è®¡ç®—èµ„æºæ¶ˆè€—é€šå¸¸åªæœ‰ä¸€ç‚¹ç‚¹ã€‚æˆ‘ä»¬å·²ç»è§‚å¯Ÿåˆ°è¿™ä¸€æœºåˆ¶æœ‰æ•ˆåœ°å‡å°‘äº†å¤§å‹MapReduceæ“ä½œèŠ±è´¹çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œ5.3èŠ‚ä¸­çš„æ’åºç¨‹åºåœ¨ç¦ç”¨è¿™ä¸€æœºåˆ¶æ—¶è¦å¤šèŠ±è´¹44%çš„æ—¶é—´ã€‚</p>
<h3 id="4-æŠ€å·§"><a class="header-anchor" href="#4-æŠ€å·§">Â¶</a>4 æŠ€å·§</h3>
<p>å°½ç®¡ä»…ä»…ç”¨mapå’Œreduceå‡½æ•°æä¾›çš„åŸºæœ¬åŠŸèƒ½å°±è¶³å¤Ÿè§£å†³å¤§å¤šæ•°éœ€æ±‚äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯å‘ç°äº†ä¸€äº›å¾ˆæœ‰ç”¨çš„æ‰©å±•ã€‚è¿™äº›æ‰©å±•å°†åœ¨æœ¬èŠ‚è¿›è¡Œæè¿°ã€‚</p>
<h4 id="4-1-åˆ’åˆ†å‡½æ•°"><a class="header-anchor" href="#4-1-åˆ’åˆ†å‡½æ•°">Â¶</a>4.1  åˆ’åˆ†å‡½æ•°</h4>
<p>MapReduceçš„ç”¨æˆ·æŒ‡å®šä»–ä»¬æƒ³è¦çš„reduceä»»åŠ¡/è¾“å‡ºæ–‡ä»¶çš„æ•°é‡ã€‚é€šè¿‡åˆ’åˆ†å‡½æ•°å¯ä»¥å°†æ•°æ®æŒ‰ä¸­é—´keyåˆ’åˆ†ç»™å„ä¸ªreduceä»»åŠ¡ã€‚æˆ‘ä»¬é»˜è®¤æä¾›äº†æ•£åˆ—å‡½æ•°å½“ä½œé»˜è®¤çš„åˆ’åˆ†å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œhash(key) mod R)ã€‚é€šå¸¸è¿™å°±èƒ½å¾—å‡ºå¾ˆå¹³è¡¡çš„åˆ’åˆ†ç»“æœäº†ã€‚ä½†åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œç”¨keyçš„å…¶å®ƒä¿¡æ¯æ¥åˆ’åˆ†æ•°æ®ä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚æœ‰æ—¶è¾“å‡ºçš„keyéƒ½æ˜¯URLï¼Œè€Œæˆ‘ä»¬æƒ³è®©æ‰€æœ‰æ¥è‡ªåŒä¸€ä¸»æœºçš„é¡¹æœ€åéƒ½åœ¨åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ä¸ºäº†æ”¯æŒç±»ä¼¼è¿™æ ·çš„æƒ…å†µï¼ŒMapReduceçš„ç”¨æˆ·å¯ä»¥æä¾›ä¸€ä¸ªç‰¹æ®Šçš„åˆ’åˆ†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œhash(ä¸»æœºå(urlkey)) mod Râ€æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚</p>
<h4 id="4-2-é¡ºåºä¿è¯"><a class="header-anchor" href="#4-2-é¡ºåºä¿è¯">Â¶</a>4.2  é¡ºåºä¿è¯</h4>
<p>æˆ‘ä»¬ä¿è¯åœ¨ç»™å®šçš„åˆ’åˆ†ä¸­ï¼Œä¸­é—´key/valueå¯¹æ˜¯æŒ‰å¢åºæ’åˆ—çš„ã€‚è¿™ä¸ªé¡ºåºä¿è¯ä½¿æ¯ä¸ªåˆ’åˆ†äº§ç”Ÿä¸€ä¸ªæœ‰åºçš„è¾“å‡ºæ–‡ä»¶å˜å¾—å¾ˆå®¹æ˜“ï¼Œå½“è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼éœ€è¦æ”¯æŒé«˜æ•ˆçš„æŒ‰keyéšæœºè®¿é—®ï¼Œæˆ–ç”¨æˆ·éœ€è¦è¾“å‡ºæ•°æ®æœ‰åºæ—¶ï¼Œè¿™ä¸€æ€§è´¨ä¼šéå¸¸æœ‰ç”¨ã€‚</p>
<h4 id="4-3-åˆå¹¶å‡½æ•°"><a class="header-anchor" href="#4-3-åˆå¹¶å‡½æ•°">Â¶</a>4.3  åˆå¹¶å‡½æ•°</h4>
<p>æŸäº›æƒ…å†µä¸­ï¼Œä¸åŒçš„mapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´keyé‡å¤ç‡éå¸¸é«˜ï¼Œè€Œä¸”ç”¨æˆ·æŒ‡å®šçš„reduceå‡½æ•°å¯è¿›è¡Œäº¤æ¢ç»„åˆã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯2.1èŠ‚ä¸­çš„å•è¯ç»Ÿè®¡ã€‚å•è¯é¢‘ç‡ç¬¦åˆé½å¤«åˆ†å¸ƒï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰ï¼Œå› æ­¤æ¯ä¸ªmapä»»åŠ¡éƒ½ä¼šäº§ç”Ÿéå¸¸å¤šçš„&lt;the, 1&gt;è¿™æ ·çš„è®°å½•ã€‚æ‰€æœ‰è¿™äº›è®°å½•éƒ½ä¼šé€šè¿‡ç½‘ç»œè¢«å‘é€ç»™ä¸€ä¸ªreduceä»»åŠ¡ï¼Œç„¶åå†é€šè¿‡reduceå‡½æ•°å°†å®ƒä»¬ç›¸åŠ ï¼Œäº§ç”Ÿç»“æœã€‚æˆ‘ä»¬å…è®¸ç”¨æˆ·æŒ‡å®šä¸€ä¸ªå¯é€‰çš„åˆå¹¶å‡½æ•°ï¼Œåœ¨æ•°æ®è¢«å‘é€ä¹‹å‰è¿›è¡Œå±€éƒ¨åˆå¹¶ã€‚</p>
<p>åˆå¹¶å‡½æ•°ç”±æ¯ä¸ªæ‰§è¡Œmapä»»åŠ¡çš„æœºå™¨è°ƒç”¨ã€‚é€šå¸¸åˆå¹¶å‡½æ•°ä¸reduceå‡½æ•°çš„å®ç°ä»£ç æ˜¯ç›¸åŒçš„ã€‚å®ƒä»¬å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯MapReduceåº“å¤„ç†å‡½æ•°è¾“å‡ºçš„æ–¹å¼ã€‚reduceå‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œè€Œåˆå¹¶å‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°ä¸­é—´æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨éšåå‘é€ç»™ä¸€ä¸ªreduceä»»åŠ¡ã€‚</p>
<h4 id="4-4-è¾“å…¥å’Œè¾“å‡ºç±»å‹"><a class="header-anchor" href="#4-4-è¾“å…¥å’Œè¾“å‡ºç±»å‹">Â¶</a>4.4  è¾“å…¥å’Œè¾“å‡ºç±»å‹</h4>
<p>MapReduceåº“æ”¯æŒå¤šç§ä¸åŒæ ¼å¼è¾“å…¥æ•°æ®çš„è¯»å–ã€‚ä¾‹å¦‚ï¼Œâ€œtextâ€æ¨¡å¼å°†æ¯è¡Œè¾“å…¥å½“ä½œä¸€ä¸ªkey/valueå¯¹ï¼škeyæ˜¯æ–‡ä»¶ä¸­çš„åç§»ï¼Œè€Œvalueåˆ™æ˜¯è¯¥è¡Œçš„å†…å®¹ã€‚å¦ä¸€ç§æ”¯æŒçš„å¸¸è§æ ¼å¼å°†key/valueå¯¹æŒ‰keyæ’åºåè¿ç»­å­˜å‚¨åœ¨ä¸€èµ·ã€‚æ¯ç§è¾“å…¥ç±»å‹çš„å®ç°éƒ½çŸ¥é“å¦‚ä½•å°†å®ƒæœ¬èº«åˆ†æˆæœ‰æ„ä¹‰çš„åŒºé—´ä»è€Œèƒ½åˆ†æˆç‹¬ç«‹çš„mapä»»åŠ¡è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚textæ¨¡å¼çš„åŒºé—´åˆ’åˆ†ä¿è¯äº†åˆ’åˆ†ç‚¹åªå‡ºç°åœ¨è¡Œè¾¹ç•Œå¤„ï¼‰ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä¸€ä¸ªç®€å•çš„readeræ¥å£æ¥æä¾›å¯¹æ–°çš„è¾“å…¥ç±»å‹çš„æ”¯æŒï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·åªæ˜¯ä½¿ç”¨ä¸ºæ•°ä¸å¤šçš„å‡ ç§é¢„å®šä¹‰è¾“å…¥ç±»å‹ä¸­çš„ä¸€ç§ã€‚</p>
<p>readerçš„å®ç°ä¸ä¸€å®šè¦æä¾›ä»æ–‡ä»¶ä¸­è¯»æ•°æ®çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å®šä¹‰ä¸€ä¸ªä»æ•°æ®åº“è¯»è®°å½•çš„readerï¼Œæˆ–æ˜¯ä»æ˜ å°„åœ¨å†…å­˜ä¸­çš„æŸç§æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒä¸€ç»„è¾“å‡ºç±»å‹æ¥äº§ç”Ÿä¸åŒæ ¼å¼çš„æ•°æ®ï¼Œè€Œç”¨æˆ·æä¾›ä»£ç å»æ”¯æŒæ–°çš„è¾“å‡ºç±»å‹ä¹Ÿä¸éš¾ã€‚</p>
<h4 id="4-5-è¾¹ç•Œæ•ˆåº”"><a class="header-anchor" href="#4-5-è¾¹ç•Œæ•ˆåº”">Â¶</a>4.5  è¾¹ç•Œæ•ˆåº”</h4>
<p>æœ‰äº›æƒ…å†µä¸‹ï¼ŒMapReduceçš„ç”¨æˆ·å‘ç°ä»ä»–ä»¬çš„mapæˆ–reduceæ“ä½œä¸­äº§ç”Ÿä¸€äº›é¢å¤–çš„è¾…åŠ©æ–‡ä»¶å¾ˆæœ‰å¸®åŠ©ã€‚æˆ‘ä»¬ä¾èµ–äºåº”ç”¨ä½œè€…æ¥ç¡®ä¿è¿™æ ·çš„è¾¹ç•Œæ•ˆåº”æ˜¯åŸå­ä¸”å¹‚ç­‰çš„ã€‚é€šå¸¸åº”ç”¨ä¼šå†™ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ç”Ÿæˆå®Œæ¯•æ—¶å°†å…¶åŸå­çš„æ›´åã€‚</p>
<p>æˆ‘ä»¬ä¸æä¾›åœ¨å•ä¸€ä»»åŠ¡äº§ç”Ÿçš„å¤šä¸ªè¾“å‡ºæ–‡ä»¶ä¸­åŸå­çš„ä¸¤æ®µæäº¤ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªä»»åŠ¡äº§ç”Ÿå¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä¸”è¦æ±‚æœ‰è·¨æ–‡ä»¶çš„ä¸€è‡´æ€§ï¼Œå®ƒå¿…é¡»æ˜¯ç¡®å®šæ€§çš„ã€‚è¿™ä¸ªé™åˆ¶åœ¨å®è·µä¸­è¿˜æ²¡æœ‰å¼•èµ·è¿‡é—®é¢˜ã€‚</p>
<h4 id="4-6-ç•¥è¿‡åè®°å½•"><a class="header-anchor" href="#4-6-ç•¥è¿‡åè®°å½•">Â¶</a>4.6  ç•¥è¿‡åè®°å½•</h4>
<p>æœ‰æ—¶ç”¨æˆ·ä»£ç ä¸­çš„bugä¼šå¯¼è‡´mapæˆ–reduceå‡½æ•°ä¸€é‡åˆ°ç‰¹å®šçš„è®°å½•å°±å´©æºƒã€‚è¿™äº›bugä¼šå¯¼è‡´MapReduceæ“ä½œæ— æ³•å®Œæˆã€‚é€šå¸¸çš„åº”ç”¨æªæ–½æ˜¯ä¿®å¤è¿™äº›bugï¼Œä½†æœ‰æ—¶éš¾ä»¥å®ç°ï¼šä¹Ÿè®¸bugå­˜åœ¨äºå¾—ä¸åˆ°æºä»£ç çš„ç¬¬ä¸‰æ–¹åº“ä¸­ã€‚åŒæ ·åœ°ï¼Œæœ‰æ—¶å¿½ç•¥ä¸€äº›è®°å½•æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªå¤§æ•°æ®é›†ä¸Šåšç»Ÿè®¡åˆ†ææ—¶ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯é€‰çš„æ‰§è¡Œæ¨¡å¼ï¼Œåœ¨MapReduceåº“æ£€æµ‹åˆ°ç¡®å®šä¼šå¯¼è‡´å´©æºƒçš„è®°å½•æ—¶è·¯è¿‡å®ƒä»¬ä»è€Œç»§ç»­è¿›åº¦ã€‚</p>
<p>æ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½è¦å®‰è£…ä¸€ä¸ªä¿¡å·å¤„ç†ç¨‹åºæ¥æ•æ‰è¿è§„æ“ä½œå’Œæ€»çº¿é”™è¯¯ã€‚åœ¨è°ƒç”¨ç”¨æˆ·çš„mapæˆ–reduceæ“ä½œå‰ï¼ŒMapReduceåº“å°†ç”¨äºéªŒè¯çš„åºåˆ—å·ä¿å­˜åœ¨å…¨å±€å˜é‡ä¸­ã€‚å¦‚æœç”¨æˆ·ä»£ç äº§ç”Ÿäº†ä¿¡å·ï¼Œä¿¡å·å¤„ç†ç¨‹åºå°±å°†ä¸€ä¸ªåŒ…å«è¿™ä¸ªåºåˆ—å·çš„â€œæœ€åä¸€æ­¥â€UDPåŒ…å‘é€ç»™MapReduceä¸»èŠ‚ç‚¹ã€‚å½“ä¸»èŠ‚ç‚¹åœ¨æŸä¸ªè®°å½•ä¸Šå‘ç°äº†è¶…è¿‡ä¸€ä¸ªé”™è¯¯æ—¶ï¼Œå°±è¡¨æ˜ä¸‹ä¸€æ¬¡é‡æ‰§è¡Œç›¸åº”çš„mapæˆ–reduceä»»åŠ¡æ—¶è¦è·³è¿‡è¿™ä¸ªè®°å½•ã€‚</p>
<h4 id="4-7-æœ¬åœ°æ‰§è¡Œ"><a class="header-anchor" href="#4-7-æœ¬åœ°æ‰§è¡Œ">Â¶</a>4.7  æœ¬åœ°æ‰§è¡Œ</h4>
<p>mapæˆ–reduceå‡½æ•°çš„è°ƒè¯•é—®é¢˜å¸¸å¸¸ä»¤äººéš¾ä»¥æ‰æ‘¸ï¼Œå› ä¸ºå®é™…çš„è®¡ç®—è¿‡ç¨‹éƒ½å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šï¼Œç»å¸¸åŒ…å«æ•°åƒå°æœºå™¨ï¼Œè€Œå·¥ä½œåˆ†é…å†³ç­–éƒ½ç”±ä¸»èŠ‚ç‚¹åŠ¨æ€äº§ç”Ÿã€‚ä¸ºäº†å¸®åŠ©è°ƒè¯•ã€æ€§èƒ½åˆ†æã€å°èŒƒå›´æµ‹è¯•ï¼Œæˆ‘ä»¬å¼€å‘äº†MapReduceåº“çš„ä¸€ä¸ªæ›¿ä»£å®ç°ï¼Œå¯ä»¥å°†MapReduceæ“ä½œçš„å…¨éƒ¨å·¥ä½œåœ¨ä¸€å°æœ¬åœ°æœºå™¨ä¸Šé¡ºåºæ‰§è¡Œã€‚ç”¨æˆ·æ‹¥æœ‰æ§åˆ¶æƒï¼Œå› æ­¤è®¡ç®—å¯ä»¥è¢«é™åˆ¶åœ¨ç‰¹å®šçš„mapä»»åŠ¡ä¸­ã€‚ç”¨æˆ·è°ƒç”¨ä»–ä»¬çš„ç¨‹åºæ—¶åŠ ä¸Šä¸€ä¸ªç‰¹æ®Šæ ‡å¿—ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨ä»»ä½•æœ‰ç”¨çš„è°ƒè¯•æˆ–æµ‹è¯•å·¥å…·ã€‚</p>
<h4 id="4-8-çŠ¶æ€ä¿¡æ¯"><a class="header-anchor" href="#4-8-çŠ¶æ€ä¿¡æ¯">Â¶</a>4.8  çŠ¶æ€ä¿¡æ¯</h4>
<p>ä¸»èŠ‚ç‚¹å†…ç½®äº†ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå¯ä»¥å°†å½“å‰çŠ¶æ€è¾“å‡ºä¸ºä¸€ç»„ç½‘é¡µä¾›ç”¨æˆ·ä½¿ç”¨ã€‚çŠ¶æ€ç½‘é¡µèƒ½æ˜¾ç¤ºè®¡ç®—çš„è¿›åº¦ï¼Œä¾‹å¦‚æœ‰å¤šå°‘ä»»åŠ¡è¢«å®Œæˆï¼Œå¤šå°‘æ­£åœ¨å¤„ç†ï¼Œè¾“å…¥æ•°æ®å¤§å°ï¼Œä¸­é—´æ•°æ®å¤§å°ï¼Œè¾“å‡ºæ•°æ®å¤§å°ï¼Œå¤„ç†é€Ÿåº¦ï¼Œç­‰ç­‰ã€‚è¿™äº›ç½‘é¡µè¿˜åŒ…å«æŒ‡å‘æ¯ä¸ªä»»åŠ¡çš„stdoutå’Œstderrè¾“å‡ºæ–‡ä»¶çš„é“¾æ¥ã€‚ç”¨æˆ·å¯ä»¥ç”¨è¿™äº›æ•°æ®æ¥é¢„æµ‹è®¡ç®—è¦èŠ±è´¹å¤šé•¿æ—¶é—´ï¼Œä»¥åŠæ˜¯å¦åº”è¯¥å¢åŠ è®¡ç®—ä½¿ç”¨çš„èµ„æºã€‚è¿™äº›ç½‘é¡µä¹Ÿèƒ½ç”¨äºåœ¨è®¡ç®—é€Ÿç‡æ¯”é¢„æœŸæ…¢å¾ˆå¤šæ—¶å‘ç°è¿™ä¸€æƒ…å†µã€‚</p>
<p>å¦å¤–ï¼Œé¡¶å±‚çš„çŠ¶æ€ç½‘é¡µè¿˜èƒ½æ˜¾ç¤ºå“ªäº›å·¥ä½œèŠ‚ç‚¹å¤±è´¥äº†ï¼Œå®ƒä»¬å¤±è´¥æ—¶æ­£åœ¨å¤„ç†å“ªäº›mapå’Œreduceä»»åŠ¡ã€‚å½“è¦åœ¨ç”¨æˆ·ä»£ç ä¸­ç¡®å®šbugæ—¶è¿™äº›æ—¶é—´éå¸¸æœ‰ç”¨ã€‚</p>
<h4 id="4-9-è®¡æ•°å™¨"><a class="header-anchor" href="#4-9-è®¡æ•°å™¨">Â¶</a>4.9  è®¡æ•°å™¨</h4>
<p>MapReduceåº“æä¾›äº†è®¡æ•°å™¨æœºåˆ¶ï¼Œå¯ä»¥ç»Ÿè®¡å¤šç§äº‹ä»¶çš„å‘ç”Ÿæ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ä»£ç å¯èƒ½æƒ³ç»Ÿè®¡å·²å¤„ç†çš„å•è¯æ€»æ•°ï¼Œæˆ–è¢«ç´¢å¼•çš„å¾·è¯­æ–‡çŒ®çš„æ•°é‡ç­‰ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨è¿™ä¸€æœºåˆ¶ï¼Œç”¨æˆ·ä»£ç éœ€è¦åˆ›å»ºä¸€ä¸ªæœ‰åçš„è®¡æ•°å™¨å¯¹è±¡ï¼Œå¹¶åœ¨mapå’Œreduceå‡½æ•°çš„é€‚å½“ä½ç½®å¢åŠ å®ƒçš„å€¼ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Counter *uppercase = GetCounter(<span class="string">"uppercase"</span>);</span><br><span class="line">    </span><br><span class="line"><span class="built_in">map</span>(<span class="keyword">String</span> name, <span class="keyword">String</span> contents):</span><br><span class="line">    <span class="keyword">for</span> each <span class="keyword">word</span> w in contents:</span><br><span class="line">        <span class="keyword">if</span> (IsCapitalized(w)):</span><br><span class="line">            uppercase-&gt;Increment();</span><br><span class="line">        EmitIntermediate(w, <span class="string">"1"</span>);</span><br></pre></td></tr></table></figure>
<p>å·¥ä½œèŠ‚ç‚¹ä¸Šçš„è®¡æ•°å™¨å€¼ä¼šå®šæœŸå‘é€ç»™ä¸»èŠ‚ç‚¹ï¼ˆé™„åœ¨pingçš„å›åº”é‡Œï¼‰ã€‚å½“MapReduceæ“ä½œå®Œæˆæ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†è¿è¡ŒæˆåŠŸçš„mapå’Œreduceä»»åŠ¡å‘æ¥çš„è®¡æ•°å™¨å€¼åˆå¹¶åè¿”å›ç»™ç”¨æˆ·ä»£ç ã€‚å½“å‰çš„è®¡æ•°å™¨å€¼ä¹Ÿä¼šæ˜¾ç¤ºåœ¨ä¸»èŠ‚ç‚¹çš„çŠ¶æ€ç½‘é¡µä¸Šï¼Œå…¶å®ƒäººå¯ä»¥çœ‹åˆ°å®æ—¶çš„è®¡ç®—è¿›åº¦ã€‚åœ¨åˆå¹¶è®¡æ•°å™¨å€¼æ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå¿½ç•¥åŒä¸€ä¸ªmapæˆ–reduceä»»åŠ¡çš„é‡å¤çš„ç»“æœï¼Œä»è€Œé¿å…å¤šæ¬¡å åŠ ã€‚ï¼ˆé‡å¤æ‰§è¡Œå¯èƒ½å‘ç”Ÿåœ¨æˆ‘ä»¬çš„å¤‡ç”¨ä»»åŠ¡å’Œå¤±è´¥èŠ‚ç‚¹é‡æ‰§è¡Œä¸­ã€‚ï¼‰</p>
<p>æœ‰äº›è®¡æ•°å€¼æ˜¯ç”±MapReduceåº“è‡ªåŠ¨ç»´æŠ¤çš„ï¼Œä¾‹å¦‚è¾“å…¥key/valueå¯¹å·²å¤„ç†çš„æ•°é‡å’Œè¾“å‡ºkey/valueå¯¹äº§ç”Ÿçš„æ•°é‡ç­‰ã€‚</p>
<p>ç”¨æˆ·ä»¬è§‚å¯Ÿåˆ°è¿™ä¸€æœºåˆ¶åœ¨å¯¹MapReduceæ“ä½œçš„æ™ºèƒ½æ£€æŸ¥ä¸Šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€äº›MapReduceæ“ä½œä¸­ï¼Œç”¨æˆ·ä»£ç å¯èƒ½æƒ³è¦ç¡®è®¤äº§ç”Ÿçš„è¾“å‡ºå¯¹çš„æ•°é‡æ°å¥½ä¸è¾“å…¥å¯¹çš„æ•°é‡ç›¸ç­‰ï¼Œæˆ–æ˜¯å·²å¤„ç†çš„å¾·è¯­æ–‡çŒ®å å¤„ç†æ–‡çŒ®æ€»æ•°çš„æ¯”ä¾‹æ˜¯åœ¨æ¥å—èŒƒå›´å†…çš„ã€‚</p>
<h3 id="5-æ€§èƒ½"><a class="header-anchor" href="#5-æ€§èƒ½">Â¶</a>5 æ€§èƒ½</h3>
<p>æœ¬èŠ‚ä¸­æˆ‘ä»¬ä¼šåœ¨ä¸€ä¸ªå¤§å‹é›†ç¾¤ä¸Šæµ‹é‡MapReduceåœ¨ä¸¤ä¸ªè®¡ç®—ä¸Šçš„æ€§èƒ½ã€‚ä¸€ä¸ªè®¡ç®—æ˜¯åœ¨å·®ä¸å¤š1TBçš„æ•°æ®ä¸­æŸ¥æ‰¾æŒ‡å®šçš„æ¨¡å¼ã€‚å¦ä¸€ä¸ªè®¡ç®—åˆ™æ˜¯æ’åº1TBçš„æ•°æ®ã€‚</p>
<p>è¿™ä¸¤ä¸ªç¨‹åºèƒ½ä»£è¡¨å¤§é‡çœŸå®çš„MapReduceç¨‹åºâ€”â€”ä¸€ç±»ç¨‹åºæ˜¯å°†æ•°æ®ä»ä¸€ç§è¡¨ç¤ºå½¢å¼è½¬æ¢ä¸ºå¦ä¸€ç§ï¼Œå¦ä¸€ç±»ç¨‹åºåˆ™æ˜¯ä»å¾ˆå¤§æ•°é‡çš„æ•°æ®é›†ä¸­æå–å‡ºä¸€å°éƒ¨åˆ†æ„Ÿå…´è¶£çš„æ•°æ®ã€‚</p>
<h4 id="5-1-é›†ç¾¤é…ç½®"><a class="header-anchor" href="#5-1-é›†ç¾¤é…ç½®">Â¶</a>5.1  é›†ç¾¤é…ç½®</h4>
<p>æ‰€æœ‰çš„ç¨‹åºéƒ½è¿è¡Œåœ¨ç”±1800å°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šã€‚æ¯å°æœºå™¨é…æœ‰ï¼š2GHzçš„Intel Xeonå¤„ç†å™¨ä¸”æ”¯æŒè¶…çº¿ç¨‹ï¼Œ4GBå†…å­˜ï¼Œ2å—160GBçš„IDEç¡¬ç›˜ï¼Œå’Œ1GBä»¥å¤ªç½‘è¿æ¥ã€‚æ‰€æœ‰æœºå™¨éƒ½å®‰æ’åœ¨2å±‚æ ‘ç»“æ„çš„ç½‘å…³å†…ï¼Œæ ¹èŠ‚ç‚¹çš„å¯ç”¨å¸¦å®½åŠ èµ·æ¥æœ‰100-200Gbpsã€‚æ‰€æœ‰çš„æœºå™¨éƒ½å¤„äºç›¸åŒçš„æ‰˜ç®¡è®¾æ–½ä¸‹ï¼Œå› æ­¤ä»»æ„ä¸¤å°æœºå™¨é—´çš„å¾€è¿”é€šä¿¡æ—¶é—´éƒ½å°‘äº1msã€‚</p>
<p>é™¤äº†4GBçš„å†…å­˜ï¼Œè¿˜æœ‰1-1.5GBçš„å†…å­˜ä¿ç•™ç»™äº†é›†ç¾¤ä¸Šè¿è¡Œçš„å…¶å®ƒä»»åŠ¡ã€‚ç¨‹åºè¿è¡Œçš„æ—¶é—´æ˜¯ä¸€ä¸ªå‘¨æœ«çš„ä¸‹åˆï¼Œæ­¤æ—¶å¤§å¤šæ•°CPUã€ç£ç›˜å’Œç½‘ç»œèµ„æºéƒ½ç©ºé—²ä¸­ã€‚</p>
<h4 id="5-2-Grep"><a class="header-anchor" href="#5-2-Grep">Â¶</a>5.2  Grep</h4>
<p>grepç¨‹åºè¦æ‰«æ1010ä¸ªé•¿åº¦ä¸º100å­—èŠ‚çš„è®°å½•æ¥å¯»æ‰¾ä¸€ä¸ªç›¸å½“ç½•è§çš„ä¸‰å­—ç¬¦æ¨¡å¼ï¼ˆè¿™ä¸ªæ¨¡å¼å‡ºç°äº92337ä¸ªè®°å½•ä¸­ï¼‰ã€‚è¾“å…¥è¢«åˆ‡åˆ†æˆ64MBå¤§å°çš„éƒ¨åˆ†ï¼ˆM = 15000ï¼‰ï¼Œæ•´ä¸ªè¾“å‡ºä¸ºä¸€ä¸ªæ–‡ä»¶ï¼ˆR = 1ï¼‰ã€‚</p>
<p><img src="/.io//transfer.png" alt="transfer"></p>
<p>å›¾2æ˜¾ç¤ºäº†éšæ—¶é—´å˜åŒ–çš„è®¡ç®—è¿›åº¦ã€‚Yè½´æ˜¯è¾“å…¥æ•°æ®æ‰«æçš„é€Ÿç‡ã€‚è¿™ä¸ªé€Ÿç‡é€æ¸æå‡ä»£è¡¨æ›´å¤šçš„æœºå™¨è¢«åˆ†é…ç»™MapReduceè®¡ç®—ï¼Œå¹¶åœ¨åˆ†é…çš„æœºå™¨æ•°è¾¾åˆ°1764å°æ—¶è¶…è¿‡äº†30GB/sã€‚éšç€mapä»»åŠ¡çš„ç»“æŸï¼Œè¿™ä¸ªé€Ÿç‡å¼€å§‹ä¸‹é™ï¼Œå¹¶åœ¨è®¡ç®—å¼€å§‹å80sæ—¶é™è‡³0ã€‚æ•´ä¸ªè®¡ç®—è¿‡ç¨‹å…±èŠ±è´¹çº¦150sã€‚è¿™åŒ…æ‹¬äº†å¤§çº¦1åˆ†é’Ÿçš„å¯åŠ¨å¼€é”€ã€‚å¯åŠ¨å¼€é”€æ˜¯ç”±äºè¦æŠŠç¨‹åºä¼ æ’­åˆ°æ‰€æœ‰å·¥ä½œæœºå™¨ä¸Šï¼Œè¿˜åŒ…æ‹¬GFSè¦æ‰“å¼€1000ä¸ªè¾“å…¥æ–‡ä»¶å’Œè·å–å±€éƒ¨ä¼˜åŒ–æ‰€éœ€ä¿¡æ¯è€Œå¯¼è‡´çš„å»¶è¿Ÿã€‚</p>
<h4 id="5-3-æ’åº"><a class="header-anchor" href="#5-3-æ’åº">Â¶</a>5.3  æ’åº</h4>
<p>æ’åºç¨‹åºè¦å¯¹10100ä¸ª100å­—èŠ‚çš„è®°å½•è¿›è¡Œæ’åºï¼ˆå·®ä¸å¤š1TBæ•°æ®ï¼‰ã€‚è¿™ä¸ªç¨‹åºæ¨¡ä»¿äº†TeraSortæµ‹è¯•ç¨‹åºã€‚</p>
<p>æ’åºç¨‹åºåªåŒ…æ‹¬ä¸åˆ°50è¡Œçš„ç”¨æˆ·ä»£ç ã€‚mapå‡½æ•°ä¸€å…±3è¡Œï¼Œå®ƒä»ä¸€ä¸ªæ–‡æœ¬è¡Œä¸­æå–å‡º10å­—èŠ‚çš„æ’åºkeyï¼Œå†å°†keyå’ŒåŸå§‹æ–‡æœ¬è¡Œè¾“å‡ºä¸ºä¸­é—´key/valueå¯¹ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå†…ç½®çš„Identityå‡½æ•°ä½œä¸ºreduceå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šå°†æœªæ›´æ”¹çš„ä¸­é—´key/valueè¾“å‡ºä¸ºç»“æœã€‚æœ€ç»ˆçš„æ’åºåè¾“å‡ºè¢«å‡ºåˆ°ä¸€ç»„2è·¯å¤åˆ¶çš„GFSæ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œè¿™ä¸ªç¨‹åºçš„è¾“å‡ºè¦å†™2TBçš„æ•°æ®ï¼‰ã€‚</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œè¾“å…¥æ•°æ®è¢«åˆ†æˆè‹¥å¹²ä¸ª64MBå¤§å°çš„éƒ¨åˆ†ï¼ˆM = 15000ï¼‰ã€‚æˆ‘ä»¬å°†å·²æ’åºçš„è¾“å‡ºåˆ†æˆ4000ä¸ªæ–‡ä»¶ï¼ˆR = 4000ï¼‰ã€‚åˆ’åˆ†å‡½æ•°ä½¿ç”¨keyçš„é¦–å­—èŠ‚æ¥å°†å®ƒåˆ†åˆ°Rä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªã€‚</p>
<p>æ­¤æ¬¡æµ‹è¯•ä¸­æˆ‘ä»¬çš„åˆ’åˆ†å‡½æ•°ä½¿ç”¨äº†keyåˆ†å¸ƒçš„å†…å»ºçŸ¥è¯†ã€‚åœ¨ä¸€ä¸ªä¸€èˆ¬çš„æ’åºç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¼šé¢„å…ˆåŠ ä¸€è½®MapReduceæ“ä½œï¼Œæ”¶é›†keyçš„æ ·æœ¬ï¼Œå¹¶ä½¿ç”¨keyæŠ½æ ·çš„åˆ†å¸ƒæ¥è®¡ç®—æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„åˆ’åˆ†ç‚¹ã€‚</p>
<p><img src="/.io//rates.png" alt="rates"></p>
<p>å›¾3(a)æ˜¯æ’åºç¨‹åºçš„æ­£å¸¸æ‰§è¡Œè¿‡ç¨‹ã€‚ä¸Šè¾¹çš„å›¾æ˜¾ç¤ºäº†è¾“å…¥è¯»å–çš„é€Ÿåº¦ã€‚è¾“å…¥é€Ÿåº¦çš„å³°å€¼ä¸º13GB/sï¼Œå¹¶åœ¨200ç§’åæ‰€æœ‰çš„mapä»»åŠ¡éƒ½å®Œæˆæ—¶è¿…é€Ÿä¸‹é™è‡³0ã€‚å¯ä»¥æ³¨æ„åˆ°è¿™ä¸ªé€Ÿåº¦è¦æ¯”grepçš„é€Ÿåº¦å°ã€‚è¿™æ˜¯å› ä¸ºæ’åºçš„mapä»»åŠ¡è¦åœ¨å‘æœ¬åœ°ç£ç›˜å†™ä¸­é—´æ–‡ä»¶ä¸ŠèŠ±è´¹å¤§çº¦ä¸€åŠçš„æ—¶é—´å’ŒI/Oå¸¦å®½ã€‚è€Œgrepä¸­ç›¸åº”çš„ä¸­é—´è¾“å‡ºåˆ™å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p>
<p>ä¸­é—´çš„å›¾æ˜¾ç¤ºäº†æ•°æ®ä»mapèŠ‚ç‚¹é€šè¿‡ç½‘ç»œå‘reduceèŠ‚ç‚¹å‘é€çš„é€Ÿåº¦ã€‚è¿™ä¸ªç§»åŠ¨å¼€å§‹äºç¬¬ä¸€ä¸ªmapä»»åŠ¡å®Œæˆã€‚å›¾ä¸­çš„ç¬¬ä¸€ä¸ªé©¼å³°å‡ºç°åœ¨reduceä»»åŠ¡ç¬¬ä¸€æ¬¡è¾¾åˆ°1700ä¸ªæ—¶ï¼ˆæ•´ä¸ªMapReduceå…±åˆ†é…åˆ°1700å°æœºå™¨ï¼Œæ¯å°æœºå™¨åŒæ—¶æœ€å¤šåªè¿è¡Œä¸€ä¸ªreduceä»»åŠ¡ï¼‰ã€‚è®¡ç®—å¼€å§‹å·®ä¸å¤š300ç§’æ—¶ï¼Œç¬¬ä¸€æ‰¹reduceä»»åŠ¡å·²ç»æœ‰éƒ¨åˆ†å®Œæˆï¼Œæˆ‘ä»¬å¼€å§‹å‘å‰©ä½™çš„reduceä»»åŠ¡ä¼ é€æ•°æ®ã€‚æ‰€æœ‰ä¼ é€è¿‡ç¨‹åœ¨è®¡ç®—å¼€å§‹600ç§’åç»“æŸã€‚</p>
<p>ä¸‹é¢çš„å›¾æ˜¯reduceä»»åŠ¡å‘æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶å†™å…¥å·²æ’åºæ•°æ®çš„é€Ÿåº¦ã€‚åœ¨ç¬¬ä¸€ä¸ªä¼ è¾“å‘¨æœŸçš„ç»“æŸä¸å†™å…¥å‘¨æœŸçš„å¼€å§‹ä¹‹é—´æœ‰ä¸€ä¸ªå»¶è¿Ÿï¼Œå› ä¸ºæ­¤æ—¶æœºå™¨æ­£åœ¨æ’åºä¸­é—´æ•°æ®ã€‚å†™å…¥é€Ÿåº¦åœ¨2-4GB/sä¸‹æŒç»­äº†ä¸€æ®µæ—¶é—´ã€‚æ‰€æœ‰çš„å†™æ“ä½œåœ¨è®¡ç®—å¼€å§‹å850ç§’å·¦å³ç»“æŸã€‚åŒ…æ‹¬å¯åŠ¨å¼€é”€çš„è¯ï¼Œæ•´ä¸ªè®¡ç®—èŠ±è´¹äº†891ç§’ã€‚è¿™ä¸TeraSortä¸Šç›®å‰å…¬å¸ƒçš„æœ€ä½³è®°å½•1057ç§’å¾ˆæ¥è¿‘ã€‚</p>
<p>ä¸€äº›è¦æ³¨æ„çš„äº‹ï¼šå› ä¸ºæˆ‘ä»¬çš„å±€éƒ¨æ€§ä¼˜åŒ–ï¼Œè¾“å…¥é€Ÿåº¦è¦æ¯”ä¼ æ’­é€Ÿåº¦å’Œè¾“å‡ºé€Ÿåº¦éƒ½å¿«â€”â€”å¤§å¤šæ•°æ•°æ®éƒ½è¯»è‡ªæœ¬åœ°ç£ç›˜ï¼Œç»•å¼€äº†æˆ‘ä»¬å¸¦å®½ç›¸å½“æœ‰é™çš„ç½‘ç»œã€‚ä¼ æ’­é€Ÿåº¦è¦æ¯”è¾“å‡ºé€Ÿåº¦é«˜ï¼Œå› ä¸ºè¾“å‡ºé˜¶æ®µè¦å†™ä¸¤ä»½å·²æ’åºçš„æ•°æ®ï¼ˆå› ä¸ºå¯é æ€§å’Œå®ç”¨æ€§çš„è€ƒè™‘ï¼‰ã€‚æˆ‘ä»¬å†™ä¸¤ä»½è¾“å‡ºæ˜¯å› ä¸ºè¿™æ˜¯æˆ‘ä»¬çš„åº•å±‚æ–‡ä»¶ç³»ç»Ÿé’ˆå¯¹å¯é æ€§å’Œå®ç”¨æ€§æä¾›çš„æœºåˆ¶ã€‚å¦‚æœåº•å±‚æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æ“¦é™¤ä»£ç è€Œä¸æ˜¯å¤åˆ¶ï¼Œé‚£ä¹ˆå†™æ•°æ®éœ€è¦çš„ç½‘ç»œå¸¦å®½å°±ä¼šå‡å°‘ã€‚</p>
<h4 id="5-4-å¤‡ç”¨ä»»åŠ¡çš„å½±å“"><a class="header-anchor" href="#5-4-å¤‡ç”¨ä»»åŠ¡çš„å½±å“">Â¶</a>5.4  å¤‡ç”¨ä»»åŠ¡çš„å½±å“</h4>
<p>åœ¨å›¾3(b)ä¸­æ˜¾ç¤ºçš„æ˜¯ç¦ç”¨äº†å¤‡ç”¨ä»»åŠ¡æƒ…å†µä¸‹æ’åºç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚è¿™ç§æƒ…å†µä¸‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸å›¾3(a)ä¸­çš„å¾ˆç›¸ä¼¼ï¼Œä½†åœ¨æœ«å°¾å¤„æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´å‡ ä¹æ²¡æœ‰ä»»ä½•çš„å†™æ“ä½œå‘ç”Ÿã€‚åœ¨960ç§’åï¼Œåªæœ‰5ä¸ªreduceä»»åŠ¡è¿˜æ²¡æœ‰å®Œæˆã€‚ä½†è¿™æœ€åçš„å‡ ä¸ªä»»åŠ¡ç›´åˆ°300ç§’åæ‰ç»“æŸã€‚æ•´ä¸ªè®¡ç®—èŠ±è´¹äº†1283ç§’ï¼Œæ¯”æ­£å¸¸æƒ…å†µå¤šèŠ±è´¹44%çš„æ—¶é—´ã€‚</p>
<h4 id="5-5-æœºå™¨å¤±è´¥"><a class="header-anchor" href="#5-5-æœºå™¨å¤±è´¥">Â¶</a>5.5  æœºå™¨å¤±è´¥</h4>
<p>åœ¨å›¾3Â©ä¸­æ˜¾ç¤ºäº†æœ‰æœºå™¨å¤±è´¥æƒ…å†µä¸‹çš„æ’åºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨è®¡ç®—å¼€å§‹å‡ åˆ†é’Ÿåï¼Œæˆ‘ä»¬æœ‰æ„çš„æ€æ‰äº†1746ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸­çš„200ä¸ªã€‚åº•å±‚é›†ç¾¤è°ƒåº¦å™¨ç«‹å³åœ¨è¿™äº›æœºå™¨ä¸Šé‡å¯äº†æ–°çš„å·¥ä½œè¿›ç¨‹ï¼ˆåªæœ‰è¿›ç¨‹è¢«æ€æ‰äº†ï¼Œæœºå™¨è¿˜åœ¨æ­£å¸¸è¿è¡Œä¸­ï¼‰ã€‚</p>
<p>å·¥ä½œèŠ‚ç‚¹çš„æ­»äº¡æ˜¾ç¤ºä¸ºä¸€ä¸ªè´Ÿçš„è¾“å…¥é€Ÿåº¦ï¼Œå› ä¸ºä¸€äº›å·²ç»å®Œæˆçš„mapä»»åŠ¡æ¶ˆå¤±äº†ï¼ˆå› ä¸ºå¯¹åº”çš„mapèŠ‚ç‚¹è¢«æ€æ‰äº†ï¼‰éœ€è¦é‡æ–°å®Œæˆã€‚è¿™äº›mapä»»åŠ¡çš„é‡æ‰§è¡Œå¾ˆå¿«å°±ä¼šå‘ç”Ÿã€‚æ•´ä¸ªè®¡ç®—è¿‡ç¨‹åœ¨933ç§’åç»“æœï¼ŒåŒ…æ‹¬äº†å¯åŠ¨å¼€é”€ï¼ˆç›¸æ¯”æ­£å¸¸æ‰§è¡Œæ—¶é—´åªå¢åŠ äº†5%ï¼‰ã€‚</p>
<h3 id="6-ç»éªŒ"><a class="header-anchor" href="#6-ç»éªŒ">Â¶</a>6 ç»éªŒ</h3>
<p>æˆ‘ä»¬åœ¨2003å¹´2æœˆå†™å‡ºäº†MapReduceåº“çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¹¶åœ¨2003å¹´8æœˆè¿›è¡Œäº†éå¸¸å¤§çš„æ”¹è¿›ï¼ŒåŒ…æ‹¬äº†å±€éƒ¨æ€§ä¼˜åŒ–ã€å„å·¥ä½œæœºå™¨ä¸Šä»»åŠ¡æ‰§è¡Œçš„åŠ¨æ€è´Ÿè½½å¹³è¡¡ç­‰ã€‚ä»é‚£æ—¶å¼€å§‹ï¼Œæˆ‘ä»¬æ„‰å¿«åœ°æƒŠè®¶äºMapReduceè¢«å¦‚æ­¤å¹¿æ³›åœ°åº”ç”¨åœ¨æˆ‘ä»¬å·¥ä½œä¸­é‡åˆ°é—®é¢˜ä¸Šã€‚å®ƒå·²è¢«ç”¨äºGoogleçš„å¾ˆå¤šé¢†åŸŸä¸­ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å¤§è§„æ¨¡æœºå™¨å­¦ä¹ é—®é¢˜ï¼›</p>
</li>
<li>
<p>é’ˆå¯¹Google Newså’ŒFroogleäº§å“çš„é›†ç¾¤é—®é¢˜ï¼›</p>
</li>
<li>
<p>ç”¨äºäº§ç”Ÿæµè¡Œéœ€æ±‚æŠ¥å‘Šçš„æ•°æ®æå–ï¼ˆä¾‹å¦‚Google Zeitgeistï¼‰ï¼›</p>
</li>
<li>
<p>é’ˆå¯¹æ–°çš„å°è¯•å’Œäº§å“çš„ç½‘é¡µå±æ€§æå–ï¼ˆä¾‹å¦‚ï¼Œä»å¤§é‡çš„å®šä½æœç´¢ä¸­æå–å‡ºåœ°ç†ä½ç½®ä¿¡æ¯ï¼‰ï¼›</p>
</li>
<li>
<p>å¤§è§„æ¨¡çš„å›¾è®¡ç®—ã€‚</p>
</li>
</ul>
<p><img src="/.io//instances.png" alt="instances"></p>
<p>å›¾4æ˜¾ç¤ºäº†åœ¨æˆ‘ä»¬çš„æºä»£ç ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œäº†ç™»è®°çš„MapReduceç¨‹åºçš„æ•°é‡éšæ—¶é—´çš„æ˜¾è‘—å¢é•¿ï¼Œä»2003å¹´åˆçš„0åˆ°2004å¹´9æœˆåº•çš„æ¥è¿‘900ä¸ªä¸åŒç‰ˆæœ¬ã€‚MapReduceå–å¾—å¦‚æ­¤æˆåŠŸçš„åŸå› æ˜¯å®ƒä»¤èŠ±åŠå°æ—¶æ—¶é—´å†™å‡ºä¸€ä¸ªç®€å•çš„ç¨‹åºå¹¶è¿è¡Œåœ¨ä¸€åƒå°æœºå™¨ä¸Šæˆä¸ºäº†å¯èƒ½ï¼Œè¿™æå¤§åœ°åŠ é€Ÿäº†å¼€å‘å’ŒåŸå‹å®ç°å¾ªç¯ã€‚è¿›ä¸€æ­¥è¯´ï¼Œå®ƒå…è®¸æ²¡æœ‰åˆ†å¸ƒå¼ä¸å¹¶è¡Œç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿèƒ½è½»æ¾åœ°åˆ©ç”¨å¤§é‡çš„èµ„æºã€‚</p>
<p><img src="/.io//jobs.png" alt="jobs"></p>
<p>åœ¨æ¯é¡¹ä½œä¸šçš„ç»“å°¾ï¼ŒMapReduceåº“ä¼šå°†ä½œä¸šèŠ±è´¹çš„è®¡ç®—èµ„æºç»Ÿè®¡å†™å…¥æ—¥å¿—ã€‚åœ¨è¡¨1ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°Googleåœ¨2004å¹´8æœˆè¿è¡Œçš„MapReduceä½œä¸šçš„ä¸€éƒ¨åˆ†ç»Ÿè®¡æƒ…å†µã€‚</p>
<h4 id="6-1-å¤§è§„æ¨¡ç´¢å¼•"><a class="header-anchor" href="#6-1-å¤§è§„æ¨¡ç´¢å¼•">Â¶</a>6.1  å¤§è§„æ¨¡ç´¢å¼•</h4>
<p>è¿„ä»Šä¸ºæ­¢æˆ‘ä»¬çš„ä¸€ä¸ªæœ€é‡è¦çš„MapReduceåº”ç”¨æ˜¯å®Œå…¨é‡å†™äº†ç”Ÿäº§ç´¢å¼•ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£äº§ç”Ÿç”¨äºGoogleç½‘ç»œæœç´¢æœåŠ¡çš„æ•°æ®ç»“æ„ã€‚ç´¢å¼•ç³»ç»ŸæŠŠç”±æˆ‘ä»¬çš„çˆ¬å–ç³»ç»Ÿæ£€ç´¢çš„ä¸€ä¸ªå¤§çš„æ–‡æ¡£é›†åˆä½œä¸ºè¾“å…¥ï¼Œå¹¶å­˜å‚¨ä¸ºä¸€ç»„GFSæ–‡ä»¶ã€‚è¿™äº›æ–‡æ¡£çš„åŸå§‹æ–‡æœ¬æ•°æ®è¶…è¿‡äº†20TBã€‚ç´¢å¼•è¿›ç¨‹åˆ†æˆäº†5-10ä¸ªMapReduceæ“ä½œè¿è¡Œã€‚ä½¿ç”¨MapReduceï¼ˆè€Œä¸æ˜¯ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨çš„ad-hocåˆ†å¸ƒç³»ç»Ÿï¼‰æä¾›äº†è®¸å¤šå¥½å¤„ï¼š</p>
<ul>
<li>
<p>ç´¢å¼•ä»£ç æ›´ç®€å•ï¼Œæ›´å°ï¼Œä¹Ÿæ›´æ˜“æ‡‚ï¼Œå› ä¸ºå¤„ç†å®¹é”™æ€§å’Œåˆ†å¸ƒä¸å¹¶è¡Œçš„ä»£ç éƒ½è¢«éšè—åœ¨MapReduceåº“ä¸­äº†ã€‚ä¾‹å¦‚ï¼Œå…¶ä¸­ä¸€ä¸ªé˜¶æ®µçš„è®¡ç®—åœ¨ä½¿ç”¨äº†MapReduceåä»å·®ä¸å¤š3800è¡ŒC++ä»£ç é™åˆ°äº†700è¡Œä»£ç ã€‚</p>
</li>
<li>
<p>MapReduceåº“çš„æ€§èƒ½è¶³å¤Ÿå¥½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»¤æ¦‚å¿µä¸Šæ— å…³çš„è®¡ç®—è¿‡ç¨‹ç›¸äº’åˆ†ç¦»ï¼Œè€Œä¸éœ€è¦ä¸ºäº†é¿å…é¢å¤–çš„æ•°æ®å¤„ç†è€Œå°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ã€‚è¿™å‡å°äº†ä¿®æ”¹ç´¢å¼•è¿›ç¨‹çš„éš¾åº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æ—§ç´¢å¼•ç³»ç»Ÿä¸­è¿›è¡Œä¸€ä¸ªä¿®æ”¹è¦èŠ±è´¹å‡ ä¸ªæœˆæ—¶é—´ï¼Œè€Œåœ¨æ–°ç³»ç»Ÿä¸­åªéœ€è¦å‡ å¤©æ—¶é—´ã€‚</p>
</li>
<li>
<p>ç´¢å¼•è¿›ç¨‹æ›´å®¹æ˜“å»æ“ä½œï¼Œå› ä¸ºå¤§å¤šæ•°ç”±æœºå™¨å¤±è´¥ã€éƒ¨åˆ†æœºå™¨ç¼“æ…¢å’Œç½‘ç»œæš‚æ—¶ä¸­æ–­å¼•èµ·çš„é—®é¢˜éƒ½ç”±MapReduceåº“è‡ªåŠ¨å¤„ç†äº†ï¼Œä¸éœ€è¦æ“ä½œè€…å¹²é¢„ã€‚æ­¤å¤–ï¼Œé€šè¿‡å‘é›†ç¾¤ä¸­å¢åŠ æœºå™¨ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å¢å¼ºç´¢å¼•è¿›ç¨‹çš„æ€§èƒ½ã€‚</p>
</li>
</ul>
<h3 id="7-ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#7-ç›¸å…³å·¥ä½œ">Â¶</a>7 ç›¸å…³å·¥ä½œ</h3>
<p>è®¸å¤šç³»ç»Ÿéƒ½æä¾›äº†çº¦æŸå¥½çš„ç¨‹åºæ¨¡å‹ï¼Œå¹¶åˆ©ç”¨è¿™äº›çº¦æŸè‡ªåŠ¨çš„è¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç»„åˆå‡½æ•°å¯ä»¥åœ¨Nä¸ªå¤„ç†å™¨ä¸Šä½¿ç”¨å¹¶è¡Œå‰ç¼€è®¡ç®—ç”¨log Nçš„æ—¶é—´è®¡ç®—å‡ºåŒ…å«Nä¸ªå…ƒç´ çš„æ•°ç»„çš„æ‰€æœ‰å‰ç¼€ã€‚MapReduceå¯ä»¥è¢«è®¤ä¸ºæ˜¯åŸºäºæ¥è‡ªæˆ‘ä»¬åœ¨çœŸå®ä¸–ç•Œä¸­çš„å¤§å‹è®¡ç®—çš„ç»éªŒï¼Œå¯¹è¿™äº›æ¨¡å‹çš„ç®€å•åŒ–å’Œæç‚¼ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬æä¾›äº†å¯ä»¥æ‰©å±•åˆ°ä¸Šåƒä¸ªå¤„ç†å™¨ä¸Šä½¿ç”¨çš„å®¹é”™æœºåˆ¶ã€‚ä½œä¸ºå¯¹æ¯”ï¼Œå¤§å¤šæ•°å¹¶è¡Œå¤„ç†ç³»ç»Ÿåªèƒ½åœ¨å°è§„æ¨¡ä¸‹å®ç°ï¼Œå¹¶å°†å¤„ç†æœºå™¨é”™è¯¯çš„ç»†èŠ‚ç•™ç»™ç¨‹åºå‘˜å»å®Œæˆã€‚</p>
<p>Bulk Synchronous Programmingå’Œä¸€äº›MPIåŸè¯­æä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ï¼Œæ›´å®¹æ˜“å†™å‡ºå¹¶è¡Œç¨‹åºã€‚è¿™äº›ç³»ç»Ÿå’ŒMapReduceçš„ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯MapReduceåˆ©ç”¨äº†ä¸€ä¸ªå—çº¦æŸçš„ç¨‹åºæ¨¡å‹å»è‡ªåŠ¨å¹¶è¡ŒåŒ–ç”¨æˆ·ç¨‹åºï¼Œå¹¶æä¾›é€æ˜çš„å®¹é”™æœºåˆ¶ã€‚</p>
<p>æˆ‘ä»¬çš„å±€éƒ¨æ€§ä¼˜åŒ–å—åˆ°äº†è¯¸å¦‚æ´»åŠ¨ç£ç›˜ç­‰æŠ€æœ¯çš„å¯å‘ï¼Œå³å°†è®¡ç®—æ¨ç»™é è¿‘æœ¬åœ°ç£ç›˜çš„å¤„ç†å•å…ƒï¼Œæ¥å‡å°‘è¦è·¨è¿‡I/Oå­ç³»ç»Ÿæˆ–ç½‘ç»œå‘é€çš„æ•°æ®æ€»é‡ã€‚æˆ‘ä»¬ç”¨è¿è¡Œåœ¨ç›´æ¥è¿æ¥äº†å°‘é‡ç£ç›˜çš„å•†ç”¨å¤„ç†å™¨ä¸Šæ›¿ä»£äº†ç›´æ¥è¿è¡Œåœ¨ç£ç›˜æ§åˆ¶å¤„ç†å™¨ä¸Šï¼Œä½†é€šç”¨çš„æ–¹æ³•æ˜¯ç›¸ä¼¼çš„ã€‚</p>
<p>æˆ‘ä»¬çš„å¤‡ç”¨ä»»åŠ¡æœºåˆ¶ä¸Charlotteç³»ç»Ÿä¸Šçš„eagerè°ƒåº¦æœºåˆ¶ç±»ä¼¼ã€‚ç®€å•çš„eagerè°ƒåº¦ç³»ç»Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœæŸä¸ªä»»åŠ¡å¯¼è‡´äº†å¤šæ¬¡å¤±è´¥ï¼Œæ•´ä¸ªè®¡ç®—éƒ½ä¼šå¤±è´¥ã€‚æˆ‘ä»¬é€šè¿‡è‡ªå·±çš„ç•¥è¿‡åè®°å½•çš„æœºåˆ¶è§£å†³äº†ä¸€äº›è¿™ç±»é—®é¢˜ã€‚</p>
<p>MapReduceçš„å®ç°ä¾èµ–äºä¸€ä¸ªå†…éƒ¨çš„é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£åœ¨ä¸€ç»„æ•°é‡å¾ˆå¤šçš„å…±äº«æœºå™¨ä¸Šåˆ†å¸ƒè¿è¡Œç”¨æˆ·ä»»åŠ¡ã€‚å°½ç®¡ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œè¿™ä¸ªé›†ç¾¤ç®¡ç†ç³»ç»Ÿä¸Condorç­‰å…¶å®ƒç³»ç»Ÿåœ¨åŸç†ä¸Šæ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>æ’åºæœºåˆ¶ä½œä¸ºMapReduceåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸NOW-Sortæ“ä½œæ˜¯ç±»ä¼¼çš„ã€‚æºæœºå™¨ï¼ˆmapèŠ‚ç‚¹ï¼‰åˆ‡åˆ†å¾…æ’åºçš„æ•°æ®å¹¶å°†å…¶å‘é€ç»™Rä¸ªreduceèŠ‚ç‚¹ã€‚æ¯ä¸ªreduceèŠ‚ç‚¹åœ¨æœ¬åœ°æ’åºå®ƒçš„æ•°æ®ï¼ˆå°½é‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼‰ã€‚å½“ç„¶NOW-Sortæ²¡æœ‰ç”¨æˆ·å®šä¹‰çš„mapå’Œreduceå‡½æ•°ï¼Œè¿™äº›ä½¿æˆ‘ä»¬çš„åº“è¢«å¹¿æ³›åº”ç”¨ã€‚</p>
<p>Riveræä¾›äº†ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹ï¼Œé€šè¿‡åœ¨åˆ†å¸ƒå¼é˜Ÿåˆ—ä¸Šå‘é€æ•°æ®æ¥å¤„ç†é€šä¿¡ã€‚ç±»ä¼¼äºMapReduceï¼ŒRiverç³»ç»Ÿè¯•å›¾æä¾›æä¾›å¥½çš„å¹³å‡æƒ…å†µæ€§èƒ½ï¼Œå³ä½¿å­˜åœ¨å› ä¸ç»Ÿä¸€çš„ç¡¬ä»¶æˆ–ç³»ç»Ÿæ‰°åŠ¨è€Œå¯¼è‡´çš„ä¸ä¸€è‡´æ€§ã€‚Riveré€šè¿‡å°å¿ƒçš„è°ƒåº¦ç£ç›˜å’Œç½‘ç»œä¼ è¾“æ¥å®ç°å¹³è¡¡çš„å®Œæˆæ—¶é—´ï¼Œä»è€Œè¾¾åˆ°è¿™ä¸€ç›®æ ‡ã€‚MapReduceä½¿ç”¨äº†ä¸åŒçš„æ–¹æ³•ã€‚é€šè¿‡çº¦æŸç¼–ç¨‹æ¨¡å‹ï¼ŒMapReduceæ¡†æ¶èƒ½å¤Ÿå°†é—®é¢˜åˆ’åˆ†æˆå¤§é‡ç»†ç²’åº¦çš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡è¢«åŠ¨æ€è°ƒåº¦ç»™å¯ç”¨çš„å·¥ä½œèŠ‚ç‚¹ï¼Œå› æ­¤æ›´å¿«çš„èŠ‚ç‚¹ä¼šå¤„ç†æ›´å¤šçš„ä»»åŠ¡ã€‚è¿™ä¸ªçº¦æŸçš„ç¼–ç¨‹æ¨¡å‹åŒæ ·å…è®¸æˆ‘ä»¬åœ¨ä¸´è¿‘ä½œä¸šç»“æŸæ—¶å°†å‰©ä½™çš„ä»»åŠ¡é‡å¤è°ƒåº¦æ‰§è¡Œï¼Œè¿™æ˜¾è‘—çš„å‡å°‘äº†å­˜åœ¨ä¸ä¸€è‡´æ—¶ï¼ˆä¾‹å¦‚æœ‰ç¼“å†²æˆ–åœé¡¿çš„æœºå™¨ï¼‰çš„å®Œæˆæ—¶é—´ã€‚</p>
<p>BAD-FSæœ‰ç€ä¸MapReduceéå¸¸ä¸åŒçš„ç¼–ç¨‹æ¨¡å‹ï¼Œè€Œä¸”ä¸åƒMapReduceï¼Œå®ƒé¢å‘è·¨è¶Šå¹¿åŸŸç½‘çš„ä½œä¸šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå®ƒä¸MapReduceæœ‰ç€ä¸¤ä¸ªæœ¬è´¨ä¸Šçš„ç›¸åŒç‚¹ï¼š</p>
<p>ä¸¤ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨äº†å¤‡ç”¨æ‰§è¡Œæ¥æ¢å¤å› é”™è¯¯è€Œå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ã€‚</p>
<p>ä¸¤ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨äº†å±€éƒ¨æ„ŸçŸ¥è°ƒåº¦æ¥å‡å°‘åœ¨æ‹¥å µçš„ç½‘ç»œè¿æ¥ä¸Šå‘é€çš„æ•°æ®é‡ã€‚</p>
<p>TACCè¢«è®¾è®¡ä¸ºä¸€ä¸ªé«˜åº¦å¯ç”¨çš„ç½‘ç»œæœåŠ¡çš„ç®€åŒ–ç»“æ„ç³»ç»Ÿã€‚ç±»ä¼¼äºMapReduceï¼Œå®ƒä¾èµ–äºé‡æ‰§è¡Œæœºåˆ¶æ¥å®ç°å®¹é”™æ€§ã€‚</p>
<h3 id="8-ç»“è®º"><a class="header-anchor" href="#8-ç»“è®º">Â¶</a>8 ç»“è®º</h3>
<p>MapReduceç¼–ç¨‹æ¨¡å‹å·²ç»æˆåŠŸçš„ç”¨äºGoogleçš„è®¸å¤šä¸åŒçš„ç”¨é€”ä¸­ã€‚æˆ‘ä»¬å°†å®ƒçš„æˆåŠŸå½’åŠŸäºå‡ ä¸ªåŸå› ã€‚é¦–å…ˆï¼Œè¯¥æ¨¡å‹å³ä½¿æ˜¯å¯¹äºæ²¡æœ‰å¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿæ˜¯å¾ˆæ˜“äºä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒéšè—äº†å¹¶è¡ŒåŒ–ã€å®¹é”™æœºåˆ¶ã€å±€éƒ¨æ€§ä¼˜åŒ–ã€ä»¥åŠè´Ÿè½½å¹³è¡¡çš„ç»†èŠ‚ã€‚å…¶æ¬¡ï¼Œå¾ˆå¤šç§ç±»çš„é—®é¢˜éƒ½å¾ˆå®¹æ˜“è¡¨ç¤ºæˆMapReduceè®¡ç®—ã€‚ä¾‹å¦‚ï¼ŒMapReduceè¢«ç”¨äºä¸ºGoogleçš„ç½‘ç»œæœç´¢æœåŠ¡çš„æ•°æ®äº§ç”Ÿã€æ’åºã€æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ã€ä»¥åŠè®¸å¤šå…¶å®ƒç³»ç»Ÿã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬å·²ç»å¼€å‘äº†ä¸€ä¸ªMapReduceçš„å®ç°ï¼Œå¯ä»¥æ‰©å±•åˆ°åŒ…å«ä¸Šåƒå°æœºå™¨çš„å¤§å‹é›†ç¾¤ã€‚è¯¥å®ç°å¯ä»¥é«˜æ•ˆä½¿ç”¨è¿™äº›æœºå™¨çš„èµ„æºï¼Œå› æ­¤é€‚åˆäºGoogleé‡åˆ°çš„å¾ˆå¤šå¤§å‹è®¡ç®—é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬ä»è¿™é¡¹å·¥ä½œä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆï¼Œçº¦æŸè¿™ä¸ªç¼–ç¨‹æ¨¡å‹ä»¤å¹¶è¡Œå’Œåˆ†å¸ƒå¼è®¡ç®—ï¼Œä»¥åŠä»¤è¿™äº›è®¡ç®—å¯å®¹é”™ï¼Œå˜å¾—ç®€å•äº†ã€‚å…¶æ¬¡ï¼Œç½‘ç»œå¸¦å®½æ˜¯ä¸€ç§ç¨€ç¼ºèµ„æºã€‚æˆ‘ä»¬ç³»ç»Ÿä¸­çš„å¾ˆå¤šä¼˜åŒ–éƒ½å› æ­¤é’ˆå¯¹å‡å°‘é€šè¿‡ç½‘ç»œå‘é€çš„æ•°æ®æ€»é‡ï¼šå±€éƒ¨æ€§ä¼˜åŒ–å…è®¸æˆ‘ä»¬ä»æœ¬åœ°ç£ç›˜è¯»ï¼ŒåŒæ—¶å°†ä¸­é—´æ–‡ä»¶å†™å…¥æœ¬åœ°ç£ç›˜ä¹ŸèŠ‚çœäº†ç½‘ç»œå¸¦å®½ã€‚ç¬¬ä¸‰ï¼Œå¤‡ç”¨æ‰§è¡Œå¯ä»¥ç”¨äºå‡å°ç¼“æ…¢çš„æœºå™¨çš„å½±å“ï¼ŒåŠåº”å¯¹æœºå™¨å¤±è´¥å’Œæ•°æ®ä¸¢å¤±ã€‚</p>
<h3 id="é™„å½•A-è¯é¢‘ç»Ÿè®¡æºä»£ç "><a class="header-anchor" href="#é™„å½•A-è¯é¢‘ç»Ÿè®¡æºä»£ç ">Â¶</a>é™„å½•A è¯é¢‘ç»Ÿè®¡æºä»£ç </h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mapreduce/mapreduce.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// User's map fuction</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordCounter</span>:</span> <span class="keyword">public</span> Mapper &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Map</span><span class="params">(<span class="keyword">const</span> MapInput &amp;input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> &amp;<span class="built_in">text</span> = input.value();</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = <span class="built_in">text</span>.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ) &#123;</span><br><span class="line">            <span class="comment">// Skip past leading whitespace</span></span><br><span class="line">            <span class="keyword">while</span> ((i &lt; n) &amp;&amp; <span class="built_in">isspace</span>(<span class="built_in">text</span>[i]))</span><br><span class="line">                ++i;</span><br><span class="line">             </span><br><span class="line">            <span class="comment">// Find word end</span></span><br><span class="line">            <span class="keyword">int</span> start = i;</span><br><span class="line">            <span class="keyword">while</span> ((i &lt; n) &amp;&amp; !<span class="built_in">isspace</span>(<span class="built_in">text</span>[i]))</span><br><span class="line">                ++i;</span><br><span class="line">                 </span><br><span class="line">            <span class="keyword">if</span> (start &lt; i)</span><br><span class="line">                Emit(<span class="built_in">text</span>.substr(start, i-start), <span class="string">"1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">REGISTER_MAPPER(WordCounter);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// User's reduce function</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adder</span>:</span> <span class="keyword">public</span> Reducer &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Reduce</span><span class="params">(ReduceInput *input)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Iterate over all entries with the</span></span><br><span class="line">        <span class="comment">// same key and add the values</span></span><br><span class="line">        <span class="keyword">int64_t</span> value = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!input-&gt;done()) &#123;</span><br><span class="line">            value += StringToInt(input-&gt;value());</span><br><span class="line">            input-&gt;NextValue();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// Emit sum for input-&gt;key()</span></span><br><span class="line">        Emit(IntToString(value));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">REGISTER_REDUCER(Adder);</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    ParseCommandLineFlags(argc, argv);</span><br><span class="line">     </span><br><span class="line">    MapReduceSpecification spec;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Store list of input files into "spec"</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; argc; ++i) &#123;</span><br><span class="line">        MapReduceInput *input = spec.add_input();</span><br><span class="line">        input-&gt;set_format(<span class="string">"text"</span>);</span><br><span class="line">        input-&gt;set_filepattern(argv[i]);</span><br><span class="line">        input-&gt;set_mapper_class(<span class="string">"WordCounter"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Specify the output files:</span></span><br><span class="line">    <span class="comment">//    /gfs/test/freq-00000-of-00100</span></span><br><span class="line">    <span class="comment">//    /gfs/test/freq-00001-of-00100</span></span><br><span class="line">    <span class="comment">//    ...</span></span><br><span class="line">    MapReduceOutput *out = spec.output();</span><br><span class="line">    out-&gt;set_filebase(<span class="string">"/gfs/test/freq"</span>);</span><br><span class="line">    out-&gt;set_num_tasks(<span class="number">100</span>);</span><br><span class="line">    out-&gt;set_format(<span class="string">"text"</span>);</span><br><span class="line">    out-&gt;set_reducer_class(<span class="string">"Adder"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Optional: do partial sums within map</span></span><br><span class="line">    <span class="comment">// tasks to save network bandwidth</span></span><br><span class="line">    out-&gt;set_combine_class(<span class="string">"Adder"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Tuning parameters: use at most 2000</span></span><br><span class="line">    <span class="comment">// machines and 100MB of memory per task</span></span><br><span class="line">    spec.set_machines(<span class="number">2000</span>);</span><br><span class="line">    spec.set_map_megabytes(<span class="number">100</span>);</span><br><span class="line">    spec.set_reduce_megabytes(<span class="number">100</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Now run it</span></span><br><span class="line">    MapReduceResult result;</span><br><span class="line">    <span class="keyword">if</span> (!MapReduce(spec, &amp;result))</span><br><span class="line">        <span class="built_in">abort</span>();</span><br><span class="line">         </span><br><span class="line">    <span class="comment">// Done: 'result' structure contains info</span></span><br><span class="line">    <span class="comment">// about counters, time taken, number of</span></span><br><span class="line">    <span class="comment">// machines used, etc.</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaåå°„</title>
    <url>/2020/03/04/Java%E5%8F%8D%E5%B0%84/</url>
    <content><![CDATA[<p>åå°„reflectionæ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡ŒæœŸå¯ä»¥æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">String <span class="title">getFullName</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    Person p = (Person) obj;</span><br><span class="line">    <span class="keyword">return</span> p.getFirstName() + <span class="string">" "</span> + p.getLastName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼ºåˆ¶è½¬å‹ä»ç„¶éœ€è¦å¼•ç”¨personç±»ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</p>
<h1>Classç±»</h1>
<p>class(åŒ…æ‹¬interface)çš„æœ¬è´¨æ˜¯typeï¼Œæ˜¯ç”±JVMåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åŠ è½½çš„ã€‚ç¬¬ä¸€æ¬¡è¯»å–åˆ°classç±»ï¼Œåˆ™åŠ è½½è¿›å†…å­˜ã€‚æ¯åŠ è½½ä¸€ç§classï¼ŒJVMåˆ™ä¸ºå…¶åˆ›å»ºä¸€ä¸ªClassç±»å‹çš„å®ä¾‹å¹¶å…³è”èµ·æ¥ã€‚egï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//classç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Class</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Class</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//æ„é€ æ–¹æ³•æ˜¯privateï¼Œåªæœ‰JVMèƒ½åˆ›å»º</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½Stringç±»æ—¶å…³è”</span></span><br><span class="line">Class cls = <span class="keyword">new</span> Class(String)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªClasså®ä¾‹åŒ…å«äº†è¯¥classçš„æ‰€æœ‰å®Œæ•´ä¿¡æ¯ï¼šname, packageâ€¦<br>
æ‰€ä»¥è·å–äº†æŸä¸ªClasså®ä¾‹ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå®ä¾‹è·å–åˆ°è¯¥å®ä¾‹å¯¹åº”çš„classçš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºåå°„(Reflection)ã€‚<br>
æ–¹æ³•ç”±ä¸‰ä¸ªï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•ä¸€ï¼šé€šè¿‡classçš„é™æ€å˜é‡è·å–</span></span><br><span class="line">Class cls = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"><span class="comment">//æ–¹æ³•äºŒï¼šé€šè¿‡å®ä¾‹å˜é‡çš„getClass()</span></span><br><span class="line">String s = <span class="string">"Hello"</span>;</span><br><span class="line">Class cls = s.getClass();</span><br><span class="line"><span class="comment">//æ–¹æ³•ä¸‰ï¼šçŸ¥é“classçš„å®Œæ•´ç±»åï¼Œé€šè¿‡é™æ€æ–¹æ³•Class.forName()</span></span><br><span class="line">Class cls = Class.forName(<span class="string">"java.lang.String"</span>);</span><br></pre></td></tr></table></figure>
<h5 id="åˆ¤æ–­ç±»å‹"><a class="header-anchor" href="#åˆ¤æ–­ç±»å‹">Â¶</a>åˆ¤æ–­ç±»å‹</h5>
<p>instanceofå¯ä»¥åŒ¹é…æŒ‡å®šç±»å‹çš„å­ç±»ï¼Œ==æ˜¯ç²¾ç¡®åˆ¤æ–­æ˜¯ä¸æ˜¯æŸä¸€ä¸ªç±»ã€‚<br>
JVMä¸ºåŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿåˆ›å»ºäº†Classï¼Œint.classæ¥è®¿é—®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer n = <span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b1 = n <span class="keyword">instanceof</span> Integer; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Integerç±»å‹</span></span><br><span class="line"><span class="keyword">boolean</span> b2 = n <span class="keyword">instanceof</span> Number; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Numberç±»å‹çš„å­ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b3 = n.getClass() == Integer<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// trueï¼Œå› ä¸ºn.getClass()è¿”å›Integer.class</span></span><br><span class="line"><span class="keyword">boolean</span> b4 = n.getClass() == Number<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// falseï¼Œå› ä¸ºInteger.class!=Number.class</span></span><br></pre></td></tr></table></figure>
<h5 id="æ‰“å°ä¿¡æ¯"><a class="header-anchor" href="#æ‰“å°ä¿¡æ¯">Â¶</a>æ‰“å°ä¿¡æ¯</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">"Class name: "</span> + cls.getName());</span><br><span class="line">System.out.println(<span class="string">"Simple name: "</span> + cls.getSimpleName());</span><br><span class="line"><span class="keyword">if</span> (cls.getPackage() != <span class="keyword">null</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">"Package name: "</span> + cls.getPackage().getName());</span><br><span class="line">    &#125;</span><br><span class="line">System.out.println(<span class="string">"is interface: "</span> + cls.isInterface());</span><br><span class="line">System.out.println(<span class="string">"is enum: "</span> + cls.isEnum());</span><br><span class="line">System.out.println(<span class="string">"is array: "</span> + cls.isArray());</span><br><span class="line">System.out.println(<span class="string">"is primitive: "</span> + cls.isPrimitive());</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€åŠ è½½"><a class="header-anchor" href="#åŠ¨æ€åŠ è½½">Â¶</a>åŠ¨æ€åŠ è½½</h2>
<p>newåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ç§°ä½œä¸ºé™æ€åŠ è½½ï¼Œè€Œä½¿ç”¨Class.forName(â€œXXXâ€)ç§°ä½œä¸ºåŠ¨æ€åŠ è½½ï¼Œå®ƒä»¬ä¿©æœ¬è´¨çš„åŒºåˆ«åœ¨äºé™æ€åŠ è½½çš„ç±»çš„æºç¨‹åºåœ¨ç¼–è¯‘æ—¶æœŸåŠ è½½ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰ï¼Œè€ŒåŠ¨æ€åŠ è½½çš„ç±»åœ¨ç¼–è¯‘æ—¶æœŸå¯ä»¥ç¼ºå¸­ï¼ˆæºç¨‹åºä¸å¿…å­˜åœ¨ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Commons Loggingä¼˜å…ˆä½¿ç”¨Log4j:</span></span><br><span class="line">LogFactory factory = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (isClassPresent(<span class="string">"org.apache.logging.log4j.Logger"</span>)) &#123;</span><br><span class="line">    factory = createLog4j();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory = createJdkLog();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isClassPresent</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Class.forName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Main.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            create(args[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æ‰§è¡ŒMain.javaæ—¶ï¼Œç”±äºç”¨åˆ°äº†Mainï¼Œå› æ­¤ï¼ŒJVMé¦–å…ˆä¼šæŠŠMain.classåŠ è½½åˆ°å†…å­˜ã€‚ç„¶è€Œï¼Œå¹¶ä¸ä¼šåŠ è½½Person.classï¼Œé™¤éç¨‹åºæ‰§è¡Œåˆ°create()æ–¹æ³•ï¼ŒJVMå‘ç°éœ€è¦åŠ è½½Personç±»æ—¶ï¼Œæ‰ä¼šé¦–æ¬¡åŠ è½½Person.classã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œcreate()æ–¹æ³•ï¼Œé‚£ä¹ˆPerson.classæ ¹æœ¬å°±ä¸ä¼šè¢«åŠ è½½ã€‚<br>
åˆ©ç”¨JVMåŠ¨æ€åŠ è½½classçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨è¿è¡ŒæœŸæ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„å®ç°ç±»ã€‚</p>
<h1>è®¿é—®å­—æ®µ</h1>
<pre><code>è·å–å­—æ®µçš„field
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¸€å®šè¦throws Exception</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class stdClass = Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        <span class="comment">// è·å–publicå­—æ®µ"score": getfields()åˆ™æ˜¯è·å–æ‰€æœ‰å­—æ®µçš„field</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">"score"</span>));</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicå­—æ®µ"name":</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">"name"</span>));</span><br><span class="line">        <span class="comment">// è·å–privateå­—æ®µ"grade":</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredField(<span class="string">"grade"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªFieldå¯¹è±¡åŒ…å«äº†ä¸€ä¸ªå­—æ®µçš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<p>getName()ï¼šè¿”å›å­—æ®µåç§°ï¼Œä¾‹å¦‚ï¼Œâ€œnameâ€ï¼›<br>
getType()ï¼šè¿”å›å­—æ®µç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªClasså®ä¾‹ï¼Œä¾‹å¦‚ï¼ŒString.classï¼›<br>
getModifiers()ï¼šè¿”å›å­—æ®µçš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªintï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–å­—æ®µä¿¡æ¯</span></span><br><span class="line">Field f = String.class.getDeclaredField("value");</span><br><span class="line">f.getName(); <span class="comment">// "value"</span></span><br><span class="line">f.getType(); <span class="comment">// class [B è¡¨ç¤ºbyte[]ç±»å‹</span></span><br><span class="line"><span class="keyword">int</span> m = f.getModifiers();</span><br><span class="line">Modifier.isFinal(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isPublic(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isProtected(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isPrivate(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isStatic(m); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å¾—å­—æ®µçš„å€¼"><a class="header-anchor" href="#è·å¾—å­—æ®µçš„å€¼">Â¶</a>è·å¾—å­—æ®µçš„å€¼</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>); <span class="comment">//å°†privateæ”¹æˆpublic</span></span><br><span class="line">        Object value = f.get(p);</span><br><span class="line">        System.out.println(value); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å…ˆè·å–Classå®ä¾‹ï¼Œå†è·å–Fieldå®ä¾‹ï¼Œç„¶åï¼Œç”¨Field.get(Object)è·å–æŒ‡å®šå®ä¾‹çš„æŒ‡å®šå­—æ®µçš„å€¼ã€‚nameè¢«å®šä¹‰ä¸ºä¸€ä¸ªprivateå­—æ®µï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒMainç±»æ— æ³•è®¿é—®Personç±»çš„privateå­—æ®µã€‚è¦ä¿®å¤é”™è¯¯ï¼Œå¯ä»¥å°†privateæ”¹ä¸ºpublicï¼Œæˆ–è€…ï¼Œåœ¨è°ƒç”¨Object value = f.getÂ§;å‰ï¼šè°ƒç”¨Field.setAccessible(true)ã€‚</p>
<h3 id="è®¾ç½®å­—æ®µçš„å€¼"><a class="header-anchor" href="#è®¾ç½®å­—æ®µçš„å€¼">Â¶</a>è®¾ç½®å­—æ®µçš„å€¼</h3>
<p>é€šè¿‡Field.set(Object, Object)å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®å­—æ®µå€¼</span></span><br><span class="line">        f.set(p, <span class="string">"Xiao Hong"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Hong"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è°ƒç”¨æ–¹æ³•</h1>
<h3 id="è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰"><a class="header-anchor" href="#è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰">Â¶</a>è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class stdClass = Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        <span class="comment">// è·å–publicæ–¹æ³•getScoreï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getScore"</span>, String<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicæ–¹æ³•getNameï¼Œæ— å‚æ•°:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getName"</span>));</span><br><span class="line">        <span class="comment">// è·å–privateæ–¹æ³•getGradeï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredMethod(<span class="string">"getGrade"</span>, <span class="keyword">int</span><span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getGrade</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªMethodå¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<pre><code>getName()ï¼šè¿”å›æ–¹æ³•åç§°ï¼Œä¾‹å¦‚ï¼š&quot;getScore&quot;ï¼›
getReturnType()ï¼šè¿”å›æ–¹æ³•è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªClasså®ä¾‹ï¼Œä¾‹å¦‚ï¼šString.classï¼›
getParameterTypes()ï¼šè¿”å›æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªClassæ•°ç»„ï¼Œä¾‹å¦‚ï¼š{String.class, int.class}ï¼›
getModifiers()ï¼šè¿”å›æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªintï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰
</code></pre>
<h3 id="è°ƒç”¨æ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨æ–¹æ³•">Â¶</a>è°ƒç”¨æ–¹æ³•</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// Stringå¯¹è±¡:</span></span><br><span class="line">        String s = <span class="string">"Hello world"</span>;</span><br><span class="line">        <span class="comment">// è·å–String substring(int)æ–¹æ³•ï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        Method m = String.class.getMethod("substring", int.class);</span><br><span class="line">        <span class="comment">// åœ¨så¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        String r = (String) m.invoke(s, <span class="number">6</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹Methodå®ä¾‹è°ƒç”¨invokeå°±ç›¸å½“äºè°ƒç”¨è¯¥æ–¹æ³•ï¼Œinvokeçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®ä¾‹ï¼Œå³åœ¨å“ªä¸ªå®ä¾‹ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåé¢çš„å¯å˜å‚æ•°è¦ä¸æ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œå¦åˆ™å°†æŠ¥é”™ã€‚</p>
<h3 id="è°ƒç”¨é™æ€æ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨é™æ€æ–¹æ³•">Â¶</a>è°ƒç”¨é™æ€æ–¹æ³•</h3>
<p>å¦‚æœè·å–åˆ°çš„Methodè¡¨ç¤ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œç”±äºæ— éœ€æŒ‡å®šå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥invokeæ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œä¸ºnullã€‚æˆ‘ä»¬ä»¥Integer.parseInt(String)ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–Integer.parseInt(String)æ–¹æ³•ï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        Method m = Integer.class.getMethod("parseInt", String.class);</span><br><span class="line">        <span class="comment">// è°ƒç”¨è¯¥é™æ€æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        Integer n = (Integer) m.invoke(<span class="keyword">null</span>, <span class="string">"12345"</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨épublicæ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨épublicæ–¹æ³•">Â¶</a>è°ƒç”¨épublicæ–¹æ³•</h3>
<p>ä¸ºäº†è°ƒç”¨épublicæ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡Method.setAccessible(true)å…è®¸å…¶è°ƒç”¨ã€‚</p>
<h3 id="å¤šæ€"><a class="header-anchor" href="#å¤šæ€">Â¶</a>å¤šæ€</h3>
<p>ä½¿ç”¨åå°„è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä»ç„¶éµå¾ªå¤šæ€åŸåˆ™ï¼šå³æ€»æ˜¯è°ƒç”¨å®é™…ç±»å‹çš„è¦†å†™æ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–Personçš„helloæ–¹æ³•:</span></span><br><span class="line">        Method h = Person.class.getMethod("hello");</span><br><span class="line">        <span class="comment">// å¯¹Studentå®ä¾‹è°ƒç”¨helloæ–¹æ³•:</span></span><br><span class="line">        h.invoke(<span class="keyword">new</span> Student());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Person:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Student:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è°ƒç”¨æ„é€ æ–¹æ³•</h1>
<p>ä½¿ç”¨relect.Constructor:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(int):</span></span><br><span class="line">        Constructor cons1 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ„é€ æ–¹æ³•:</span></span><br><span class="line">        Integer n1 = (Integer) cons1.newInstance(<span class="number">123</span>);</span><br><span class="line">        System.out.println(n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(String)</span></span><br><span class="line">        Constructor cons2 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        Integer n2 = (Integer) cons2.newInstance(<span class="string">"456"</span>);</span><br><span class="line">        System.out.println(n2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Javaçš„åå°„APIæä¾›äº†Constructorå¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚<br>
é€šè¿‡Classå®ä¾‹è·å–Constructorçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>getConstructor(Class...)ï¼šè·å–æŸä¸ªpublicçš„Constructorï¼›
getDeclaredConstructor(Class...)ï¼šè·å–æŸä¸ªConstructorï¼›
getConstructors()ï¼šè·å–æ‰€æœ‰publicçš„Constructorï¼›
getDeclaredConstructors()ï¼šè·å–æ‰€æœ‰Constructorã€‚
æ³¨æ„Constructoræ€»æ˜¯å½“å‰ç±»å®šä¹‰çš„æ„é€ æ–¹æ³•ï¼Œå’Œçˆ¶ç±»æ— å…³ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šæ€çš„é—®é¢˜ã€‚
</code></pre>
<p>è°ƒç”¨épublicçš„Constructoræ—¶ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡setAccessible(true)è®¾ç½®å…è®¸è®¿é—®ã€‚setAccessible(true)å¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<h1>è·å–ç»§æ‰¿å…³ç³»</h1>
<h3 id="è·å–çˆ¶ç±»çš„class"><a class="header-anchor" href="#è·å–çˆ¶ç±»çš„class">Â¶</a>è·å–çˆ¶ç±»çš„class</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class i = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class n = i.getSuperclass();</span><br><span class="line">        System.out.println(n);</span><br><span class="line">        Class o = n.getSuperclass();</span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(o.getSuperclass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIntegerçš„çˆ¶ç±»ç±»å‹æ˜¯Numberï¼ŒNumberçš„çˆ¶ç±»æ˜¯Objectï¼ŒObjectçš„çˆ¶ç±»æ˜¯nullã€‚é™¤Objectå¤–ï¼Œå…¶ä»–ä»»ä½•éinterfaceçš„Classéƒ½å¿…å®šå­˜åœ¨ä¸€ä¸ªçˆ¶ç±»ç±»å‹ã€‚</p>
<h3 id="è·å–interface"><a class="header-anchor" href="#è·å–interface">Â¶</a>è·å–interface</h3>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼šgetInterfaces()åªè¿”å›å½“å‰ç±»ç›´æ¥å®ç°çš„æ¥å£ç±»å‹ï¼Œå¹¶ä¸åŒ…æ‹¬å…¶çˆ¶ç±»å®ç°çš„æ¥å£ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class s = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class[] is = s.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class i : is) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œå¯¹æ‰€æœ‰interfaceçš„Classè°ƒç”¨getSuperclass()è¿”å›çš„æ˜¯nullï¼Œè·å–æ¥å£çš„çˆ¶æ¥å£è¦ç”¨getInterfaces()ã€‚å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•interfaceï¼Œé‚£ä¹ˆgetInterfaces()è¿”å›ç©ºæ•°ç»„ã€‚</p>
<h3 id="ç»§æ‰¿å…³ç³»"><a class="header-anchor" href="#ç»§æ‰¿å…³ç³»">Â¶</a>ç»§æ‰¿å…³ç³»</h3>
<p>å¦‚æœæ˜¯ä¸¤ä¸ªClasså®ä¾‹ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬å‹æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥è°ƒç”¨isAssignableFrom()ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Integer</span></span><br><span class="line"><span class="comment">// Number n = ?</span></span><br><span class="line">Number<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Number</span></span><br><span class="line"><span class="comment">// Object o = ?</span></span><br><span class="line">Object<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Object</span></span><br><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Number</span>.<span class="title">class</span>)</span>; <span class="comment">// falseï¼Œå› ä¸ºNumberä¸èƒ½èµ‹å€¼ç»™Integer</span></span><br></pre></td></tr></table></figure>
<h1>åŠ¨æ€ä»£ç†Dynamic Proxy</h1>
<p>Javaæ ‡å‡†åº“æä¾›äº†ä¸€ç§åŠ¨æ€ä»£ç†ï¼ˆDynamic Proxyï¼‰çš„æœºåˆ¶ï¼šå¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºæŸä¸ªinterfaceçš„å®ä¾‹ã€‚<br>
å…ˆå®šä¹‰äº†æ¥å£Helloï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å»ç¼–å†™å®ç°ç±»ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡JDKæä¾›çš„ä¸€ä¸ªProxy.newProxyInstance()åˆ›å»ºäº†ä¸€ä¸ªHelloæ¥å£å¯¹è±¡ã€‚è¿™ç§æ²¡æœ‰å®ç°ç±»ä½†æ˜¯åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºäº†ä¸€ä¸ªæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¸ºåŠ¨æ€ä»£ç†ã€‚JDKæä¾›çš„åŠ¨æ€åˆ›å»ºæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œå°±å«åŠ¨æ€ä»£ç†ã€‚<br>
åŠ¨æ€ä»£ç†å®é™…ä¸Šæ˜¯JDKåœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºclasså­—èŠ‚ç å¹¶åŠ è½½çš„è¿‡ç¨‹.</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­æ‰¾åˆ°é‡å¤çš„æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/04/%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨0åˆ°n-1çš„èŒƒå›´å†…ã€‚ æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—æ˜¯é‡å¤çš„ã€‚ä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥é•¿åº¦ä¸º7çš„æ•°ç»„{2,3,1,0,2,5,3}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯ç¬¬ä¸€ä¸ªé‡å¤çš„æ•°å­—2ã€‚
</code></pre>
<a id="more"></a>
<ul>
<li>é¢˜ç›®è¯´æ˜äº†æ•°å­—çš„å¤§å°èŒƒå›´å’Œæ•°ç»„çš„é•¿åº¦ï¼Œå³æ¯ä¸ªæ•°å­—å€¼çš„å¤§å°ä¸€å®šåœ¨æ•°ç»„çš„ä¸‹æ ‡èŒƒå›´å†…ã€‚</li>
</ul>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<h3 id="ä¸æ”¹å˜åŸæ•°ç»„ï¼š"><a class="header-anchor" href="#ä¸æ”¹å˜åŸæ•°ç»„ï¼š">Â¶</a>ä¸æ”¹å˜åŸæ•°ç»„ï¼š</h3>
<ol>
<li>
<p>æ’åºåæ‰«ææ•°ç»„: æ—¶é—´å¤æ‚åº¦O(nlogn)ã€‚</p>
</li>
<li>
<p>hashè¡¨ï¼šæ—¶é—´å¤æ‚åº¦O(n),ç©ºé—´å¤æ‚åº¦O(n)ã€‚<br>
ç±»ä¼¼å“ˆå¸Œè¡¨ï¼š</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[], <span class="keyword">int</span> length, <span class="keyword">int</span>[] duplication)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[] k = <span class="keyword">new</span> <span class="keyword">boolean</span>[length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k[numbers[i]] == <span class="keyword">true</span>) &#123;</span><br><span class="line">            duplication[<span class="number">0</span>] = numbers[i];</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k[numbers[i]] = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(1) booleanä¸æ˜¯å 1ä½ï¼Œè®¡ç®—æœºå¤„ç†å¤„ç†æ•°æ®çš„æœ€å°å•å…ƒæ˜¯1å­—èŠ‚ï¼Œä¸€èˆ¬1ä½çš„è¯ï¼Œå…¶ä½™7ä½ä¼šè¢«0è¡¥é½ã€‚<br>
(2) åœ¨javaè™šæ‹Ÿæœºè§„èŒƒä¸­ï¼ŒJVMæ²¡æœ‰ç”¨äºæ“ä½œbooleançš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåœ¨ç¼–è¯‘åç”¨intçš„æ•°æ®ç±»å‹ä»£æ›¿booleanï¼Œæ­¤æ—¶booleanå 4å­—èŠ‚ã€‚<br>
(3) boolean[]æ•°ç»„ç¼–è¯‘åä¼šè¢«byte[]æ•°ç»„ä»£æ›¿ï¼Œæ­¤æ—¶çš„booleanå 1å­—èŠ‚ã€‚<br>
æ€»ç»“:booleanå•ç‹¬å­˜åœ¨å 4å­—èŠ‚ï¼Œåœ¨boolean[]ä¸­å 1å­—èŠ‚!</p>
<ol start="3">
<li>é¢å¤–æ•°ç»„ï¼šæ—¶é—´å¤æ‚åº¦O(n),ç©ºé—´å¤æ‚åº¦O(n)<br>
åˆ›å»ºä¸€ä¸ªn+1é•¿åº¦çš„æ•°ç»„ï¼Œæ‰«æåŸæ•°ç»„ï¼Œæ•°å­—ä¸ºmçš„å…ƒç´ æ”¾å…¥ä¸‹æ ‡må¤„å³å¯å‘ç°æ˜¯å¦ä¸ºé‡å¤æ•°å­—ã€‚</li>
</ol>
<h3 id="æ”¹å˜åŸæ•°ç»„ï¼š"><a class="header-anchor" href="#æ”¹å˜åŸæ•°ç»„ï¼š">Â¶</a>æ”¹å˜åŸæ•°ç»„ï¼š</h3>
<p><b>æ–¹æ³•ä¸€ï¼š</b>å¯ä»¥åˆ©ç”¨ç°æœ‰æ•°ç»„è®¾ç½®æ ‡å¿—ï¼Œå½“ä¸€ä¸ªæ•°å­—Numbers[i]è®¿é—®è¿‡ï¼Œåˆ™è®©å¯¹åº”ä½ç½®çš„Numbers[Numbers[i]]åŠ lengthï¼Œå†é‡åˆ°ç›¸åŒçš„æ•°æ—¶ï¼Œå¤§äºlengthï¼Œåˆ™ä¸ºé‡å¤çš„æ•°ã€‚</p>
<h4 id="code"><a class="header-anchor" href="#code">Â¶</a>code</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Parameters:</span></span><br><span class="line">    <span class="comment">//    numbers:     an array of integers</span></span><br><span class="line">    <span class="comment">//    length:      the length of array numbers</span></span><br><span class="line">    <span class="comment">//    duplication: (Output) the duplicated number in the array number,length of duplication array is 1,so using duplication[0] = ? in implementation;</span></span><br><span class="line">    <span class="comment">//                  Here duplication like pointor in C/C++, duplication[0] equal *duplication in C/C++</span></span><br><span class="line">    <span class="comment">//    è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„~è¿”å›ä»»æ„é‡å¤çš„ä¸€ä¸ªï¼Œèµ‹å€¼duplication[0]</span></span><br><span class="line">    <span class="comment">// Return value:       true if the input is valid, and there are some duplications in the array number</span></span><br><span class="line">    <span class="comment">//                     otherwise false</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[],<span class="keyword">int</span> length,<span class="keyword">int</span> [] duplication)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥è¾“å…¥</span></span><br><span class="line">        <span class="keyword">if</span>(numbers == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:numbers)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= length| i&lt;<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ­£å¼æ£€æµ‹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            <span class="comment">//å–ä½™å¤„ç†è®¿é—®è¾¹ç•Œ</span></span><br><span class="line">            <span class="keyword">int</span> index=numbers[i]%length;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(numbers[index]&gt;=length)&#123;</span><br><span class="line">                duplication[<span class="number">0</span>] = index;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            numbers[index] = numbers[index] + length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><b>æ–¹æ³•äºŒï¼š</b>å¯¹æ•°ç»„é‡æ’ï¼Œè®¿é—®æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œå¦‚æœi=numbers[i]ï¼Œåˆ™è®¿é—®ä¸‹ä¸€ä¸ªï¼›å¦‚æœä¸æ˜¯ï¼Œæ‹¿å®ƒå’Œnumbers[numbers[i]]æ¯”è¾ƒã€‚ç›¸ç­‰,åˆ™æ‰¾åˆ°é‡å¤æ•°å­—ï¼Œä¸ç­‰ï¼Œåˆ™äº¤æ¢ã€‚</p>
<h5 id="æµ‹è¯•ç”¨ä¾‹ï¼š"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹ï¼š">Â¶</a>æµ‹è¯•ç”¨ä¾‹ï¼š</h5>
<ol>
<li>ä¸åŒ…å«é‡å¤çš„æ•°ç»„</li>
<li>ç©ºæ•°ç»„</li>
<li>é•¿åº¦ä¸ºnçš„æ•°ç»„é‡ŒåŒ…å«1ä¸ªæˆ–å¤šä¸ªé‡å¤æ•°å­—ã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaLog</title>
    <url>/2020/03/03/JavaLog/</url>
    <content><![CDATA[<h5 id="Javaå†…ç½®loggingåŒ…"><a class="header-anchor" href="#Javaå†…ç½®loggingåŒ…">Â¶</a>Javaå†…ç½®loggingåŒ…</h5>
<p>æ—¥å¿—ä¼šè‡ªåŠ¨æ‰“å°äº†æ—¶é—´ã€è°ƒç”¨ç±»ã€è°ƒç”¨æ–¹æ³•ç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// logging</span></span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = Logger.getGlobal();</span><br><span class="line">        logger.info(<span class="string">"start process..."</span>);</span><br><span class="line">        logger.warning(<span class="string">"memory is running out..."</span>);</span><br><span class="line">        logger.fine(<span class="string">"ignored."</span>);</span><br><span class="line">        logger.severe(<span class="string">"process will be terminated..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»ä¸¥é‡åˆ°æ™®é€šï¼š<br>
SEVEREï¼ŒWARNINGï¼ŒINFOï¼ŒCONFIGï¼ŒFINEï¼ŒFINERï¼ŒFINEST<br>
å› ä¸ºé»˜è®¤çº§åˆ«æ˜¯INFOï¼Œå› æ­¤ï¼ŒINFOçº§åˆ«ä»¥ä¸‹çš„æ—¥å¿—ï¼Œä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚<br>
å…¶å±€é™åœ¨äºLoggingç³»ç»Ÿåœ¨JVMå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶å¹¶å®Œæˆåˆå§‹åŒ–ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œmain()æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®ï¼›<br>
é…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•° -Djava.util.logging.config.file=<config-file-name>ã€‚</config-file-name></p>
<ul>
<li>æ€»ç»“ï¼šä¸å¥½ç”¨ï¼</li>
</ul>
<h1>Commons logging</h1>
<p>ä¸€ä¸ªApacheå¼€å‘çš„æ—¥å¿—æ¥å£ï¼Œè‡ªåŠ¨æœç´ Log4jï¼Œæ²¡æ‰¾åˆ°åˆ™ä½¿ç”¨JDKLoggingã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Log log = LogFactory.getLog(Main<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        log.info(<span class="string">"start..."</span>);</span><br><span class="line">        log.warn(<span class="string">"end."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ–¹åº“æ¥çš„ï¼Œéœ€è¦ç¼–è¯‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ”¾å…¥work path</span></span><br><span class="line"><span class="comment">#javacç¼–è¯‘</span></span><br><span class="line">javac -cp commons-logging-1.2.jar Main.java</span><br><span class="line"><span class="comment">#æ‰§è¡Œè¿™ä¸ªMain.classï¼Œä½¿ç”¨javaå‘½ä»¤ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šclasspath</span></span><br><span class="line">java -cp .:commons-logging-1.2.jar Main</span><br></pre></td></tr></table></figure>
<p>Commons Loggingå®šä¹‰äº†6ä¸ªæ—¥å¿—çº§åˆ«ï¼šFATAL,ERROR,WARNING,INFO,DEBUG,TRACEã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Log log = LogFactory.getLog(Main<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"foo"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> Log log = LogFactory.getLog(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"foo"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»å®ä¾‹åŒ–çš„log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"bar"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜é‡è½½äº†Info(â€œstringâ€,Throwable)æä¾›æ‰“å°å¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    log.error(<span class="string">"got exception!"</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Log4j</h1>
<p>é€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒã€‚<br>
ä»¥XMLé…ç½®ä¸ºä¾‹ï¼Œä½¿ç”¨Log4jçš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªlog4j2.xmlçš„æ–‡ä»¶æ”¾åˆ°classpathä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"log.pattern"</span>&gt;</span>%d&#123;MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125;%n%msg%n%n<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ–‡ä»¶åå˜é‡ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"file.err.filename"</span>&gt;</span>log/err.log<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"file.err.pattern"</span>&gt;</span>log/err.%i.log.gz<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰Appenderï¼Œå³ç›®çš„åœ° --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°å±å¹• --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—æ ¼å¼å¼•ç”¨ä¸Šé¢å®šä¹‰çš„log.pattern --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log.pattern&#125;"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°æ–‡ä»¶,æ–‡ä»¶åå¼•ç”¨ä¸Šé¢å®šä¹‰çš„file.err.filename --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"err"</span> <span class="attr">bufferedIO</span>=<span class="string">"true"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;file.err.filename&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;file.err.pattern&#125;"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log.pattern&#125;"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨åˆ‡å‰²æ—¥å¿— --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"1 MB"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¿ç•™æœ€è¿‘10ä»½ --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹infoçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°console --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"console"</span> <span class="attr">level</span>=<span class="string">"info"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹errorçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°errï¼Œå³ä¸Šé¢å®šä¹‰çš„RollingFile --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"err"</span> <span class="attr">level</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¦æŠŠä»¥ä¸‹3ä¸ªjaråŒ…æ”¾åˆ°classpathä¸­ï¼š<br>
log4j-api-2.x.jar<br>
log4j-core-2.x.jar<br>
log4j-jcl-2.x.jar<br>
Commons Loggingä¼šè‡ªåŠ¨å‘ç°å¹¶ä½¿ç”¨Log4jï¼Œæ‰€ä»¥ï¼ŒæŠŠä¸Šä¸€èŠ‚ä¸‹è½½çš„commons-logging-1.2.jarä¹Ÿæ”¾åˆ°classpathä¸­ã€‚<br>
è¦æ‰“å°æ—¥å¿—ï¼Œåªéœ€è¦æŒ‰Commons Loggingçš„å†™æ³•å†™ï¼Œä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå°±å¯ä»¥å¾—åˆ°Log4jçš„æ—¥å¿—è¾“å‡ºã€‚</p>
<ul>
<li>æ€»ç»“ï¼š Commons Loggingæ¥å£æ¥å†™å…¥æ—¥å¿—ï¼Œå¹¶ä¸”å¼€å‘é˜¶æ®µæ— éœ€å¼•å…¥Log4jã€‚æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œ åªéœ€è¦æŠŠæ­£ç¡®çš„é…ç½®æ–‡ä»¶å’ŒLog4jç›¸å…³çš„jaråŒ…æ”¾å…¥classpathï¼Œå°±å¯ä»¥è‡ªåŠ¨æŠŠæ—¥å¿—åˆ‡æ¢æˆä½¿ç”¨Log4jå†™å…¥ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¼‚å¸¸å¤„ç†</title>
    <url>/2020/03/03/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<pre><code>ä¾¿äºè°ƒè¯•ï¼Œè¿è¡Œæ£€æµ‹ã€‚
</code></pre>
<a id="more"></a>
<h1>å¼‚å¸¸</h1>
<h2 id="Javaå¼‚å¸¸ç§ç±»"><a class="header-anchor" href="#Javaå¼‚å¸¸ç§ç±»">Â¶</a>Javaå¼‚å¸¸ç§ç±»</h2>
<ul>
<li>Error:<br>
OutOfMemoryErrorï¼šå†…å­˜è€—å°½<br>
NoClassDefFoundErrorï¼šæ— æ³•åŠ è½½æŸä¸ªClass<br>
StackOverflowErrorï¼šæ ˆæº¢å‡º</li>
<li>Exception:<br>
NumberFormatExceptionï¼šæ•°å€¼ç±»å‹çš„æ ¼å¼é”™è¯¯<br>
FileNotFoundExceptionï¼šæœªæ‰¾åˆ°æ–‡ä»¶<br>
SocketExceptionï¼šè¯»å–ç½‘ç»œå¤±è´¥<br>
NullPointerExceptionï¼šå¯¹æŸä¸ªnullçš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æˆ–å­—æ®µ<br>
IndexOutOfBoundsExceptionï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ</li>
<li>å¿…é¡»æ•è·çš„å¼‚å¸¸ï¼Œé™¤RuntimeExceptionä»¥å¤–çš„Exceptionï¼Œåˆç§°ä¸ºChecked Exceptionã€‚</li>
</ul>
<h2 id="æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch"><a class="header-anchor" href="#æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch">Â¶</a>æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bs = toGBK(<span class="string">"ä¸­æ–‡"</span>);</span><br><span class="line">            System.out.println(Arrays.toString(bs));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">byte</span>[] toGBK(String s) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:</span></span><br><span class="line">        <span class="keyword">return</span> s.getBytes(<span class="string">"GBK"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>åœ¨main()æ–¹æ³•ä¸­ï¼Œè°ƒç”¨toGBK()ï¼Œæ²¡æœ‰æ•è·å®ƒå£°æ˜çš„å¯èƒ½æŠ›å‡ºçš„UnsupportedEncodingException,åˆ™ä¼šæŠ¥é”™ã€‚
</code></pre>
<p>å¦‚æœä¸æƒ³å†™try,åˆ™å®šä¹‰ä¸ºthrows Exceptionï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bs = toGBK(<span class="string">"ä¸­æ–‡"</span>);</span><br><span class="line">            System.out.println(Arrays.toString(bs));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">byte</span>[] toGBK(String s) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:</span></span><br><span class="line">        <span class="keyword">return</span> s.getBytes(<span class="string">"GBK"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ–¹æ³•æŠ›å‡ºäº†å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¯ä»¥ä¸å†™catchã€‚</p>
<h3 id="å¤šæ•è·å¼‚å¸¸"><a class="header-anchor" href="#å¤šæ•è·å¼‚å¸¸">Â¶</a>å¤šæ•è·å¼‚å¸¸</h3>
<p><img src="/.io//Exception.png" alt></p>
<p>å­ç±»ä¸€å®šè¦å†™åœ¨å‰é¢ï¼Œå¦åˆ™å­ç±»æ°¸è¿œæ•è·ä¸åˆ°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(string[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IOException e)(</span><br><span class="line">        System.out.println(<span class="string">"IO error"</span>);</span><br><span class="line">    ) <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123; <span class="comment">// æ°¸è¿œæ•è·ä¸åˆ°</span></span><br><span class="line">        System.out.println(<span class="string">"Bad encoding"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå¹¶å¼‚å¸¸å¤„ç†ï¼Œå¯ä»¥ç”¨ï½œï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException | NumberFormatException e) &#123; <span class="comment">// IOExceptionæˆ–NumberFormatException</span></span><br><span class="line">        System.out.println(<span class="string">"Bad input"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(<span class="string">"Unknown error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="finallyè¯­å¥"><a class="header-anchor" href="#finallyè¯­å¥">Â¶</a>finallyè¯­å¥</h3>
<p>finallyå¯ä»¥ä¿è¯æœ‰æ— é”™è¯¯éƒ½æ‰§è¡Œã€‚<br>
åœ¨tryæˆ–è€…catchè¯­å¥å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œfinallyä»ä¼šæ‰§è¡Œï¼Œå…ˆæ‰§è¡Œfinallyå†æŠ›å‡ºã€‚</p>
<h2 id="æŠ›å‡ºå¼‚å¸¸"><a class="header-anchor" href="#æŠ›å‡ºå¼‚å¸¸">Â¶</a>æŠ›å‡ºå¼‚å¸¸</h2>
<h3 id="å¼‚å¸¸çš„ä¼ æ’­"><a class="header-anchor" href="#å¼‚å¸¸çš„ä¼ æ’­">Â¶</a>å¼‚å¸¸çš„ä¼ æ’­</h3>
<p>å½“æŸä¸ªæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œå¦‚æœå½“å‰æ–¹æ³•æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸å°±ä¼šè¢«æŠ›åˆ°ä¸Šå±‚è°ƒç”¨æ–¹æ³•ï¼Œç›´åˆ°é‡åˆ°æŸä¸ªtry â€¦ catchè¢«æ•è·ä¸ºæ­¢</p>
<h3 id="e-printStackTrace-æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚"><a class="header-anchor" href="#e-printStackTrace-æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚">Â¶</a>e,printStackTrace()æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            process1();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        process2();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Integer.parseInt(<span class="keyword">null</span>); <span class="comment">// ä¼šæŠ›å‡ºNumberFormatException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>java.lang.NumberFormatException: null<br>
at java.base/java.lang.Integer.parseInt(Integer.java:614)<br>
at java.base/java.lang.Integer.parseInt(Integer.java:770)<br>
at Main.process2(Main.java:16)<br>
at Main.process1(Main.java:12)<br>
at Main.main(Main.java:5)<br>
è¿”å›ç±»ä¼¼å¦‚æ­¤ï¼Œæ¯å±‚è°ƒç”¨éƒ½ç»™å‡ºäº†æºä»£ç çš„è¡Œå·ã€‚</p>
<h3 id="å¼‚å¸¸å±è”½-Suppressed-Exception"><a class="header-anchor" href="#å¼‚å¸¸å±è”½-Suppressed-Exception">Â¶</a>å¼‚å¸¸å±è”½ Suppressed Exception</h3>
<p>å¦‚æœfinallyæŠ›å‡ºå¼‚å¸¸ï¼Œcatchä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±ä¼šæ¶ˆå¤±ï¼Œå› ä¸ºåªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<h2 id="è‡ªå®šä¹‰å¼‚å¸¸"><a class="header-anchor" href="#è‡ªå®šä¹‰å¼‚å¸¸">Â¶</a>è‡ªå®šä¹‰å¼‚å¸¸</h2>
<p>å»ºç«‹ä¸€ä¸ªâ€œæ ¹å¼‚å¸¸â€BaseExceptionï¼Œå»ºè®®ä»RuntimeExceptionä¸­æ´¾ç”Ÿï¼Œå…¶ä»–ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸åˆ™ä»BaseExceptionä¸­æ´¾ç”Ÿï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¦æ”¯æŒå¤šä¸ªæ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(String message, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰RuntimeExceptionï¼Œç¼–è¯‘æ—¶ä¸èƒ½æ£€æµ‹å‡ºè¯¥ç±»å¼‚å¸¸ã€‚<br>
è€Œæœªæ£€æµ‹å¼‚å¸¸å­˜åœ¨ä¸¤ç§æ¸…å½¢ï¼š<br>
â‘  å¦‚æœè¯¥å¼‚å¸¸è¢«æ•è·æˆ–æŠ›å‡ºï¼Œåˆ™ç¨‹åºç»§ç»­è¿è¡Œã€‚<br>
â‘¡ å¦‚æœå¼‚å¸¸æ²¡æœ‰è¢«æ•è·è¯¥çº¿ç¨‹å°†ä¼šåœæ­¢æ‰§è¡Œã€‚<br>
Thread.UncaughtExceptionHandleræ˜¯ç”¨äºå¤„ç†æœªæ•è·å¼‚å¸¸é€ æˆçº¿ç¨‹çªç„¶ä¸­æ–­æƒ…å†µçš„ä¸€ä¸ªå†…åµŒæ¥å£ã€‚å½“ä¸€ä¸ªæœªæ•è·å¼‚å¸¸å°†é€ æˆçº¿ç¨‹ä¸­æ–­çš„æ—¶å€™JVMä¼šä½¿ç”¨Thread.getUncaughtExceptionHandler()æ¥æŸ¥è¯¢çº¿ç¨‹çš„UncaughtExceptionHandlerï¼Œå¹¶å°†çº¿ç¨‹å’Œå¼‚å¸¸ä½œä¸ºå‚æ•°ä¼ é€’ç»™handlerçš„uncaughtException()æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
<h2 id="æ–­è¨€Assertion"><a class="header-anchor" href="#æ–­è¨€Assertion">Â¶</a>æ–­è¨€Assertion</h2>
<p>è°ƒè¯•å·¥å…·ï¼Œä¸€èˆ¬åœ¨å¼€å‘æµ‹è¯•æ—¶ä½¿ç”¨ã€‚æ–­è¨€å¤±è´¥ä¼šæŠ›å‡ºAssertionErrorï¼Œå¹¶å¯å¸¦ä¸Šå¯é€‰çš„æ–­è¨€æ¶ˆæ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">assert</span> x &gt;= <span class="number">0</span> : <span class="string">"x must &gt;= 0"</span>;</span><br></pre></td></tr></table></figure>
<p>æ–­è¨€å¤±è´¥ä¼šç›´æ¥å¯¼è‡´ç¨‹åºé€€å‡ºï¼Œå¯¹äºå¯æ¢å¤ç¨‹åºï¼Œä¸åº”è¯¥ä½¿ç”¨æ–­è¨€ï¼Œåº”è¯¥æŠ›å‡ºå¼‚å¸¸å¹¶åœ¨ä¸Šå±‚æ•è·ã€‚</p>
<ul>
<li>JVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œé‡åˆ°æ—¶ä¼šè‡ªåŠ¨å¿½ç•¥ã€‚è¦æ‰§è¡Œassertè¯­å¥ï¼Œå¿…é¡»ä¼ é€’ -enableassertionså‚æ•°ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -ea Main.java</span><br></pre></td></tr></table></figure>
<p>æœ€å¥½è¿˜æ˜¯ä½¿ç”¨å•å…ƒæµ‹è¯•ã€‚</p>
<h1>Log4j</h1>
<p>å½“æˆ‘ä»¬ä½¿ç”¨Log4jè¾“å‡ºä¸€æ¡æ—¥å¿—æ—¶ï¼ŒLog4jè‡ªåŠ¨é€šè¿‡ä¸åŒçš„AppenderæŠŠåŒä¸€æ¡æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>consoleï¼šè¾“å‡ºåˆ°å±å¹•ï¼›</li>
<li>fileï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼›</li>
<li>socketï¼šé€šè¿‡ç½‘ç»œè¾“å‡ºåˆ°è¿œç¨‹è®¡ç®—æœºï¼›</li>
<li>jdbcï¼šè¾“å‡ºåˆ°æ•°æ®åº“<br>
åœ¨è¾“å‡ºæ—¥å¿—çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Filteræ¥è¿‡æ»¤å“ªäº›logéœ€è¦è¢«è¾“å‡ºï¼Œå“ªäº›logä¸éœ€è¦è¢«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä»…è¾“å‡ºERRORçº§åˆ«çš„æ—¥å¿—ã€‚</li>
</ul>
<h2 id="è°ƒæ•´è¾“å‡º"><a class="header-anchor" href="#è°ƒæ•´è¾“å‡º">Â¶</a>è°ƒæ•´è¾“å‡º</h2>
<p>å‡¡æ˜¯INFOçº§åˆ«çš„æ—¥å¿—ï¼Œä¼šè‡ªåŠ¨è¾“å‡ºåˆ°å±å¹•ï¼Œè€ŒERRORçº§åˆ«çš„æ—¥å¿—ï¼Œä¸ä½†ä¼šè¾“å‡ºåˆ°å±å¹•ï¼Œè¿˜ä¼šåŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶ã€‚å¹¶ä¸”ï¼Œä¸€æ—¦æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°ï¼ˆ1MBï¼‰ï¼ŒLog4jå°±ä¼šè‡ªåŠ¨åˆ‡å‰²æ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶æœ€å¤šä¿ç•™10ä»½ã€‚</p>
<h2 id="æ—¥å¿—çº§åˆ«"><a class="header-anchor" href="#æ—¥å¿—çº§åˆ«">Â¶</a>æ—¥å¿—çº§åˆ«</h2>
<p>DEBUGï¼šè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼›æŒ‡å‡ºç»†ç²’åº¦ä¿¡æ¯äº‹ä»¶å¯¹è°ƒè¯•åº”ç”¨ç¨‹åºæ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚<br>
INFOï¼š è¾“å‡ºæç¤ºä¿¡æ¯ï¼›æ¶ˆæ¯åœ¨ç²—ç²’åº¦çº§åˆ«ä¸Šçªå‡ºå¼ºè°ƒåº”ç”¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚<br>
WARNï¼š è¾“å‡ºè­¦å‘Šä¿¡æ¯ï¼›è¡¨æ˜ä¼šå‡ºç°æ½œåœ¨é”™è¯¯çš„æƒ…å½¢ã€‚<br>
ERRORï¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼›æŒ‡å‡ºè™½ç„¶å‘ç”Ÿé”™è¯¯äº‹ä»¶ï¼Œä½†ä»ç„¶ä¸å½±å“ç³»ç»Ÿçš„ç»§ç»­è¿è¡Œã€‚<br>
FATALï¼š è¾“å‡ºè‡´å‘½é”™è¯¯ï¼›æŒ‡å‡ºæ¯ä¸ªä¸¥é‡çš„é”™è¯¯äº‹ä»¶å°†ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºçš„é€€å‡ºã€‚<br>
ALL levelï¼šæ‰“å¼€æ‰€æœ‰æ—¥å¿—è®°å½•å¼€å…³ï¼›æ˜¯æœ€ä½ç­‰çº§çš„ï¼Œç”¨äºæ‰“å¼€æ‰€æœ‰æ—¥å¿—è®°å½•ã€‚<br>
OFF levelï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•å¼€å…³ï¼›æ˜¯æœ€é«˜ç­‰çº§çš„ï¼Œç”¨äºå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•ã€‚</p>
<p>æŒ‰ç…§èŒƒå›´ä»å°åˆ°å¤§æ’åºï¼šOFF level &gt; FATAL &gt; ERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; ALL levelï¼›èŒƒå›´å¤§çš„ä¼šåŒ…å«èŒƒå›´å°çš„ï¼Œä¾‹å¦‚æ—¥å¿—è®¾ç½®ä¸ºINFOçº§åˆ«çš„è¯åˆ™FATALã€ERRORã€WARNã€INFOçš„æ—¥å¿—å¼€å…³éƒ½æ˜¯æ‰“å¼€çš„ï¼Œè€ŒDEBUGçš„æ—¥å¿—å¼€å…³å°†æ˜¯å…³é—­çš„ã€‚</p>
<p>Log4jå»ºè®®åªä½¿ç”¨å››ä¸ªçº§åˆ«ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ†åˆ«æ˜¯ ERRORã€WARNã€INFOã€DEBUGã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬å–å·å»–è€å¸ˆçš„Javaæ•™ç¨‹</title>
    <url>/2020/03/01/%E5%81%B7%E5%BB%96%E8%80%81%E5%B8%88%E7%9A%84Java%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<pre><code>ä»Šå¤©æƒ³å­¦ç‚¹Javaï¼Œè®¿é—®äº†ä¸€ä¸‹å»–è€å¸ˆçš„ç½‘ç«™ï¼Œç»“æœç½‘å¾ˆå¡ï¼Œå¯èƒ½å»–è€å¸ˆåœ¨æ›´æ–°ç½‘ç«™ï¼Œç„¶åçªç„¶æƒ³åˆ°å¯ä»¥å†™ä¸ªçˆ¬è™«ä¸€åŠ³æ°¸é€¸ã€‚åšè¿™ä¸ªçˆ¬è™«çš„ç›®çš„ä¹Ÿæ˜¯æ–¹ä¾¿å­¦ä¹ å»–é›ªå³°è€å¸ˆçš„Javaæ•™ç¨‹ï¼Œæ¯•ç«ŸæŠŠç½‘é¡µå­˜åœ¨æœ¬åœ°æ–¹ä¾¿æµè§ˆï¼Œå¹¶æ— ä»–æ„ã€‚
</code></pre>
<a id="more"></a>
<h1>Code</h1>
<p>ç”¨çš„æ˜¯requerstå’Œxpathï¼Œæ¨èç”¨Chromeä¸Šçš„xpath helperï¼ŒçœŸé¦™ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">##å¯¼å…¥åº“</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> lxml</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure>
<h2 id="å‘é€è¯·æ±‚"><a class="header-anchor" href="#å‘é€è¯·æ±‚">Â¶</a>å‘é€è¯·æ±‚</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#send request</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span><span class="params">(url, headers)</span>:</span></span><br><span class="line">    r = requests.get(url,headers=headers)</span><br><span class="line">    print(<span class="string">'çŠ¶æ€ç :'</span>,r.status_code)</span><br><span class="line">    <span class="keyword">return</span> r</span><br></pre></td></tr></table></figure>
<h2 id="æå–æ•°æ®"><a class="header-anchor" href="#æå–æ•°æ®">Â¶</a>æå–æ•°æ®</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#fetch data</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(domain,resp, headers)</span>:</span></span><br><span class="line">    selector = lxml.etree.HTML(resp.text)    <span class="comment">#generate object</span></span><br><span class="line">    titles = selector.xpath(<span class="string">'//a[@class="x-wiki-index-item"]/text()'</span>)<span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„å°æ ‡é¢˜ï¼Œæ¯”å¦‚ã€Šé¢å‘å¯¹è±¡ã€‹è¿™ç§      </span></span><br><span class="line">    uri = selector.xpath(<span class="string">'//a[@class="x-wiki-index-item"]/@href'</span>) <span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„urlçš„å‚æ•°</span></span><br><span class="line">    <span class="comment">#æ‰“åŒ…åˆ°ä¸€èµ·è¿”å›      </span></span><br><span class="line">    urls = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> uri:</span><br><span class="line">        urls.append(domain + i)    </span><br><span class="line">    <span class="keyword">return</span> titles, urls</span><br></pre></td></tr></table></figure>
<h1>ä¸‹è½½é¡µé¢</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(titles,urls)</span>:</span></span><br><span class="line">    <span class="comment">#è®¾ç½®ä¸‹è½½è·¯å¾„</span></span><br><span class="line">    cwd=os.getcwd()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML'</span>):</span><br><span class="line">        os.mkdir(cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML'</span>)</span><br><span class="line">    filepath = cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML/'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> zip(titles, urls):</span><br><span class="line">        resp = requests.get(value,headers=headers)</span><br><span class="line">        selector = lxml.etree.HTML(resp.text)    </span><br><span class="line">        <span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„æ­£æ–‡</span></span><br><span class="line">        html = selector.xpath(<span class="string">'//div[@class="uk-flex-item-1"]'</span>) </span><br><span class="line">        <span class="comment">#è½¬æ¢ç±»å‹</span></span><br><span class="line">        html = etree.tostring(html[<span class="number">0</span>], pretty_print = <span class="literal">True</span>, method = <span class="string">"html"</span>)</span><br><span class="line">        <span class="comment">#è®¾ç½®æ–‡ä»¶å</span></span><br><span class="line">        filename = filepath + <span class="string">"%d"</span> % titles.index(key) + key +<span class="string">'.html'</span></span><br><span class="line">        <span class="keyword">with</span> open(filename,<span class="string">'wb'</span>)<span class="keyword">as</span> f:</span><br><span class="line">            f.write(html)</span><br><span class="line">        <span class="comment">#åŠ ä¸€ä¸ªå»¶æ—¶ï¼Œåˆ«è®¿é—®å¤ªå¿«</span></span><br><span class="line">        time.sleep(<span class="number">0.3</span>)</span><br><span class="line">    print(<span class="string">"ä¸‹è½½å®Œæˆ"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°"><a class="header-anchor" href="#ä¸»å‡½æ•°">Â¶</a>ä¸»å‡½æ•°</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#main</span></span><br><span class="line">headers = &#123;</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chro'</span></span><br><span class="line">                      <span class="string">'me/53.0.2785.104 Safari/537.36 Core/1.53.2372.400 QQBrowser/9.5.10548.400'</span></span><br><span class="line">&#125;</span><br><span class="line">domain = <span class="string">'http://www.liaoxuefeng.com'</span>           <span class="comment">#å»–é›ªå³°ç½‘ç«™çš„åŸŸå</span></span><br><span class="line">url =  <span class="string">"https://www.liaoxuefeng.com/wiki/1252599548343744"</span> <span class="comment">#Javaæ•™ç¨‹çš„url</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–Javaæ•™ç¨‹çš„é¡µé¢</span></span><br><span class="line">resp = send_request(url, headers)</span><br><span class="line"><span class="comment">#æå–æ‰€æœ‰çš„æ•°æ®å›æ¥ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œurls</span></span><br><span class="line">titles, urls = fetch(domain, resp, headers)</span><br><span class="line"><span class="comment">#å¼€å§‹ä¸‹è½½</span></span><br><span class="line">download(titles,urls)</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ ¸å¿ƒç±»</title>
    <url>/2020/03/01/Java%E6%A0%B8%E5%BF%83%E7%B1%BB/</url>
    <content><![CDATA[<p>Javaå†…éƒ¨çš„æ ¸å¿ƒç±»ã€‚</p>
<a id="more"></a>
<h1>String</h1>
<p>Stringæœ¬èº«æ˜¯ä¸€ä¸ªclassï¼ŒJavaç¼–è¯‘å™¨å…è®¸å®ƒç”¨â€¦æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡char[]æ•°ç»„æ¥è¡¨ç¤ºçš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s2 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[] &#123;<span class="string">'H'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">'!'</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>Javaå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå…¶åŸç†æ˜¯ï¼š<br>
é€šè¿‡private final char[]å­—æ®µï¼Œä»¥åŠæ²¡æœ‰ä»»ä½•æ”¹å˜char[]çš„æ–¹æ³•æ¥å®ç°çš„ã€‚<br>
è€Œå­—ç¬¦ä¸²çš„æ”¹å˜ï¼Œå®é™…æ˜¯å¼€è¾Ÿäº†æ–°çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡å†…å­˜åœ°å€â€œæ–­å¼€-è¿æ¥â€å˜åŒ–ï¼Œæ”¹å˜æŒ‡å‘ã€‚</p>
<h2 id="å­—ç¬¦ä¸²æ“ä½œ"><a class="header-anchor" href="#å­—ç¬¦ä¸²æ“ä½œ">Â¶</a>å­—ç¬¦ä¸²æ“ä½œ</h2>
<h3 id="æ¯”è¾ƒ"><a class="header-anchor" href="#æ¯”è¾ƒ">Â¶</a>æ¯”è¾ƒ</h3>
<p>ç”¨a.equals(b)ï¼Œå¿½ç•¥å¤§å°å†™æ¯”è¾ƒï¼Œä½¿ç”¨equalsIgnoreCase()æ–¹æ³•ã€‚â€˜==â€™æ¯”è¾ƒçš„æ˜¯ä¸¤è€…çš„å¼•ç”¨ã€‚<br>
JVMå…±äº«çš„åªæœ‰å­—ç¬¦ä¸²çš„å­—é¢é‡ï¼Œ+æˆ–è€…substring()ç­‰æ“ä½œç¬¦å¾—åˆ°çš„å­—ç¬¦ä¸²æ˜¯ä¸å…±äº«çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="string">"hello"</span>;</span><br><span class="line">        String s2 = <span class="string">"HELLO"</span>.toLowerCase();</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœç´¢"><a class="header-anchor" href="#æœç´¢">Â¶</a>æœç´¢</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"Hello"</span>.contains(<span class="string">"ll"</span>); <span class="comment">//true</span></span><br><span class="line"><span class="string">"Hello"</span>.indexof(<span class="string">"l"</span>); <span class="comment">//2</span></span><br><span class="line"><span class="string">"Hello"</span>.lastIndexof(<span class="string">"l"</span>); <span class="comment">//3</span></span><br><span class="line"><span class="string">"Hello"</span>.startsWith(<span class="string">"He"</span>); <span class="comment">//ture</span></span><br><span class="line"><span class="string">"Hello"</span>.endWith(<span class="string">"lo"</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡å¤"><a class="header-anchor" href="#é‡å¤">Â¶</a>é‡å¤</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"Java"</span>.repeat(<span class="number">3</span>);<span class="comment">//JavaJavaJava</span></span><br></pre></td></tr></table></figure>
<h3 id="æå–"><a class="header-anchor" href="#æå–">Â¶</a>æå–</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"Hello"</span>.substring(<span class="number">2</span>); <span class="comment">//"llo"</span></span><br><span class="line"><span class="string">"Hello"</span>.substring(<span class="number">2</span>,<span class="number">4</span>) <span class="comment">//"llo"</span></span><br></pre></td></tr></table></figure>
<h3 id="å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦"><a class="header-anchor" href="#å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦">Â¶</a>å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦</h3>
<p>ä½¿ç”¨.trim()ï¼ŒåŒ…æ‹¬\t,\n,\r</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"  \tHello\r\n "</span>.trim(); <span class="comment">// "Hello"</span></span><br></pre></td></tr></table></figure>
<p>strip()åŒæ—¶è¿˜ä¼šç§»é™¤\u3000ï¼Œä¸­æ–‡ç©ºæ ¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"\u3000Hello\u3000"</span>.strip(); <span class="comment">// "Hello"</span></span><br><span class="line"><span class="comment">//ç§»é™¤é¦–æˆ–å°¾</span></span><br><span class="line"><span class="string">" Hello "</span>.stripLeading(); <span class="comment">// "Hello "</span></span><br><span class="line"><span class="string">" Hello "</span>.stripTrailing(); <span class="comment">// " Hello"</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦"><a class="header-anchor" href="#åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦">Â¶</a>åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">""</span>.isEmpty(); <span class="comment">// trueï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸º0</span></span><br><span class="line"><span class="string">"  "</span>.isEmpty(); <span class="comment">// falseï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0</span></span><br><span class="line"><span class="string">"  \n"</span>.isBlank(); <span class="comment">// trueï¼Œå› ä¸ºåªåŒ…å«ç©ºç™½å­—ç¬¦</span></span><br><span class="line"><span class="string">" Hello "</span>.isBlank(); <span class="comment">// falseï¼Œå› ä¸ºåŒ…å«éç©ºç™½å­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="æ›¿æ¢å­—ä¸²"><a class="header-anchor" href="#æ›¿æ¢å­—ä¸²">Â¶</a>æ›¿æ¢å­—ä¸²</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"hello"</span>;</span><br><span class="line">s.replace(<span class="string">'l'</span>, <span class="string">'w'</span>); <span class="comment">// "hewwo"ï¼Œæ‰€æœ‰å­—ç¬¦'l'è¢«æ›¿æ¢ä¸º'w'</span></span><br><span class="line">s.replace(<span class="string">"ll"</span>, <span class="string">"~~"</span>); <span class="comment">// "he~~o"ï¼Œæ‰€æœ‰å­ä¸²"ll"è¢«æ›¿æ¢ä¸º"~~"</span></span><br></pre></td></tr></table></figure>
<p>æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"A,,B;C ,D"</span>;</span><br><span class="line">s.replaceAll(<span class="string">"[\\,\\;\\s]+"</span>, <span class="string">","</span>); <span class="comment">// "A,B,C,D"</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å‰²åˆå¹¶"><a class="header-anchor" href="#åˆ†å‰²åˆå¹¶">Â¶</a>åˆ†å‰²åˆå¹¶</h3>
<h2 id="ï¿¼10"><a class="header-anchor" href="#ï¿¼10">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"A,B,C,D"</span>;</span><br><span class="line"><span class="comment">//åˆ†å‰²</span></span><br><span class="line">String[] ss = s.split(<span class="string">"\\,"</span>); <span class="comment">// &#123;"A", "B", "C", "D"&#125;</span></span><br><span class="line"><span class="comment">//åˆå¹¶å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">String[] arr = &#123;<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>&#125;;</span><br><span class="line">String s = String.join(<span class="string">"***"</span>, arr); <span class="comment">// "A***B***C"</span></span><br></pre></td></tr></table></figure></h2>
<h1>ç±»å‹è½¬æ¢</h1>
<h3 id="è½¬æ¢æˆString"><a class="header-anchor" href="#è½¬æ¢æˆString">Â¶</a>è½¬æ¢æˆString()</h3>
<p>ç”¨é™æ€æ–¹æ³•valueof(),è¿™æ˜¯é‡è½½æ–¹æ³•ï¼Œè‡ªåŠ¨æ£€æµ‹ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String.valueOf(<span class="number">123</span>); <span class="comment">// "123"</span></span><br><span class="line">String.valueOf(<span class="number">45.67</span>); <span class="comment">// "45.67"</span></span><br><span class="line">String.valueOf(<span class="keyword">true</span>); <span class="comment">// "true"</span></span><br><span class="line">String.valueOf(<span class="keyword">new</span> Object()); <span class="comment">// ç±»ä¼¼java.lang.Object@636be97c</span></span><br></pre></td></tr></table></figure>
<h3 id="Stringè½¬æ¢æˆå…¶ä»–ç±»å‹"><a class="header-anchor" href="#Stringè½¬æ¢æˆå…¶ä»–ç±»å‹">Â¶</a>Stringè½¬æ¢æˆå…¶ä»–ç±»å‹</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è½¬æ¢æˆint</span></span><br><span class="line"><span class="keyword">int</span> n1 = Integer.parseInt(<span class="string">"123"</span>);</span><br><span class="line"><span class="keyword">int</span> n2 = Integer.parseInt(<span class="string">"ff"</span>, <span class="number">16</span>); <span class="comment">// æŒ‰åå…­è¿›åˆ¶è½¬æ¢ï¼Œ255</span></span><br><span class="line"><span class="comment">//Stringè½¬æ¢æˆboolean</span></span><br><span class="line"><span class="keyword">boolean</span> b1 = Boolean.parseBoolean(<span class="string">"true"</span>); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> b2 = Boolean.parseBoolean(<span class="string">"FALSE"</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼ŒIntegeræœ‰ä¸ªgetInteger(String)æ–¹æ³•ï¼Œå®ƒä¸æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºintï¼Œè€Œæ˜¯æŠŠè¯¥å­—ç¬¦ä¸²å¯¹åº”çš„ç³»ç»Ÿå˜é‡è½¬æ¢ä¸ºIntegerï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer.getInteger(<span class="string">"java.version"</span>); <span class="comment">// ç‰ˆæœ¬å·ï¼Œ11</span></span><br></pre></td></tr></table></figure>
<ul>
<li>énewç”Ÿæˆçš„Integerå˜é‡æŒ‡å‘çš„æ˜¯é™æ€å¸¸é‡æ± ä¸­cacheæ•°ç»„ä¸­å­˜å‚¨çš„æŒ‡å‘äº†å †ä¸­çš„Integerå¯¹è±¡ï¼Œè€Œnew Integer()ç”Ÿæˆçš„å˜é‡æŒ‡å‘å †ä¸­æ–°å»ºçš„å¯¹è±¡ï¼Œä¸¤è€…åœ¨å†…å­˜ä¸­çš„å¯¹è±¡å¼•ç”¨ï¼ˆåœ°å€ï¼‰ä¸åŒã€‚</li>
<li>å¯¹äºä¸¤ä¸ªénewç”Ÿæˆçš„Integerå¯¹è±¡ï¼Œè¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¦‚æœä¸¤ä¸ªå˜é‡çš„å€¼åœ¨åŒºé—´-128åˆ°127ä¹‹é—´ï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºtrueï¼Œå¦‚æœä¸¤ä¸ªå˜é‡çš„å€¼ä¸åœ¨æ­¤åŒºé—´ï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºfalseã€‚<br>
åŸå› ï¼š javaåœ¨ç¼–è¯‘Integer i = 100 ;æ—¶ï¼Œä¼šç¿»è¯‘æˆä¸ºInteger i = Integer.valueOf(100)ã€‚è€Œjava APIä¸­å¯¹Integerç±»å‹çš„valueOfçš„å®šä¹‰å¦‚ä¸‹ï¼Œå¯¹äº-128åˆ°127ä¹‹é—´çš„æ•°ï¼Œä¼šè¿›è¡Œç¼“å­˜ï¼ŒInteger i = 127æ—¶ï¼Œä¼šå°†127è¿™ä¸ªIntegerå¯¹è±¡è¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡å†å†™Integer j = 127æ—¶ï¼Œå°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œå°±ä¸ä¼šnewäº†ã€‚</li>
</ul>
<h3 id="ä¸char-ç›¸äº’è½¬æ¢"><a class="header-anchor" href="#ä¸char-ç›¸äº’è½¬æ¢">Â¶</a>ä¸char[]ç›¸äº’è½¬æ¢</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span>[] cs = <span class="string">"Hello"</span>.toCharArray(); <span class="comment">// String -&gt; char[]</span></span><br><span class="line">String s = <span class="keyword">new</span> String(cs); <span class="comment">// char[] -&gt; String</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¿®æ”¹äº†char[]æ•°ç»„ï¼ŒStringå¹¶ä¸ä¼šæ”¹å˜ã€‚è¿™æ˜¯å› ä¸ºé€šè¿‡new String(char[])åˆ›å»ºæ–°çš„Stringå®ä¾‹æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç›´æ¥å¼•ç”¨ä¼ å…¥çš„char[]æ•°ç»„ï¼Œè€Œæ˜¯ä¼šå¤åˆ¶ä¸€ä»½ã€‚</p>
<p>å¦‚æœç±»å†…éƒ¨ç›´æ¥å¼•ç”¨äº†å¤–éƒ¨ä¼ å…¥çš„int[]æ•°ç»„ï¼Œè€Œå¤–éƒ¨ä»£ç å¯¹int[]æ•°ç»„çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°Scoreç±»çš„å­—æ®µã€‚å¦‚æœå¤–éƒ¨ä»£ç ä¸å¯ä¿¡ï¼Œè¿™å°±ä¼šé€ æˆå®‰å…¨éšæ‚£ã€‚</p>
<h2 id="ï¿¼15"><a class="header-anchor" href="#ï¿¼15">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] scores = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">88</span>, <span class="number">77</span>, <span class="number">51</span>, <span class="number">66</span> &#125;;</span><br><span class="line">        Score s = <span class="keyword">new</span> Score(scores);</span><br><span class="line">        s.printScores();</span><br><span class="line">        scores[<span class="number">2</span>] = <span class="number">99</span>;</span><br><span class="line">        s.printScores();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Score</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] scores;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Score</span><span class="params">(<span class="keyword">int</span>[] scores)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨clone()æ–¹æ³•æ‹·è´å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å¤åˆ¶å¼•ç”¨</span></span><br><span class="line">        <span class="keyword">this</span>.scores = scores.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printScores</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Arrays.toString(scores));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h1>å­—ç¬¦ç¼–ç </h1>
<ul>
<li>ç»Ÿä¸€å…¨çƒçš„ç¼–ç Unicodeç¼–ç éœ€è¦ä¸¤ä¸ªæˆ–è€…æ›´å¤šå­—èŠ‚è¡¨ç¤ºï¼ŒASCIIä¸€ä¸ªå­—èŠ‚ã€GB2312ä¸¤ä¸ªå­—èŠ‚ã€‚</li>
<li>UTF-8æŠŠå›ºå®šé•¿åº¦çš„Unicodeç¼–ç å˜æˆ1ï½4å­—èŠ‚çš„å˜é•¿ç¼–ç ã€‚ç¼–ç ä¾é é«˜å­—èŠ‚ä½æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ç©¶ç«Ÿæ˜¯å‡ ä¸ªå­—èŠ‚ï¼Œç”¨æ¥ä½œä¸ºä¼ è¾“ç¼–ç ã€‚</li>
<li>è½¬æ¢ç¼–ç åï¼Œå°±ä¸å†æ˜¯charç±»å‹ï¼Œè€Œæ˜¯byteç±»å‹è¡¨ç¤ºçš„æ•°ç»„ã€‚</li>
</ul>
<h4 id="å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚"><a class="header-anchor" href="#å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚">Â¶</a>å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] b1 = <span class="string">"Hello"</span>.getBytes(); <span class="comment">// æŒ‰ç³»ç»Ÿé»˜è®¤ç¼–ç è½¬æ¢ï¼Œä¸æ¨è</span></span><br><span class="line"><span class="keyword">byte</span>[] b2 = <span class="string">"Hello"</span>.getBytes(<span class="string">"UTF-8"</span>); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="keyword">byte</span>[] b2 = <span class="string">"Hello"</span>.getBytes(<span class="string">"GBK"</span>); <span class="comment">// æŒ‰GBKç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="keyword">byte</span>[] b3 = <span class="string">"Hello"</span>.getBytes(StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="comment">//å°†å­—èŠ‚ç è½¬å›Stringç±»å‹</span></span><br><span class="line"><span class="keyword">byte</span>[] b = ...</span><br><span class="line">String s1 = <span class="keyword">new</span> String(b, <span class="string">"GBK"</span>); <span class="comment">// æŒ‰GBKè½¬æ¢</span></span><br><span class="line">String s2 = <span class="keyword">new</span> String(b, StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8è½¬æ¢</span></span><br></pre></td></tr></table></figure>
<pre><code>è€Œè¾ƒæ–°çš„JDKç‰ˆæœ¬çš„Stringåˆ™ä»¥byte[]å­˜å‚¨ï¼šå¦‚æœStringä»…åŒ…å«ASCIIå­—ç¬¦ï¼Œåˆ™æ¯ä¸ªbyteå­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦åˆ™ï¼Œæ¯ä¸¤ä¸ªbyteå­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå› ä¸ºå¤§é‡çš„é•¿åº¦è¾ƒçŸ­çš„Stringé€šå¸¸ä»…åŒ…å«ASCIIå­—ç¬¦ï¼š
</code></pre>
<h2 id="ï¿¼17"><a class="header-anchor" href="#ï¿¼17">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span> coder; <span class="comment">// 0 = LATIN1, 1 = UTF16</span></span><br></pre></td></tr></table></figure></h2>
<h1>StringBuilder</h1>
<p>s = s + â€œ,â€ + i;å¯ä»¥ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œç„¶åæ‰”æ‰æ—§çš„å­—ç¬¦ä¸²ã€‚è¿™æ ·ï¼Œç»å¤§éƒ¨åˆ†å­—ç¬¦ä¸²éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¸ä½†æµªè´¹å†…å­˜ï¼Œè¿˜ä¼šå½±å“GCæ•ˆç‡ã€‚<br>
StringBuilderï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå¯ä»¥é¢„åˆ†é…ç¼“å†²åŒºï¼Œæ–°å¢å­—ç¬¦æ—¶ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ä¸´æ—¶å¯¹è±¡ï¼š</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">//ç”³è¯·ç¼“å†²åŒºç©ºé—´</span></span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="number">1024</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//ç”¨appendå¢åŠ å­—ç¬¦ä¸²</span></span><br><span class="line">    sb.append(<span class="string">','</span>);</span><br><span class="line">    sb.append(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">String s = sb.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥é“¾å¼æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder(<span class="number">1024</span>);</span><br><span class="line">        sb.append(<span class="string">"Mr "</span>)</span><br><span class="line">          .append(<span class="string">"Bob"</span>)</span><br><span class="line">          .append(<span class="string">"!"</span>)</span><br><span class="line">          .insert(<span class="number">0</span>, <span class="string">"Hello, "</span>);</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é“¾å¼æ“ä½œçš„å…³é”®æ˜¯ï¼Œappend()æ–¹æ³•ä¼šè¿”å›thisï¼Œä»è€Œä¸æ–­è°ƒç”¨è‡ªèº«ã€‚</p>
<p>æ³¨æ„ï¼šå¯¹äºæ™®é€šçš„å­—ç¬¦ä¸²+æ“ä½œï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬å°†å…¶æ”¹å†™ä¸ºStringBuilderï¼Œå› ä¸ºJavaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±è‡ªåŠ¨æŠŠå¤šä¸ªè¿ç»­çš„+æ“ä½œç¼–ç ä¸ºStringConcatFactoryçš„æ“ä½œã€‚åœ¨è¿è¡ŒæœŸï¼ŒStringConcatFactoryä¼šè‡ªåŠ¨æŠŠå­—ç¬¦ä¸²è¿æ¥æ“ä½œä¼˜åŒ–ä¸ºæ•°ç»„å¤åˆ¶æˆ–è€…StringBuilderæ“ä½œã€‚</p>
<h2 id="StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚"><a class="header-anchor" href="#StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚">Â¶</a>StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚</h2>
<h1>StringJoiner</h1>
<p>è¿æ¥å­—ç¬¦ä¸²æ•°ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.StringJoiner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] names = &#123;<span class="string">"Bob"</span>, <span class="string">"Alice"</span>, <span class="string">"Grace"</span>&#125;;</span><br><span class="line">        <span class="keyword">var</span> sj = <span class="keyword">new</span> StringJoiner(<span class="string">", "</span>, <span class="string">"Hello "</span>, <span class="string">"!"</span>);</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            sj.add(name);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sj.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šè¿æ¥ç¬¦ï¼Œ å¼€å¤´ï¼Œç»“å°¾</span></span><br></pre></td></tr></table></figure>
<p>å…¶æºç å†…éƒ¨å°±æ˜¯ç”¨StringBuilderå®ç°çš„ã€‚<br>
String.join()ï¼šé™æ€æ–¹æ³•ï¼Œå…¶å†…éƒ¨æ˜¯ç”¨StringJoinerå®ç°çš„ï¼Œä½†æ˜¯ä¸èƒ½åŠ å¼€å¤´å’Œç»“å°¾ã€‚</p>
<h2 id="ï¿¼20"><a class="header-anchor" href="#ï¿¼20">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] names = &#123;<span class="string">"Bob"</span>, <span class="string">"Alice"</span>, <span class="string">"Grace"</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> s = String.join(<span class="string">", "</span>, names);</span><br></pre></td></tr></table></figure></h2>
<h1>åŒ…è£…ç±»å‹ Wrapper class</h1>
<p>Javaçš„æ•°æ®ç±»å‹åˆ†ä¸¤ç§ï¼š</p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼šbyteï¼Œshortï¼Œintï¼Œlongï¼Œbooleanï¼Œfloatï¼Œdoubleï¼Œchar</li>
<li>å¼•ç”¨ç±»å‹ï¼šæ‰€æœ‰classå’Œinterfaceç±»å‹<br>
å¼•ç”¨ç±»å‹å¯ä»¥ä¸ºnullï¼ŒåŸºæœ¬ç±»å‹ä¸è¡Œã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">100</span>;</span><br><span class="line">        <span class="comment">// é€šè¿‡newæ“ä½œç¬¦åˆ›å»ºIntegerå®ä¾‹(ä¸æ¨èä½¿ç”¨,ä¼šæœ‰ç¼–è¯‘è­¦å‘Š):</span></span><br><span class="line">        Integer n1 = <span class="keyword">new</span> Integer(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(int)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        Integer n2 = Integer.valueOf(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(String)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        Integer n3 = Integer.valueOf(<span class="string">"100"</span>);</span><br><span class="line">        System.out.println(n3.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Auto-Boxing"><a class="header-anchor" href="#Auto-Boxing">Â¶</a>Auto Boxing</h2>
<p>Javaç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åœ¨intå’ŒIntegerä¹‹é—´è½¬å‹(è‡ªåŠ¨åŒ…è£…ï¼Œè‡ªåŠ¨æ‹†ç®±)ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†intå˜ä¸ºIntegerèµ‹å€¼ï¼šauto boxing</span></span><br><span class="line">Integer n = <span class="number">100</span>; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.valueOf(int)</span></span><br><span class="line"><span class="keyword">int</span> x = n; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.intValue()</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è£…ç®±å’Œæ‹†ç®±ä¼šå½±å“ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºç¼–è¯‘åçš„classä»£ç æ˜¯ä¸¥æ ¼åŒºåˆ†åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„ã€‚</li>
<li>è‡ªåŠ¨æ‹†ç®±æ‰§è¡Œæ—¶å¯èƒ½ä¼šæŠ¥NullPointerExceptionã€‚å°†nullå€¼çš„Integerèµ‹å€¼ç»™intã€‚</li>
</ul>
<h2 id="æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»"><a class="header-anchor" href="#æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»">Â¶</a>æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»</h2>
<p>ä¸€æ—¦åˆ›å»ºäº†Integer()ç±»å‹å°±æ˜¯ç”¨ä¸å˜çš„ã€‚Integerå¿…é¡»ç”¨equals()æ¯”è¾ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer x = <span class="number">127</span>;</span><br><span class="line">        Integer y = <span class="number">127</span>;</span><br><span class="line">        Integer m = <span class="number">99999</span>;</span><br><span class="line">        Integer n = <span class="number">99999</span>;</span><br><span class="line">        System.out.println(<span class="string">"x == y: "</span> + (x==y)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">"m == n: "</span> + (m==n)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(<span class="string">"x.equals(y): "</span> + x.equals(y)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">"m.equals(n): "</span> + m.equals(n)); <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºIntegeræ˜¯ä¸å˜ç±»ï¼Œç¼–è¯‘å™¨æŠŠInteger x = 127;è‡ªåŠ¨å˜ä¸ºInteger x = Integer.valueOf(127);ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒInteger.valueOf()å¯¹äºè¾ƒå°çš„æ•°ï¼Œå§‹ç»ˆè¿”å›ç›¸åŒçš„å®ä¾‹ï¼Œå› æ­¤ï¼Œ==æ¯”è¾ƒâ€œæ°å¥½â€ä¸ºtrueï¼Œä½†æˆ‘ä»¬ç»ä¸èƒ½å› ä¸ºJavaæ ‡å‡†åº“çš„Integerå†…éƒ¨æœ‰ç¼“å­˜ä¼˜åŒ–å°±ç”¨==æ¯”è¾ƒï¼Œå¿…é¡»ç”¨equals()æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªIntegerã€‚<br>
æ–¹æ³•1ï¼šInteger n = new Integer(100);<br>
æ–¹æ³•2ï¼šInteger n = Integer.valueOf(100);</p>
<ul>
<li>æ–¹æ³•2æ›´å¥½ï¼ŒInteger.valueOf()å°±æ˜¯é™æ€å·¥å‚æ–¹æ³•ï¼Œå®ƒå°½å¯èƒ½åœ°è¿”å›ç¼“å­˜çš„å®ä¾‹ä»¥èŠ‚çœå†…å­˜ã€‚</li>
<li>åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œå°½é‡ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨newæ“ä½œç¬¦ã€‚</li>
</ul>
<h2 id="è¿›åˆ¶è½¬æ¢"><a class="header-anchor" href="#è¿›åˆ¶è½¬æ¢">Â¶</a>è¿›åˆ¶è½¬æ¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Integerå°†Stringè§£ææˆæ•´æ•°</span></span><br><span class="line"><span class="keyword">int</span> x1 = Integer.parseInt(<span class="string">"100"</span>); <span class="comment">// 100</span></span><br><span class="line"><span class="keyword">int</span> x2 = Integer.parseInt(<span class="string">"100"</span>, <span class="number">16</span>); <span class="comment">// 256,å› ä¸ºæŒ‰16è¿›åˆ¶è§£æ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ•´æ•°æ ¼å¼åŒ–æˆç‰¹å®šå­—ç¬¦</span></span><br><span class="line">```java</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>)); <span class="comment">// "100",è¡¨ç¤ºä¸º10è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>, <span class="number">36</span>)); <span class="comment">// "2s",è¡¨ç¤ºä¸º36è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toHexString(<span class="number">100</span>)); <span class="comment">// "64",è¡¨ç¤ºä¸º16è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toOctalString(<span class="number">100</span>)); <span class="comment">// "144",è¡¨ç¤ºä¸º8è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toBinaryString(<span class="number">100</span>)); <span class="comment">// "1100100",è¡¨ç¤ºä¸º2è¿›åˆ¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜åœ¨ï¼Œæ¯”å¦‚intæ˜¯4å­—èŠ‚äºŒè¿›åˆ¶ã€‚<br>
System.out.println(n);æ˜¯ä¾é æ ¸å¿ƒåº“è‡ªåŠ¨æŠŠæ•´æ•°æ ¼å¼åŒ–ä¸º10è¿›åˆ¶è¾“å‡ºå¹¶æ˜¾ç¤ºã€‚</p>
<ul>
<li>ç¨‹åºè®¾è®¡çš„é‡è¦åŸåˆ™ï¼š å­˜å‚¨å’Œæ˜¾ç¤ºç›¸åˆ†ç¦»</li>
<li>æ‰€æœ‰çš„æ•´æ•°å’Œæµ®ç‚¹æ•°çš„åŒ…è£…ç±»å‹éƒ½ç»§æ‰¿è‡ªNumberï¼Œå› æ­¤ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç›´æ¥é€šè¿‡åŒ…è£…ç±»å‹è·å–å„ç§åŸºæœ¬ç±»å‹ã€‚</li>
</ul>
<h2 id="æ— ç¬¦å·æ•´å‹"><a class="header-anchor" href="#æ— ç¬¦å·æ•´å‹">Â¶</a>æ— ç¬¦å·æ•´å‹</h2>
<h2 id="ï¿¼25-è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚"><a class="header-anchor" href="#ï¿¼25-è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†byteè½¬ä¸ºæ— ç¬¦å·int</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span> x = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">byte</span> y = <span class="number">127</span>;</span><br><span class="line">        System.out.println(Byte.toUnsignedInt(x)); <span class="comment">// 255</span></span><br><span class="line">        System.out.println(Byte.toUnsignedInt(y)); <span class="comment">// 127</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>
è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚</h2>
<h1>JavaBean</h1>
<ul>
<li>classä¸­ï¼Œä¸€èˆ¬privateå®šä¹‰å­—æ®µï¼Œpublicæ–¹æ³•è®¿é—®å­—æ®µã€‚å¦‚æœclassçš„å±æ€§(property)è¯»(getter)å†™(setter)æ–¹æ³•æ»¡è¶³ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Type <span class="title">getXyz</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// å†™æ–¹æ³•:</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setXyz</span><span class="params">(Type value)</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§classå³ä¸ºJavaBeanã€‚</p>
<ul>
<li>booleanå­—æ®µæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„è¯»æ–¹æ³•ä¸€èˆ¬å‘½åä¸ºisXyz()ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isChild</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// å†™æ–¹æ³•:</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChild</span><span class="params">(<span class="keyword">boolean</span> value)</span></span></span><br></pre></td></tr></table></figure>
<p>åªæœ‰setterç§°ä¸ºï¼ˆwrite-onlyï¼‰ï¼Œåªæœ‰getterç§°ä¸ºï¼ˆread-onlyï¼‰ã€‚</p>
<ul>
<li>ä½¿ç”¨Introspector.getBeanInfo()å¯ä»¥è·å–å±æ€§åˆ—è¡¨ã€‚</li>
</ul>
<h2 id="ï¿¼28"><a class="header-anchor" href="#ï¿¼28">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.beans.*;</span><br></pre></td></tr></table></figure></h2>
<h1>æšä¸¾ç±»</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Weekdays&#123;</span><br><span class="line">    SUN, MON, TUE, WED, THU, FRI, SAT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æšä¸¾ç±»æ—¶ï¼Œç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦åœ¨æšä¸¾çš„é›†åˆä¸­ã€‚</p>
<ul>
<li>å¯ä»¥æ£€æŸ¥å‡ºç±»å‹</li>
<li>ä¸å¯ä»¥å¼•ç”¨éæšä¸¾ç±»å‹çš„å€¼</li>
<li>ä¸åŒç±»å‹çš„æšä¸¾ä¸èƒ½äº’ç›¸æ¯”è¾ƒæˆ–è€…èµ‹å€¼</li>
</ul>
<h3 id="enumçš„æ¯”è¾ƒ"><a class="header-anchor" href="#enumçš„æ¯”è¾ƒ">Â¶</a>enumçš„æ¯”è¾ƒ</h3>
<p>å¼•ç”¨ç±»å‹åªèƒ½ç”¨equals()ï¼Œä½†æ˜¯enumå¯ä»¥ç”¨==ï¼Œå› ä¸ºenumçš„æ¯ä¸€ä¸ªå¸¸é‡åœ¨JVMåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<h3 id="enumç±»å‹"><a class="header-anchor" href="#enumç±»å‹">Â¶</a>enumç±»å‹</h3>
<ul>
<li>enumç»§æ‰¿è‡ªJava.lang.Enumï¼Œä¸”æ— æ³•è¢«ç»§æ‰¿ã€‚</li>
<li>æ— æ³•é€šè¿‡newåˆ›å»ºenumçš„å®ä¾‹</li>
<li>enumå¯ä»¥ç”¨switch</li>
</ul>
<h3 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">Â¶</a>æ–¹æ³•</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å¸¸é‡å</span></span><br><span class="line">String s = Weekday.SUN.name(); <span class="comment">// "SUN"</span></span><br><span class="line"><span class="comment">//è¿”å›é¡ºåº</span></span><br><span class="line"><span class="keyword">int</span> n = Weekday.MON.ordinal(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç»™æšä¸¾ç±»å‹æ·»åŠ å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Weekday day = Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day.dayValue == <span class="number">6</span> || day.dayValue == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Work at home!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Work at office!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> Weekday &#123;</span><br><span class="line">    MON(<span class="number">1</span>), TUE(<span class="number">2</span>), WED(<span class="number">3</span>), THU(<span class="number">4</span>), FRI(<span class="number">5</span>), SAT(<span class="number">6</span>), SUN(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> dayValue;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Weekday</span><span class="params">(<span class="keyword">int</span> dayValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dayValue = dayValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è¦†å†™æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Weekday day = Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day.dayValue == <span class="number">6</span> || day.dayValue == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at home!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at office!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Weekday &#123;</span><br><span class="line">    MON(<span class="number">1</span>, <span class="string">"æ˜ŸæœŸä¸€"</span>), TUE(<span class="number">2</span>, <span class="string">"æ˜ŸæœŸäºŒ"</span>), WED(<span class="number">3</span>, <span class="string">"æ˜ŸæœŸä¸‰"</span>), THU(<span class="number">4</span>, <span class="string">"æ˜ŸæœŸå››"</span>), FRI(<span class="number">5</span>, <span class="string">"æ˜ŸæœŸäº”"</span>), SAT(<span class="number">6</span>, <span class="string">"æ˜ŸæœŸå…­"</span>), SUN(<span class="number">0</span>, <span class="string">"æ˜ŸæœŸæ—¥"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> dayValue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String chinese;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Weekday</span><span class="params">(<span class="keyword">int</span> dayValue, String chinese)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dayValue = dayValue;</span><br><span class="line">        <span class="keyword">this</span>.chinese = chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.chinese;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><b>æ³¨æ„ï¼Œåˆ¤æ–­æšä¸¾å¸¸é‡çš„åå­—ä¸€å®šè¦ç”¨name()ï¼Œä¸å¯ä»¥ç”¨toString()</b></p>
<h3 id="Switch"><a class="header-anchor" href="#Switch">Â¶</a>Switch</h3>
<h2 id="ï¿¼33-åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚"><a class="header-anchor" href="#ï¿¼33-åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(day) &#123;</span><br><span class="line">        <span class="keyword">case</span> MON:</span><br><span class="line">        <span class="keyword">case</span> TUE:</span><br><span class="line">        <span class="keyword">case</span> WED:</span><br><span class="line">        <span class="keyword">case</span> THU:</span><br><span class="line">        <span class="keyword">case</span> FRI:</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at office!"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SAT:</span><br><span class="line">        <span class="keyword">case</span> SUN:</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at home!"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"cannot process "</span> + day);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><br>
åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚</h2>
<h1>BigInteger</h1>
<p>Cpuæœ€å¤§çš„èŒƒå›´æ˜¯64ä½longï¼Œå¯ä»¥é€šè¿‡CpuæŒ‡ä»¤ç›´æ¥è®¡ç®—ã€‚<br>
è¶…è¿‡longçš„èŒƒå›´ï¼Œç”¨java.math.BigIntegerç±»å‹ï¼Œå…¶å†…éƒ¨ç”¨ä¸€ä¸ªint[]æ¨¡æ‹Ÿéå¸¸å¤§çš„æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">BigInteger bi = <span class="keyword">new</span> BigInteger(<span class="string">"1234567890"</span>);</span><br><span class="line">System.out.println(bi.pow(<span class="number">5</span>)); <span class="comment">// 2867971860299718107233761438093672048294900000</span></span><br><span class="line"><span class="comment">//è¿ç®—æ—¶</span></span><br><span class="line">BigInteger i1 = <span class="keyword">new</span> BigInteger(<span class="string">"1234567890"</span>);</span><br><span class="line">BigInteger i2 = <span class="keyword">new</span> BigInteger(<span class="string">"12345678901234567890"</span>);</span><br><span class="line">BigInteger sum = i1.add(i2); <span class="comment">// 12345678902469135780</span></span><br><span class="line"><span class="comment">//è½¬æ¢ç±»å‹</span></span><br><span class="line">BigInteger i = <span class="keyword">new</span> BigInteger(<span class="string">"123456789000"</span>);</span><br><span class="line">System.out.println(i.longValue()); <span class="comment">// 123456789000</span></span><br><span class="line">System.out.println(i.multiply(i).longValueExact()); <span class="comment">// java.lang.ArithmeticException: BigInteger out of long range</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¹Ÿæ˜¯ä¸å˜ç±»ï¼Œç»§æ‰¿è‡ªnumberã€‚<br>
è½¬æ¢ä¸ºbyteï¼šbyteValue()<br>
è½¬æ¢ä¸ºshortï¼šshortValue()<br>
è½¬æ¢ä¸ºintï¼šintValue()<br>
è½¬æ¢ä¸ºlongï¼šlongValue()<br>
è½¬æ¢ä¸ºfloatï¼šfloatValue()<br>
è½¬æ¢ä¸ºdoubleï¼šdoubleValue()</p>
<h2 id="BigDecimal"><a class="header-anchor" href="#BigDecimal">Â¶</a>BigDecimal</h2>
<h2 id="ç”¨scale-è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0-ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚"><a class="header-anchor" href="#ç”¨scale-è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0-ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚">Â¶</a>ç”¨scale()è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0.<br>
ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚<br>
BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚</h2>
<h1>å¸¸ç”¨å·¥å…·ç±»</h1>
<h2 id="math"><a class="header-anchor" href="#math">Â¶</a>math</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ±‚ç»å¯¹å€¼</span></span><br><span class="line">Math.abs(-<span class="number">100</span>)</span><br><span class="line"><span class="comment">//å–æœ€å¤§æœ€å°å€¼</span></span><br><span class="line">Math.max(<span class="number">100</span>, <span class="number">99</span>); <span class="comment">// 100</span></span><br><span class="line">Math.min(<span class="number">1.2</span>, <span class="number">2.3</span>); <span class="comment">// 1.2</span></span><br><span class="line"><span class="comment">//è®¡ç®—næ¬¡æ–¹</span></span><br><span class="line">Math.pow(<span class="number">2</span>, <span class="number">10</span>); <span class="comment">// 2çš„10æ¬¡æ–¹=1024</span></span><br><span class="line"><span class="comment">//è®¡ç®—æ ¹å·</span></span><br><span class="line">Math.sqrt(<span class="number">2</span>); <span class="comment">// 1.414...</span></span><br><span class="line"><span class="comment">//è®¡ç®—ä»¥eä¸ºåº•çš„å¯¹æ•°</span></span><br><span class="line">Math.log(<span class="number">4</span>); <span class="comment">// 1.386...</span></span><br><span class="line"><span class="comment">//ä»¥10ä¸ºåº•</span></span><br><span class="line">Math.log10(<span class="number">100</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">//ä¸‰è§’å‡½æ•°</span></span><br><span class="line">Math.sin(<span class="number">3.14</span>); <span class="comment">// 0.00159...</span></span><br><span class="line">Math.cos(<span class="number">3.14</span>); <span class="comment">// -0.9999...</span></span><br><span class="line">Math.tan(<span class="number">3.14</span>); <span class="comment">// -0.0015...</span></span><br><span class="line">Math.asin(<span class="number">1.0</span>); <span class="comment">// 1.57079...</span></span><br><span class="line">Math.acos(<span class="number">1.0</span>); <span class="comment">// 0.0</span></span><br><span class="line"><span class="comment">//æ•°å­¦å¸¸é‡</span></span><br><span class="line"><span class="keyword">double</span> pi = Math.PI; <span class="comment">// 3.14159...</span></span><br><span class="line"><span class="keyword">double</span> e = Math.E; <span class="comment">// 2.7182818...</span></span><br><span class="line">Math.sin(Math.PI / <span class="number">6</span>); <span class="comment">// sin(Ï€/6) = 0.5</span></span><br><span class="line"><span class="comment">//éšæœºæ•°</span></span><br><span class="line">Math.random();</span><br><span class="line"><span class="comment">//[Max,Minï¼‰èŒƒå›´çš„éšæœºæ•°</span></span><br><span class="line"><span class="comment">// åŒºé—´åœ¨[MIN, MAX)çš„éšæœºæ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> x = Math.random(); <span class="comment">// xçš„èŒƒå›´æ˜¯[0,1)</span></span><br><span class="line">        <span class="keyword">double</span> min = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">double</span> max = <span class="number">50</span>;</span><br><span class="line">        <span class="keyword">double</span> y = x * (max - min) + min; <span class="comment">// yçš„èŒƒå›´æ˜¯[10,50)</span></span><br><span class="line">        <span class="keyword">long</span> n = (<span class="keyword">long</span>) y; <span class="comment">// nçš„èŒƒå›´æ˜¯[10,50)çš„æ•´æ•°</span></span><br><span class="line">        System.out.println(y);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Random"><a class="header-anchor" href="#Random">Â¶</a>Random</h2>
<p>åˆ›å»ºä¼ªéšæœºæ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾å®šç§å­</span></span><br><span class="line">Random r = <span class="keyword">new</span> Random(<span class="number">1234</span>);</span><br><span class="line">r.nextInt(); <span class="comment">// 2071575453,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextInt(<span class="number">10</span>); <span class="comment">// 5,ç”Ÿæˆä¸€ä¸ª[0,10)ä¹‹é—´çš„int</span></span><br><span class="line">r.nextLong(); <span class="comment">// 8811649292570369305,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextFloat(); <span class="comment">// 0.54335...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„float</span></span><br><span class="line">r.nextDouble(); <span class="comment">// 0.3716...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„double</span></span><br></pre></td></tr></table></figure>
<p>Math.random()å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨äº†Randomç±»</p>
<h2 id="secureRandom"><a class="header-anchor" href="#secureRandom">Â¶</a>secureRandom</h2>
<p>çœŸéšæœºæ•°ï¼Œå®‰å…¨éšæœºæ•°ã€‚SecureRandomçš„å®‰å…¨æ€§æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„å®‰å…¨çš„éšæœºç§å­æ¥ç”Ÿæˆéšæœºæ•°ã€‚è¿™ä¸ªç§å­æ˜¯é€šè¿‡CPUçš„çƒ­å™ªå£°ã€è¯»å†™ç£ç›˜çš„å­—èŠ‚ã€ç½‘ç»œæµé‡ç­‰å„ç§éšæœºäº‹ä»¶äº§ç”Ÿçš„â€œç†µâ€ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaé¢å‘å¯¹è±¡åŸºç¡€</title>
    <url>/2020/02/29/Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<pre><code>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæ²¡æœ‰å¯¹è±¡ï¼Œæ€ä¹ˆç¼–ç¨‹ï¼Ÿï¼ŸğŸ¤”
é¡ºæ‰‹æŠŠé¢å‘æŠ½è±¡ï¼Œé¢å‘æ¥å£ç»™å­¦äº†ã€‚
</code></pre>
<a id="more"></a>
<h2 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">Â¶</a>æ–¹æ³•</h2>
<h3 id="private"><a class="header-anchor" href="#private">Â¶</a>private</h3>
<ul>
<li>privateä¿®é¥°fieldå¯ä»¥æ‹’ç»å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å†…éƒ¨æ–¹æ³•æ¥é—´æ¥ä¿®æ”¹field</li>
<li>privateä¿®é¥°methodåˆ™æ‹’ç»å¤–éƒ¨è°ƒç”¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å†…éƒ¨æ–¹æ³•æ¥è°ƒç”¨</li>
</ul>
<h3 id="this"><a class="header-anchor" href="#this">Â¶</a>this</h3>
<p>éšå¼çš„å˜é‡ï¼Œé€šè¿‡this.fieldæ¥è®¿é—®å½“å‰instanceçš„fieldã€‚</p>
<h3 id="å¯å˜å‚æ•°"><a class="header-anchor" href="#å¯å˜å‚æ•°">Â¶</a>å¯å˜å‚æ•°</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String[] name;</span><br><span class="line">    <span class="comment">//String ... ç›¸å½“äºæ•°ç»„ç±»å‹</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String... name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Hello c = <span class="keyword">new</span> Hello();</span><br><span class="line">        <span class="comment">//æ•°ç»„ç±»å‹åˆ™è¦å…ˆå®šä¹‰å¥½ï¼Œå†ä¼ å…¥å‚æ•°</span></span><br><span class="line">		<span class="comment">//String[] name = &#123;"asdf", "casdf"&#125;;</span></span><br><span class="line">        <span class="comment">//å¯å˜å‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’å‚æ•°</span></span><br><span class="line">		c.setName(<span class="string">"asdf"</span>, <span class="string">"casdf"</span>); </span><br><span class="line">		System.out.println(Arrays.toString(c.name));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è°ƒç”¨æ–¹å¯ä»¥è°ƒç”¨nullï¼Œä½†æ˜¯å¯å˜å‚æ•°ä¸å¯ä»¥ï¼Œå› ä¸ºä¼ å…¥0ä¸ªå‚æ•°æ—¶ï¼Œå®é™…ä¼ å…¥çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚</li>
</ul>
<h3 id="å‚æ•°ç»‘å®š"><a class="header-anchor" href="#å‚æ•°ç»‘å®š">Â¶</a>å‚æ•°ç»‘å®š</h3>
<h4 id="åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’"><a class="header-anchor" href="#åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’">Â¶</a>åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’</h4>
<p>ä¼ é€’çš„æ˜¯æ•°æ®çš„æ‹·è´ã€‚åŒæ–¹å„è‡ªçš„åç»­ä¿®æ”¹ï¼Œäº’ä¸å½±å“ã€‚</p>
<h4 id="å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’"><a class="header-anchor" href="#å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’">Â¶</a>å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’</h4>
<ol>
<li>ä¼ é€’çš„æ˜¯å¯¹è±¡åœ°å€çš„æ‹·è´ã€‚Javaçš„å‚æ•°æ˜¯ä»¥å€¼çš„å½¢å¼ä¼ å…¥æ–¹æ³•ä¸­ï¼Œè€Œä¸æ˜¯å¼•ç”¨ä¼ é€’ã€‚åœ¨å°†ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å¯¹è±¡çš„åœ°å€ä»¥å€¼çš„æ–¹å¼ä¼ é€’åˆ°å½¢å‚ä¸­ã€‚åœ¨æ–¹æ³•ä¸­æ”¹å˜å¯¹è±¡çš„å­—æ®µå€¼ä¼šæ”¹å˜åŸå¯¹è±¡è¯¥å­—æ®µå€¼ï¼Œå› ä¸ºå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>ä½†æ˜¯åœ¨æ–¹æ³•ä¸­å°†æŒ‡é’ˆå¼•ç”¨äº†å…¶å®ƒå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶æ–¹æ³•é‡Œå’Œæ–¹æ³•å¤–çš„ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒçš„å¯¹è±¡ï¼Œåœ¨ä¸€ä¸ªæŒ‡é’ˆæ”¹å˜å…¶æ‰€æŒ‡å‘å¯¹è±¡çš„å†…å®¹å¯¹å¦ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡æ²¡æœ‰å½±å“.</li>
</ol>
<h2 id="ï¿¼1"><a class="header-anchor" href="#ï¿¼1">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        String bob = <span class="string">"Bob"</span>;</span><br><span class="line">        p.setName(bob); <span class="comment">// ä¼ å…¥bobå˜é‡</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Bob"</span></span><br><span class="line">        bob = <span class="string">"Alice"</span>; <span class="comment">// bobæ”¹åä¸ºAlice</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Bob"è¿˜æ˜¯"Alice"?</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹"><a class="header-anchor" href="#æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹">Â¶</a>æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹</h2>
<pre><code>æ„é€ æ–¹æ³•çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œåœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¹Ÿå¯ä»¥ç¼–å†™ä»»æ„è¯­å¥ã€‚ä½†æ˜¯ï¼Œå’Œæ™®é€šæ–¹æ³•ç›¸æ¯”ï¼Œæ„é€ æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ˆä¹Ÿæ²¡æœ‰voidï¼‰ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå¿…é¡»ç”¨newæ“ä½œç¬¦ã€‚
</code></pre>
<ul>
<li>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºæ„é€ æ–¹æ³•ã€‚è‡ªå®šä¹‰äº†å°±ä¸ä¼šå†ç”Ÿæˆã€‚</li>
<li>æ²¡æœ‰åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–fieldæ—¶ï¼Œå¼•ç”¨ç±»å‹çš„fieldé»˜è®¤æ˜¯nullï¼Œæ•°å€¼ç±»å‹çš„fieldç”¨é»˜è®¤å€¼ï¼Œintç±»å‹é»˜è®¤å€¼æ˜¯0ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤å€¼æ˜¯false</li>
</ul>
<h3 id="å¤šæ„é€ æ–¹æ³•"><a class="header-anchor" href="#å¤šæ„é€ æ–¹æ³•">Â¶</a>å¤šæ„é€ æ–¹æ³•</h3>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨åŒ¹é…ã€‚æ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(name, <span class="number">18</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">"Unnamed"</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•é‡è½½overload"><a class="header-anchor" href="#æ–¹æ³•é‡è½½overload">Â¶</a>æ–¹æ³•é‡è½½overload</h3>
<pre><code>åŠŸèƒ½ç±»ä¼¼ï¼Œæ–¹æ³•åç›¸åŒï¼Œå‚æ•°ä¸åŒã€‚
</code></pre>
<hr>
<h2 id="ç»§æ‰¿"><a class="header-anchor" href="#ç»§æ‰¿">Â¶</a>ç»§æ‰¿</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”¨extendså…³é”®å­—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸è¦é‡å¤nameå’Œageå­—æ®µ/æ–¹æ³•,</span></span><br><span class="line">    <span class="comment">// åªéœ€è¦å®šä¹‰æ–°å¢scoreå­—æ®µ/æ–¹æ³•:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123; â€¦ &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">int</span> score)</span> </span>&#123; â€¦ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Personï¼šè¶…ç±»ï¼ˆsuper classï¼‰ï¼Œçˆ¶ç±»ï¼ˆparent classï¼‰ï¼ŒåŸºç±»ï¼ˆbase classï¼‰ã€‚<br>
Studentï¼šå­ç±»ï¼ˆsubclassï¼‰ï¼Œæ‰©å±•ç±»ï¼ˆextended classï¼‰ã€‚</p>
<h3 id="ç»§æ‰¿æ ‘"><a class="header-anchor" href="#ç»§æ‰¿æ ‘">Â¶</a>ç»§æ‰¿æ ‘</h3>
<p>åœ¨Javaä¸­ï¼Œæ²¡æœ‰æ˜ç¡®å†™extendsçš„ç±»éƒ½ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šextends Objectã€‚ä¸€ä¸ªå­ç±»è‡ªèƒ½ç»§æ‰¿è‡ªä¸€ä¸ªçˆ¶ç±»ã€‚</p>
<h3 id="è®¿é—®æƒé™"><a class="header-anchor" href="#è®¿é—®æƒé™">Â¶</a>è®¿é—®æƒé™</h3>
<p>å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„private fieldså’Œmethodsã€‚<br>
protectedå¯ä»¥å­—æ®µå’Œæ–¹æ³•çš„è®¿é—®æƒé™æ§åˆ¶åœ¨ç»§æ‰¿æ ‘å†…éƒ¨ï¼Œä¸€ä¸ªprotectedå­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å…¶å­ç±»ï¼Œä»¥åŠå­ç±»çš„å­ç±»æ‰€è®¿é—®ã€‚</p>
<h3 id="super"><a class="header-anchor" href="#super">Â¶</a>super</h3>
<ul>
<li>å­ç±»å¼•ç”¨çˆ¶ç±»çš„fieldsæ—¶ç”¨ã€‚</li>
<li>å¦‚æœçˆ¶ç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼ˆçˆ¶ç±»æœ‰è‡ªå®šä¹‰æ„é€ æ–¹æ³•ï¼‰ï¼Œå­ç±»å°±å¿…é¡»æ˜¾å¼è°ƒç”¨super()å¹¶ç»™å‡ºå‚æ•°ä»¥ä¾¿è®©ç¼–è¯‘å™¨å®šä½åˆ°çˆ¶ç±»çš„ä¸€ä¸ªåˆé€‚çš„æ„é€ æ–¹æ³•ã€‚</li>
<li>å­ç±»ä¸ä¼šç»§æ‰¿ä»»ä½•çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å­ç±»é»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç»§æ‰¿çš„ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">int</span> score)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, age); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è½¬å‹"><a class="header-anchor" href="#è½¬å‹">Â¶</a>è½¬å‹</h3>
<pre><code>å¼•ç”¨ç±»å‹çš„å£°æ˜å’Œå¯¹è±¡ç±»å‹å¯ä»¥ä¸åŒã€‚
å¯ä»¥upcastingä¸å¯ä»¥downcastingï¼Œå¯ä»¥å°†å­ç±»è½¬å‹æˆçˆ¶ç±»ï¼Œä¸å¯ä»¥å°†çˆ¶ç±»è½¬å‹æˆå­ç±»ï¼Œå¤šå‡ºæ¥çš„åŠŸèƒ½ä¸å¯èƒ½å‡­ç©ºå¢åŠ ã€‚
</code></pre>
<ul>
<li>è½¬å‹å¤±è´¥çš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºä¼šæŠ¥ClassCastExceptionã€‚</li>
<li>å¯ä»¥ç”¨instanceofå…ˆåˆ¤æ–­ï¼Œå…¶å®é™…ä¸Šåˆ¤æ–­ä¸€ä¸ªå˜é‡æ‰€æŒ‡å‘çš„å®ä¾‹æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹ï¼Œæˆ–è€…è¿™ä¸ªç±»å‹çš„å­ç±»ã€‚å¦‚æœä¸€ä¸ªå¼•ç”¨å˜é‡ä¸ºnullï¼Œé‚£ä¹ˆå¯¹ä»»ä½•instanceofçš„åˆ¤æ–­éƒ½ä¸ºfalse</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="keyword">if</span> (p <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰åˆ¤æ–­æˆåŠŸæ‰ä¼šå‘ä¸‹è½¬å‹:</span></span><br><span class="line">    Student s = (Student) p; <span class="comment">// ä¸€å®šä¼šæˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»§æ‰¿å’Œç»„åˆ"><a class="header-anchor" href="#ç»§æ‰¿å’Œç»„åˆ">Â¶</a>ç»§æ‰¿å’Œç»„åˆ</h3>
<p>studentç»§æ‰¿è‡ªpersonï¼Œå¯ä»¥æ‹¥æœ‰ä¸€ä¸ªbookå®ä¾‹ã€‚</p>
<h2 id="ï¿¼6"><a class="header-anchor" href="#ï¿¼6">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Book book;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="å¤šæ€"><a class="header-anchor" href="#å¤šæ€">Â¶</a>å¤šæ€</h2>
<h3 id="è¦†å†™override"><a class="header-anchor" href="#è¦†å†™override">Â¶</a>è¦†å†™override</h3>
<p>å­ç±»çš„æ–¹æ³•åï¼Œå‚æ•°ä¸çˆ¶ç±»çš„ç›¸åŒï¼Œè¿”å›å€¼ä¹Ÿç›¸åŒåˆ™æ˜¯overrideã€‚å¦åˆ™æ˜¯overloadã€‚@Overrideå¯ä»¥è®©ç¼–è¯‘å™¨å¸®åŠ©æ£€æŸ¥æ˜¯å¦è¿›è¡Œäº†æ­£ç¡®çš„è¦†å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// Compile error!</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String s)</span> </span>&#123;&#125; <span class="comment">//å‚æ•°åä¸åŒï¼Œoverload</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>é‚£ä¹ˆï¼Œä¸€ä¸ªå®é™…ç±»å‹ä¸ºStudentï¼Œå¼•ç”¨ç±»å‹ä¸ºPersonçš„å˜é‡ï¼Œè°ƒç”¨å…¶run()æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯Personè¿˜æ˜¯Studentçš„run()æ–¹æ³•ï¼Ÿ
è°ƒç”¨çš„ä¸ºå®é™…ç±»å‹Studentçš„æ–¹æ³•ã€‚
</code></pre>
<h3 id="å¤šæ€-v2"><a class="header-anchor" href="#å¤šæ€-v2">Â¶</a>å¤šæ€</h3>
<pre><code>å¯¹äºå¤šæ€ï¼Œå¯ä»¥æ€»ç»“å®ƒä¸ºï¼š
</code></pre>
<p>ä¸€ã€ä½¿ç”¨çˆ¶ç±»ç±»å‹çš„å¼•ç”¨æŒ‡å‘å­ç±»çš„å¯¹è±¡ï¼›<br>
ã€€ã€€äºŒã€è¯¥å¼•ç”¨åªèƒ½è°ƒç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å’Œå˜é‡ï¼›<br>
ã€€ã€€ä¸‰ã€å¦‚æœå­ç±»ä¸­é‡å†™äº†çˆ¶ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå°†ä¼šè°ƒç”¨å­ç±»ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼›ï¼ˆåŠ¨æ€è¿æ¥ã€åŠ¨æ€è°ƒç”¨ï¼‰<br>
ã€€ã€€å››ã€å˜é‡ä¸èƒ½è¢«é‡å†™ï¼ˆè¦†ç›–ï¼‰ï¼Œâ€é‡å†™â€œçš„æ¦‚å¿µåªé’ˆå¯¹æ–¹æ³•ï¼Œå¦‚æœåœ¨å­ç±»ä¸­â€é‡å†™â€œäº†çˆ¶ç±»ä¸­çš„å˜é‡ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç»™ä¸€ä¸ªæœ‰æ™®é€šæ”¶å…¥ã€å·¥èµ„æ”¶å…¥å’Œäº«å—å›½åŠ¡é™¢ç‰¹æ®Šæ´¥è´´çš„å°ä¼™ä¼´ç®—ç¨:</span></span><br><span class="line">        Income[] incomes = <span class="keyword">new</span> Income[] &#123;</span><br><span class="line">            <span class="keyword">new</span> Income(<span class="number">3000</span>),</span><br><span class="line">            <span class="keyword">new</span> Salary(<span class="number">7500</span>),</span><br><span class="line">            <span class="keyword">new</span> StateCouncilSpecialAllowance(<span class="number">15000</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(totalTax(incomes));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">totalTax</span><span class="params">(Income... incomes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Income income: incomes) &#123;</span><br><span class="line">            total = total + income.getTax();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">double</span> income;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Income</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.income = income;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> income * <span class="number">0.1</span>; <span class="comment">// ç¨ç‡10%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salary</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Salary</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (income &lt;= <span class="number">5000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (income - <span class="number">5000</span>) * <span class="number">0.2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateCouncilSpecialAllowance</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StateCouncilSpecialAllowance</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¦†å†™Objectæ–¹æ³•"><a class="header-anchor" href="#è¦†å†™Objectæ–¹æ³•">Â¶</a>è¦†å†™Objectæ–¹æ³•</h3>
<p>objectç±»ä¸­é‡è¦çš„æ–¹æ³•ï¼š<br>
.toString(): æŠŠinstanceè¾“å‡ºä¸ºString();<br>
.equals(): åˆ¤æ–­ä¸¤ä¸ªinstancesæ˜¯å¦é€»è¾‘ç›¸ç­‰;<br>
.hashCode(): è®¡ç®—ä¸€ä¸ªinstanceçš„å“ˆå¸Œå€¼;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæ›´æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person:name="</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“ä¸”ä»…å½“oä¸ºPersonç±»å‹:</span></span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">            Person p = (Person) o;</span><br><span class="line">            <span class="comment">// å¹¶ä¸”nameå­—æ®µç›¸åŒæ—¶ï¼Œè¿”å›true:</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name.equals(p.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—hash:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨super"><a class="header-anchor" href="#è°ƒç”¨super">Â¶</a>è°ƒç”¨super</h3>
<p>åœ¨å­ç±»çš„è¦†å†™æ–¹æ³•ä¸­, è°ƒç”¨çˆ¶ç±»è¢«è¦†å†™çš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student extends Person &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„hello()æ–¹æ³•:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.hello() + <span class="string">"!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸é‡final"><a class="header-anchor" href="#å¸¸é‡final">Â¶</a>å¸¸é‡final</h3>
<p>çˆ¶ç±»çš„æ–¹æ³•ä¸å…è®¸overrideï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student extends Person &#123;</span><br><span class="line">    <span class="comment">// compile error: ä¸å…è®¸è¦†å†™</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>finalç”¨äºåˆå§‹åŒ–å€¼ï¼Œåˆ™è¿™ä¸ªå˜é‡ä¸å†å¯ä»¥ä¿®æ”¹ã€‚å¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•æˆ–è€…ä»£ç å—æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ï¿¼13"><a class="header-anchor" href="#ï¿¼13">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> abc;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œåˆ™ä¸å¯ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">        t = <span class="number">1</span>; <span class="comment">// error!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="æŠ½è±¡ç±»"><a class="header-anchor" href="#æŠ½è±¡ç±»">Â¶</a>æŠ½è±¡ç±»</h2>
<p>å¦‚æœçˆ¶ç±»çš„æ–¹æ³•æœ¬èº«ä¸éœ€è¦å®ç°ä»»ä½•åŠŸèƒ½ï¼Œä»…ä»…æ˜¯ä¸ºäº†å®šä¹‰æ–¹æ³•ç­¾åï¼Œç›®çš„æ˜¯è®©å­ç±»å»è¦†å†™å®ƒï¼Œåˆ™å¯ä»¥ç”¨abstractã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç±»ä¸­æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåˆ™è¿™ä¸ªç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œç¼–è¯‘å™¨ä¼šæ— æ³•ç¼–è¯‘è¿™ä¸ªç±»ã€‚é™¤épersonç±»ä¹Ÿå£°æ˜abstractã€‚</p>
<h3 id="æŠ½è±¡ç±»-v2"><a class="header-anchor" href="#æŠ½è±¡ç±»-v2">Â¶</a>æŠ½è±¡ç±»</h3>
<p>æŠ½è±¡ç±»æ— æ³•è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»çš„è®¾è®¡æœ¬èº«å°±æ˜¯è¢«ç»§æ‰¿ï¼ŒæŠ½è±¡ç±»å¼ºè¿«å­ç±»è¦†å†™å…¶å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Student();</span><br><span class="line">        p.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//abstractå£°æ˜</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Student.run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é¢å‘æŠ½è±¡ç¼–ç¨‹"><a class="header-anchor" href="#é¢å‘æŠ½è±¡ç¼–ç¨‹">Â¶</a>é¢å‘æŠ½è±¡ç¼–ç¨‹</h3>
<p>å°½é‡å¼•ç”¨é«˜å±‚ç±»å‹ï¼Œè€Œä¸å¼•ç”¨å­ç±»ã€‚</p>
<ul>
<li>ä¸Šå±‚ä»£ç åªå®šä¹‰è§„èŒƒï¼ˆä¾‹å¦‚ï¼šabstract class Personï¼‰ï¼›</li>
<li>ä¸éœ€è¦å­ç±»å°±å¯ä»¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆæ­£å¸¸ç¼–è¯‘ï¼‰ï¼›</li>
<li>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç”±ä¸åŒçš„å­ç±»å®ç°ï¼Œè°ƒç”¨è€…å¹¶ä¸å…³å¿ƒã€‚<br>
æŠ½è±¡æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯å®šä¹‰æ¥å£è§„èŒƒï¼šå³è§„å®šé«˜å±‚ç±»çš„æ¥å£ï¼Œä»è€Œä¿è¯æ‰€æœ‰å­ç±»éƒ½æœ‰ç›¸åŒçš„æ¥å£å®ç°</li>
</ul>
<hr>
<h1>æ¥å£</h1>
<pre><code>å¦‚æœä¸€ä¸ªæŠ½è±¡ç±»æ²¡æœ‰å­—æ®µï¼Œå…¨æ˜¯æŠ½è±¡çš„æ–¹æ³•ï¼Œåˆ™å¯ç”¨interfaceæ”¹å†™æˆæ¥å£ã€‚
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•é»˜è®¤éƒ½æ˜¯public abstractçš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ä¸éœ€è¦å†™å‡ºæ¥</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªclasså®ç°æ¥å£ï¼šç”¨implements(å®ç°)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">" run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šæ¥å£"><a class="header-anchor" href="#å¤šæ¥å£">Â¶</a>å¤šæ¥å£</h2>
<p>å¯ä»¥å®ç°å¤šä¸ªinterfaceï¼šæœ¬æ¥æ˜¯ä¸èƒ½ç»§æ‰¿å¤šä¸ªçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span>, <span class="title">Hello</span> </span>&#123; <span class="comment">// å®ç°äº†ä¸¤ä¸ªinterface</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¥å£ç»§æ‰¿"><a class="header-anchor" href="#æ¥å£ç»§æ‰¿">Â¶</a>æ¥å£ç»§æ‰¿</h2>
<p>ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€æ¥å£ï¼Œç”¨extendsã€‚</p>
<h2 id="ç»§æ‰¿å…³ç³»"><a class="header-anchor" href="#ç»§æ‰¿å…³ç³»">Â¶</a>ç»§æ‰¿å…³ç³»</h2>
<p>å……åˆ†çš„å¤ç”¨ä»£ç ï¼Œå‚è€ƒé›†åˆç±»å®šä¹‰çš„ä¸€ç»„æ¥å£ï¼š<br>
<img src="/.io//%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.png" alt="ç»§æ‰¿å…³ç³»"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ€»æ˜¯ç”¨æ›´æŠ½è±¡çš„ç±»æ¥å¼•ç”¨å®é™…ç±»å‹ã€‚</span></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList(); <span class="comment">// ç”¨Listæ¥å£å¼•ç”¨å…·ä½“å­ç±»çš„å®ä¾‹</span></span><br><span class="line">Collection coll = list; <span class="comment">// å‘ä¸Šè½¬å‹ä¸ºCollectionæ¥å£</span></span><br><span class="line">Iterable it = coll; <span class="comment">// å‘ä¸Šè½¬å‹ä¸ºIterableæ¥å£</span></span><br></pre></td></tr></table></figure>
<h2 id="defaultæ–¹æ³•"><a class="header-anchor" href="#defaultæ–¹æ³•">Â¶</a>defaultæ–¹æ³•</h2>
<p>å®ç°ç±»å¯ä»¥ä¸å¿…å®ç°defaultæ–¹æ³•ã€‚å…¶ç›®çš„ï¼š<br>
ç»™æ¥å£æ–°å¢ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä¼šæ¶‰åŠåˆ°ä¿®æ”¹å…¨éƒ¨å­ç±»ã€‚å¦‚æœæ–°å¢çš„æ˜¯defaultæ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å°±ä¸å¿…å…¨éƒ¨ä¿®æ”¹ï¼Œåªéœ€è¦åœ¨éœ€è¦è¦†å†™çš„åœ°æ–¹å»è¦†å†™æ–°å¢æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Student(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        p.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">" run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>defaultæ–¹æ³•å’ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚å› ä¸ºinterfaceæ²¡æœ‰å­—æ®µï¼Œdefaultæ–¹æ³•æ— æ³•è®¿é—®å­—æ®µï¼Œè€ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•å¯ä»¥è®¿é—®å®ä¾‹å­—æ®µã€‚</li>
</ul>
<hr>
<h1>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•</h1>
<pre><code>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•æ˜¯å±äºclassè€Œä¸æ˜¯intancesçš„ã€‚
</code></pre>
<h2 id="é™æ€å­—æ®µ"><a class="header-anchor" href="#é™æ€å­—æ®µ">Â¶</a>é™æ€å­—æ®µ</h2>
<p>é™æ€å­—æ®µæ˜¯åŒä¸€ä¸ªclassæ‰€æœ‰å®ä¾‹å…±äº«çš„ï¼Œå®ä¾‹ä¸­å¹¶æ²¡æœ‰é™æ€å­—æ®µï¼Œä¸æ¨èç”¨ å®ä¾‹å.é™æ€å­—æ®µ æ¥è®¿é—®ï¼Œå› ä¸ºç¼–è¯‘å™¨æ˜¯æ ¹æ®å®ä¾‹ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºç±»å.é™æ€å­—æ®µæ¥è®¿é—®é™æ€å¯¹è±¡ã€‚</p>
<h2 id="é™æ€æ–¹æ³•"><a class="header-anchor" href="#é™æ€æ–¹æ³•">Â¶</a>é™æ€æ–¹æ³•</h2>
<p>è°ƒç”¨å®ä¾‹æ–¹æ³•å¿…é¡»é€šè¿‡ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œè€Œè°ƒç”¨é™æ€æ–¹æ³•åˆ™ä¸éœ€è¦å®ä¾‹å˜é‡ï¼Œé€šè¿‡ç±»åå°±å¯ä»¥è°ƒç”¨ã€‚</p>
<h2 id="ç”¨é€”"><a class="header-anchor" href="#ç”¨é€”">Â¶</a>ç”¨é€”</h2>
<ol>
<li>é™æ€æ–¹æ³•ç»å¸¸ç”¨äºå·¥å…·ç±»ã€‚ä¾‹å¦‚ï¼š<br>
Arrays.sort()<br>
Math.random()</li>
<li>é™æ€æ–¹æ³•ä¹Ÿç»å¸¸ç”¨äºè¾…åŠ©æ–¹æ³•ã€‚æ³¨æ„åˆ°Javaç¨‹åºçš„å…¥å£main()ä¹Ÿæ˜¯é™æ€æ–¹æ³•ã€‚</li>
</ol>
<h2 id="æ¥å£çš„é™æ€å­—æ®µ"><a class="header-anchor" href="#æ¥å£çš„é™æ€å­—æ®µ">Â¶</a>æ¥å£çš„é™æ€å­—æ®µ</h2>
<p>interfaceæ˜¯å¯ä»¥æœ‰é™æ€å­—æ®µçš„ï¼Œå¹¶ä¸”é™æ€å­—æ®µå¿…é¡»ä¸ºfinalç±»å‹ï¼š</p>
<h2 id="ï¿¼21"><a class="header-anchor" href="#ï¿¼21">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//static + final</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MALE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FEMALE = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éƒ½å»æ‰ä¹Ÿå¯ä»¥ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¡¥ä¸Š</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Špublic statc final:</span></span><br><span class="line">    <span class="keyword">int</span> MALE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> FEMALE = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h1>åŒ…packages</h1>
<p>ä½¿ç”¨packageæ¥è§£å†³åå­—å†²çªã€‚JVMåªçœ‹å®Œæ•´ç±»åï¼Œå› æ­¤ï¼Œåªè¦åŒ…åä¸åŒï¼Œç±»å°±ä¸åŒã€‚</p>
<ul>
<li>åŒ…æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚java.utilå’Œjava.util.zipæ˜¯ä¸åŒçš„åŒ…ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•ç»§æ‰¿å…³ç³»ã€‚</li>
</ul>
<h2 id="åŒ…ä½œç”¨åŸŸ"><a class="header-anchor" href="#åŒ…ä½œç”¨åŸŸ">Â¶</a>åŒ…ä½œç”¨åŸŸ</h2>
<h2 id="åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚"><a class="header-anchor" href="#åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚">Â¶</a>åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚<br>
ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚</h2>
<h1>ä½œç”¨åŸŸ</h1>
<ul>
<li>public: fieldã€methodå¯ä»¥è¢«å…¶ä»–ç±»è®¿é—®ï¼Œå‰ææ˜¯é¦–å…ˆæœ‰è®¿é—®classçš„æƒé™ã€‚</li>
<li>private: è®¿é—®æƒé™è¢«é™å®šåœ¨classçš„å†…éƒ¨ï¼Œè€Œä¸”ä¸æ–¹æ³•å£°æ˜é¡ºåºæ— å…³ã€‚æ¨èæŠŠprivateæ–¹æ³•æ”¾åˆ°åé¢ã€‚Javaæ”¯æŒåµŒå¥—ç±»ï¼Œå¦‚æœä¸€ä¸ªç±»å†…éƒ¨è¿˜å®šä¹‰äº†åµŒå¥—ç±»ï¼Œé‚£ä¹ˆï¼ŒåµŒå¥—ç±»æ‹¥æœ‰è®¿é—®privateçš„æƒé™ã€‚</li>
<li>protectedï¼šä½œç”¨äºç»§æ‰¿å…³ç³»ã€‚å®šä¹‰ä¸ºprotectedçš„å­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œä»¥åŠå­ç±»çš„å­ç±»</li>
</ul>
<ul>
<li>ä¸€ä¸ª.javaæ–‡ä»¶åªèƒ½åŒ…å«ä¸€ä¸ªpublicç±»ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªépublicç±»ã€‚å¦‚æœæœ‰publicç±»ï¼Œæ–‡ä»¶åå¿…é¡»å’Œpublicç±»çš„åå­—ç›¸åŒã€‚</li>
</ul>
<hr>
<h1>classpathå’Œjar</h1>
<h2 id="classpath"><a class="header-anchor" href="#classpath">Â¶</a>classpath</h2>
<pre><code>JVMç”¨åˆ°çš„ç¯å¢ƒå˜é‡ï¼Œç”¨äºæœç´¢classæ–‡ä»¶çš„ç›®å½•ã€‚
è¦åœ¨JVMå¯åŠ¨æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ²¡æœ‰è®¾ç½®åˆ™é»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -cp .;C:\work\project1\bin;C:\shared abc.xyz.Hello</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸è¦æŠŠä»»ä½•Javaæ ¸å¿ƒåº“æ·»åŠ åˆ°classpathä¸­ï¼JVMæ ¹æœ¬ä¸ä¾èµ–classpathåŠ è½½æ ¸å¿ƒåº“ï¼</li>
</ul>
<h2 id="jar"><a class="header-anchor" href="#jar">Â¶</a>jar</h2>
<pre><code>æŠŠpackageç»„ç»‡çš„ç›®å½•å±‚çº§ï¼Œä»¥åŠå„ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬.classæ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼‰éƒ½æ‰“æˆä¸€ä¸ªjaræ–‡ä»¶.
</code></pre>
<p>MANIFEST.MFæ–‡ä»¶å¯ä»¥æä¾›jaråŒ…çš„ä¿¡æ¯ï¼Œå¦‚Main-Classï¼Œè¿™æ ·å¯ä»¥ç›´æ¥è¿è¡ŒjaråŒ…ã€‚</p>
<h2 id="ï¿¼23-MANIFEST-MFæ–‡ä»¶é‡Œé…ç½®classpath"><a class="header-anchor" href="#ï¿¼23-MANIFEST-MFæ–‡ä»¶é‡Œé…ç½®classpath">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar hello.jar</span><br></pre></td></tr></table></figure><br>
MANIFEST.MFæ–‡ä»¶é‡Œé…ç½®classpath.</h2>
<h1>æ¨¡å—</h1>
<p>JVMè‡ªå¸¦çš„Javaæ ‡å‡†åº“ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä»¥jaræ–‡ä»¶å½¢å¼å­˜æ”¾çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å«rt.jarã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå…¥é—¨</title>
    <url>/2020/02/28/java%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<p>Cloud computingè¦ç”¨åˆ°Javaï¼Œæ­£å¥½æ‰“ç®—å­¦ä¹ åç«¯å¼€å‘ï¼Œå°±ä»Javaå¼€å§‹å…¥é—¨ï¼Œæ…¢æ…¢å­¦ï¼Œæ…¢æ…¢æ›´æ–°,å…ˆå¼€ä¸ªå‘ã€‚</p>
<a id="more"></a>
<h1>åŸºæœ¬çŸ¥è¯†</h1>
<h2 id="ä»£ç å—è§„èŒƒï¼š"><a class="header-anchor" href="#ä»£ç å—è§„èŒƒï¼š">Â¶</a>ä»£ç å—è§„èŒƒï¼š</h2>
<ul>
<li>ç±»åé¦–å­—æ¯è¦å¤§å†™</li>
<li>public static void main(String[] args){} æ–¹æ³•æ˜¯å›ºå®šå…¥å£</li>
<li>æ–¹æ³•çš„ä»£ç æ¯ä¸€è¡Œéƒ½è¦ä»¥ï¼›ç»“å°¾</li>
<li>ç±»åå’Œæ–‡ä»¶åå¿…é¡»ä¿æŒä¸€è‡´</li>
<li>åŒºåˆ†å¤§å°å†™ï¼</li>
</ul>
<h2 id="è¿è¡ŒåŸç†ï¼š"><a class="header-anchor" href="#è¿è¡ŒåŸç†ï¼š">Â¶</a>è¿è¡ŒåŸç†ï¼š</h2>
<pre><code>javacç¼–è¯‘å™¨å…ˆæŠŠ.javaæ–‡ä»¶ç¼–è¯‘æˆ.classçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åå‘javaè™šæ‹Ÿæœºä¼ é€’ç±»åï¼ŒæŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ç„¶åè¿è¡Œã€‚
</code></pre>
<h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹">Â¶</a>åŸºæœ¬æ•°æ®ç±»å‹</h2>
<pre><code>æ•´æ•°ç±»å‹ï¼šbyte(ä¸€ä¸ªå­—èŠ‚)ï¼Œshortï¼ˆ2ï¼‰ï¼Œintï¼ˆ4ï¼‰ï¼Œlongï¼ˆ8ï¼‰
æµ®ç‚¹æ•°ç±»å‹ï¼šfloatï¼ˆfloatå‹åç¼€åŠ fï¼‰[æœ€å¤§å¯è¡¨ç¤º10^38]ï¼Œdouble[10^308]
å­—ç¬¦ç±»å‹ï¼šcharï¼ˆä½¿ç”¨å•å¼•å·ï¼‰
å¸ƒå°”ç±»å‹ï¼šboolean (åœ¨JVMé‡Œæ˜¯4å­—èŠ‚æ•´æ•°)
*å¸¸é‡*ï¼š ç±»å‹åå‰åŠ final, é¿å…é­”æœ¯æ•°å­—ï¼Œé€šå¸¸å…¨éƒ¨å¤§å†™
varå…³é”®å­—ï¼šç±»åå¤ªé•¿ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨åˆ¤æ–­å˜é‡ç±»å‹
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br></pre></td></tr></table></figure>
<ul>
<li>å˜é‡çš„ä½œç”¨åŸŸï¼š{}</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>; <span class="comment">// å˜é‡iä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">    ...</span><br><span class="line">    &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">1</span>; <span class="comment">// å˜é‡xä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">        ...</span><br><span class="line">        &#123;</span><br><span class="line">            ...</span><br><span class="line">            String s = <span class="string">"hello"</span>; <span class="comment">// å˜é‡sä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">            ...</span><br><span class="line">        &#125; <span class="comment">// å˜é‡sä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡sï¼Œå®ƒå’Œä¸Šé¢çš„å˜é‡åŒåï¼Œ</span></span><br><span class="line">        <span class="comment">// ä½†æ˜¯å› ä¸ºä½œç”¨åŸŸä¸åŒï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡:</span></span><br><span class="line">        String s = <span class="string">"hi"</span>;</span><br><span class="line">        ...</span><br><span class="line">    &#125; <span class="comment">// å˜é‡xå’Œsä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="comment">// å˜é‡iä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br></pre></td></tr></table></figure>
<p>è¦éµå¾ªä½œç”¨åŸŸæœ€å°çš„åŸåˆ™ï¼Œä¸”å˜é‡ä¸ç”¨é‡åã€‚</p>
<h2 id="æ•´æ•°è¿ç®—"><a class="header-anchor" href="#æ•´æ•°è¿ç®—">Â¶</a>æ•´æ•°è¿ç®—</h2>
<p>%ï¼šå–ä½™</p>
<ul>
<li>ä½ç§»è¿ç®—ï¼šå³ç§»ï¼ˆç›¸å½“äºé™¤ä»¥2ï¼‰ &gt;&gt; ï¼ˆç¬¦å·ä½ä¸åŠ¨ï¼Œ&gt;&gt;&gt;ï¼ˆç¬¦å·ä½è·Ÿç€åŠ¨ï¼‰<br>
<em>è¦å°å¿ƒæº¢å‡ºï¼Œæ³¨æ„æ•°æ®ç±»å‹</em></li>
<li>ä½è¿ç®—ï¼š ä¸ï¼š&amp;ï¼Œ æˆ–ï¼šï½œï¼Œ éï¼šï½ å¼‚æˆ–ï¼š^ï¼Œä¸åŒä¸º1ï¼ŒåŒä¸ºã€‚<br>
æ•´æ•°çš„ä½è¿ç®—æ˜¯æŒ‰ä½å¯¹é½åšä½è¿ç®—ã€‚é€šè¿‡ä¸è¿ç®—å¯ä»¥å¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªIPæ˜¯å¦åœ¨åŒä¸€ä¸ªç½‘æ®µã€‚</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šï¼ˆshortï¼‰</li>
</ul>
<h2 id="æµ®ç‚¹å‹"><a class="header-anchor" href="#æµ®ç‚¹å‹">Â¶</a>æµ®ç‚¹å‹</h2>
<p>æµ®ç‚¹å‹çš„æ¯”è¾ƒï¼Œå°†ä¸¤æ•°çš„å·®çš„ç»å¯¹å€¼å°äºæŸä¸€èŒƒå›´ï¼Œå³å¯è®¤ä¸ºç›¸ç­‰ã€‚<br>
æµ®ç‚¹å‹å››èˆäº”å…¥æ—¶ï¼Œ+0.5ï¼Œå¦‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> d = <span class="number">2.6</span>;</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>) (d + <span class="number">0.5</span>);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•´å‹ç›¸é™¤æ—¶ï¼Œè¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦åˆ™ä¼šåªç•™ä¸‹æ•´æ•°ä½</li>
</ul>
<h2 id="å¸ƒå°”ç±»å‹"><a class="header-anchor" href="#å¸ƒå°”ç±»å‹">Â¶</a>å¸ƒå°”ç±»å‹</h2>
<p>è¿ç®—æœ‰ ä¸&amp;&amp;ï¼Œæˆ–||,éï¼ï¼Œæ³¨æ„è·Ÿæ•´å‹è¿ç®—çš„åŒºåˆ«ã€‚</p>
<h3 id="ä¸‰å…ƒè¿ç®—ç¬¦"><a class="header-anchor" href="#ä¸‰å…ƒè¿ç®—ç¬¦">Â¶</a>ä¸‰å…ƒè¿ç®—ç¬¦</h3>
<p>b ? x:y</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//x,yçš„ç±»å‹å¿…é¡»ç›¸åŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = -<span class="number">100</span>;</span><br><span class="line">        <span class="keyword">int</span> x = n &gt;= <span class="number">0</span> ? n : -n;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºtrueæ—¶è°ƒç”¨è¡¨è¾¾å¼1ï¼Œä¸ºfalseæ—¶è°ƒç”¨è¡¨è¾¾å¼2ã€‚</p>
<h2 id="å­—ç¬¦å­—ç¬¦ä¸²"><a class="header-anchor" href="#å­—ç¬¦å­—ç¬¦ä¸²">Â¶</a>å­—ç¬¦å­—ç¬¦ä¸²</h2>
<ul>
<li>char: ä¿å­˜ä¸€ä¸ªunicodeå­—ç¬¦ï¼Œè‹±æ–‡å’Œä¸­æ–‡éƒ½å ç”¨2ä¸ªå­—èŠ‚ï¼Œâ€™â€™</li>
<li>Stringï¼š â€œâ€, å¯ä»¥ç”¨+è¿æ¥ä»»æ„å­—ç¬¦ä¸²å’Œå…¶ä»–æ•°æ®ç±»å‹ã€‚<br>
â€œâ€&quot;â€¦ â€œâ€&quot;è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¦ç”¨Java13ç‰¹æ€§ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼›</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac --<span class="built_in">source</span> 13 --<span class="built_in">enable</span>-preview Main.java</span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²ä¸å¯å˜ï¼šå­—ç¬¦ä¸²æ˜¯å¼•ç”¨ç±»å‹ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯ä¸å˜çš„ï¼Œå˜é‡çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li>
<li>null: ç©ºå€¼ï¼ŒæŒ‡é’ˆæŒ‡å‘ç©º</li>
</ul>
<h2 id="æ•°ç»„ç±»å‹"><a class="header-anchor" href="#æ•°ç»„ç±»å‹">Â¶</a>æ•°ç»„ç±»å‹</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">        <span class="keyword">int</span>[] ns = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">//è‡ªåŠ¨æ¨ç®—é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span>[] ns1 = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">68</span>, <span class="number">79</span>, <span class="number">91</span>, <span class="number">85</span>, <span class="number">62</span> &#125;;</span><br><span class="line">        <span class="comment">//ç®€å†™</span></span><br><span class="line">        <span class="keyword">int</span>[] ns2 = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">        ns[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        System.out.println(ns.length); <span class="comment">//æŸ¥çœ‹æ•°ç»„é•¿åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•°ç»„å¤§å°ä¸å¯å˜ï¼ŒåŒç†å­—ç¬¦ä¸²ï¼Œå˜é‡çš„æœ¬è´¨æ˜¯æŒ‡é’ˆ</li>
</ul>
<h3 id="å­—ç¬¦ä¸²æ•°ç»„"><a class="header-anchor" href="#å­—ç¬¦ä¸²æ•°ç»„">Â¶</a>å­—ç¬¦ä¸²æ•°ç»„</h3>
<p>æ•°ç»„çš„å…ƒç´ æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œ</p>
<h2 id="ï¿¼6"><a class="header-anchor" href="#ï¿¼6">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] StrArray = &#123;<span class="string">"as"</span>,<span class="string">"asv"</span>&#125;;</span><br></pre></td></tr></table></figure></h2>
<h1>æµç¨‹æ§åˆ¶</h1>
<h2 id="è¾“å…¥è¾“å‡º"><a class="header-anchor" href="#è¾“å…¥è¾“å‡º">Â¶</a>è¾“å…¥è¾“å‡º</h2>
<h3 id="æ ¼å¼åŒ–è¾“å‡º-System-out-printf"><a class="header-anchor" href="#æ ¼å¼åŒ–è¾“å‡º-System-out-printf">Â¶</a>æ ¼å¼åŒ–è¾“å‡º: System.out.printf()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> d = <span class="number">3.1415926</span>;</span><br><span class="line">        System.out.printf(<span class="string">"%.2f\n"</span>, d); <span class="comment">// æ˜¾ç¤ºä¸¤ä½å°æ•°3.14</span></span><br><span class="line">        System.out.printf(<span class="string">"%.4f\n"</span>, d); <span class="comment">// æ˜¾ç¤º4ä½å°æ•°3.1416</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right">å ä½ç¬¦</th>
<th style="text-align:left">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">%d</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°</td>
</tr>
<tr>
<td style="text-align:right">%x</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºåå…­è¿›åˆ¶æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:right">%f</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:right">%e</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:right">%s</td>
<td style="text-align:left">æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//16è¿›åˆ¶è¾“å‡ºç”¨0è¡¥è¶³8ä½</span></span><br><span class="line">System.out.printf(<span class="string">"n=%d, hex=%08x"</span>, n, n); <span class="comment">// æ³¨æ„ï¼Œä¸¤ä¸ª%å ä½ç¬¦å¿…é¡»ä¼ å…¥ä¸¤ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>
<h3 id="è¾“å…¥"><a class="header-anchor" href="#è¾“å…¥">Â¶</a>è¾“å…¥</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner; <span class="comment">//å¯¼å…¥æ§åˆ¶å°åº“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in); <span class="comment">// åˆ›å»ºScannerå¯¹è±¡</span></span><br><span class="line">        System.out.print(<span class="string">"Input your name: "</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        String name = scanner.nextLine(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.print(<span class="string">"Input your age: "</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="keyword">int</span> age = scanner.nextInt(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°</span></span><br><span class="line">        System.out.printf(<span class="string">"Hi, %s, you are %d\n"</span>, name, age); <span class="comment">// æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ifè¯­å¥"><a class="header-anchor" href="#ifè¯­å¥">Â¶</a>ifè¯­å¥</h2>
<ul>
<li>åˆ¤æ–­ç›¸ç­‰ä¸€å®šè¦èŒƒå›´ï¼Œå¦åˆ™æµ®ç‚¹å‹ä¸å‡†ç¡®ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> x = <span class="number">1</span> - <span class="number">9.0</span> / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(x - <span class="number">0.1</span>) &lt; <span class="number">0.00001</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"x is 0.1"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"x is NOT 0.1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¦åˆ¤æ–­å¼•ç”¨ç±»å‹çš„å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»ä½¿ç”¨equals()æ–¹æ³•ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="string">"hello"</span>;</span><br><span class="line">        String s2 = <span class="string">"hello"</span>;</span><br><span class="line">        <span class="keyword">if</span> (s1 != <span class="keyword">null</span> &amp;&amp;s1.equals(s2)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç›¸ç­‰"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"ä¸ç­‰"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå˜é‡s1ä¸ºnullï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¦&amp;&amp;ã€‚</p>
<h2 id="switch"><a class="header-anchor" href="#switch">Â¶</a>switch</h2>
<p>æ—§ç‰ˆçš„switchï¼šå…·æœ‰ç©¿é€æ€§ï¼Œåªè´Ÿè´£åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°†ç»§ç»­å‘ä¸‹åŒ¹é…ã€‚æ‰€ä»¥ä¸èƒ½æ¼æ³„breakï¼›<br>
æ–°ç‰ˆçš„switch: è‡ªåŠ¨breakï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String option = <span class="string">"apple"</span>;</span><br><span class="line">        <span class="keyword">int</span> opt = <span class="keyword">switch</span>(option)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"apple"</span> -&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"peer"</span>,<span class="string">"banana"</span> -&gt; <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//å¯ä»¥ç”¨&#123;&#125;æ¡†ä½ï¼Œæ‰§è¡Œå¤šæ¡è¯­å¥ã€‚</span></span><br><span class="line">            <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">int</span> code = fruit.hashCode();</span><br><span class="line">                yield code; <span class="comment">//è¿”å›codeå€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;; <span class="comment">//èµ‹å€¼è¯­å¥è¦ä»¥ï¼›ç»“æŸï¼Œ æ²¡èµ‹å€¼å°±ä¸ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>switchä¹Ÿæ˜¯java13çš„æ–°ç‰¹æ€§ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac --<span class="built_in">source</span> 13 --<span class="built_in">enable</span>-preview Main.java</span><br></pre></td></tr></table></figure>
<h2 id="while"><a class="header-anchor" href="#while">Â¶</a>while</h2>
<ul>
<li>æ­»å¾ªç¯ä¸­ï¼Œintè‡ªå¢åˆ°æœ€å¤§å†åŠ ä¸€ä¼šå˜æˆè´Ÿæ•°ï¼Œä»è€Œè·³å‡ºå¾ªç¯ã€‚</li>
<li>do â€¦ whileæ˜¯å…ˆæ‰§è¡Œå†åˆ¤æ–­ï¼Œæ‰€ä»¥è‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚è¦æ³¨æ„è¾¹ç•Œé—®é¢˜ã€‚</li>
</ul>
<h2 id="for"><a class="header-anchor" href="#for">Â¶</a>for</h2>
<ul>
<li>æ³¨æ„ï¼šå¾ªç¯ä¸­å®šä¹‰çš„å˜é‡çš„ä½œç”¨åŸŸåªåœ¨å¾ªç¯ä¸­ï¼Œå¾ªç¯å¤–å°†æ— æ³•è®¿é—®ã€‚</li>
</ul>
<h3 id="for-each"><a class="header-anchor" href="#for-each">Â¶</a>for each</h3>
<p>ä¾¿äºéå†æ•°ç»„ï¼Œä½†æ˜¯æ— æ³•è·å¾—æ•°ç»„çš„ç´¢å¼•:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum;</span><br><span class="line">        <span class="keyword">int</span> ns[] = &#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="comment">//éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> n:ns)&#123;</span><br><span class="line">            sum = sum +n;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>for eachèƒ½éå†æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬listï¼Œmapâ€¦</li>
</ul>
<h3 id="i-i"><a class="header-anchor" href="#i-i">Â¶</a>i++,++i</h3>
<p>åœ¨å¾ªç¯ä½“ä¸­ï¼Œi<ins>å’Œ</ins>içš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚<br>
è¿è¡Œæ—¶é—´çš„å·®åˆ«ã€‚åœ¨Javaä¸­i<ins>è¯­å¥æ˜¯éœ€è¦ä¸€ä¸ªä¸´æ—¶å˜é‡å–å­˜å‚¨è¿”å›è‡ªå¢å‰çš„å€¼ï¼Œè€Œ</ins>iä¸éœ€è¦ã€‚è¿™æ ·å°±å¯¼è‡´ä½¿ç”¨i++æ—¶ç³»ç»Ÿéœ€è¦å…ˆç”³è¯·ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œç„¶åå°†å€¼å¡å¦‚è¿›å»ï¼Œæœ€åä¸ç”¨äº†æ‰å»é‡Šæ”¾ã€‚å¤šäº†è¿™ä¹ˆä¸€ç³»åˆ—æ“ä½œæ—¶é—´ã€‚</p>
<h2 id="breakå’Œcontinue"><a class="header-anchor" href="#breakå’Œcontinue">Â¶</a>breakå’Œcontinue</h2>
<pre><code>breakï¼šè·³å‡ºä¸€å±‚å¾ªç¯ã€‚
continueï¼š æå‰ç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚
</code></pre>
<hr>
<h1>æ•°ç»„æ“ä½œ</h1>
<p>éå†æ•°ç»„å°±ä¸è¯´äº†ï¼Œéœ€è¦ç´¢å¼•ç”¨forï¼Œä¸éœ€è¦ç´¢å¼•ç”¨for eachã€‚</p>
<h2 id="æ‰“å°æ•°ç»„å†…å®¹"><a class="header-anchor" href="#æ‰“å°æ•°ç»„å†…å®¹">Â¶</a>æ‰“å°æ•°ç»„å†…å®¹</h2>
<p>ç›´æ¥æ‰“å°æ•°ç»„ï¼Œè·å¾—çš„æ˜¯JVMä¸­çš„å¼•ç”¨åœ°å€<br>
å¯ä»¥ç”¨for eachå¾ªç¯æ‰“å°ï¼Œä¹Ÿå¯ä»¥ç”¨Arrays.toString()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ns = &#123; <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span> &#125;;</span><br><span class="line">        System.out.println(Arrays.toString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„æ’åº"><a class="header-anchor" href="#æ•°ç»„æ’åº">Â¶</a>æ•°ç»„æ’åº</h2>
<p>ç”¨Arrays.sort()ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ns = &#123; <span class="number">28</span>, <span class="number">12</span>, <span class="number">89</span>, <span class="number">73</span>, <span class="number">65</span>, <span class="number">18</span>, <span class="number">96</span>, <span class="number">50</span>, <span class="number">8</span>, <span class="number">36</span> &#125;;</span><br><span class="line">        Arrays.sort(ns); <span class="comment">//æ’åº</span></span><br><span class="line">        System.out.println(Arrays.toString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šç»´æ•°ç»„"><a class="header-anchor" href="#å¤šç»´æ•°ç»„">Â¶</a>å¤šç»´æ•°ç»„</h2>
<p>æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œå°†å¼•ç”¨ç±»å‹åˆå­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå°±æˆäº†äºŒç»´æ•°ç»„ã€‚<br>
è®¿é—®äºŒç»´æ•°ç»„ï¼šarray[row][col]</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//äºŒç»´æ•°ç»„çš„å£°æ˜æ˜¯ä¸¤ä¸ªæ–¹æ‹¬å·</span></span><br><span class="line">        <span class="keyword">int</span>[][] ns = &#123;</span><br><span class="line">            &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;,</span><br><span class="line">            &#123; <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span> &#125;</span><br><span class="line">        &#125;; <span class="comment">//èµ‹å€¼åé¢è¦åŠ ï¼›</span></span><br><span class="line">        System.out.println(ns.length); <span class="comment">// 3</span></span><br><span class="line">        <span class="comment">//ç”¨Arrays.deepToString(ns)æ‰“å°æ•°ç»„</span></span><br><span class="line">        System.out.println(Arrays.deepToString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤è¡Œå‚æ•°"><a class="header-anchor" href="#å‘½ä»¤è¡Œå‚æ•°">Â¶</a>å‘½ä»¤è¡Œå‚æ•°</h2>
<p>Javaç¨‹åºçš„å…¥å£main()æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ª String[]æ•°ç»„ç±»å‹çš„å‘½ä»¤è¡Œå‚æ•°ã€‚<br>
è¿™ä¸ªå‘½ä»¤è¡Œå‚æ•°ç”±JVMæ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶ä¼ ç»™mainæ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java Main -version</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitä¸€æ–‡é€š</title>
    <url>/2020/02/26/Git_learning/</url>
    <content><![CDATA[<h1>Git</h1>
<pre><code>å…è´¹åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿã€‚ç›¸æ¯”äºé›†ä¸­å¼ç®¡ç†çš„CVSï¼ŒSVNï¼šä¸å¿…è”ç½‘ä¿®æ”¹ï¼Œå¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ã€‚æ›´å…³é”®çš„æ˜¯ï¼šGitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå‡å°‘äº†ä¸Šä¼ é‡
</code></pre>
<a id="more"></a>
<h2 id="åˆ›å»ºç‰ˆæœ¬åº“"><a class="header-anchor" href="#åˆ›å»ºç‰ˆæœ¬åº“">Â¶</a>åˆ›å»ºç‰ˆæœ¬åº“</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># step 0: åˆå§‹åŒ–ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"><span class="comment"># step 1: å°†æ–‡ä»¶åŠ å…¥ä»“åº“</span></span><br><span class="line">git add file1.txt</span><br><span class="line">git add file2.txt file3.txt</span><br><span class="line"><span class="comment"># step 2ï¼šæäº¤ï¼ˆå¯ä»¥ä¸€æ¬¡æäº¤å¤šä¸ªæ–‡ä»¶ï¼‰ -mè¡¨ç¤ºæ·»åŠ è¯´æ˜</span></span><br><span class="line">git commit -m <span class="string">"add 3 files."</span></span><br></pre></td></tr></table></figure>
<h2 id="ç‰ˆæœ¬å›é€€"><a class="header-anchor" href="#ç‰ˆæœ¬å›é€€">Â¶</a>ç‰ˆæœ¬å›é€€</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment">#ä¸€å †ä¹±ä¹±çš„å­—ç¬¦æ˜¯åå…­è¿›åˆ¶çš„commit idï¼Œé˜²æ­¢å¤šäººåä½œç‰ˆæœ¬å·å†²çª</span></span><br><span class="line"><span class="comment">#ä¸€è¡Œæ˜¾ç¤º</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line"><span class="comment">#è¿”å›ä¸Šä¸€ä¸ªç‰ˆæœ¬ HEAD^ ä¸Šä¸Šä¸ªç‰ˆæœ¬ HEAD^^</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"><span class="comment">#å›åˆ°æœªæ¥çš„é‚£ä¸ªè¢«å»æ‰çš„ç‰ˆæœ¬ï¼Œæ‰¾åˆ°commit id</span></span><br><span class="line">git reset --hard 1094a</span><br><span class="line">git reflog <span class="comment">#å¯ä»¥æŸ¥çœ‹æ¯æ¬¡æ¯æ¬¡å‘½ä»¤ä»è€Œæ‰¾åˆ°commit id</span></span><br></pre></td></tr></table></figure>
<h2 id="å·¥ä½œåŒºå’Œæš‚å­˜åŒº"><a class="header-anchor" href="#å·¥ä½œåŒºå’Œæš‚å­˜åŒº">Â¶</a>å·¥ä½œåŒºå’Œæš‚å­˜åŒº</h2>
<pre><code>å·¥ä½œåŒºï¼šæ¯æ¬¡çš„working directory, æ¯”å¦‚/learngit
ç‰ˆæœ¬åº“ï¼šå·¥ä½œåŒºä¸­çš„éšè—ç›®å½• /learngit/.git
æš‚å­˜åŒºï¼šç‰ˆæœ¬åº“ä¸­çš„stage(index)ã€‚æš‚å­˜åŒºè‡ªåŠ¨åˆ›å»ºç¬¬ä¸€ä¸ªåˆ†æ”¯ masterï¼Œ å¹¶åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆheadæŒ‡å‘masterã€‚
å·¥ä½œæµç¨‹ï¼šgit addçš„æ—¶å€™å°†æ–‡ä»¶çš„ä¿®æ”¹å­˜å…¥æš‚å­˜åŒºï¼Œgit commitå°†æš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹stage</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œæ–‡ä»¶çš„ä¸åŒ</span></span><br><span class="line">git diff HEAD -- readme.txt</span><br></pre></td></tr></table></figure>
<h2 id="æ’¤é”€ä¿®æ”¹"><a class="header-anchor" href="#æ’¤é”€ä¿®æ”¹">Â¶</a>æ’¤é”€ä¿®æ”¹</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Level 1: è¿”å›åˆ°ä¿®æ”¹çš„ä¸Šä¸€ä¸ªçŠ¶æ€</span></span><br><span class="line">git checkout -- readme.txt</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸¤ç§æƒ…å†µï¼š<br>
ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›<br>
ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚<br>
ï¼ˆåç»­çš„åˆ†æ”¯ç®¡ç†ï¼Œä¹Ÿä¼šæœ‰check outï¼Œ <em>â€“</em> è¿™ä¸ªå¾ˆå…³é”®ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Level 2: å¯ä»¥ä»æš‚å­˜åŒºå›é€€è‡³å·¥ä½œåŒºï¼ŒHEADè¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">git reset HEAD readme.txt</span><br><span class="line"><span class="comment">#å†æ¥ä¸Š git checkout --readme.txt å½»åº•æ¶ˆå¤±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Level 3: ç‰ˆæœ¬å›é€€</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤æ–‡ä»¶"><a class="header-anchor" href="#åˆ é™¤æ–‡ä»¶">Â¶</a>åˆ é™¤æ–‡ä»¶</h2>
<ol>
<li>ç¡®å®åˆ é™¤æ–‡ä»¶</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨å·¥ä½œåŒºåˆ é™¤äº†æ–‡ä»¶</span></span><br><span class="line">rm test.txt</span><br><span class="line"><span class="comment">#git statusä¼šæ</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment">#åœ¨ç‰ˆæœ¬åº“é‡Œåˆ é™¤æ–‡ä»¶</span></span><br><span class="line">it rm test.txt</span><br><span class="line"><span class="comment">#ç¡®è®¤æäº¤</span></span><br><span class="line">git commit -m <span class="string">"remove test.txt"</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è¯¯åˆ äº†</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨è¿”å›ä¸Šä¸€ä¸ªçŠ¶æ€æ¥è¿˜åŸï¼Œå…¶å®æ˜¯ä»ç‰ˆæœ¬åº“ä¸­æ›¿æ¢å›æ¥</span></span><br><span class="line">git checkout -- test.txt</span><br></pre></td></tr></table></figure>
<h2 id="è¿œç¨‹ä»“åº“"><a class="header-anchor" href="#è¿œç¨‹ä»“åº“">Â¶</a>è¿œç¨‹ä»“åº“</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨gitåº“é‡Œæ·»åŠ sshkey</span></span><br><span class="line">ssh-add <span class="string">"ä½ çš„ id-rsa æ–‡ä»¶åœ°å€"</span></span><br><span class="line"><span class="comment">#å°†æœ¬åœ°å†…å®¹æ¨é€åˆ°è¿œç¨‹ è¿œç¨‹åº“åå­—ï¼šorigin</span></span><br><span class="line">git remote add origin git@github.com:noonett/learngit.git</span><br><span class="line"><span class="comment">#å°†githubä»“åº“çš„å†…å®¹git pullä¸‹æ¥</span></span><br><span class="line">git pull origin master --allow-unrelated-histories</span><br><span class="line"><span class="comment">#å°†æœ¬åœ°åº“masteråˆ†æ”¯æ¨é€åˆ°è¿œç«¯ï¼Œ </span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="comment">#-uæ˜¯å…³è”èµ·æ¥ï¼Œä¹‹åå°±å¯ä»¥ä¸å¸¦-uäº†</span></span><br></pre></td></tr></table></figure>
<h2 id="ï¿¼8"><a class="header-anchor" href="#ï¿¼8">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å…‹éš†ä»“åº“ä¸‹æ¥, æ”¯æŒhttpså’Œsshï¼Œsshæ˜¯åŸç”Ÿçš„é€Ÿåº¦æ›´å¿«</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;url&gt;</span><br></pre></td></tr></table></figure></h2>
<h2 id="åˆ†æ”¯ç®¡ç†"><a class="header-anchor" href="#åˆ†æ”¯ç®¡ç†">Â¶</a>åˆ†æ”¯ç®¡ç†</h2>
<pre><code>HEADæŒ‡å‘çš„æ˜¯å½“å‰åˆ†æ”¯ï¼Œmasteræ˜¯ä¸»åˆ†æ”¯ã€‚åˆ›å»ºæ–°åˆ†æ”¯å®é™…ä¸Šå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°æŒ‡é’ˆï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œè®©æŒ‡é’ˆå¾€å‰ä¸€æ­¥ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶æ²¡æœ‰æ”¹å˜ã€‚åˆå¹¶åˆ†æ”¯å®é™…å°±æ˜¯æŠŠæ–°åˆ†æ”¯è·Ÿmasteråˆå¹¶
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºæ–°åˆ†æ”¯ï¼Œ-bè¡¨ç¤ºåˆ‡æ¢åˆ°è¿™ä¸ªåˆ†æ”¯</span></span><br><span class="line">git checkout -b dev</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout master</span><br><span class="line"><span class="comment">#åˆå¹¶åˆ†æ”¯</span></span><br><span class="line">git merge dev</span><br><span class="line"><span class="comment">#åˆ é™¤åˆ†æ”¯ delete ï¼ˆå¼ºè¡Œåˆ é™¤ -Dï¼‰</span></span><br><span class="line">git branch -d dev</span><br></pre></td></tr></table></figure>
<pre><code>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™éœ€è¦ä¿®æ”¹æ–‡ä»¶ï¼Œå†é‡æ–°æäº¤ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹åˆå¹¶åˆ†æ”¯å›¾</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br></pre></td></tr></table></figure>
<h3 id="bugç®¡ç†"><a class="header-anchor" href="#bugç®¡ç†">Â¶</a>bugç®¡ç†</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¿å­˜å·¥ä½œç°åœº</span></span><br><span class="line">git stash</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å·¥ä½œç°åœº</span></span><br><span class="line">git stash list</span><br><span class="line"><span class="comment">#æ¢å¤å·¥ä½œç°åœº</span></span><br><span class="line">git stash apply</span><br><span class="line">git stash drop</span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line">git stash pop</span><br><span class="line"><span class="comment">#å¯ä»¥æ¢å¤æŒ‡å®šç°åœº</span></span><br><span class="line">git stash pop stash@&#123;&#125;</span><br><span class="line"><span class="comment">#å¤åˆ¶ä¸€ä¸ªä¿®æ”¹åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">git cherry-pick &lt;commit&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šäººåˆä½œ"><a class="header-anchor" href="#å¤šäººåˆä½œ">Â¶</a>å¤šäººåˆä½œ</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹è¿œç¨‹åº“ -vè¯¦æƒ…</span></span><br><span class="line">git remote -vg</span><br><span class="line"><span class="comment">#åˆ›å»ºè¿œç¨‹çš„devåˆ†æ”¯åˆ°æœ¬åœ°</span></span><br><span class="line">git checkout -b dev origin/dev</span><br><span class="line"><span class="comment">#è¿œç¨‹ä»“åº“æœ‰æ–°çš„æäº¤èµ·äº†å†²çªåˆ™éœ€è¦pullä¸‹æ¥ï¼Œæœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çª</span></span><br><span class="line">git pull</span><br><span class="line"><span class="comment">#å¦‚æœæç¤ºno tracking informationåˆ™ï¼š</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæœ¬åœ°devåˆ†æ”¯ä¸è¿œç¨‹origin/devåˆ†æ”¯çš„é“¾æ¥ï¼Œå†pull</span></span><br><span class="line">git branch --<span class="built_in">set</span>-upstream-to=origin/dev dev</span><br></pre></td></tr></table></figure>
<h3 id="rebase"><a class="header-anchor" href="#rebase">Â¶</a>rebase</h3>
<ul>
<li>rebaseæ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼›</li>
<li>rebaseçš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹å†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ã€‚è¯•å¾—ç»´æŠ¤commitè®°å½•å˜å¾—ç®€å•æ¸…æ™°ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿œç¨‹push masterï¼Œé‡åˆ°äº†å†²çªï¼Œå¯ä»¥rebaseæ¥é¿å…ä¸‰æ–¹åˆå¹¶ï¼Œå³å˜åŸºï¼š</li>
</ul>
<h2 id="ï¿¼14"><a class="header-anchor" href="#ï¿¼14">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout feature</span><br><span class="line">git rebase master</span><br><span class="line"><span class="comment">#rebaseä¹‹åå°±ä¿®æ”¹å†²çªï¼Œç„¶åcontinueï¼ˆä¸ç”¨commitï¼‰</span></span><br><span class="line">git add readme.txt</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br><span class="line"><span class="comment">#åˆ‡æ¢å›masterå¿«é€Ÿåˆå¹¶</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge feature</span><br></pre></td></tr></table></figure></h2>
<h2 id="æ ‡ç­¾ç®¡ç†"><a class="header-anchor" href="#æ ‡ç­¾ç®¡ç†">Â¶</a>æ ‡ç­¾ç®¡ç†</h2>
<pre><code>ç»™commitæ‰“ä¸Šæ ‡ç­¾ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ æ ‡ç­¾ -aæŒ‡ä»£æ ‡ç­¾å -mç•™ä¸‹å¤‡æ³¨</span></span><br><span class="line">git tag -a v0.1 -m <span class="string">"version 0.1 released"</span> 1094adb</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ ‡ç­¾</span></span><br><span class="line">git tag</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯</span></span><br><span class="line">git show &lt;tagname&gt;</span><br><span class="line"><span class="comment">#åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">git tag -d v0.1</span><br><span class="line"><span class="comment">#æ¨é€æ ‡ç­¾åˆ°è¿œç«¯</span></span><br><span class="line">git push origin v1.0</span><br><span class="line">git push origin --tags  <span class="comment">#æ¨é€æ‰€æœ‰çš„æ ‡ç­¾</span></span><br><span class="line"><span class="comment">#åˆ é™¤è¿œç¨‹çš„æ ‡ç­¾</span></span><br><span class="line">git push origin :refs/tags/v0.9</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç‰ˆæœ¬ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ©é˜µä¸Numpy</title>
    <url>/2020/02/24/Math/</url>
    <content><![CDATA[<h1>çŸ©é˜µä¹˜æ³•å®ç°</h1>
<pre><code>è¿™ä¸ªå‡½æ•°è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå°±æ˜¯å¯¹åº”ä½ç½®ç›¸ä¹˜å°±å®Œäº‹äº†ï¼Œæœ€åå†ç”¨numpyæ¥ç¡®è®¤ä¸€ä¸‹å‡½æ•°çš„æ­£ç¡®æ€§ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Matrix_multiplication</span><span class="params">(A,B, data = [])</span>:</span></span><br><span class="line">    C = []</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">not</span> A) <span class="keyword">or</span> (<span class="keyword">not</span> B):</span><br><span class="line">        <span class="keyword">return</span> C</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(A)):</span><br><span class="line">        row = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(B[<span class="number">0</span>])):</span><br><span class="line">            temp = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> a,b <span class="keyword">in</span> zip(range(len(A[<span class="number">0</span>])),range(len(B))):</span><br><span class="line">                temp += A[i][a] * B[b][j]</span><br><span class="line">            row.append(temp)</span><br><span class="line">        C.append(row)</span><br><span class="line">    <span class="keyword">return</span> C</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">    row = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">        row.append(i+j)</span><br><span class="line">    A.append(row)</span><br><span class="line">print(<span class="string">'A:'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> A:</span><br><span class="line">    print(row) </span><br><span class="line">    </span><br><span class="line">B = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>,<span class="number">9</span>):</span><br><span class="line">    row = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>):</span><br><span class="line">        row.append(i+j)</span><br><span class="line">    B.append(row)</span><br><span class="line">print(<span class="string">'B:'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> B:</span><br><span class="line">    print(row)</span><br></pre></td></tr></table></figure>
<pre><code>A:
[2, 3, 4, 5, 6, 7]
[3, 4, 5, 6, 7, 8]
[4, 5, 6, 7, 8, 9]
[5, 6, 7, 8, 9, 10]
[6, 7, 8, 9, 10, 11]
[7, 8, 9, 10, 11, 12]
B:
[3, 4, 5, 6, 7, 8]
[4, 5, 6, 7, 8, 9]
[5, 6, 7, 8, 9, 10]
[6, 7, 8, 9, 10, 11]
[7, 8, 9, 10, 11, 12]
[8, 9, 10, 11, 12, 13]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#A = []</span></span><br><span class="line">Matrix_multiplication(A,B)</span><br></pre></td></tr></table></figure>
<pre><code>[[166, 193, 220, 247, 274, 301],
 [199, 232, 265, 298, 331, 364],
 [232, 271, 310, 349, 388, 427],
 [265, 310, 355, 400, 445, 490],
 [298, 349, 400, 451, 502, 553],
 [331, 388, 445, 502, 559, 616]]
</code></pre>
<h1>Numpy</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>)])</span><br><span class="line">b = np.array([</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>)])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">np.dot(a,b)</span><br></pre></td></tr></table></figure>
<pre><code>array([[166, 193, 220, 247, 274, 301],
       [199, 232, 265, 298, 331, 364],
       [232, 271, 310, 349, 388, 427],
       [265, 310, 355, 400, 445, 490],
       [298, 349, 400, 451, 502, 553],
       [331, 388, 445, 502, 559, 616]])
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#çŸ©é˜µåŠ å‡</span></span><br><span class="line">print(a + b)</span><br><span class="line"><span class="comment">#çŸ©é˜µå¹³æ–¹</span></span><br><span class="line">print(a**<span class="number">2</span>)</span><br><span class="line"><span class="comment">#çŸ©é˜µè½¬ç½®</span></span><br><span class="line">print(a.T)</span><br></pre></td></tr></table></figure>
<pre><code>[[ 5  7  9 11 13 15]
 [ 7  9 11 13 15 17]
 [ 9 11 13 15 17 19]
 [11 13 15 17 19 21]
 [13 15 17 19 21 23]
 [15 17 19 21 23 25]]
[[  4   9  16  25  36  49]
 [  9  16  25  36  49  64]
 [ 16  25  36  49  64  81]
 [ 25  36  49  64  81 100]
 [ 36  49  64  81 100 121]
 [ 49  64  81 100 121 144]]
[[ 2  3  4  5  6  7]
 [ 3  4  5  6  7  8]
 [ 4  5  6  7  8  9]
 [ 5  6  7  8  9 10]
 [ 6  7  8  9 10 11]
 [ 7  8  9 10 11 12]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿”å›é€†çŸ©é˜µ</span></span><br><span class="line">c = np.array([[<span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>]])</span><br><span class="line">print(np.linalg.inv(c))</span><br><span class="line"><span class="comment"># çŸ©é˜µçš„è¿¹</span></span><br><span class="line">print(np.trace(c))</span><br></pre></td></tr></table></figure>
<pre><code>[[-2.   1. ]
 [ 1.5 -0.5]]
5.0
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡</span></span><br><span class="line">eigenvalues, eigenvector = np.linalg.eig(c)</span><br><span class="line">print(eigenvalues)</span><br><span class="line">print(eigenvector)</span><br></pre></td></tr></table></figure>
<pre><code>[-0.37228132  5.37228132]
[[-0.82456484 -0.41597356]
 [ 0.56576746 -0.90937671]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ•°å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>çˆ¬å–è±†ç“£ç”µå½±å‰250çš„æ•°æ®</title>
    <url>/2020/02/23/douban_movie-3/</url>
    <content><![CDATA[<pre><code>çˆ¬ä¸€ä¸‹è±†ç“£top250çš„ç”µå½±åšä¸€ä¸‹ç»ƒä¹ ï¼Œä»Šå¤©æ•ˆç‡æ¯”è¾ƒä½åªåšäº†ä¸€ç‚¹ï¼Œæ˜å¤©åšå®Œå†é‡æ„ä¸€ä¸‹ä»£ç ï¼Œç”¨å¤šçº¿ç¨‹å®ç°ã€‚
2/24 å°è£…äº†å‡½æ•°ï¼Œæœ€è¿‘å¾—ä¸Šè¯¾ï¼Œæ…¢æ…¢æ›´æ–°äº†ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯¼å…¥åº“</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> lxml</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure>
<h1>å‘é€è¯·æ±‚</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#send request</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span><span class="params">(url, headers)</span>:</span></span><br><span class="line">    r = requests.get(url,headers=headers)</span><br><span class="line">    print(r.status_code)</span><br><span class="line">    <span class="keyword">return</span> r</span><br></pre></td></tr></table></figure>
<h1>æå–æ•°æ®</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#fetch data</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(resp, headers)</span>:</span></span><br><span class="line">    selector = lxml.etree.HTML(resp.text)    <span class="comment">#generate object</span></span><br><span class="line">    titles = selector.xpath(<span class="string">'//div[@class = "hd"]/a/span[1]/text()'</span>)<span class="comment">#fetching titles of movies       </span></span><br><span class="line">    urls = selector.xpath(<span class="string">'//div[@class = "hd"]/a/@href'</span>) <span class="comment">#fetching urls of description</span></span><br><span class="line">    <span class="comment">#visit the url to fetch the descriptions</span></span><br><span class="line">    movie_text = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        sub_r = requests.get(url,headers=headers)</span><br><span class="line">        selector = lxml.etree.HTML(sub_r.text)</span><br><span class="line">        url_text = <span class="string">' '</span>.join(selector.xpath(<span class="string">'//span[@property="v:summary"]/text()'</span>)).replace(<span class="string">' '</span>,<span class="string">''</span>).replace(<span class="string">'\n'</span>,<span class="string">''</span>).replace(<span class="string">'\u3000'</span>,<span class="string">''</span>)</span><br><span class="line">        movie_text.append(url_text)        </span><br><span class="line">    <span class="comment">#zip the content together</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    data.update(zip(titles,movie_text))</span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>
<h1>å­˜å…¥æ–‡ä»¶ä¸­</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(data)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        filepath = os.curdir</span><br><span class="line">        filename = <span class="string">'douban_top250.txt'</span>  </span><br><span class="line">        <span class="keyword">with</span> open(filename,<span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">'DouBan Movie--Top 250'</span>)</span><br><span class="line">            <span class="keyword">for</span> key,value <span class="keyword">in</span> data.items():</span><br><span class="line">                f.write(<span class="string">'\n\n'</span>)</span><br><span class="line">                f.write(key)</span><br><span class="line">                f.write(<span class="string">'\n'</span>)</span><br><span class="line">                f.write(value)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'Download error!!'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'Download success!!'</span>)</span><br></pre></td></tr></table></figure>
<h1>ä¸»å‡½æ•°</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#main, å¾ªç¯å®ç°ç¿»é¡µ</span></span><br><span class="line">headers = &#123;</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chro'</span></span><br><span class="line">                      <span class="string">'me/53.0.2785.104 Safari/537.36 Core/1.53.2372.400 QQBrowser/9.5.10548.400'</span></span><br><span class="line">&#125;</span><br><span class="line">a = <span class="number">0</span></span><br><span class="line">data = &#123;&#125;</span><br><span class="line"><span class="keyword">while</span>(a != <span class="number">250</span>):</span><br><span class="line">    url =  <span class="string">"https://movie.douban.com/top250?start="</span>+ str(a) +<span class="string">"&amp;filter="</span></span><br><span class="line">    resp = send_request(url, headers)</span><br><span class="line">    data_chunk = fetch(resp, headers)</span><br><span class="line">    data.update(data_chunk)</span><br><span class="line">    a += <span class="number">25</span></span><br><span class="line">download(data)</span><br></pre></td></tr></table></figure>
<pre><code>200
200
200
200
200
200
200
200
200
200
Download success!!
</code></pre>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>beatiful-soupå’Œlxml</title>
    <url>/2020/02/20/beatiful-soup/</url>
    <content><![CDATA[<p>beautiful soupæ˜¯ä¸€ä¸ªä»htmlæˆ–xmlæ–‡ä»¶ä¸­æå–æ•°æ®çš„pythonåº“ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> beautifulsoup</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html_doc = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">'html.parser'</span>) <span class="comment">#åˆ›å»ºä¸€ä¸ªsoupå¯¹è±¡</span></span><br><span class="line">print(soup.prettify()) <span class="comment">#æ ‡å‡†æ ¼å¼è¾“å‡º</span></span><br></pre></td></tr></table></figure>
<h2 id="æµè§ˆç»“æ„åŒ–æ•°æ®"><a class="header-anchor" href="#æµè§ˆç»“æ„åŒ–æ•°æ®">Â¶</a>æµè§ˆç»“æ„åŒ–æ•°æ®</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.title <span class="comment">#è·å–title</span></span><br><span class="line">soup.a.attrs <span class="comment">#å–å‡ºaæ ‡ç­¾çš„æ ‘å‹</span></span><br><span class="line">soup.find(id=<span class="string">'link3'</span>) <span class="comment">#</span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°æ‰€æœ‰aæ ‡ç­¾çš„é“¾æ¥ï¼Œfind_all('')è¿”å›çš„æ˜¯list</span></span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">'a'</span>):</span><br><span class="line">    print(link.get(<span class="string">'href'</span>))</span><br><span class="line">    <span class="comment"># http://example.com/elsie</span></span><br><span class="line">    <span class="comment"># http://example.com/lacie</span></span><br><span class="line">    <span class="comment"># http://example.com/tillie</span></span><br><span class="line">print(soup.get_text()) <span class="comment">#è·å–æ‰€æœ‰æ–‡å­—å†…å®¹</span></span><br></pre></td></tr></table></figure>
<h2 id="æ”¯æŒcssé€‰æ‹©å™¨"><a class="header-anchor" href="#æ”¯æŒcssé€‰æ‹©å™¨">Â¶</a>æ”¯æŒcssé€‰æ‹©å™¨</h2>
<h2 id="ï¿¼3"><a class="header-anchor" href="#ï¿¼3">Â¶</a><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.select(<span class="string">'.story'</span>) <span class="comment">#æŸ¥æ‰¾ç±»åä¸ºstoryçš„ç±»æ ‡ç­¾</span></span><br><span class="line">soup.select(<span class="string">'#link'</span>) <span class="comment">#tag idæŸ¥æ‰¾ä¹Ÿå¯ä»¥</span></span><br></pre></td></tr></table></figure></h2>
<h1>lxml</h1>
<p>ç”¨lxmlä½œä¸ºè§£æçš„å¼•æ“ã€‚åº•å±‚æ˜¯cå†™çš„ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup_lxml = BeautifulSoup(html_doc, <span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="xpath"><a class="header-anchor" href="#xpath">Â¶</a>xpath</h2>
<p>xpathçš„æ€§èƒ½æŒºä¸é”™ï¼Œxmlæ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚</p>
<h3 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ">Â¶</a>æ¦‚å¿µ</h3>
<h4 id="Node-èŠ‚ç‚¹"><a class="header-anchor" href="#Node-èŠ‚ç‚¹">Â¶</a>Node: èŠ‚ç‚¹</h4>
<p>å…ƒç´ ï¼Œå±æ€§ï¼Œæ–‡æœ¬ï¼Œå‘½åç©ºé—´ï¼Œæ–‡æ¡£ï¼ˆæ ¹ï¼‰èŠ‚ç‚¹</p>
<h4 id="èŠ‚ç‚¹å…³ç³»"><a class="header-anchor" href="#èŠ‚ç‚¹å…³ç³»">Â¶</a>èŠ‚ç‚¹å…³ç³»</h4>
<p>Parent çˆ¶<br>
Children å­<br>
Siblingï¼šåŒèƒï¼Œå…±ç”¨parent<br>
Ancestorï¼šå…ˆè¾ˆ<br>
Descendantï¼šåä»£</p>
<h3 id="xpathè¯­æ³•"><a class="header-anchor" href="#xpathè¯­æ³•">Â¶</a>xpathè¯­æ³•</h3>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodename</td>
<td style="text-align:center">é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>//</td>
<td style="text-align:center">ä»ä»»æ„å­èŠ‚ç‚¹ä¸­é€‰å–æ–‡æœ¬</td>
</tr>
<tr>
<td>/</td>
<td style="text-align:center">ä»æ ¹èŠ‚ç‚¹ä¸­é€‰å–(å·²é€‰æ‹©çš„èŠ‚ç‚¹çš„èŠ‚ç‚¹ä¸­)</td>
</tr>
<tr>
<td>.</td>
<td style="text-align:center">è¡¨ç¤ºé€‰å–å½“å‰èŠ‚ç‚¹</td>
</tr>
<tr>
<td>â€¦</td>
<td style="text-align:center">è¡¨ç¤ºé€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</td>
</tr>
<tr>
<td>@</td>
<td style="text-align:center">é€‰å–å±æ€§</td>
</tr>
</tbody>
</table>
<h2 id="ï¿¼5"><a class="header-anchor" href="#ï¿¼5">Â¶</a><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">r = requests.get(<span class="string">'http://iguye.com/books.xml'</span>)</span><br><span class="line">se = etree.HTML(r.text) <span class="comment">#åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨å¯¹è±¡</span></span><br><span class="line">print(se.xpath(<span class="string">'//book'</span>)) <span class="comment">#//è¡¨ç¤ºä»ä»»æ„å­èŠ‚ç‚¹ä¸­é€‰å–</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book/author/text()'</span>)) <span class="comment">#é€‰å–ä¹¦åº—ä¸‹æ‰€æœ‰çš„ä¹¦æœ¬çš„ä½œè€…åå­—</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book/title/@lang'</span>))<span class="comment">#é€‰å–ä¹¦åº—ä¸‹æ‰€æœ‰çš„ä¹¦æœ¬çš„è¯­è¨€ä¿¡æ¯</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[1]/title/text()'</span>)) <span class="comment">#ç¬¬ä¸€æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[last()]/title/text()'</span>)) <span class="comment">#æœ€åä¸€æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[last()-1]/title/text()'</span>)) <span class="comment">#å€’æ•°ç¬¬äºŒæœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[position()&lt;3]/title/text()'</span>)) <span class="comment">#å‰ä¸¤æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//book[@category="web"]/title/text()'</span>))<span class="comment">#é€‰å–æ‰€æœ‰åˆ†ç±»ä¸ºwebçš„èŠ‚ç‚¹</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[price&gt;3]/price/text()'</span>))<span class="comment">#é€‰å–æ‰€æœ‰ä»·æ ¼å¤§äº30.0å…ƒçš„ä¹¦æœ¬</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[contains(@class,"book")]/@class/text()'</span>))<span class="comment">#ç±»åä¸­åŒ…å«bookçš„ä¹¦æœ¬</span></span><br></pre></td></tr></table></figure></h2>
<h1>è§£æå™¨æ¯”è¾ƒ</h1>
<p>reè™½ç„¶é€Ÿåº¦æœ€å¿«ï¼Œä½†æ˜¯å­¦ä¹ æˆæœ¬é«˜ã€‚beautifulsoupåˆ™è¾ƒæ…¢ã€‚æ‰€æœ‰æŠ˜ä¸­çš„æ–¹æ¡ˆé€‰æ‹©lxmlä¸ºä½³ã€‚</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>requests</title>
    <url>/2020/02/19/requests/</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br></pre></td></tr></table></figure>
<p>requestsæ¯”æ ‡å‡†åº“çš„urllibæ–¹ä¾¿å¾ˆå¤šï¼Œä»£ç ä¹Ÿå¾ˆç®€æ´æ˜äº†ã€‚</p>
<a id="more"></a>
<h1>å‘é€è¯·æ±‚</h1>
<h2 id="requestå‘é€getå’Œpostè¯·æ±‚"><a class="header-anchor" href="#requestå‘é€getå’Œpostè¯·æ±‚">Â¶</a>requestå‘é€getå’Œpostè¯·æ±‚</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'https://api.github.com/events'</span>) <span class="comment">#å‘é€getè¯·æ±‚</span></span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, data = &#123;<span class="string">'key'</span>:<span class="string">'value'</span>&#125;) <span class="comment">#å‘é€postè¯·æ±‚</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¼ é€’urlå‚æ•°"><a class="header-anchor" href="#ä¼ é€’urlå‚æ•°">Â¶</a>ä¼ é€’urlå‚æ•°</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: [<span class="string">'value2'</span>, <span class="string">'value3'</span>]&#125; <span class="comment">#å¯ä»¥æ·»åŠ ä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">r = requests.get(<span class="string">'https://api.github.com/events'</span>, params = payload) </span><br><span class="line">print(r.url) <span class="comment">#URLä¼šè¢«æ­£ç¡®ç¼–ç </span></span><br><span class="line"><span class="comment">#å­—å…¸ä¸­çš„Noneå€¼ä¸ä¼šè¢«æ·»åŠ åˆ°URLé‡Œ</span></span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, data = &#123;<span class="string">'key'</span>:<span class="string">'value'</span>&#125;) <span class="comment">#å‘é€postè¯·æ±‚</span></span><br><span class="line"><span class="comment">#http://httpbin.org/get?key1=value1&amp;key2=value2&amp;key2=value3</span></span><br></pre></td></tr></table></figure>
<h2 id="å“åº”å†…å®¹"><a class="header-anchor" href="#å“åº”å†…å®¹">Â¶</a>å“åº”å†…å®¹</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r.text    <span class="comment">#å“åº”æŠ¥æ–‡</span></span><br><span class="line">r.encoding <span class="comment">#æŸ¥çœ‹ç¼–ç æ–¹å¼</span></span><br><span class="line">r.encoding = <span class="string">'ISO-8859-1'</span> <span class="comment">#æ”¹å˜å“åº”æŠ¥æ–‡çš„ç¼–ç æ–¹å¼</span></span><br><span class="line">r.content <span class="comment">#åŸæœ¬çš„æŠ¥æ–‡</span></span><br><span class="line">r.json()  <span class="comment">#jsonè§£ç </span></span><br></pre></td></tr></table></figure>
<h2 id="å®šåˆ¶è¯·æ±‚å¤´"><a class="header-anchor" href="#å®šåˆ¶è¯·æ±‚å¤´">Â¶</a>å®šåˆ¶è¯·æ±‚å¤´</h2>
<h3 id="è‡ªå®šä¹‰user-agent"><a class="header-anchor" href="#è‡ªå®šä¹‰user-agent">Â¶</a>è‡ªå®šä¹‰user-agent</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ua = <span class="string">' Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Safari/605.1.15'</span></span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>:ua&#125;</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/headers'</span>, headers = headers)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="cookie"><a class="header-anchor" href="#cookie">Â¶</a>cookie</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cookies = dict(userid = <span class="string">'123456'</span>, token = <span class="string">'#####'</span>)</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/cookies'</span>, cookies = cookies)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="basic-authè®¤è¯"><a class="header-anchor" href="#basic-authè®¤è¯">Â¶</a>basic-authè®¤è¯</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/basic-auth/xxx/1123'</span>, auth = (<span class="string">'xxx'</span>,<span class="string">'1123'</span>))</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="çŠ¶æ€ç "><a class="header-anchor" href="#çŠ¶æ€ç ">Â¶</a>çŠ¶æ€ç </h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/status/404'</span>)</span><br><span class="line">r.status_code</span><br><span class="line">r.raise_for_status() <span class="comment">#æŠ›å‡ºå¼‚å¸¸ï¼Œ4xxå’Œ5xxçš„</span></span><br></pre></td></tr></table></figure>
<h3 id="sessionå¯¹è±¡"><a class="header-anchor" href="#sessionå¯¹è±¡">Â¶</a>sessionå¯¹è±¡</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sessionå¯¹è±¡ä¼šä¿å­˜æœåŠ¡å™¨è¿”å›çš„set-cookieå¤´ä¿¡æ¯é‡Œçš„å†…å®¹</span></span><br><span class="line">s = requests.session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/userid/123456789'</span>)</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/token/######'</span>)</span><br><span class="line"><span class="comment">#ä¸‹ä¸€æ¬¡è¯·æ±‚ä¼šå°†æœ¬åœ°æ‰€æœ‰çš„cookiesä¿¡æ¯è‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´ä¿¡æ¯é‡Œ</span></span><br><span class="line">r = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨requestsä¸­ä½¿ç”¨ä»£ç†"><a class="header-anchor" href="#åœ¨requestsä¸­ä½¿ç”¨ä»£ç†">Â¶</a>åœ¨requestsä¸­ä½¿ç”¨ä»£ç†</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'ä¸ä½¿ç”¨ä»£ç†ï¼š'</span>, requests.get(<span class="string">'http://httpbin.org/ip'</span>).json())</span><br><span class="line">print(<span class="string">'ä½¿ç”¨ä»£ç†ï¼š'</span>,requests.get(<span class="string">'http://httpbin.org/ip'</span>, proxies=&#123;<span class="string">'http'</span>:<span class="string">'http://iguye.com:41801'</span>&#125;).json())</span><br></pre></td></tr></table></figure>
<h3 id="è¶…æ—¶æŠ¥é”™"><a class="header-anchor" href="#è¶…æ—¶æŠ¥é”™">Â¶</a>è¶…æ—¶æŠ¥é”™</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/delay/5'</span>,timeout = <span class="number">5</span>)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>urlç»“æ„</title>
    <url>/2020/02/19/url%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th style="text-align:right">scheme</th>
<th style="text-align:center">Domain</th>
<th style="text-align:center">port</th>
<th style="text-align:center">path</th>
<th style="text-align:center">pathinfo</th>
<th style="text-align:left">Query string</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">http:</td>
<td style="text-align:center"><a href="//localhost" target="_blank" rel="noopener">//localhost</a>:</td>
<td style="text-align:center">4000/</td>
<td style="text-align:center">2020/02/19/</td>
<td style="text-align:center">requests/</td>
<td style="text-align:left">#more</td>
</tr>
</tbody>
</table>
<center>urlç»“æ„</center>
<a id="more"></a>
ä»ä¸Šé¢çš„URLå¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªå®Œæ•´çš„URLåŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š
<p>1ã€åè®®éƒ¨åˆ†ï¼šè¯¥URLçš„åè®®éƒ¨åˆ†ä¸ºâ€œhttpï¼šâ€ï¼Œè¿™ä»£è¡¨ç½‘é¡µä½¿ç”¨çš„æ˜¯HTTPåè®®ã€‚åœ¨Internetä¸­å¯ä»¥ä½¿ç”¨å¤šç§åè®®ï¼Œå¦‚HTTPï¼ŒFTPç­‰ç­‰æœ¬ä¾‹ä¸­ä½¿ç”¨çš„æ˜¯HTTPåè®®ã€‚åœ¨&quot;HTTP&quot;åé¢çš„â€œ//â€ä¸ºåˆ†éš”ç¬¦</p>
<p>2ã€åŸŸåéƒ¨åˆ†ï¼šè¯¥URLçš„åŸŸåéƒ¨åˆ†ä¸ºâ€œ<a href="http://www.aspxfans.com" target="_blank" rel="noopener">www.aspxfans.com</a>â€ã€‚ä¸€ä¸ªURLä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨IPåœ°å€ä½œä¸ºåŸŸåä½¿ç”¨</p>
<p>3ã€ç«¯å£éƒ¨åˆ†ï¼šè·Ÿåœ¨åŸŸååé¢çš„æ˜¯ç«¯å£ï¼ŒåŸŸåå’Œç«¯å£ä¹‹é—´ä½¿ç”¨â€œ:â€ä½œä¸ºåˆ†éš”ç¬¦ã€‚ç«¯å£ä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ï¼Œå¦‚æœçœç•¥ç«¯å£éƒ¨åˆ†ï¼Œå°†é‡‡ç”¨é»˜è®¤ç«¯å£80</p>
<p>4ã€è™šæ‹Ÿç›®å½•éƒ¨åˆ†ï¼šä»åŸŸååçš„ç¬¬ä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°æœ€åä¸€ä¸ªâ€œ/â€ä¸ºæ­¢ï¼Œæ˜¯è™šæ‹Ÿç›®å½•éƒ¨åˆ†ã€‚è™šæ‹Ÿç›®å½•ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„è™šæ‹Ÿç›®å½•æ˜¯â€œ/news/â€</p>
<p>5ã€æ–‡ä»¶åéƒ¨åˆ†ï¼šä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°â€œï¼Ÿâ€ä¸ºæ­¢ï¼Œæ˜¯æ–‡ä»¶åéƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰â€œ?â€,åˆ™æ˜¯ä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°â€œ#â€ä¸ºæ­¢ï¼Œæ˜¯æ–‡ä»¶éƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰â€œï¼Ÿâ€å’Œâ€œ#â€ï¼Œé‚£ä¹ˆä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°ç»“æŸï¼Œéƒ½æ˜¯æ–‡ä»¶åéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„æ–‡ä»¶åæ˜¯â€œindex.aspâ€ã€‚æ–‡ä»¶åéƒ¨åˆ†ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ï¼Œå¦‚æœçœç•¥è¯¥éƒ¨åˆ†ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å</p>
<p>6ã€é”šéƒ¨åˆ†ï¼šä»â€œ#â€å¼€å§‹åˆ°æœ€åï¼Œéƒ½æ˜¯é”šéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„é”šéƒ¨åˆ†æ˜¯â€œnameâ€ã€‚é”šéƒ¨åˆ†ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†</p>
<p>7ã€å‚æ•°éƒ¨åˆ†ï¼šä»â€œï¼Ÿâ€å¼€å§‹åˆ°â€œ#â€ä¸ºæ­¢ä¹‹é—´çš„éƒ¨åˆ†ä¸ºå‚æ•°éƒ¨åˆ†ï¼Œåˆç§°æœç´¢éƒ¨åˆ†ã€æŸ¥è¯¢éƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„å‚æ•°éƒ¨åˆ†ä¸ºâ€œboardID=5&amp;ID=24618&amp;page=1â€ã€‚å‚æ•°å¯ä»¥å…è®¸æœ‰å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¸å‚æ•°ä¹‹é—´ç”¨â€œ&amp;â€ä½œä¸ºåˆ†éš”ç¬¦ã€‚</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>curlå’Œwget</title>
    <url>/2020/02/18/curl%E5%92%8Cwget%E4%BA%86%E8%A7%A3/</url>
    <content><![CDATA[<h1>curl</h1>
<p>curlæ˜¯ç³»ç»Ÿè‡ªå¸¦çš„cåº“ï¼Œç®€å•è¿‡ä¸€ä¸‹ï¼Œè®°å½•ä¸€ä¸‹å‚æ•°ã€‚<br>
ä¸å¸¦å‚æ•°å°±æ˜¯ï¼ŒGETè¯·æ±‚ã€‚</p>
<a id="more"></a>
<h2 id="A"><a class="header-anchor" href="#A">Â¶</a>-A</h2>
<p>æŒ‡å®šå®¢æˆ·ç«¯çš„ä»£ç†æ ‡å¤´</p>
<h2 id="B"><a class="header-anchor" href="#B">Â¶</a>-B</h2>
<p>å‘é€cookie</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -b <span class="string">'foo1=bar;foo2=bar2'</span> https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="X"><a class="header-anchor" href="#X">Â¶</a>-X</h2>
<p>ç”¨æŒ‡å®šæ–¹å¼è¯·æ±‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -X Post https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="d"><a class="header-anchor" href="#d">Â¶</a>-d</h2>
<p>ç”¨Postè¯·æ±‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -d <span class="string">"a=1&amp;b=1"</span> https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="L"><a class="header-anchor" href="#L">Â¶</a>-L</h2>
<p>è·ŸéšæœåŠ¡å™¨é‡å®šå‘</p>
<h2 id="H"><a class="header-anchor" href="#H">Â¶</a>-H</h2>
<p>è®¾ç½®httpè¯·æ±‚å¤´ä¿¡æ¯</p>
<h2 id="k"><a class="header-anchor" href="#k">Â¶</a>-k</h2>
<p>è·³è¿‡sslæ£€æµ‹(https)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -k https://www.example.com</span><br></pre></td></tr></table></figure>
<h2 id="O"><a class="header-anchor" href="#O">Â¶</a>-O</h2>
<p>ä»¥è¿œç¨‹çš„æ–‡ä»¶åä¸‹è½½ä¿å­˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -O https://httpbin.org/image/jpeg</span><br></pre></td></tr></table></figure>
<h2 id="o"><a class="header-anchor" href="#o">Â¶</a>-o</h2>
<p>ä»¥è‡ªå®šçš„æ–‡ä»¶åä¸‹è½½ä¿å­˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -o wolf.jpeg https://httpbin.org/image/jpeg</span><br></pre></td></tr></table></figure>
<h2 id="s"><a class="header-anchor" href="#s">Â¶</a>-s</h2>
<p>ä¸æ˜¾ç¤ºæ— å…³ä¿¡æ¯</p>
<h2 id="v"><a class="header-anchor" href="#v">Â¶</a>-v</h2>
<p>æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯</p>
<hr>
<h1>wget</h1>
<p>ç³»ç»Ÿè‡ªå¸¦çš„ä¸‹è½½æ–‡ä»¶çš„å·¥å…·ã€‚</p>
<h2 id="O-v2"><a class="header-anchor" href="#O-v2">Â¶</a>-O</h2>
<p>ä»¥æŒ‡å®šæ–‡ä»¶åå­˜æ–‡ä»¶</p>
<h2 id="â€“limit-rate"><a class="header-anchor" href="#â€“limit-rate">Â¶</a>â€“limit-rate=</h2>
<p>é™é€Ÿ</p>
<h2 id="c"><a class="header-anchor" href="#c">Â¶</a>-c</h2>
<p>æ–­ç‚¹ç»­ä¼ </p>
<h2 id="b"><a class="header-anchor" href="#b">Â¶</a>-b</h2>
<p>åå°ä¸‹è½½</p>
<h2 id="U"><a class="header-anchor" href="#U">Â¶</a>-U</h2>
<p>è®¾ç½®user-agent</p>
<h2 id="mirror"><a class="header-anchor" href="#mirror">Â¶</a>-mirror</h2>
<p>é•œåƒæŸä¸ªç½‘ç«™</p>
<h2 id="p"><a class="header-anchor" href="#p">Â¶</a>-p</h2>
<p>ä¸‹è½½ç½‘é¡µçš„æ‰€æœ‰å†…å®¹</p>
<h2 id="r"><a class="header-anchor" href="#r">Â¶</a>-r</h2>
<p>é€’å½’ä¸‹è½½æ‰€æœ‰ç½‘é¡µä¸­æ‰€æœ‰é“¾æ¥</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>http(è¶…æ–‡æœ¬ä¼ è¾“åè®®)</title>
    <url>/2020/02/17/http%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<pre><code>åŸºäºTCP/IPçš„åº”ç”¨å±‚åè®®ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ•°æ®ä¼ è¾“çš„æ ¼å¼ï¼Œé»˜è®¤ç«¯å£ï¼š80ã€‚ åŸºäºè¯·æ±‚ä¸å“åº”æ¨¡å¼ï¼Œæ— çŠ¶æ€ã€‚
</code></pre>
<a id="more"></a>
<h1>http header</h1>
<h2 id="è¯·æ±‚æŠ¥æ–‡"><a class="header-anchor" href="#è¯·æ±‚æŠ¥æ–‡">Â¶</a>è¯·æ±‚æŠ¥æ–‡</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;test.php HTTP&#x2F;1.1               &#x2F;&#x2F;è¯·æ±‚è¡Œ</span><br><span class="line">HOSTï¼šwww.test.com                    &#x2F;&#x2F;è¯·æ±‚å¤´</span><br><span class="line">User-Agentï¼šMozilla&#x2F;5.0 ï¼ˆwindows NT 6.1ï¼›rvï¼š15.0ï¼‰Gecko&#x2F;20100101 Firefox&#x2F;15.0        </span><br><span class="line">                                    &#x2F;&#x2F;ç©ºç™½è¡Œï¼Œä»£è¡¨è¯·æ±‚å¤´ç»“æŸ</span><br><span class="line">Username&#x3D;admin&amp;password&#x3D;admin       &#x2F;&#x2F;è¯·æ±‚æ­£æ–‡</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚è¡Œï¼šè¯·æ±‚æ–¹å¼ + è¯·æ±‚èµ„æºè·¯å¾„ + ç‰ˆæœ¬<br>
è¯·æ±‚å¤´ï¼šå‘èµ·è¯·æ±‚çš„ä¸»æœºä¿¡æ¯<br>
æ­£æ–‡ï¼š  optional</p>
<h3 id="è¯·æ±‚å¤´"><a class="header-anchor" href="#è¯·æ±‚å¤´">Â¶</a>è¯·æ±‚å¤´</h3>
<ul>
<li>Host è¯·æ±‚æŠ¥å¤´åŸŸä¸»è¦ç”¨äºæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„Internetä¸»æœºå’Œç«¯å£ã€‚</li>
<li>User-Agent è¯·æ±‚æŠ¥å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å°†å®ƒçš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å’Œå…¶ä»–å±æ€§å‘Šè¯‰æœåŠ¡å™¨ã€‚</li>
<li>Referer åŒ…å«ä¸€ä¸ªURLï¼Œä»£è¡¨å½“å‰è®¿é—®URLçš„ä¸Šä¸€ä¸ªURLï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·æ˜¯ä»ä»€ä¹ˆåœ°æ–¹æ¥åˆ°æœ¬é¡µé¢ã€‚å½“å‰è¯·æ±‚çš„åŸå§‹URLåœ°å€ã€‚</li>
<li>Cookie æ˜¯éå¸¸é‡è¦çš„è¯·æ±‚å¤´ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºè¯·æ±‚è€…çš„èº«ä»½ç­‰ã€‚</li>
<li>Accept è¿™ä¸ªæ¶ˆæ¯å¤´ç”¨äºå‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯æ„¿æ„æ¥å—é‚£äº›å†…å®¹ï¼Œæ¯”å¦‚å›¾åƒç±»ï¼ŒåŠå…¬æ–‡æ¡£æ ¼å¼ç­‰ç­‰ã€‚</li>
</ul>
<h3 id="è¯·æ±‚æ–¹å¼"><a class="header-anchor" href="#è¯·æ±‚æ–¹å¼">Â¶</a>è¯·æ±‚æ–¹å¼</h3>
<p><img src="http%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F.png" alt="httpè¯·æ±‚æ–¹å¼"></p>
<hr>
<h2 id="å“åº”æŠ¥æ–‡"><a class="header-anchor" href="#å“åº”æŠ¥æ–‡">Â¶</a>å“åº”æŠ¥æ–‡</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK   					 &#x2F;&#x2F;å“åº”è¡Œ</span><br><span class="line">Date: Sun, 15 Nov 2015 11:02:04 GMT    &#x2F;&#x2F;å“åº”å¤´</span><br><span class="line">Server: bfe&#x2F;1.0.8.9</span><br><span class="line">Content-Length: 2605</span><br><span class="line">Content-Type: application&#x2F;javascript</span><br><span class="line">Cache-Control: max-age&#x3D;315360000</span><br><span class="line">Expires: Fri, 13 Jun 2025 09:54:00 GMT</span><br><span class="line">Content-Encoding: gzip</span><br><span class="line">Set-Cookie: H_PS_PSSID&#x3D;2022_1438_1944_1788; path&#x3D;&#x2F;; domain&#x3D;test.com</span><br><span class="line">Connection: keep-alive</span><br><span class="line">					      &#x2F;&#x2F;ç©ºç™½è¡Œï¼Œä»£è¡¨å“åº”å¤´ç»“æŸ</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt; Index.html &lt;&#x2F;title&gt;&lt;&#x2F;head&gt;  &#x2F;&#x2F;å“åº”æ­£æ–‡æ¶ˆæ¯ä¸»é¢˜</span><br></pre></td></tr></table></figure>
<p>å“åº”è¡Œï¼šç‰ˆæœ¬+çŠ¶æ€ç <br>
å“åº”å¤´ï¼šæœåŠ¡ç«¯çš„ä¿¡æ¯</p>
<h3 id="å“åº”å¤´"><a class="header-anchor" href="#å“åº”å¤´">Â¶</a>å“åº”å¤´</h3>
<p><img src="http%E5%93%8D%E5%BA%94%E5%A4%B4.png" alt="httpå“åº”å¤´"></p>
<h3 id="çŠ¶æ€ç "><a class="header-anchor" href="#çŠ¶æ€ç ">Â¶</a>çŠ¶æ€ç </h3>
<p>å¸¸è§çš„çŠ¶æ€ç æè¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>200ï¼šå®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>302ï¼šé‡å®šå‘ã€‚</li>
<li>404ï¼šè¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>400ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ã€‚</li>
<li>401ï¼šè¯·æ±‚æœªç»æˆæƒã€‚</li>
<li>403ï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚</li>
<li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>503ï¼šæœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ul>
<hr>
<h2 id="Q-A"><a class="header-anchor" href="#Q-A">Â¶</a>Q&amp;A</h2>
<ul>
<li>
<p>getå’Œpostçš„åŒºåˆ«<br>
getè¯·æ±‚çš„å‚æ•°åœ¨urlåé¢æ·»åŠ <br>
poståœ¨è¯·æ±‚ä½“ä¸­é—´</p>
</li>
<li>
<p>httpsåŠ ssl, tsl, è¯ä¹¦</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>åè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„åšå®¢æ˜¯æ€ä¹ˆåˆ›å»ºçš„</title>
    <url>/2020/02/16/%E5%8D%9A%E5%AE%A2%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<p>ç®€å•è®°å½•ä¸€ä¸‹ï¼Œåšå®¢çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…ç¯å¢ƒ"><a class="header-anchor" href="#å®‰è£…ç¯å¢ƒ">Â¶</a>å®‰è£…ç¯å¢ƒ</h2>
<pre><code>åœ¨åˆ›å»ºåšå®¢ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰Githubè´¦å·ï¼Œè¿˜æœ‰ç¡®ä¿ç³»ç»Ÿé‡Œæœ‰gitå·¥å…·ã€‚
</code></pre>
<hr>
<h4 id="ä¸‹è½½hexo"><a class="header-anchor" href="#ä¸‹è½½hexo">Â¶</a>ä¸‹è½½hexo</h4>
<ol>
<li>ç›´æ¥å»nodejs.orgå®˜ç½‘ä¸‹è½½node.js</li>
<li>æ‰“å¼€terminalä¸‹è½½hexoéœ€è¦ç”¨åˆ°node.jsçš„npmå®‰è£…åŒ…ç®¡ç†å™¨:</li>
</ol>
<h2 id="ï¿¼0"><a class="header-anchor" href="#ï¿¼0">Â¶</a><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo su                     ##è·å–æœ€é«˜æƒé™</span><br><span class="line">npm install -g cnpm --registry&#x3D;&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org </span><br><span class="line">                            ##æ·˜å®çš„é•œåƒæºï¼Œç”¨cnpmä¸‹è½½æ¯”è¾ƒå¿«</span><br><span class="line">cnpm intall -g hexo-cli     ##å¼€å§‹ä¸‹è½½hexo</span><br></pre></td></tr></table></figure></h2>
<h2 id="åˆ›å»ºåšå®¢"><a class="header-anchor" href="#åˆ›å»ºåšå®¢">Â¶</a>åˆ›å»ºåšå®¢</h2>
<h4 id="åˆå§‹åŒ–åšå®¢"><a class="header-anchor" href="#åˆå§‹åŒ–åšå®¢">Â¶</a>åˆå§‹åŒ–åšå®¢</h4>
<p>åˆ›å»ºåšå®¢çš„ä»£ç ä¹Ÿå¾ˆç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir blog</span><br><span class="line">cd blog                     ##åˆ›ä¸ªæ–‡ä»¶å¤¹å¥½ç®¡ç†</span><br><span class="line">sudo hexo init              ##åˆå§‹åŒ–hexo</span><br><span class="line">hexo s                      ##å¯ä»¥åœ¨æœ¬åœ°çœ‹ä¸€ä¸‹ï¼Œblogçš„æ¨¡ç‰ˆï¼Œåç»­æ·»åŠ äº†å†…å®¹ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæŒ‡ä»¤å»é¢„è§ˆ</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ–°æ–‡ç« "><a class="header-anchor" href="#åˆ›å»ºæ–°æ–‡ç« ">Â¶</a>åˆ›å»ºæ–°æ–‡ç« </h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new æ–‡ç« å.md</span><br></pre></td></tr></table></figure>
<p>ä¸€è¡Œä»£ç å³åˆ›å»ºmarkdownæ ¼å¼çš„æ–‡ç« ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç›´æ¥åˆ›å»ºï¼Œä¸€èˆ¬å­˜åœ¨ /blog/source/_posts çš„è·¯å¾„ä¸‹ã€‚</p>
<hr>
<h2 id="é…ç½®åˆ°è¿œç«¯ä»“åº“"><a class="header-anchor" href="#é…ç½®åˆ°è¿œç«¯ä»“åº“">Â¶</a>é…ç½®åˆ°è¿œç«¯ä»“åº“</h2>
<h4 id="åˆ›å»ºgithubä»“åº“"><a class="header-anchor" href="#åˆ›å»ºgithubä»“åº“">Â¶</a>åˆ›å»ºgithubä»“åº“</h4>
<p>è¿™ä¸€æ­¥å°±æ˜¯åœ¨githubé‡Œé¢åˆ›å»ºä¸€ä¸ªrepositoryï¼Œå°±æ˜¯å­˜blogæ–‡ä»¶çš„ï¼Œrepositoryçš„nameä¸€å®šè¦æ˜¯ github name + .github.io, <a href="http://xn--noonett-i22mo3ry3qkvkl5qky6a.github.io" target="_blank" rel="noopener">æ¯”å¦‚æˆ‘çš„å°±æ˜¯noonett.github.io</a></p>
<h4 id="ä¿®è¿‡é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#ä¿®è¿‡é…ç½®æ–‡ä»¶">Â¶</a>ä¿®è¿‡é…ç½®æ–‡ä»¶</h4>
<p>åœ¨/blog/ è·¯å¾„ä¸‹æœ‰ä¸€ä¸ª _config.yml æ–‡ä»¶ï¼Œè¿›å…¥ä¿®æ”¹ï¼Œæ‰¾åˆ°deployä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type: git</span><br><span class="line">repo: https:&#x2F;&#x2F;github.com&#x2F;noonett&#x2F;noonett.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„repoå°±æ˜¯repositoryä»“åº“çš„åœ°å€ã€‚</p>
<h4 id="éƒ¨ç½²è‡³ä»“åº“"><a class="header-anchor" href="#éƒ¨ç½²è‡³ä»“åº“">Â¶</a>éƒ¨ç½²è‡³ä»“åº“</h4>
<p>å°†æœ¬åœ°ç°æœ‰çš„blogéƒ¨ç½²è‡³è¿œç«¯ä»“åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æœ‰è‡ªå·±çš„åšå®¢å•¦ï¼š å°±æ˜¯ä½ çš„repositoryåå­—ã€‚</p>
<h4 id="ä¸»é¢˜çš„æ›´æ¢"><a class="header-anchor" href="#ä¸»é¢˜çš„æ›´æ¢">Â¶</a>ä¸»é¢˜çš„æ›´æ¢</h4>
<p>ä¸»é¢˜çš„æ›´æ¢ä¹Ÿå¾ˆç®€å•æ–¹ä¾¿ï¼Œç½‘ä¸Šæ‰¾åˆ°ä¸»é¢˜ï¼Œcloneåˆ°è‡ªå·±çš„ä»“åº“é‡Œï¼Œç„¶åä¿®æ”¹ymlé‡Œçš„themeæ”¹æˆä¸»é¢˜çš„åå­—å³å¯ï¼Œç™¾åº¦ä¸Šï¼ŒçŸ¥ä¹ä¸ŠæŒºå¤šçš„ã€‚</p>
<hr>
<h2 id="ç»“æŸè¯­"><a class="header-anchor" href="#ç»“æŸè¯­">Â¶</a>ç»“æŸè¯­</h2>
<p>ç½‘ä¸Šå…¶å®æœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±æ˜¯è®°å½•ä¸€ä¸‹æˆ‘çš„åšå®¢æ˜¯å¦‚ä½•åˆ›å»ºçš„</p>
<hr>
<h2 id="å‚è€ƒæ–‡çŒ®"><a class="header-anchor" href="#å‚è€ƒæ–‡çŒ®">Â¶</a>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://www.bilibili.com/video/av44544186?from=search&amp;seid=16653039335337070050" target="_blank" rel="noopener">https://www.bilibili.com/video/av44544186?from=search&amp;seid=16653039335337070050</a>  æ‰‹æŠŠæ‰‹æ•™ä½ ä»0å¼€å§‹æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ |æ— å‘ç‰ˆè§†é¢‘æ•™ç¨‹| hexo</p>
]]></content>
      <tags>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘æ¥ç½‘ä¸Šå†²æµªäº†</title>
    <url>/2020/02/16/%E6%88%91%E6%9D%A5%E7%BD%91%E4%B8%8A%E5%86%B2%E6%B5%AA%E4%BA%86/</url>
    <content><![CDATA[<h1>hello world</h1>
<p>æ‘é€šç½‘äº†ã€‚</p>
<a id="more"></a>
<h1>Overview</h1>
<p>è¿‘æœŸåŸºäºgithubå’Œhexoåˆ›å»ºäº†è¿™ä¸ªblogï¼Œç”¨nextä¸»é¢˜ç¾åŒ–ã€‚</p>
<h2 id="ç›®çš„"><a class="header-anchor" href="#ç›®çš„">Â¶</a>ç›®çš„</h2>
<p>è®°å½•ä¸€ä¸‹å­¦ä¹ ç¬”è®°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è®°å½•ä¸€ä¸‹ç”Ÿæ´»ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªç¬”è®°æœ¬å§ã€‚</p>
<h2 id="æ¥ä¸‹æ¥"><a class="header-anchor" href="#æ¥ä¸‹æ¥">Â¶</a>æ¥ä¸‹æ¥</h2>
<p>æ¥ä¸‹æ¥å¯èƒ½ä¼šåšä¸€ç¯‡blogåˆ›å»ºçš„ç®€å•æ•™ç¨‹</p>
]]></content>
      <tags>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
</search>
