<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Javaæ³¨è§£</title>
    <url>/2020/03/07/Java%E6%B3%A8%E8%A7%A3/</url>
    <content><![CDATA[<h1>Annotationçš„ç§ç±»</h1>
<p>ç¬¬ä¸€ç±»æ˜¯ç”±ç¼–è¯‘å™¨ä½¿ç”¨çš„æ³¨è§£ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>@Overrideï¼šè®©ç¼–è¯‘å™¨æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ­£ç¡®åœ°å®ç°äº†è¦†å†™ï¼›</li>
<li>@SuppressWarningsï¼šå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥æ­¤å¤„ä»£ç äº§ç”Ÿçš„è­¦å‘Šã€‚<br>
è¿™ç±»æ³¨è§£ä¸ä¼šè¢«ç¼–è¯‘è¿›å…¥.classæ–‡ä»¶ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘åå°±è¢«ç¼–è¯‘å™¨æ‰”æ‰äº†ã€‚</li>
</ul>
<p>ç¬¬äºŒç±»æ˜¯ç”±å·¥å…·å¤„ç†.classæ–‡ä»¶ä½¿ç”¨çš„æ³¨è§£ï¼Œæ¯”å¦‚æœ‰äº›å·¥å…·ä¼šåœ¨åŠ è½½classçš„æ—¶å€™ï¼Œå¯¹classåšåŠ¨æ€ä¿®æ”¹ï¼Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚è¿™ç±»æ³¨è§£ä¼šè¢«ç¼–è¯‘è¿›å…¥.classæ–‡ä»¶ï¼Œä½†åŠ è½½ç»“æŸåå¹¶ä¸ä¼šå­˜åœ¨äºå†…å­˜ä¸­ã€‚è¿™ç±»æ³¨è§£åªè¢«ä¸€äº›åº•å±‚åº“ä½¿ç”¨ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸å¿…è‡ªå·±å¤„ç†ã€‚</p>
<p>ç¬¬ä¸‰ç±»æ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸèƒ½å¤Ÿè¯»å–çš„æ³¨è§£ï¼Œå®ƒä»¬åœ¨åŠ è½½åä¸€ç›´å­˜åœ¨äºJVMä¸­ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ³¨è§£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé…ç½®äº†@PostConstructçš„æ–¹æ³•ä¼šåœ¨è°ƒç”¨æ„é€ æ–¹æ³•åè‡ªåŠ¨è¢«è°ƒç”¨ï¼ˆè¿™æ˜¯Javaä»£ç è¯»å–è¯¥æ³¨è§£å®ç°çš„åŠŸèƒ½ï¼ŒJVMå¹¶ä¸ä¼šè¯†åˆ«è¯¥æ³¨è§£ï¼‰ã€‚</p>
<h5 id="æ³¨è§£çš„å‚æ•°"><a class="header-anchor" href="#æ³¨è§£çš„å‚æ•°">Â¶</a>æ³¨è§£çš„å‚æ•°</h5>
<p>æ³¨è§£çš„é…ç½®å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œç¼ºå°‘æŸä¸ªé…ç½®å‚æ•°æ—¶å°†ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<h1>å®šä¹‰æ³¨è§£</h1>
<p>ä½¿ç”¨@interfaceè¯­æ³•æ¥å®šä¹‰annotationã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> "info"</span>;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨è§£çš„å‚æ•°ç±»ä¼¼æ— å‚æ•°æ–¹æ³•ï¼Œå¯ä»¥ç”¨defaultè®¾å®šä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¼ºçƒˆæ¨èï¼‰ã€‚æœ€å¸¸ç”¨çš„å‚æ•°åº”å½“å‘½åä¸ºvalueã€‚</p>
<h3 id="å…ƒæ³¨è§£"><a class="header-anchor" href="#å…ƒæ³¨è§£">Â¶</a>å…ƒæ³¨è§£</h3>
<p>å¯ä»¥ä¿®é¥°æ³¨è§£ï¼Œæ·»åŠ è§„åˆ™ã€‚</p>
<h5 id="Target"><a class="header-anchor" href="#Target">Â¶</a>@Target</h5>
<p>ä½¿ç”¨@Targetå¯ä»¥å®šä¹‰Annotationèƒ½å¤Ÿè¢«åº”ç”¨äºæºç çš„å“ªäº›ä½ç½®ï¼š<br>
ç±»æˆ–æ¥å£ï¼šElementType.TYPEï¼›<br>
å­—æ®µï¼šElementType.FIELDï¼›<br>
æ–¹æ³•ï¼šElementType.METHODï¼›<br>
æ„é€ æ–¹æ³•ï¼šElementType.CONSTRUCTORï¼›<br>
æ–¹æ³•å‚æ•°ï¼šElementType.PARAMETERã€‚</p>
<h5 id="Retention"><a class="header-anchor" href="#Retention">Â¶</a>@Retention</h5>
<p>å¦ä¸€ä¸ªé‡è¦çš„å…ƒæ³¨è§£@Retentionå®šä¹‰äº†Annotationçš„ç”Ÿå‘½å‘¨æœŸï¼š<br>
ä»…ç¼–è¯‘æœŸï¼šRetentionPolicy.SOURCEï¼›<br>
ä»…classæ–‡ä»¶ï¼šRetentionPolicy.CLASSï¼›<br>
è¿è¡ŒæœŸï¼šRetentionPolicy.RUNTIMEã€‚<br>
å¦‚æœ@Retentionä¸å­˜åœ¨ï¼Œåˆ™è¯¥Annotationé»˜è®¤ä¸ºCLASSã€‚å› ä¸ºé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„Annotationéƒ½æ˜¯RUNTIMEï¼Œæ‰€ä»¥ï¼ŒåŠ¡å¿…è¦åŠ ä¸Š@Retention(RetentionPolicy.RUNTIME)è¿™ä¸ªå…ƒæ³¨è§£</p>
<h1>å¤„ç†æ³¨è§£</h1>
<p>è®¨è®ºä¸€ä¸‹runtimeçš„æ³¨è§£ï¼Œæ³¨è§£å®šä¹‰åå…¶å®æ˜¯ä¸€ä¸ªclassï¼Œæ‰€æœ‰çš„æ³¨è§£éƒ½ç»§æ‰¿è‡ªjava.lang.annotation.Annotationï¼Œå› æ­¤è¯»å–æ³¨è§£è¦ç”¨åˆ°åå°„APIã€‚</p>
<h3 id="åå°„è¯»å–annotation"><a class="header-anchor" href="#åå°„è¯»å–annotation">Â¶</a>åå°„è¯»å–annotation</h3>
<ol>
<li>
<p>åˆ¤æ–­æŸä¸ªæ³¨è§£æ˜¯å¦å­˜åœ¨äºClassã€Fieldã€Methodæˆ–Constructorï¼š</p>
<p>Class.isAnnotationPresent(Class)<br>
Field.isAnnotationPresent(Class)<br>
Method.isAnnotationPresent(Class)<br>
Constructor.isAnnotationPresent(Class)</p>
</li>
<li>
<p>ä½¿ç”¨åå°„APIè¯»å–Annotationï¼š<br>
Class.getAnnotation(Class)<br>
Field.getAnnotation(Class)<br>
Method.getAnnotation(Class)<br>
Constructor.getAnnotation(Class)</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Class cls = Person<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"><span class="keyword">if</span> (cls.isAnnotationPresent(Report<span class="class">.<span class="keyword">class</span>)) </span>&#123;</span><br><span class="line">    Report report = cls.getAnnotation(Report<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨æ³¨è§£"><a class="header-anchor" href="#ä½¿ç”¨æ³¨è§£">Â¶</a>ä½¿ç”¨æ³¨è§£</h3>
<h5 id="1-å®šä¹‰æ³¨è§£"><a class="header-anchor" href="#1-å®šä¹‰æ³¨è§£">Â¶</a>1 å®šä¹‰æ³¨è§£</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Range &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">()</span> <span class="keyword">default</span> 255</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-ä½¿ç”¨æ³¨è§£"><a class="header-anchor" href="#2-ä½¿ç”¨æ³¨è§£">Â¶</a>2 ä½¿ç”¨æ³¨è§£</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Range</span>(min=<span class="number">1</span>, max=<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Range</span>(max=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">public</span> String city;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-æ£€æŸ¥æ–¹æ³•"><a class="header-anchor" href="#3-æ£€æŸ¥æ–¹æ³•">Â¶</a>3 æ£€æŸ¥æ–¹æ³•</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(Person person)</span> <span class="keyword">throws</span> IllegalArgumentException, ReflectiveOperationException </span>&#123;</span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰Field:</span></span><br><span class="line">    <span class="keyword">for</span> (Field field : person.getClass().getFields()) &#123;</span><br><span class="line">        <span class="comment">// è·å–Fieldå®šä¹‰çš„@Range:</span></span><br><span class="line">        Range range = field.getAnnotation(Range<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœ@Rangeå­˜åœ¨:</span></span><br><span class="line">        <span class="keyword">if</span> (range != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// è·å–Fieldçš„å€¼:</span></span><br><span class="line">            Object value = field.get(person);</span><br><span class="line">            <span class="comment">// å¦‚æœå€¼æ˜¯String:</span></span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">                String s = (String) value;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å€¼æ˜¯å¦æ»¡è¶³@Rangeçš„min/max:</span></span><br><span class="line">                <span class="keyword">if</span> (s.length() &lt; range.min() || s.length() &gt; range.max()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid field: "</span> + field.getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬é€šè¿‡@Rangeæ³¨è§£ï¼Œé…åˆcheck()æ–¹æ³•ï¼Œå°±å¯ä»¥å®ŒæˆPersonå®ä¾‹çš„æ£€æŸ¥ã€‚æ³¨æ„æ£€æŸ¥é€»è¾‘å®Œå…¨æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼ŒJVMä¸ä¼šè‡ªåŠ¨ç»™æ³¨è§£æ·»åŠ ä»»ä½•é¢å¤–çš„é€»è¾‘ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»Šæœé…’</title>
    <url>/2020/03/07/top/</url>
    <content><![CDATA[<p>æ¯æ—¥ã€Šå‰‘æŒ‡offerã€‹ï¼Œå­¦å®Œäº†åå°„å’Œæ³›å‹ä¾æ—§äº‘é‡Œé›¾é‡Œã€‚å­¦äº†ä¹Ÿæœ‰ä¸€å‘¨äº†ï¼Œå¾—å›å¤´å¤ä¹ ä¸€ä¸‹ï¼Œè¯»ä¸€æ³¢ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹ã€‚<br>
è¿˜æœ‰æ“ä½œç³»ç»ŸåŸºç¡€â€¦ccè¿™é—¨è¯¾æ¶µç›–æ˜¯çœŸçš„å¹¿â€¦</p>
<a id="more"></a>
<ul>
<li>
<p>2020-03-04 15:13:14<br>
èµ¶ç´§æŠŠä½œä¸šå†™äº†ï¼ŒæŠŠè®ºæ–‡è¯»äº†ã€‚çœ‹Javaåå°„ï¼Œç»§ç»­åˆ·ã€Šå‰‘æŒ‡offerã€‹ğŸ˜Œã€‚</p>
</li>
<li>
<p>2020-03-03 19:13:14<br>
è¿™å‡ å¤©å¿™äºå­¦ä¸šã€‚æ‰åˆšæŠŠæ ¸å¿ƒç±»çœ‹å®Œï¼Œçœ‹å¼‚å¸¸å¤„ç†ï¼Œåˆ·ã€Šå‰‘æŒ‡offerã€‹ã€‚</p>
</li>
<li>
<p>2020-02-29 22:13:14<br>
é¢å‘å¯¹è±¡æ˜¯æå®šäº†ï¼Œè¿˜çœŸçš„çŒ›è¿™é—¨è¯­è¨€ã€‚è¯¾å†…ä»»åŠ¡è¿˜æ²¡åšï¼Œdueè¦åˆ°äº†ã€‚</p>
</li>
<li>
<p>2020-02-28 22:17:14<br>
å­¦äº†æ³¢Javaå…¥é—¨ï¼Œä»æ­ç¯å¢ƒåˆ°è¿™é—¨è¯­è¨€åŸºç¡€ã€‚<br>
å‡†å¤‡å¼€å§‹è¿™é—¨è¯­è¨€çš„ç¬¬ä¸€ä¸ªç‰¹æ€§ï¼Œé¢å‘å¯¹è±¡ã€‚<br>
ç„¶åæŠŠè¯¾å†…çš„ä»»åŠ¡ç»™æ¸…äº†ã€‚</p>
</li>
<li>
<p>2020-02-26 21:27:14<br>
æœ€è¿‘åˆšå¼€è¯¾ï¼Œå¾—å‡†å¤‡ä¸Šè¯¾å’Œè¡¥æ•°å­¦ï¼Œæ²¡æ—¶é—´æçˆ¬è™«ã€‚åˆšå¥½cloud computingè¦ç”¨Gitå’ŒJaveï¼Œæ•´å¥½ç³»ç»Ÿå¾—å­¦ä¸€ä¸‹Gitã€‚<br>
æ›´æ–°å®Œäº†Gitï¼Œæ‰“ç®—å¼€å§‹å­¦Javaï¼ŒåŒæ—¶ä¹Ÿè¡¥åç«¯çš„çŸ¥è¯†ã€‚</p>
</li>
</ul>
<h2 id="å»–è€å¸ˆJavaåŸºç¡€è¯¾å¾…å¹²ï¼š"><a class="header-anchor" href="#å»–è€å¸ˆJavaåŸºç¡€è¯¾å¾…å¹²ï¼š">Â¶</a>å»–è€å¸ˆJavaåŸºç¡€è¯¾å¾…å¹²ï¼š</h2>
<table>
<thead>
<tr>
<th>ç« èŠ‚</th>
<th style="text-align:left">OKï¼Ÿ</th>
</tr>
</thead>
<tbody>
<tr>
<td>Javaå…¥é—¨</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>é¢å‘å¯¹è±¡ç¼–ç¨‹</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>Javaæ ¸å¿ƒç±»</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>å¼‚å¸¸å¤„ç†</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>åå°„</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>æ³¨è§£</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>æ³›å‹</td>
<td style="text-align:left">ğŸ‘Œ</td>
</tr>
<tr>
<td>é›†åˆ</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>IO</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>æ—¥æœŸä¸æ—¶é—´</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>å•å…ƒæµ‹è¯•</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>æ­£åˆ™è¡¨è¾¾å¼</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>åŠ å¯†ä¸å®‰å…¨</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>å¤šçº¿ç¨‹</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>MavenåŸºç¡€</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>ç½‘ç»œç¼–ç¨‹</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>XMLä¸JSON</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>JDBCç¼–ç¨‹</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>å‡½æ•°å¼ç¼–ç¨‹</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>è®¾è®¡æ¨¡å¼</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h2 id="Javaæ ¸å¿ƒæŠ€æœ¯å·I"><a class="header-anchor" href="#Javaæ ¸å¿ƒæŠ€æœ¯å·I">Â¶</a>Javaæ ¸å¿ƒæŠ€æœ¯å·I</h2>
]]></content>
      <tags>
        <tag>ç½®é¡¶</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦</title>
    <url>/2020/03/07/%E5%AD%97%E7%AC%A6%E6%B5%81%E4%B8%AD%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%B8%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AD%97%E7%AC%A6/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥æ‰¾å‡ºå­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå½“ä»å­—ç¬¦æµä¸­åªè¯»å‡ºå‰ä¸¤ä¸ªå­—ç¬¦&quot;go&quot;æ—¶ï¼Œç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦æ˜¯&quot;g&quot;ã€‚å½“ä»è¯¥å­—ç¬¦æµä¸­è¯»å‡ºå‰å…­ä¸ªå­—ç¬¦â€œgoogle&quot;æ—¶ï¼Œç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦æ˜¯&quot;l&quot;ã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•"><a class="header-anchor" href="#è§£æ³•">Â¶</a>è§£æ³•:</h2>
<pre><code>ä½¿ç”¨ä¸€ä¸ªint[]åšæ ‡è®°ï¼Œç¬¬ä¸€æ¬¡å‡ºç°è®¡ä¸ºindexå€¼ï¼Œç¬¬äºŒæ¬¡å‡ºç°åˆ™è®¡ä¸º-2ã€‚å­—èŠ‚æµè¾“å…¥å®Œåï¼Œç„¶åæ£€æŸ¥è¿™ä¸ª[]é‡Œçš„å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå¤§äºé›¶çš„å³ä¸ºç¬¬ä¸€ä¸ªåªå‡ºç°çš„å­—ç¬¦ï¼Œå…¶æ‰€åœ¨ä½ç½®çš„ä¸‹æ ‡å³ä¸ºè¯¥å­—ç¬¦çš„ASCIIç å€¼ï¼Œç±»å‹è½¬æ¢åè¿”å›ã€‚
</code></pre>
<h2 id="Code"><a class="header-anchor" href="#Code">Â¶</a>Code:</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Insert one char from stringstream</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] occurence = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Solution</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span>;i&lt;<span class="number">256</span>;i++)&#123;</span><br><span class="line">            occurence[i] = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> ch)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(occurence[ch] == -<span class="number">1</span>)&#123;</span><br><span class="line">            occurence[ch] = index;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(occurence[ch]&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            occurence[ch] = -<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//return the first appearence once char in current stringstream</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">FirstAppearingOnce</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> ch = <span class="string">'\0'</span>;</span><br><span class="line">        <span class="keyword">int</span> minIndex = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">256</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(occurence[i] &gt;=<span class="number">0</span> &amp;&amp; occurence[i]&lt;minIndex)&#123;</span><br><span class="line">                ch = (<span class="keyword">char</span>)i;</span><br><span class="line">                minIndex = occurence[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'\0'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'#'</span>;</span><br><span class="line">        <span class="keyword">return</span> ch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ³›å‹</title>
    <url>/2020/03/06/Java%E6%B3%9B%E5%9E%8B/</url>
    <content><![CDATA[<p>æ³›å‹æ˜¯ä¸€ç§â€œä»£ç æ¨¡æ¿â€ï¼Œå¯ä»¥ç”¨ä¸€å¥—ä»£ç å¥—ç”¨å„ç§ç±»å‹ã€‚ç¼–å†™ä¸€æ¬¡ï¼Œä¸‡èƒ½åŒ¹é…ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T e)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ArrayListï¼Œå®ƒå¯ä»¥çœ‹ä½œâ€œå¯å˜é•¿åº¦â€çš„æ•°ç»„ï¼Œå†…éƒ¨å°±æ˜¯ä¸€ä¸ªObject[]æ•°ç»„ï¼Œé…åˆå­˜å‚¨ä¸€ä¸ªå½“å‰åˆ†é…çš„é•¿åº¦ã€‚</p>
<h4 id="å‘ä¸Šè½¬å‹"><a class="header-anchor" href="#å‘ä¸Šè½¬å‹">Â¶</a>å‘ä¸Šè½¬å‹</h4>
<p>åœ¨Javaæ ‡å‡†åº“ä¸­çš„ArrayList<T>å®ç°äº†List<T>æ¥å£ï¼Œå®ƒå¯ä»¥å‘ä¸Šè½¬å‹ä¸ºList<T>ã€‚<br>
è¦ç‰¹åˆ«æ³¨æ„ï¼šä¸èƒ½æŠŠArrayList<Integer>å‘ä¸Šè½¬å‹ä¸ºArrayList<Number>æˆ–List<Number>ã€‚<br>
æˆ‘ä»¬æŠŠä¸€ä¸ªArrayList<Integer>è½¬å‹ä¸ºArrayList<Number>ç±»å‹åï¼Œè¿™ä¸ªArrayList<Number>å°±å¯ä»¥æ¥å—Floatç±»å‹ï¼Œå› ä¸ºFloatæ˜¯Numberçš„å­ç±»ã€‚ä½†æ˜¯ï¼ŒArrayList<Number>å®é™…ä¸Šå’ŒArrayList<Integer>æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ArrayList<Integer>ç±»å‹ï¼Œå®ƒä¸å¯èƒ½æ¥å—Floatç±»å‹ï¼Œ æ‰€ä»¥åœ¨è·å–Integerçš„æ—¶å€™å°†äº§ç”ŸClassCastExceptionã€‚</Integer></Integer></Number></Number></Number></Integer></Number></Number></Integer></T></T></T></p>
<h1>ä½¿ç”¨æ³›å‹</h1>
<p>ç¼–è¯‘å™¨çœ‹åˆ°æ³›å‹ç±»å‹List<Number>å°±å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºåé¢çš„ArrayList<T>çš„æ³›å‹ç±»å‹å¿…é¡»æ˜¯ArrayList<Number>ï¼Œå› æ­¤ï¼Œå¯ä»¥æŠŠä»£ç ç®€å†™ä¸ºï¼š</Number></T></Number></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥çœç•¥åé¢çš„Numberï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­æ³›å‹ç±»å‹ï¼š</span></span><br><span class="line">List&lt;Number&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<h3 id="æ³›å‹æ¥å£"><a class="header-anchor" href="#æ³›å‹æ¥å£">Â¶</a>æ³›å‹æ¥å£</h3>
<p>é™¤äº†ArrayList<T>ä½¿ç”¨äº†æ³›å‹ï¼Œè¿˜å¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨æ³›å‹ã€‚ä¾‹å¦‚ï¼ŒArrays.sort(Object[])å¯ä»¥å¯¹ä»»æ„æ•°ç»„è¿›è¡Œæ’åºï¼Œä½†å¾…æ’åºçš„å…ƒç´ å¿…é¡»å®ç°Comparable<T>è¿™ä¸ªæ³›å‹æ¥å£ï¼š<br>
å¯ä»¥ç›´æ¥å¯¹Stringæ•°ç»„è¿›è¡Œæ’åº,è¿™æ˜¯å› ä¸ºStringæœ¬èº«å·²ç»å®ç°äº†Comparable<String>æ¥å£ã€‚å¦‚æœæ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„Personç±»å‹è¯•è¯•ï¼š</String></T></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person[] ps = <span class="keyword">new</span> Person[] &#123;</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Bob"</span>, <span class="number">61</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Alice"</span>, <span class="number">88</span>),</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="string">"Lily"</span>, <span class="number">75</span>),</span><br><span class="line">&#125;;</span><br><span class="line">Arrays.sort(ps);</span><br><span class="line">System.out.println(Arrays.toString(ps));</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ClassCastExceptionï¼Œå³æ— æ³•å°†Personè½¬å‹ä¸ºComparableã€‚æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œè®©Personå®ç°Comparable<T>æ¥å£ï¼š</T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> score;</span><br><span class="line">    Person(String name, <span class="keyword">int</span> score) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person other)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name.compareTo(other.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">","</span> + <span class="keyword">this</span>.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥æ­£ç¡®å®ç°æŒ‰nameè¿›è¡Œæ’åºã€‚ä¹Ÿå¯ä»¥ä¿®æ”¹æ¯”è¾ƒé€»è¾‘ï¼Œä¾‹å¦‚ï¼ŒæŒ‰scoreä»é«˜åˆ°ä½æ’åºã€‚</p>
<h1>ç¼–å†™æ³›å‹</h1>
<p>é€šå¸¸æ¥è¯´ï¼Œæ³›å‹ç±»ä¸€èˆ¬ç”¨åœ¨é›†åˆç±»ä¸­ã€‚<br>
é¦–å…ˆï¼ŒæŒ‰ç…§æŸç§ç±»å‹ï¼Œä¾‹å¦‚ï¼šStringï¼Œæ¥ç¼–å†™ç±»ã€‚<br>
ç„¶åï¼Œæ ‡è®°æ‰€æœ‰çš„ç‰¹å®šç±»å‹ï¼Œè¿™é‡Œæ˜¯Stringã€‚<br>
æœ€åï¼ŒæŠŠç‰¹å®šç±»å‹Stringæ›¿æ¢ä¸ºTï¼Œå¹¶ç”³æ˜<T>ã€‚</T></p>
<h3 id="é™æ€æ–¹æ³•"><a class="header-anchor" href="#é™æ€æ–¹æ³•">Â¶</a>é™æ€æ–¹æ³•</h3>
<p>ç¼–å†™æ³›å‹ç±»æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œæ³›å‹ç±»å‹<T>ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•ã€‚<br>
å¯ä»¥åœ¨staticä¿®é¥°ç¬¦åé¢åŠ ä¸€ä¸ª<T>ï¼Œç¼–è¯‘å°±èƒ½é€šè¿‡ï¼š</T></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getLast</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥ç¼–è¯‘é€šè¿‡:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Pair&lt;T&gt; <span class="title">create</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pair&lt;T&gt;(first, last);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†å®é™…ä¸Šï¼Œè¿™ä¸ª<T>å’ŒPair<T>ç±»å‹çš„<T>å·²ç»æ²¡æœ‰ä»»ä½•å…³ç³»äº†<br>
å¯¹äºé™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬æ”¹å†™ä¸ºâ€œæ³›å‹â€æ–¹æ³•ï¼Œåªéœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹å³å¯ã€‚å¯¹äºä¸Šé¢çš„create()é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒæ”¹ä¸ºå¦ä¸€ç§æ³›å‹ç±»å‹ï¼Œä¾‹å¦‚ï¼Œ<K>ï¼šè¿™æ ·æ‰èƒ½æ¸…æ¥šåœ°å°†é™æ€æ–¹æ³•çš„æ³›å‹ç±»å‹å’Œå®ä¾‹ç±»å‹çš„æ³›å‹ç±»å‹åŒºåˆ†å¼€ã€‚</K></T></T></T></p>
<h3 id="å¤šä¸ªæ³›å‹ç±»å‹"><a class="header-anchor" href="#å¤šä¸ªæ³›å‹ç±»å‹">Â¶</a>å¤šä¸ªæ³›å‹ç±»å‹</h3>
<p>æ³›å‹è¿˜å¯ä»¥å®šä¹‰å¤šç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›Pairä¸æ€»æ˜¯å­˜å‚¨ä¸¤ä¸ªç±»å‹ä¸€æ ·çš„å¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»å‹&lt;T, K&gt;ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>, <span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> K last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, K last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">getLast</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ—¶ç‰¹åˆ«æŒ‡å‡ºä¸¤ç§ç±»å‹ï¼š</span></span><br><span class="line">Pair&lt;String, Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="string">"test"</span>, <span class="number">123</span>);</span><br></pre></td></tr></table></figure>
<p>Javaæ ‡å‡†åº“çš„Map&lt;K, V&gt;å°±æ˜¯ä½¿ç”¨ä¸¤ç§æ³›å‹ç±»å‹çš„ä¾‹å­ã€‚å®ƒå¯¹Keyä½¿ç”¨ä¸€ç§ç±»å‹ï¼Œå¯¹Valueä½¿ç”¨å¦ä¸€ç§ç±»å‹ã€‚</p>
<h1>æ“¦æ‹­æ³•Type Erasure</h1>
<h3 id="å®ç°æ³›å‹çš„åº•å±‚"><a class="header-anchor" href="#å®ç°æ³›å‹çš„åº•å±‚">Â¶</a>å®ç°æ³›å‹çš„åº•å±‚</h3>
<p>Javaä½¿ç”¨æ“¦æ‹­æ³•å®ç°æ³›å‹ï¼Œå¯¼è‡´äº†ï¼š</p>
<ul>
<li>ç¼–è¯‘å™¨æŠŠç±»å‹<T>è§†ä¸ºObjectï¼›</T></li>
<li>ç¼–è¯‘å™¨æ ¹æ®<T>å®ç°å®‰å…¨çš„å¼ºåˆ¶è½¬å‹ã€‚<br>
æ‰€ä»¥ï¼ŒJavaçš„æ³›å‹æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®è¡Œçš„ï¼Œç¼–è¯‘å™¨å†…éƒ¨æ°¸è¿œæŠŠæ‰€æœ‰ç±»å‹Tè§†ä¸ºObjectå¤„ç†ï¼Œä½†æ˜¯ï¼Œåœ¨éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®Tçš„ç±»å‹è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®è¡Œå®‰å…¨åœ°å¼ºåˆ¶è½¬å‹ã€‚</T></li>
</ul>
<h3 id="Javaæ³›å‹çš„å±€é™"><a class="header-anchor" href="#Javaæ³›å‹çš„å±€é™">Â¶</a>Javaæ³›å‹çš„å±€é™</h3>
<p>å±€é™ä¸€ï¼š<T>ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¾‹å¦‚intï¼Œå› ä¸ºå®é™…ç±»å‹æ˜¯Objectï¼ŒObjectç±»å‹æ— æ³•æŒæœ‰åŸºæœ¬ç±»å‹ã€‚<br>
å±€é™äºŒï¼šæ— æ³•å–å¾—å¸¦æ³›å‹çš„Classã€‚<br>
å› ä¸ºTæ˜¯Objectï¼Œæˆ‘ä»¬å¯¹Pair<String>å’ŒPair<Integer>ç±»å‹è·å–Classæ—¶ï¼Œè·å–åˆ°çš„æ˜¯åŒä¸€ä¸ªClassï¼Œä¹Ÿå°±æ˜¯Pairç±»çš„Classã€‚<br>
æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰æ³›å‹å®ä¾‹ï¼Œæ— è®ºTçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼ŒgetClass()è¿”å›åŒä¸€ä¸ªClasså®ä¾‹ï¼Œå› ä¸ºç¼–è¯‘åå®ƒä»¬å…¨éƒ¨éƒ½æ˜¯Pair<Object>ã€‚<br>
å±€é™ä¸‰ï¼šæ— æ³•åˆ¤æ–­å¸¦æ³›å‹çš„Class<br>
å±€é™å››ï¼šä¸èƒ½å®ä¾‹åŒ–Tç±»å‹<br>
åˆ›å»ºnew Pair<String>()å’Œåˆ›å»ºnew Pair<Integer>()å°±å…¨éƒ¨æˆäº†Objectï¼Œæ˜¾ç„¶ç¼–è¯‘å™¨è¦é˜»æ­¢è¿™ç§ç±»å‹ä¸å¯¹çš„ä»£ç ã€‚<br>
è¦å®ä¾‹åŒ–Tç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»å€ŸåŠ©é¢å¤–çš„Class<T>å‚æ•°ï¼š</T></Integer></String></Object></Integer></String></T></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">        first = clazz.newInstance();</span><br><span class="line">        last = clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³›å‹æ–¹æ³•è¦é˜²æ­¢é‡å¤å®šä¹‰æ–¹æ³•ã€‚å®šä¹‰çš„equals(T t)æ–¹æ³•å®é™…ä¸Šä¼šè¢«æ“¦æ‹­æˆequals(Object t)ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ˜¯ç»§æ‰¿è‡ªObjectçš„ï¼Œç¼–è¯‘å™¨ä¼šé˜»æ­¢ä¸€ä¸ªå®é™…ä¸Šä¼šå˜æˆè¦†å†™çš„æ³›å‹æ–¹æ³•å®šä¹‰ã€‚<br>
æ¢ä¸ªæ–¹æ³•åï¼Œé¿å¼€ä¸Object.equals(Object)çš„å†²çªå°±å¯ä»¥æˆåŠŸç¼–è¯‘ï¼Œå¦‚same(T t)ã€‚</p>
<h3 id="æ³›å‹ç»§æ‰¿"><a class="header-anchor" href="#æ³›å‹ç»§æ‰¿">Â¶</a>æ³›å‹ç»§æ‰¿</h3>
<p>ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿è‡ªä¸€ä¸ªæ³›å‹ç±»</p>
<h1>extendé€šé…ç¬¦</h1>
<p>æœ‰æ²¡æœ‰åŠæ³•ä½¿å¾—æ–¹æ³•å‚æ•°æ¥å—Pair<Integer>ï¼ŸåŠæ³•æ˜¯æœ‰çš„ï¼Œè¿™å°±æ˜¯ä½¿ç”¨Pair&lt;? extends Number&gt;ä½¿å¾—æ–¹æ³•æ¥æ”¶æ‰€æœ‰æ³›å‹ç±»å‹ä¸ºNumberæˆ–Numberå­ç±»çš„Pairç±»å‹ã€‚åŠ å…¥extendä¹‹åæ³›å‹æ“¦æ‹­å°†ä¸ºNumberè€Œä¸æ˜¯Objectã€‚</Integer></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pair&lt;Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">        <span class="keyword">int</span> n = add(p);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(Pair&lt;? extends Number&gt; p)</span> </span>&#123;</span><br><span class="line">        Number first = p.getFirst();</span><br><span class="line">        Number last = p.getLast();</span><br><span class="line">        <span class="keyword">return</span> first.intValue() + last.intValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T last)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œç»™æ–¹æ³•ä¼ å…¥Pair<Integer>ç±»å‹æ—¶ï¼Œå®ƒç¬¦åˆå‚æ•°Pair&lt;? extends Number&gt;ç±»å‹ã€‚è¿™ç§ä½¿ç”¨&lt;? extends Number&gt;çš„æ³›å‹å®šä¹‰ç§°ä¹‹ä¸ºä¸Šç•Œé€šé…ç¬¦ï¼ˆUpper Bounds Wildcardsï¼‰ï¼Œå³æŠŠæ³›å‹ç±»å‹Tçš„ä¸Šç•Œé™å®šåœ¨Numberäº†ã€‚<br>
é™¤äº†å¯ä»¥ä¼ å…¥Pair<Integer>ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¼ å…¥Pair<Double>ç±»å‹ï¼ŒPair<BigDecimal>ç±»å‹ç­‰ç­‰ï¼Œå› ä¸ºDoubleå’ŒBigDecimaléƒ½æ˜¯Numberçš„å­ç±»ã€‚</BigDecimal></Double></Integer></Integer></p>
<h3 id="ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•"><a class="header-anchor" href="#ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•">Â¶</a>ä¸å¯ä¼ å…¥æ³›å‹ç±»å‹çš„å¼•ç”¨ç»™æ³›å‹ç±»å‹çš„setæ–¹æ³•</h3>
<p>ç¼–è¯‘é”™è¯¯å‘ç”Ÿåœ¨p.setFirst()ä¼ å…¥çš„å‚æ•°æ˜¯Integerç±»å‹ã€‚æœ‰äº›ç«¥é‹ä¼šé—®äº†ï¼Œæ—¢ç„¶pçš„å®šä¹‰æ˜¯Pair&lt;? extends Number&gt;ï¼Œé‚£ä¹ˆsetFirst(? extends Number)ä¸ºä»€ä¹ˆä¸èƒ½ä¼ å…¥Integerï¼Ÿ<br>
åŸå› è¿˜åœ¨äºæ“¦æ‹­æ³•ã€‚å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„pæ˜¯Pair<Double>ï¼Œæ˜¾ç„¶å®ƒæ»¡è¶³å‚æ•°å®šä¹‰Pair&lt;? extends Number&gt;ï¼Œç„¶è€Œï¼ŒPair<Double>çš„setFirst()æ˜¾ç„¶æ— æ³•æ¥å—Integerç±»å‹ã€‚<br>
è¿™å°±æ˜¯&lt;? extends Number&gt;é€šé…ç¬¦çš„ä¸€ä¸ªé‡è¦é™åˆ¶ï¼šæ–¹æ³•å‚æ•°ç­¾åsetFirst(? extends Number)æ— æ³•ä¼ é€’ä»»ä½•Numberç±»å‹ç»™setFirst(? extends Number)ã€‚<br>
è¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯å¯ä»¥ç»™æ–¹æ³•å‚æ•°ä¼ å…¥nullã€‚</Double></Double></p>
<h3 id="extendçš„ä½œç”¨"><a class="header-anchor" href="#extendçš„ä½œç”¨">Â¶</a>extendçš„ä½œç”¨</h3>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•å‚æ•°ç±»å‹æ˜¯List&lt;? extends Integer&gt;è€Œä¸æ˜¯List<Integer>ï¼Ÿä»æ–¹æ³•å†…éƒ¨ä»£ç çœ‹ï¼Œä¼ å…¥List&lt;? extends Integer&gt;æˆ–è€…List<Integer>æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä½†æ˜¯ï¼Œæ³¨æ„åˆ°List&lt;? extends Integer&gt;çš„é™åˆ¶ï¼š</Integer></Integer></p>
<p>å…è®¸è°ƒç”¨get()æ–¹æ³•è·å–Integerçš„å¼•ç”¨ï¼›<br>
ä¸å…è®¸è°ƒç”¨set(? extends Integer)æ–¹æ³•å¹¶ä¼ å…¥ä»»ä½•Integerçš„å¼•ç”¨ï¼ˆnullé™¤å¤–ï¼‰ã€‚<br>
å› æ­¤ï¼Œæ–¹æ³•å‚æ•°ç±»å‹List&lt;? extends Integer&gt;è¡¨æ˜äº†è¯¥æ–¹æ³•å†…éƒ¨åªä¼šè¯»å–Listçš„å…ƒç´ ï¼Œä¸ä¼šä¿®æ”¹Listçš„å…ƒç´ ï¼ˆå› ä¸ºæ— æ³•è°ƒç”¨add(? extends Integer)ã€remove(? extends Integer)è¿™äº›æ–¹æ³•ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹å‚æ•°List&lt;? extends Integer&gt;è¿›è¡Œåªè¯»çš„æ–¹æ³•ï¼ˆæ¶æ„è°ƒç”¨set(null)é™¤å¤–ï¼‰ã€‚</p>
<h3 id="ä½¿ç”¨extendé™å®š-T-ç±»å‹"><a class="header-anchor" href="#ä½¿ç”¨extendé™å®š-T-ç±»å‹">Â¶</a>ä½¿ç”¨extendé™å®š<T>ç±»å‹</T></h3>
<p>åœ¨å®šä¹‰æ³›å‹ç±»å‹Pair<T>çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨extendsé€šé…ç¬¦æ¥é™å®šTçš„ç±»å‹ã€‚éNumberç±»å‹å°†æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</T></p>
<h1>superé€šé…ç¬¦</h1>
<p>ä½¿ç”¨çš„ç±»å‹åªèƒ½æ˜¯æ³›å‹çš„çˆ¶ç±»ã€‚<br>
å› æ­¤ï¼Œä½¿ç”¨&lt;? super Integer&gt;é€šé…ç¬¦è¡¨ç¤ºï¼š<br>
å…è®¸è°ƒç”¨set(? super Integer)æ–¹æ³•ä¼ å…¥Integerçš„å¼•ç”¨ï¼›<br>
ä¸å…è®¸è°ƒç”¨get()æ–¹æ³•è·å¾—Integerçš„å¼•ç”¨ã€‚å› ä¸ºä¼ å…¥çš„ç±»å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯numberã€‚<br>
å”¯ä¸€ä¾‹å¤–æ˜¯å¯ä»¥è·å–Objectçš„å¼•ç”¨ï¼šObject o = p.getFirst()ã€‚<br>
æ¢å¥è¯è¯´ï¼Œä½¿ç”¨&lt;? super Integer&gt;é€šé…ç¬¦ä½œä¸ºæ–¹æ³•å‚æ•°ï¼Œè¡¨ç¤ºæ–¹æ³•å†…éƒ¨ä»£ç å¯¹äºå‚æ•°åªèƒ½å†™ï¼Œä¸èƒ½è¯»ã€‚</p>
<h3 id="PECS"><a class="header-anchor" href="#PECS">Â¶</a>PECS</h3>
<p>ä½•æ—¶ä½¿ç”¨extendsï¼Œä½•æ—¶ä½¿ç”¨superï¼Ÿä¸ºäº†ä¾¿äºè®°å¿†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨PECSåŸåˆ™ï¼šProducer Extends Consumer Superã€‚<br>
å³ï¼šå¦‚æœéœ€è¦è¿”å›Tï¼Œå®ƒæ˜¯ç”Ÿäº§è€…ï¼ˆProducerï¼‰ï¼Œè¦ä½¿ç”¨extendsé€šé…ç¬¦ï¼›å¦‚æœéœ€è¦å†™å…¥Tï¼Œå®ƒæ˜¯æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ï¼Œè¦ä½¿ç”¨superé€šé…ç¬¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Collections</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">copy</span><span class="params">(List&lt;? <span class="keyword">super</span> T&gt; dest, List&lt;? extends T&gt; src)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;src.size(); i++) &#123;</span><br><span class="line">            T t = src.get(i); <span class="comment">// srcæ˜¯producer</span></span><br><span class="line">            dest.add(t); <span class="comment">// destæ˜¯consumer</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è¿”å›Tçš„srcæ˜¯ç”Ÿäº§è€…ï¼Œå› æ­¤å£°æ˜ä¸ºList&lt;? extends T&gt;ï¼Œéœ€è¦å†™å…¥Tçš„destæ˜¯æ¶ˆè´¹è€…ï¼Œå› æ­¤å£°æ˜ä¸ºList&lt;? super T&gt;ã€‚</p>
<h1>æ— é™å®šé€šé…ç¬¦</h1>
<p>å› ä¸º&lt;?&gt;é€šé…ç¬¦æ—¢æ²¡æœ‰extendsï¼Œä¹Ÿæ²¡æœ‰superï¼Œå› æ­¤ï¼š<br>
ä¸å…è®¸è°ƒç”¨set(T)æ–¹æ³•å¹¶ä¼ å…¥å¼•ç”¨ï¼ˆnullé™¤å¤–ï¼‰ï¼›<br>
ä¸å…è®¸è°ƒç”¨T get()æ–¹æ³•å¹¶è·å–Tå¼•ç”¨ï¼ˆåªèƒ½è·å–Objectå¼•ç”¨ï¼‰ã€‚<br>
æ¢å¥è¯è¯´ï¼Œæ—¢ä¸èƒ½è¯»ï¼Œä¹Ÿä¸èƒ½å†™ï¼Œé‚£åªèƒ½åšä¸€äº›nullåˆ¤æ–­</p>
<ul>
<li>Pair&lt;?&gt;æ˜¯æ‰€æœ‰Pair<T>çš„è¶…ç±»ï¼Œå¯ä»¥å®‰å…¨çš„å‘ä¸Šè½¬å‹ã€‚</T></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Pair&lt;Integer&gt; p = <span class="keyword">new</span> Pair&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">    Pair&lt;?&gt; p2 = p; <span class="comment">// å®‰å…¨åœ°å‘ä¸Šè½¬å‹</span></span><br><span class="line">    System.out.println(p2.getFirst() + <span class="string">", "</span> + p2.getLast());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>æ³›å‹å’Œåå°„</h1>
<p>éƒ¨åˆ†åå°„ä¹Ÿæ˜¯æ³›å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// compile warning:</span></span><br><span class="line">Class clazz = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">String str = (String) clazz.newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// no warning:</span></span><br><span class="line">Class&lt;String&gt; clazz = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">String str = clazz.newInstance();</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨Classçš„getSuperclass()æ–¹æ³•è¿”å›çš„Classç±»å‹æ˜¯Class&lt;? super T&gt;ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>æ›¿æ¢ç©ºæ ¼ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸ºWe Are Happy.åˆ™ç»è¿‡æ›¿æ¢ä¹‹åçš„å­—ç¬¦ä¸²ä¸ºWe%20Are%20Happyã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•1"><a class="header-anchor" href="#è§£æ³•1">Â¶</a>è§£æ³•1:</h2>
<p>æ­£åˆ™è¡¨è¾¾å¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">replaceSpace</span><span class="params">(StringBuffer str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> str.toString().replaceAll(<span class="string">"\\s"</span>,<span class="string">"%20"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è§£æ³•2"><a class="header-anchor" href="#è§£æ³•2">Â¶</a>è§£æ³•2:</h2>
<p>ä»åå‘å‰çš„æ›¿æ¢å­—ç¬¦ä¸²ã€‚</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">replaceSpace</span><span class="params">(StringBuffer str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str.length() == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> str.toString();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> oriLength = str.length();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;= oriLength-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(i)==<span class="string">' '</span>)</span><br><span class="line">                count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> str.toString();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> newLength = oriLength + count*<span class="number">2</span>;</span><br><span class="line">        str.setLength(newLength);</span><br><span class="line">        newLength--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = oriLength - <span class="number">1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(i)==<span class="string">' '</span>)&#123;</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'0'</span>);</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'2'</span>);</span><br><span class="line">                str.setCharAt(newLength--,<span class="string">'%'</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                str.setCharAt(newLength--,str.charAt(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•ç”¨ä¾‹"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹">Â¶</a>æµ‹è¯•ç”¨ä¾‹</h5>
<ol>
<li>è¾“å…¥çš„å­—ç¬¦ä¸²åŒ…å«ç©ºæ ¼ã€‚ï¼ˆç©ºæ ¼ä½äºæœ€å‰é¢ï¼Œæœ€åé¢ï¼Œä¸­é—´ï¼Œæœ‰è¿ç»­å¤šä¸ªç©ºæ ¼ï¼‰</li>
<li>è¾“å…¥çš„å­—ç¬¦ä¸²æ²¡æœ‰ç©ºæ ¼</li>
<li>ç‰¹æ®Šè¾“å…¥æµ‹è¯•ï¼ˆå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªnullï¼Œå­—ç¬¦ä¸²ä¸ºç©ºï¼Œå­—ç¬¦ä¸²åªæœ‰ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ï¼‰</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>å‰‘æŒ‡offer</tag>
      </tags>
  </entry>
  <entry>
    <title>æ„å»ºä¹˜ç§¯æ•°ç»„ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E2%80%9C%E6%9E%84%E5%BB%BA%E4%B9%98%E7%A7%AF%E6%95%B0%E7%BB%84%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B%E2%80%9D/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šç»™å®šä¸€ä¸ªæ•°ç»„A[0,1,...,n-1],è¯·æ„å»ºä¸€ä¸ªæ•°ç»„B[0,1,...,n-1],å…¶ä¸­Bä¸­çš„å…ƒç´ B[i]=A[0]*A[1]*...*A[i-1]*A[i+1]*...*A[n-1]ã€‚ä¸èƒ½ä½¿ç”¨é™¤æ³•ã€‚ï¼ˆæ³¨æ„ï¼šè§„å®šB[0] = A[1] * A[2] * ... * A[n-1]ï¼ŒB[n-1] = A[0] * A[1] * ... * A[n-2];ï¼‰
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<p>åšä¸¤æ¬¡å¾ªç¯å¤„ç†ï¼Œå…ˆä»ä¸‹åˆ°ä¸Šè®¡ç®—0 ï½ i-1ä¸ªçš„ä¹˜ç§¯ï¼Œå†ä»ä¸Šåˆ°ä¸‹è®¡ç®—n ï½ i+1çš„ä¹˜ç§¯ã€‚</p>
<h2 id="Code"><a class="header-anchor" href="#Code">Â¶</a>Code:</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] multiply(<span class="keyword">int</span>[] A) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span>[] B = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line">            <span class="keyword">int</span> temp = <span class="number">1</span>;</span><br><span class="line">            B[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; ++i)&#123;</span><br><span class="line">                B[i] = B[i-<span class="number">1</span>] * A[i-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = A.length - <span class="number">2</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">                temp *= A[i + <span class="number">1</span>];</span><br><span class="line">                B[i] *= temp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> B;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> A;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•ç”¨ä¾‹"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹">Â¶</a>æµ‹è¯•ç”¨ä¾‹</h5>
<ol>
<li>åŠŸèƒ½æµ‹è¯•ï¼ˆè¾“å…¥æ•°ç»„åŒ…æ‹¬æ­£æ•°ï¼Œè´Ÿæ•°ï¼Œä¸€ä¸ª0ï¼Œå¤šä¸ª0ï¼‰</li>
<li>è¾¹ç•Œæµ‹è¯•ï¼ˆè¾“å…¥æ•°ç»„é•¿åº¦ä¸º0ï¼‰</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/06/%E6%95%B0%E7%BB%84%E4%B8%AD%E6%89%BE%E5%88%B0%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚
</code></pre>
<a id="more"></a>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<p>å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ï¼Œä¸€æ¬¡å¯ä»¥æ¶ˆé™¤ä¸€åˆ—æˆ–è€…ä¸€è¡Œä¸ç¬¦åˆçš„æ•°ã€‚</p>
<h4 id="code"><a class="header-anchor" href="#code">Â¶</a>code</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> target, <span class="keyword">int</span> [][] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(array == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> column = array[<span class="number">0</span>].length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((row &lt;= array[<span class="number">0</span>].length-<span class="number">1</span>)&amp;&amp;(column &gt;= <span class="number">0</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(array[row][column] == target)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(array[row][column] &gt; target)</span><br><span class="line">                column -= <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(array[row][column] &lt; target)</span><br><span class="line">                row += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<ol>
<li>æ•°ç»„ä¸­æ²¡æœ‰æŸ¥æ‰¾çš„æ•°å­—</li>
<li>ç©ºæ•°ç»„</li>
<li>æ•°ç»„ä¸­æœ‰æŸ¥æ‰¾çš„æ•°å­—</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>MapReduceï¼šSimplified Data Processing on Large Clusters</title>
    <url>/2020/03/06/MapReduce%EF%BC%9ASimplified%20Data%20Processing%20on%20Large%20Clusters/</url>
    <content><![CDATA[<h3 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">Â¶</a>æ‘˜è¦</h3>
<pre><code>MapReduceæ—¢æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸ä¹‹å…³è”çš„ã€ç”¨äºå¤„ç†å’Œäº§ç”Ÿå¤§æ•°æ®é›†çš„å®ç°ã€‚ç”¨æˆ·è¦ç‰¹åŒ–ä¸€ä¸ªmapç¨‹åºå»å¤„ç†key/valueå¯¹ï¼Œå¹¶äº§ç”Ÿä¸­é—´key/valueå¯¹çš„é›†åˆï¼Œä»¥åŠä¸€ä¸ªreduceç¨‹åºå»åˆå¹¶æœ‰ç€ç›¸åŒkeyçš„æ‰€æœ‰ä¸­é—´key/valueå¯¹ã€‚æœ¬æ–‡æŒ‡å‡ºï¼Œè®¸å¤šå®é™…çš„ä»»åŠ¡éƒ½å¯ä»¥ç”¨è¿™ç§æ¨¡å‹æ¥è¡¨ç¤ºã€‚

ç”¨è¿™ç§å‡½æ•°å¼é£æ ¼å†™å‡ºçš„ç¨‹åºè‡ªåŠ¨å°±æ‹¥æœ‰äº†åœ¨ä¸€ä¸ªå¤§çš„PCæœºé›†ç¾¤ä¸Šå¹¶è¡Œæ‰§è¡Œçš„èƒ½åŠ›ã€‚è¿è¡Œæ—¶ç³»ç»Ÿä¼šè´Ÿè´£ç»†èŠ‚ï¼šåˆ‡åˆ†è¾“å…¥æ•°æ®ï¼Œåœ¨ä¸€ç»„æœºå™¨ä¸Šè°ƒåº¦æ‰§è¡Œç¨‹åºï¼Œå¤„ç†æœºå™¨é”™è¯¯ï¼Œä»¥åŠç®¡ç†æ‰€éœ€çš„æœºå™¨é—´é€šä¿¡ã€‚è¿™å…è®¸ä¸å…·å¤‡ä»»ä½•å¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿèƒ½è½»æ¾åœ°åˆ©ç”¨ä¸€ä¸ªå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„èµ„æºã€‚

æˆ‘ä»¬çš„MapReduceå®ç°è¿è¡Œåœ¨ä¸€ä¸ªå¤§å‹PCæœºé›†ç¾¤ä¸Šï¼Œä¸”å…·æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§ï¼šä¸€ä¸ªå…¸å‹çš„MapReduceè®¡ç®—è¦åœ¨æ•°åƒå°æœºå™¨ä¸Šå¤„ç†è‹¥å¹²TBçš„æ•°æ®ã€‚ç¨‹åºå‘˜å¯ä»¥å¾ˆè½»æ¾çš„ä½¿ç”¨è¿™ä¸€ç³»ç»Ÿï¼šç›®å‰å·²ç»å®ç°çš„MapReduceç¨‹åºæ•°ä»¥ç™¾è®¡ï¼Œæ¯å¤©æœ‰ä¸Šåƒä¸ªMapReduceä½œä¸šè¿è¡Œåœ¨Googleçš„é›†ç¾¤ä¸Šã€‚
</code></pre>
<a id="more"></a>
<h3 id="1-ä»‹ç»"><a class="header-anchor" href="#1-ä»‹ç»">Â¶</a>1 ä»‹ç»</h3>
<p>åœ¨è¿‡å»çš„5å¹´ä¸­ï¼Œä½œè€…ä»¥åŠè®¸å¤šå…¶ä»–Googleå‘˜å·¥å®ç°äº†æ•°ç™¾ä¸ªç‰¹å®šç”¨é€”çš„è®¡ç®—è¿‡ç¨‹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å¤„ç†å¤§é‡çš„åŸå§‹æ•°æ®ï¼ˆæŠ“å–æ–‡æ¡£ã€ç½‘ç»œè¯·æ±‚æ—¥å¿—ç­‰ç­‰ï¼‰ï¼Œè®¡ç®—è®¸å¤šç§ç±»çš„è¡ç”Ÿæ•°æ®ï¼ˆå€’æ’ç´¢å¼•ã€ç½‘ç»œæ–‡æ¡£å›¾ç»“æ„çš„å¤šç§è¡¨ç¤ºã€å•å°ä¸»æœºæŠ“å–é¡µé¢æ•°é‡çš„æ¦‚è¦ã€æŒ‡å®šæ—¥æœŸé¢‘æ¬¡æœ€é«˜çš„è¯·æ±‚é›†åˆç­‰ç­‰ï¼‰ã€‚å¤§å¤šæ•°è¿™æ ·çš„è®¡ç®—è¿‡ç¨‹åœ¨æ¦‚å¿µä¸Šéƒ½å¾ˆç›´æ¥ã€‚ä½†è¾“å…¥æ•°æ®é‡é€šå¸¸éƒ½å¾ˆå¤§ï¼Œå› æ­¤è®¡ç®—è¿‡ç¨‹éœ€è¦åˆ†å¸ƒåˆ°æ•°ç™¾æˆ–æ•°åƒå°æœºå™¨ä¸Šè¿›è¡Œï¼Œæ‰èƒ½ä¿è¯è¿‡ç¨‹åœ¨ä¸€ä¸ªåˆç†æ—¶é—´å†…ç»“æŸã€‚è€Œä¸ºäº†å¤„ç†è®¡ç®—å¹¶è¡ŒåŒ–ã€æ•°æ®åˆ†å‘å’Œé”™è¯¯å¤„ç†ç­‰é—®é¢˜è€Œå¼•å…¥å¤§é‡å¤æ‚çš„ä»£ç åˆ™ä»¤åŸæœ¬ç®€å•çš„è®¡ç®—è¿‡ç¨‹å˜çš„æ™¦æ¶©éš¾æ‡‚ã€‚</p>
<p>ä½œä¸ºå¯¹è¿™ç§å¤æ‚æ€§çš„å›åº”ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§æ–°çš„æŠ½è±¡ï¼Œå…è®¸æˆ‘ä»¬è¡¨è¾¾å‡ºåŸæœ¬ç®€å•çš„è®¡ç®—è¿‡ç¨‹ï¼Œä¸”å°†æ¶‰åŠå¹¶è¡Œã€å®¹é”™æ€§ã€æ•°æ®åˆ†å‘å’Œè´Ÿè½½å‡è¡¡çš„å‡Œä¹±ç»†èŠ‚éšè—åœ¨ä¸€ä¸ªå‡½æ•°åº“ä¸­ã€‚æˆ‘ä»¬çš„æŠ½è±¡å—åˆ°äº†Lispç­‰å‡½æ•°å¼è¯­è¨€ä¸­çš„mapå’ŒreduceåŸè¯­çš„å¯å‘ã€‚æˆ‘ä»¬æ„è¯†åˆ°æˆ‘ä»¬å¤§å¤šæ•°çš„è®¡ç®—éƒ½åŒ…å«äº†åœ¨æ¯ä¸ªè¾“å…¥çš„é€»è¾‘â€œè®°å½•â€ä¸Šåº”ç”¨mapæ“ä½œï¼Œä»è€Œè®¡ç®—å‡ºä¸€ç»„ä¸­é—´key/valueå¯¹çš„é›†åˆï¼Œç„¶åå†å‘å…±äº«åŒä¸€ä¸ªkeyçš„æ‰€æœ‰ä¸­é—´valueåº”ç”¨reduceæ“ä½œï¼Œä»è€Œé€‚å½“åœ°åˆå¹¶è¡ç”Ÿæ•°æ®ã€‚æˆ‘ä»¬å¯¹ç”¨æˆ·å®šä¹‰çš„mapå’Œreduceæ“ä½œçš„ä½¿ç”¨å…è®¸æˆ‘ä»¬è½»æ¾åœ°å°†å¤§å‹è®¡ç®—å¹¶è¡ŒåŒ–ï¼Œä»¥åŠå°†å†æ‰§è¡Œä½œä¸ºå®¹é”™æ€§çš„ä¸»è¦æœºåˆ¶ã€‚</p>
<p>æœ¬é¡¹å·¥ä½œçš„ä¸»è¦è´¡çŒ®æ˜¯ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„æ¥å£ï¼Œå…è®¸è‡ªåŠ¨å®ç°å¹¶è¡ŒåŒ–å’Œå¤§èŒƒå›´çš„åˆ†å¸ƒè®¡ç®—ï¼Œå’Œä¸€ä¸ªä¸æ­¤æ¥å£ç»“åˆçš„å®ç°ï¼Œèƒ½åœ¨æ™®é€šPCæœºé›†ç¾¤ä¸Šè¾¾åˆ°å¾ˆé«˜çš„æ€§èƒ½ã€‚</p>
<p>ç¬¬2éƒ¨åˆ†æè¿°äº†åŸºæœ¬çš„ç¼–ç¨‹æ¨¡å‹å¹¶ç»™å‡ºäº†å‡ ä¸ªä¾‹å­ã€‚ç¬¬3éƒ¨åˆ†æè¿°äº†é’ˆå¯¹æˆ‘ä»¬åŸºäºé›†ç¾¤çš„è®¡ç®—ç¯å¢ƒè€Œè£å‰ªçš„MapReduceæ¥å£çš„ä¸€ä¸ªå®ç°ã€‚ç¬¬4éƒ¨åˆ†æè¿°äº†æˆ‘ä»¬è§‰å¾—éå¸¸æœ‰ç”¨çš„ä¸€äº›ç¼–ç¨‹æ¨¡å‹çš„æŠ€å·§ã€‚ç¬¬5éƒ¨åˆ†é’ˆå¯¹å¤šç§ä¸åŒçš„ä»»åŠ¡ï¼Œå¯¹æˆ‘ä»¬çš„å®ç°è¿›è¡Œäº†æ€§èƒ½æµ‹é‡ã€‚ç¬¬6éƒ¨åˆ†æ¢ç´¢äº†åœ¨Googleä¸­MapReduceçš„åº”ç”¨ï¼ŒåŒ…æ‹¬äº†æˆ‘ä»¬åœ¨å°†å…¶ä½œä¸ºç”Ÿäº§ç´¢å¼•ç³»ç»Ÿçš„é‡å†™åŸºç¡€çš„ç»éªŒã€‚ç¬¬7éƒ¨åˆ†è®¨è®ºäº†ç›¸å…³çš„å’Œæœªæ¥è¦åšçš„å·¥ä½œã€‚</p>
<h3 id="2-ç¼–ç¨‹æ¨¡å‹"><a class="header-anchor" href="#2-ç¼–ç¨‹æ¨¡å‹">Â¶</a>2 ç¼–ç¨‹æ¨¡å‹</h3>
<p>è®¡ç®—è¿‡ç¨‹å°±æ˜¯è¾“å…¥ä¸€ç»„key/valueå¯¹ï¼Œå†ç”Ÿæˆè¾“å‡ºä¸€ç»„key/valueå¯¹ã€‚MapReduceåº“çš„ä½¿ç”¨è€…ç”¨ä¸¤ä¸ªå‡½æ•°æ¥è¡¨ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼šmapå’Œreduceã€‚</p>
<p>mapç”±ä½¿ç”¨è€…ç¼–å†™ï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å…¥key/valueå¯¹ï¼Œç”Ÿæˆä¸€ç»„ä¸­é—´key/valueå¯¹ã€‚MapReduceåº“å°†æœ‰ç€ç›¸åŒä¸­é—´key Içš„ä¸­é—´valueéƒ½ç»„åˆåœ¨ä¸€èµ·ï¼Œå†ä¼ ç»™reduceå‡½æ•°ã€‚</p>
<p>reduceä¹Ÿç”±ä½¿ç”¨è€…ç¼–å†™ï¼Œå®ƒæ¥å—ä¸€ä¸ªä¸­é—´key Iå’Œä¸€ç»„ä¸Iå¯¹åº”çš„valueã€‚å®ƒå°†è¿™äº›valueåˆå¹¶ä¸ºä¸€ä¸ªå¯èƒ½æ›´å°çš„valueé›†åˆã€‚é€šå¸¸æ¯ä¸ªreduceè°ƒç”¨åªäº§ç”Ÿ0æˆ–1ä¸ªè¾“å‡ºvalueã€‚ä¸­é—´valueæ˜¯é€šè¿‡ä¸€ä¸ªè¿­ä»£å™¨æä¾›ç»™reduceå‡½æ•°çš„ã€‚è¿™å…è®¸æˆ‘ä»¬æ“ä½œé‚£äº›å› ä¸ºå¤§åˆ°æ‰¾ä¸åˆ°è¿ç»­å­˜æ”¾çš„å†…å­˜è€Œä½¿ç”¨é“¾è¡¨çš„valueé›†åˆã€‚</p>
<h4 id="2-1-ç¤ºä¾‹"><a class="header-anchor" href="#2-1-ç¤ºä¾‹">Â¶</a>2.1 ç¤ºä¾‹</h4>
<p>è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç»Ÿè®¡ä¸€ä¸ªå¾ˆå¤§çš„æ–‡æ¡£é›†åˆä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚ä½¿ç”¨è€…èƒ½å†™å‡ºä¸ä¸‹é¢çš„ä¼ªä»£ç ç›¸ä¼¼çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">map(String key,String value):</span><br><span class="line">    // key: æ–‡æ¡£å</span><br><span class="line">    // value: æ–‡æ¡£å†…å®¹</span><br><span class="line">    <span class="keyword">for</span> each word w <span class="keyword">in</span> value:</span><br><span class="line">        EmitIntermediate(w,<span class="string">"1"</span>);</span><br><span class="line">   </span><br><span class="line">reduce(Stringkey, Iterator values):</span><br><span class="line">    // key: ä¸€ä¸ªå•è¯</span><br><span class="line">    // value: è®¡æ•°å€¼åˆ—è¡¨</span><br><span class="line">    int result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> each v <span class="keyword">in</span> values:</span><br><span class="line">        result += ParseInt(v);</span><br><span class="line">    Emit(AsString(result));</span><br></pre></td></tr></table></figure>
<p>mapå‡½æ•°å°†æ¯ä¸ªå•è¯ä¸å‡ºç°æ¬¡æ•°ä¸€åŒè¾“å‡ºï¼ˆæœ¬ä¾‹ä¸­ç®€å•çš„è¾“å‡ºâ€œ1â€ï¼‰ã€‚reduceå‡½æ•°å°†é’ˆå¯¹æŸä¸ªç‰¹å®šè¯è¾“å‡ºçš„æ¬¡æ•°éƒ½åˆå¹¶ç›¸åŠ ã€‚</p>
<p>å¦å¤–ï¼Œä½¿ç”¨è€…è¦å†™ä»£ç å¡«å……ä¸€ä¸ªç¬¦åˆMapReduceè§„æ ¼çš„å¯¹è±¡ï¼Œå†…å®¹åŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶çš„åå­—ï¼Œä»¥åŠå¯é€‰çš„è°ƒèŠ‚å‚æ•°ã€‚ä¹‹åä½¿ç”¨è€…è°ƒç”¨MapReduceå‡½æ•°ï¼Œå°†æŒ‡å®šçš„å¯¹è±¡ä¼ è¿›å»ã€‚ç”¨æˆ·ä»£ç ä¼šä¸MapReduceåº“ï¼ˆC++å®ç°ï¼‰é“¾æ¥åˆ°ä¸€èµ·ã€‚é™„å½•AåŒ…æ‹¬äº†è¿™ä¸ªä¾‹å­çš„å…¨éƒ¨ç¨‹åºæ–‡æœ¬ã€‚</p>
<h4 id="2-2-ç±»å‹"><a class="header-anchor" href="#2-2-ç±»å‹">Â¶</a>2.2 ç±»å‹</h4>
<p>å°½ç®¡å‰é¢çš„ä¼ªä»£ç å†™æˆäº†ç”¨å­—ç¬¦ä¸²è¿›è¡Œè¾“å…¥è¾“å‡ºï¼Œä½†ä»æ¦‚å¿µä¸Šè®²ç”¨æˆ·æä¾›çš„mapå’Œreduceå‡½æ•°æ˜¯å…³è”ç€ç±»å‹çš„ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:right">map</th>
<th style="text-align:center">(k1,v1)</th>
<th style="text-align:left">ğŸ‘‰list(k2,v2)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">reduce</td>
<td style="text-align:center">(k2,list(v2))</td>
<td style="text-align:left">ğŸ‘‰list(v2)</td>
</tr>
</tbody>
</table>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å…¥çš„keyå’Œvalueä¸è¾“å‡ºçš„keyå’Œvalueçš„åŸŸä¸åŒã€‚è¿›ä¸€æ­¥è¯´ï¼Œä¸­é—´çš„keyå’Œvalueä¸è¾“å‡ºçš„keyå’Œvalueçš„åŸŸç›¸åŒã€‚</p>
<p>æˆ‘ä»¬çš„C++å®ç°ä½¿ç”¨å­—ç¬¦ä¸²ä¸ç”¨æˆ·å®šä¹‰çš„å‡½æ•°äº¤äº’ï¼Œè€Œå°†å­—ç¬¦ä¸²ä¸ç›¸åº”ç±»å‹çš„è½¬æ¢ç•™ç»™ç”¨æˆ·ä»£ç å®Œæˆã€‚</p>
<h4 id="2-3-æ›´å¤šä¾‹å­"><a class="header-anchor" href="#2-3-æ›´å¤šä¾‹å­">Â¶</a>2.3 æ›´å¤šä¾‹å­</h4>
<p>è¿™é‡Œä¾‹ä¸¾äº†ä¸€äº›æœ‰è¶£çš„ç¨‹åºï¼Œå®ƒä»¬éƒ½å¯ä»¥å¾ˆè½»æ¾çš„ç”¨MapReduceæ¨¡å‹è¡¨è¾¾ã€‚</p>
<p><b>åˆ†å¸ƒå¼Grepï¼š</b>mapå‡½æ•°åœ¨åŒ¹é…åˆ°ç»™å®šçš„patternæ—¶è¾“å‡ºä¸€è¡Œã€‚reduceå‡½æ•°åªæ˜¯å°†ç»™å®šçš„ä¸­é—´æ•°æ®å¤åˆ¶åˆ°è¾“å‡ºä¸Šã€‚</p>
<p><b>URLè®¿é—®é¢‘æ¬¡ç»Ÿè®¡ï¼š</b>mapå‡½æ•°å¤„ç†ç½‘é¡µè¯·æ±‚çš„æ—¥å¿—ï¼Œå¯¹æ¯ä¸ªURLè¾“å‡ºã€ˆURL, 1ã€‰ã€‚reduceå‡½æ•°å°†ç›¸åŒURLçš„æ‰€æœ‰å€¼ç›¸åŠ å¹¶è¾“å‡ºã€ˆURL, æ€»æ¬¡æ•°ã€‰å¯¹ã€‚</p>
<p><b>å€’è½¬Webé“¾æ¥å›¾ï¼š</b>mapå‡½æ•°åœ¨sourceé¡µé¢ä¸­é’ˆå¯¹æ¯ä¸ªæŒ‡å‘targetçš„é“¾æ¥éƒ½è¾“å‡ºä¸€ä¸ªã€ˆtarget, sourceã€‰å¯¹ã€‚reduceå‡½æ•°å°†ä¸æŸä¸ªç»™å®šçš„targetç›¸å…³è”çš„æ‰€æœ‰sourceé“¾æ¥åˆå¹¶ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶è¾“å‡ºã€ˆtarget, list(source)ã€‰å¯¹ã€‚</p>
<p><b>æ¯ä¸ªä¸»æœºçš„å…³é”®è¯å‘é‡ï¼š</b>å…³é”®è¯å‘é‡æ˜¯å¯¹å‡ºç°åœ¨ä¸€ä¸ªæ–‡æ¡£æˆ–ä¸€ç»„æ–‡æ¡£ä¸­çš„æœ€é‡è¦çš„å•è¯çš„æ¦‚è¦ï¼Œå…¶å½¢å¼ä¸ºã€ˆå•è¯, é¢‘ç‡ã€‰å¯¹ã€‚mapå‡½æ•°é’ˆå¯¹æ¯ä¸ªè¾“å…¥æ–‡æ¡£ï¼ˆå…¶ä¸»æœºåå¯ä»æ–‡æ¡£URLä¸­æå–åˆ°ï¼‰è¾“å‡ºä¸€ä¸ªã€ˆä¸»æœºå, å…³é”®è¯å‘é‡ã€‰å¯¹ã€‚ç»™å®šä¸»æœºçš„æ‰€æœ‰æ–‡æ¡£çš„å…³é”®è¯å‘é‡éƒ½è¢«ä¼ é€’ç»™reduceå‡½æ•°ã€‚reduceå‡½æ•°å°†è¿™äº›å…³é”®è¯å‘é‡ç›¸åŠ ï¼Œå»æ‰å…¶ä¸­é¢‘ç‡æœ€ä½çš„å…³é”®è¯ï¼Œç„¶åè¾“å‡ºæœ€ç»ˆçš„ã€ˆä¸»æœºå, å…³é”®è¯å‘é‡ã€‰å¯¹ã€‚</p>
<p><b>å€’æ’ç´¢å¼•ï¼š</b>mapå‡½æ•°è§£ææ¯ä¸ªæ–‡æ¡£ï¼Œå¹¶è¾“å‡ºä¸€ç³»åˆ—ã€ˆå•è¯, æ–‡æ¡£IDã€‰å¯¹ã€‚reduceå‡½æ•°æ¥å—ç»™å®šå•è¯çš„æ‰€æœ‰ä¸­é—´å¯¹ï¼Œå°†å®ƒä»¬æŒ‰æ–‡æ¡£IDæ’åºï¼Œå†è¾“å‡ºã€ˆå•è¯, list(æ–‡æ¡£ID)ã€‰å¯¹ã€‚æ‰€æœ‰è¾“å‡ºå¯¹çš„é›†åˆç»„æˆäº†ä¸€ä¸ªç®€å•çš„å€’æ’ç´¢å¼•ã€‚ç”¨æˆ·å¯ä»¥å¾ˆè½»æ¾çš„æ‰©å±•è¿™ä¸ªè¿‡ç¨‹æ¥è·Ÿè¸ªå•è¯çš„ä½ç½®ã€‚</p>
<p><b>åˆ†å¸ƒå¼æ’åºï¼š</b>mapå‡½æ•°ä»æ¯æ¡è®°å½•ä¸­æå–å‡ºkeyï¼Œå¹¶è¾“å‡ºã€ˆkey, è®°å½•ã€‰å¯¹ã€‚reduceå‡½æ•°ä¸æ”¹å˜è¿™äº›ä¸­é—´å¯¹ï¼Œç›´æ¥è¾“å‡ºã€‚è¿™ä¸ªè¿‡ç¨‹ä¾èµ–äº4.1èŠ‚ä»‹ç»çš„åˆ’åˆ†æœºåˆ¶å’Œ4.2èŠ‚ä»‹ç»çš„æ’åºæ€§è´¨ã€‚</p>
<h3 id="å®ç°"><a class="header-anchor" href="#å®ç°">Â¶</a>å®ç°</h3>
<p>è®¸å¤šä¸åŒçš„MapReduceçš„å®ç°éƒ½æ˜¯å¯è¡Œçš„ã€‚é€‰æ‹©å“ªä¸€ä¸ªè¦å–å†³äºç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œä¸€ç§å®ç°å¯èƒ½é€‚åˆäºå°å‹çš„å…±äº«å†…å­˜æœºå™¨ï¼Œä¸€ç§å®ç°å¯èƒ½é€‚åˆäºå¤§å‹çš„NUMAå¤šå¤„ç†å™¨æœºå™¨ï¼Œè€Œå¦ä¸€ç§åˆ™é€‚åˆäºæ›´å¤§å‹çš„è”ç½‘æœºå™¨é›†ã€‚</p>
<p>æœ¬éƒ¨åˆ†æè¿°çš„å®ç°ä¸»è¦é¢å‘Googleå†…éƒ¨å¹¿æ³›ä½¿ç”¨çš„è®¡ç®—ç¯å¢ƒï¼šå¤§å‹çš„å•†ç”¨PCæœºé›†ç¾¤ï¼Œäº’ç›¸ä¹‹é—´ç”¨äº¤æ¢å¼ä»¥å¤ªç½‘è¿æ¥ã€‚æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯ï¼š</p>
<ol>
<li>
<p>ä¸»è¦ä½¿ç”¨çš„æœºå™¨ä¸ºåŒæ ¸X86å¤„ç†å™¨ï¼Œè¿è¡ŒLinuxç³»ç»Ÿï¼Œæ¯å°æœºå™¨çš„å†…å­˜ä»2GBåˆ°4GBä¸ç­‰ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨çš„éƒ½æ˜¯å•†ç”¨ç½‘ç»œç¡¬ä»¶è®¾å¤‡â€”â€”åœ¨æœºå™¨å±‚é¢ä¸Šé€šå¸¸ä»100Mbpsåˆ°1Gbpsä¸ç­‰ï¼Œä½†å¹³å‡èµ·æ¥è¦æ¯”æ€»å¸¦å®½çš„ä¸€åŠå°‘å¾ˆå¤šã€‚</p>
</li>
<li>
<p>é›†ç¾¤ä¸­æ‹¥æœ‰æ•°ç™¾æˆ–æ•°åƒå°æœºå™¨ï¼Œå› æ­¤æœºå™¨é”™è¯¯ç»å¸¸å‡ºç°ã€‚</p>
</li>
<li>
<p>æ¯å°æœºå™¨éƒ½ä½¿ç”¨å»‰ä»·çš„IDEç¡¬ç›˜æ¥æä¾›å­˜å‚¨åŠŸèƒ½ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ç§å†…éƒ¨å¼€å‘çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ¥ç®¡ç†è¿™äº›ç£ç›˜ä¸Šçš„æ•°æ®ã€‚è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿé€šè¿‡å¤åˆ¶çš„æ–¹æ³•åœ¨ä¸å¯é çš„ç¡¬ä»¶ä¹‹ä¸Šæä¾›äº†å®ç”¨æ€§ä¸å¯é æ€§ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å‘ä¸€ä¸ªè°ƒåº¦ç³»ç»Ÿæäº¤ä½œä¸šã€‚æ¯ä¸ªä½œä¸šåŒ…æ‹¬äº†ä¸€ä¸ªä»»åŠ¡é›†ï¼Œä¼šç”±è°ƒåº¦å™¨è°ƒåº¦åˆ°é›†ç¾¤å†…å¯ç”¨çš„ä¸€ç»„æœºå™¨ä¸Šã€‚</p>
</li>
</ol>
<h4 id="æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°"><a class="header-anchor" href="#æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°">Â¶</a>æ‰§è¡Œè¿‡ç¨‹æ¦‚è¿°</h4>
<p>é€šè¿‡è‡ªåŠ¨å°†è¾“å…¥æ•°æ®åˆ‡åˆ†ä¸ºMå—ï¼Œmapè°ƒç”¨åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šè¿›è¡Œã€‚è¾“å…¥åˆ’åˆ†å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚reduceè°ƒç”¨æ˜¯é€šè¿‡ä¸€ä¸ªåˆ’åˆ†å‡½æ•°ï¼ˆä¾‹å¦‚hash(key) mod R)å°†ä¸­é—´keyç©ºé—´åˆ’åˆ†ä¸ºRå—æ¥åˆ†å¸ƒè¿è¡Œã€‚åˆ’åˆ†çš„å—æ•°Rå’Œåˆ’åˆ†å‡½æ•°éƒ½ç”±ç”¨æˆ·æŒ‡å®šã€‚</p>
<p><img src="/.io//Execution_overview.png" alt="Execution_overview"></p>
<p>å›¾1å±•ç¤ºäº†æˆ‘ä»¬çš„å®ç°ä¸­MapReduceæ“ä½œçš„æ•´ä½“æµç¨‹ã€‚å½“ç”¨æˆ·ç¨‹åºè°ƒç”¨MapReduceå‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿä¸‹é¢ä¸€ç³»åˆ—åŠ¨ä½œï¼ˆå›¾1ä¸­çš„æ ‡å·ä¸ä¸‹é¢åˆ—è¡¨é¡ºåºç›¸åŒï¼‰ï¼š</p>
<ol>
<li>
<p>ç”¨æˆ·ç¨‹åºä¸­çš„MapReduceåº“é¦–å…ˆå°†è¾“å…¥æ–‡ä»¶åˆ‡åˆ†ä¸ºMå—ï¼Œæ¯å—çš„å¤§å°ä»16MBåˆ°64MBï¼ˆç”¨æˆ·å¯é€šè¿‡ä¸€ä¸ªå¯é€‰å‚æ•°æ§åˆ¶æ­¤å¤§å°ï¼‰ã€‚ç„¶åMapReduceåº“ä¼šåœ¨ä¸€ä¸ªé›†ç¾¤çš„è‹¥å¹²å°æœºå™¨ä¸Šå¯åŠ¨ç¨‹åºçš„å¤šä¸ªå‰¯æœ¬ã€‚</p>
</li>
<li>
<p>ç¨‹åºçš„å„ä¸ªå‰¯æœ¬ä¸­æœ‰ä¸€ä¸ªæ˜¯ç‰¹æ®Šçš„â€”â€”ä¸»èŠ‚ç‚¹ï¼Œå…¶å®ƒçš„åˆ™æ˜¯å·¥ä½œèŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹å°†Mä¸ªmapä»»åŠ¡å’ŒRä¸ªreduceä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„å·¥ä½œèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€é¡¹ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>è¢«åˆ†é…mapä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹è¯»å–å¯¹åº”çš„è¾“å…¥åŒºå—å†…å®¹ã€‚å®ƒä»è¾“å…¥æ•°æ®ä¸­è§£æå‡ºkey/valueå¯¹ï¼Œç„¶åå°†æ¯ä¸ªå¯¹ä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„mapå‡½æ•°ã€‚ç”±mapå‡½æ•°äº§ç”Ÿçš„ä¸­é—´key/valueå¯¹éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚</p>
</li>
<li>
<p>ç¼“å­˜çš„æ•°æ®å¯¹ä¼šè¢«å‘¨æœŸæ€§çš„ç”±åˆ’åˆ†å‡½æ•°åˆ†æˆRå—ï¼Œå¹¶å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ã€‚è¿™äº›ç¼“å­˜å¯¹åœ¨æœ¬åœ°ç£ç›˜ä¸­çš„ä½ç½®ä¼šè¢«ä¼ å›ç»™ä¸»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å°†è¿™äº›ä½ç½®å†ä¼ ç»™reduceå·¥ä½œèŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>å½“ä¸€ä¸ªreduceå·¥ä½œèŠ‚ç‚¹å¾—åˆ°äº†ä¸»èŠ‚ç‚¹çš„è¿™äº›ä½ç½®é€šçŸ¥åï¼Œå®ƒä½¿ç”¨RPCè°ƒç”¨å»è¯»mapå·¥ä½œèŠ‚ç‚¹çš„æœ¬åœ°ç£ç›˜ä¸­çš„ç¼“å­˜æ•°æ®ã€‚å½“reduceå·¥ä½œèŠ‚ç‚¹è¯»å–å®Œäº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®ï¼Œå®ƒä¼šå°†è¿™äº›æ•°æ®æŒ‰ä¸­é—´keyæ’åºï¼Œè¿™æ ·ç›¸åŒkeyçš„æ•°æ®å°±è¢«æ’åˆ—åœ¨ä¸€èµ·äº†ã€‚åŒä¸€ä¸ªreduceä»»åŠ¡ç»å¸¸ä¼šåˆ†åˆ°æœ‰ç€ä¸åŒkeyçš„æ•°æ®ï¼Œå› æ­¤è¿™ä¸ªæ’åºå¾ˆæœ‰å¿…è¦ã€‚å¦‚æœä¸­é—´æ•°æ®æ•°é‡è¿‡å¤šï¼Œä¸èƒ½å…¨éƒ¨è½½å…¥å†…å­˜ï¼Œåˆ™ä¼šä½¿ç”¨å¤–éƒ¨æ’åºã€‚</p>
</li>
<li>
<p>reduceå·¥ä½œèŠ‚ç‚¹éå†æ’åºå¥½çš„ä¸­é—´æ•°æ®ï¼Œå¹¶å°†é‡åˆ°çš„æ¯ä¸ªä¸­é—´keyå’Œä¸å®ƒå…³è”çš„ä¸€ç»„ä¸­é—´valueä¼ é€’ç»™ç”¨æˆ·çš„reduceå‡½æ•°ã€‚reduceå‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°ç”±reduceåˆ’åˆ†è¿‡ç¨‹åˆ’åˆ†å‡ºæ¥çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„æœ«å°¾ã€‚</p>
</li>
<li>
<p>å½“æ‰€æœ‰çš„mapå’Œreduceä»»åŠ¡éƒ½å®Œæˆåï¼Œä¸»èŠ‚ç‚¹å”¤é†’ç”¨æˆ·ç¨‹åºã€‚æ­¤æ—¶ï¼Œç”¨æˆ·ç¨‹åºä¸­çš„MapReduceè°ƒç”¨è¿”å›åˆ°ç”¨æˆ·ä»£ç ä¸­ã€‚</p>
</li>
</ol>
<p>æˆåŠŸå®Œæˆåï¼ŒMapReduceæ‰§è¡Œçš„è¾“å‡ºéƒ½åœ¨Rä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ï¼ˆæ¯ä¸ªreduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªï¼Œæ–‡ä»¶åç”±ç”¨æˆ·æŒ‡å®šï¼‰ã€‚é€šå¸¸ç”¨æˆ·ä¸éœ€è¦åˆå¹¶è¿™Rä¸ªè¾“å‡ºæ–‡ä»¶â€”â€”ä»–ä»¬ç»å¸¸ä¼šæŠŠè¿™äº›æ–‡ä»¶å½“ä½œå¦ä¸€ä¸ªMapReduceè°ƒç”¨çš„è¾“å…¥ï¼Œæˆ–æ˜¯ç”¨äºå¦ä¸€ä¸ªå¯ä»¥å¤„ç†åˆ†æˆå¤šä¸ªæ–‡ä»¶è¾“å…¥çš„åˆ†å¸ƒå¼åº”ç”¨ã€‚</p>
<h4 id="3-2-ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„"><a class="header-anchor" href="#3-2-ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„">Â¶</a>3.2 ä¸»èŠ‚ç‚¹æ•°æ®ç»“æ„</h4>
<p>ä¸»èŠ‚ç‚¹ç»´æŒå¤šç§æ•°æ®ç»“æ„ã€‚å®ƒä¼šå­˜å‚¨æ¯ä¸ªmapå’Œreduceä»»åŠ¡çš„çŠ¶æ€ï¼ˆç©ºé—²ã€å¤„ç†ä¸­ã€å®Œæˆï¼‰ï¼Œå’Œæ¯å°å·¥ä½œæœºå™¨çš„IDï¼ˆå¯¹åº”éç©ºé—²çš„ä»»åŠ¡ï¼‰ã€‚</p>
<p>ä¸»èŠ‚ç‚¹æ˜¯å°†mapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶çš„ä½ç½®ä¼ é€’ç»™reduceä»»åŠ¡çš„é€šé“ã€‚å› æ­¤ï¼Œä¸»èŠ‚ç‚¹è¦å­˜å‚¨æ¯ä¸ªå·²å®Œæˆçš„mapä»»åŠ¡äº§ç”Ÿçš„Rä¸ªä¸­é—´æ–‡ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚ä½ç½®å’Œå¤§å°ä¿¡æ¯çš„æ›´æ–°æƒ…å†µä¼šåœ¨mapä»»åŠ¡å®Œæˆæ—¶æ¥æ”¶åˆ°ã€‚è¿™äº›ä¿¡æ¯ä¼šè¢«é€æ­¥å‘é€åˆ°æ­£åœ¨å¤„ç†ä¸­çš„reduceä»»åŠ¡èŠ‚ç‚¹å¤„ã€‚</p>
<h4 id="3-3-å®¹é”™æ€§"><a class="header-anchor" href="#3-3-å®¹é”™æ€§">Â¶</a>3.3 å®¹é”™æ€§</h4>
<p>æ—¢ç„¶MapReduceåº“æ˜¯ä¸ºäº†å¸®åŠ©ä½¿ç”¨æˆç™¾ä¸Šåƒå°æœºå™¨å¤„ç†æ•°é‡éå¸¸å¤§çš„æ•°æ®çš„ï¼Œå®ƒå°±å¿…é¡»èƒ½å¤Ÿä¼˜é›…åœ°æ‰¿å—æœºå™¨é”™è¯¯ã€‚</p>
<h5 id="å·¥ä½œèŠ‚ç‚¹é”™è¯¯"><a class="header-anchor" href="#å·¥ä½œèŠ‚ç‚¹é”™è¯¯">Â¶</a>å·¥ä½œèŠ‚ç‚¹é”™è¯¯</h5>
<p>ä¸»èŠ‚ç‚¹å‘¨æœŸæ€§çš„pingæ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚å¦‚æœå·¥ä½œèŠ‚ç‚¹åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰å›åº”ï¼Œä¸»èŠ‚ç‚¹å°±å°†å®ƒæ ‡è®°ä¸ºå·²å¤±è´¥ã€‚è¿™ä¸ªå·¥ä½œèŠ‚ç‚¹å®Œæˆçš„ä»»ä½•mapä»»åŠ¡éƒ½è¢«é‡ç½®ä¸ºç©ºé—²çŠ¶æ€ï¼Œå¹¶å¯è¢«è°ƒåº¦åˆ°å…¶å®ƒå·¥ä½œèŠ‚ç‚¹ä¸Šã€‚åŒæ ·åœ°ï¼Œå¤±è´¥çš„å·¥ä½œèŠ‚ç‚¹ä¸Šæ­£åœ¨å¤„ç†çš„ä»»ä½•mapæˆ–reduceä»»åŠ¡ä¹Ÿè¢«é‡ç½®ä¸ºç©ºé—²çŠ¶æ€ï¼Œå…è®¸è¢«è°ƒåº¦ã€‚</p>
<p>å¤±è´¥èŠ‚ç‚¹ä¸Šå·²å®Œæˆçš„mapä»»åŠ¡éœ€è¦é‡æ‰§è¡Œçš„åŸå› æ˜¯å®ƒä»¬çš„è¾“å‡ºå­˜å‚¨åœ¨å¤±è´¥æœºå™¨çš„æœ¬åœ°ç£ç›˜ä¸Šï¼Œå› æ­¤æ— æ³•è®¿é—®åˆ°äº†ã€‚å·²å®Œæˆçš„reduceä»»åŠ¡ä¸éœ€è¦é‡æ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å‡ºå­˜å‚¨åœ¨äº†ä¸€ä¸ªå…¨çƒæ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p>
<p>å½“ä¸€ä¸ªmapä»»åŠ¡å…ˆè¢«AèŠ‚ç‚¹æ‰§è¡Œè¿‡ï¼Œéšååˆè¢«BèŠ‚ç‚¹é‡æ‰§è¡Œï¼ˆAèŠ‚ç‚¹å·²å¤±è´¥ï¼‰ï¼Œæ‰€æœ‰æ‰§è¡Œreduceä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹éƒ½èƒ½æ”¶åˆ°é‡æ‰§è¡Œçš„é€šçŸ¥ã€‚ä»»ä½•æ²¡æœ‰è¯»å–å®ŒAèŠ‚ç‚¹æ•°æ®çš„reduceä»»åŠ¡éƒ½ä¼šä»BèŠ‚ç‚¹è¯»å–æ•°æ®ã€‚</p>
<p>MapReduceå¯ä»¥å¼¹æ€§åº”å¯¹å¤§èŒƒå›´çš„å·¥ä½œèŠ‚ç‚¹å¤±è´¥ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€æ¬¡MapReduceæ“ä½œæœŸé—´ï¼Œè¿è¡Œç³»ç»Ÿä¸Šçš„ç½‘ç»œç»´æŠ¤å¯¼è‡´äº†ä¸€ç»„çº¦80å°æœºå™¨åœ¨åŒä¸€æ—¶é—´æ— æ³•è®¿é—®ï¼ŒæŒç»­äº†æ•°åˆ†é’Ÿã€‚MapReduceä¸»èŠ‚ç‚¹åªæ˜¯ç®€å•çš„é‡æ‰§è¡Œäº†å·²ç”±æ— æ³•è®¿é—®çš„æœºå™¨å®Œæˆçš„ä»»åŠ¡ï¼Œå¹¶ç»§ç»­å‘å‰æ‰§è¡Œï¼Œæœ€ç»ˆå®Œæˆäº†è¿™æ¬¡MapReduceæ“ä½œã€‚</p>
<h5 id="ä¸»èŠ‚ç‚¹é”™è¯¯"><a class="header-anchor" href="#ä¸»èŠ‚ç‚¹é”™è¯¯">Â¶</a>ä¸»èŠ‚ç‚¹é”™è¯¯</h5>
<p>ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä»¤ä¸»èŠ‚ç‚¹å®šæœŸå°†ä¸Šé¢æè¿°çš„æ•°æ®ç»“æ„ä¿å­˜ä¸ºæ¢å¤ç‚¹ã€‚å¦‚æœä¸»èŠ‚ç‚¹ä»»åŠ¡å¤±è´¥ï¼Œå°±å¯ä»¥ä»ä¸Šä¸€ä¸ªæ¢å¤ç‚¹çŠ¶æ€å¯åŠ¨ä¸€ä¸ªæ–°çš„ç¨‹åºå‰¯æœ¬ã€‚ä½†æ˜¯ç»™å®šçš„æ¡ä»¶æ˜¯åªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œå®ƒä¹Ÿä¸å¤ªå¯èƒ½å¤±è´¥ï¼›å› æ­¤æˆ‘ä»¬å½“å‰çš„å®ç°ä¼šåœ¨ä¸»èŠ‚ç‚¹å¤±è´¥æ—¶ä¸­æ­¢MapReduceè®¡ç®— ã€‚å®¢æˆ·å¯ä»¥æ£€æŸ¥åˆ°è¿™ä¸€æƒ…å†µï¼Œå¹¶åœ¨ä»–ä»¬éœ€è¦æ—¶é‡å¯MapReduceæ“ä½œã€‚</p>
<h5 id="å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰"><a class="header-anchor" href="#å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰">Â¶</a>å‡ºç°æ•…éšœæ—¶çš„è¯­ä¹‰</h5>
<p>å½“ç”¨æˆ·æä¾›çš„mapå’Œreduceæ“ä½œå¯¹äºå®ƒä»¬è¾“å…¥çš„å€¼éƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œæˆ‘ä»¬çš„åˆ†å¸ƒå¼å®ç°äº§ç”Ÿçš„è¾“å‡ºå€¼å°±å¦‚åŒå°†æ•´ä¸ªç¨‹åºåˆ†æˆä¸€ä¸ªä¸é—´æ–­çš„ä¸²è¡Œæ‰§è¡Œè¿‡ç¨‹ä¸€æ ·ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸ªæ€§è´¨ï¼Œæˆ‘ä»¬ä¾èµ–äºmapå’Œreduceä»»åŠ¡è¾“å‡ºç»“æœçš„æäº¤æ˜¯åŸå­çš„ã€‚æ¯ä¸ªå¤„ç†ä¸­çš„ä»»åŠ¡éƒ½ä¼šå°†å®ƒçš„è¾“å‡ºå†™å…¥ç§æœ‰çš„ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ä¸€ä¸ªreduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼Œè€Œä¸€ä¸ªmapä»»åŠ¡åˆ™äº§ç”ŸRä¸ªè¿™æ ·çš„æ–‡ä»¶ï¼ˆæ¯ä¸ªreduceä»»åŠ¡ä¸€ä¸ªï¼‰ã€‚å½“mapä»»åŠ¡å®Œæˆæ—¶ï¼Œå·¥ä½œèŠ‚ç‚¹å‘é€ç»™ä¸»èŠ‚ç‚¹çš„æ¶ˆæ¯ä¸­å¸¦æœ‰Rä¸ªä¸´æ—¶æ–‡ä»¶çš„åå­—ã€‚å¦‚æœä¸»èŠ‚ç‚¹æ”¶åˆ°äº†ä¸€ä¸ªæ¥è‡ªå·²å®ŒæˆèŠ‚ç‚¹çš„å®Œæˆæ¶ˆæ¯ï¼Œå®ƒå°±ä¼šå¿½ç•¥è¿™ä¸ªæ¶ˆæ¯ã€‚å¦åˆ™ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†Rä¸ªæ–‡ä»¶çš„åå­—è®°å½•åœ¨ç›¸åº”çš„æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>å½“reduceä»»åŠ¡å®Œæˆæ—¶ï¼Œå·¥ä½œèŠ‚ç‚¹ä¼šæ‰§è¡ŒåŸå­æ€§çš„æ›´åæ“ä½œï¼Œå°†ä¸´æ—¶è¾“å‡ºæ–‡ä»¶æ›´åä¸ºæœ€ç»ˆè¾“å‡ºæ–‡ä»¶ã€‚å¦‚æœç›¸åŒçš„reduceä»»åŠ¡åœ¨å¤šä¸ªæœºå™¨ä¸Šæ‰§è¡Œï¼Œå°±ä¼šæœ‰å¤šä¸ªæ›´åè°ƒç”¨åº”ç”¨åœ¨ç›¸åŒçš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶ä¸Šã€‚æˆ‘ä»¬ä¾èµ–äºç”±åº•å±‚æ–‡ä»¶ç³»ç»Ÿæä¾›çš„åŸå­æ›´åæ“ä½œï¼Œæ‰èƒ½ä¿è¯æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¸­åªåŒ…å«ç”±å…¶ä¸­ä¸€ä¸ªreduceæ‰§è¡Œäº§ç”Ÿçš„æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬çš„ç»å¤§å¤šæ•°mapå’Œreduceæ“ä½œéƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬çš„è¯­ä¹‰å’Œä¸€ä¸ªä¸²è¡Œæ‰§è¡Œè¿‡ç¨‹æ˜¯ç­‰åŒçš„ï¼Œè¿™ä¹Ÿä½¿ç¨‹åºå‘˜å¾ˆå®¹æ˜“æ¨å‡ºä»–ä»¬ç¨‹åºçš„è¡Œä¸ºã€‚å½“mapå’Œreduceæ“ä½œæœ‰ä¸ç¡®å®šæ€§æ—¶ï¼Œæˆ‘ä»¬æä¾›è¾ƒå¼±ä½†ä»ç„¶åˆç†çš„è¯­ä¹‰ã€‚å½“å­˜åœ¨ä¸ç¡®å®šçš„æ“ä½œæ—¶ï¼ŒæŸä¸ªreduceä»»åŠ¡R1çš„è¾“å‡ºç­‰ä»·äºä¸€ä¸ªä¸ç¡®å®šç¨‹åºçš„ä¸²è¡Œæ‰§è¡Œè¾“å‡ºã€‚ä½†æŸä¸ªreduceä»»åŠ¡R2çš„è¾“å‡ºå¯èƒ½ç¬¦åˆè¿™ä¸ªä¸ç¡®å®šç¨‹åºçš„å¦ä¸€ä¸ªä¸²è¡Œæ‰§è¡Œè¾“å‡ºã€‚</p>
<p>è€ƒè™‘mapä»»åŠ¡Må’Œreduceä»»åŠ¡R1ã€R2ã€‚ä»¤e(Ri)ä¸ºRiçš„å·²æäº¤çš„æ‰§è¡Œç»“æœï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚æ­¤æ—¶å¼±è¯­ä¹‰ç”Ÿæ•ˆï¼Œå› ä¸ºe(R1)å¯èƒ½è¯»å–äº†Mçš„ä¸€æ¬¡è¾“å‡ºï¼Œè€Œe(R2)åˆ™å¯èƒ½è¯»å–äº†Mçš„å¦ä¸€æ¬¡è¾“å‡ºã€‚</p>
<h4 id="3-4-å±€éƒ¨æ€§"><a class="header-anchor" href="#3-4-å±€éƒ¨æ€§">Â¶</a>3.4  å±€éƒ¨æ€§</h4>
<p>åœ¨æˆ‘ä»¬çš„è®¡ç®—ç¯å¢ƒä¸­ï¼Œç½‘ç»œå¸¦å®½æ˜¯ä¸€ç§æ¯”è¾ƒç¨€ç¼ºçš„èµ„æºã€‚æˆ‘ä»¬åˆ©ç”¨ä¸‹é¢çš„äº‹å®æ¥èŠ‚çœå¸¦å®½ï¼šè¾“å…¥æ•°æ®ï¼ˆç”±GFSç®¡ç†ï¼‰å°±å­˜å‚¨åœ¨ç»„æˆé›†ç¾¤çš„æœºå™¨çš„æœ¬åœ°ç£ç›˜ä¸Šã€‚GFSå°†æ¯ä¸ªæ–‡ä»¶åˆ†æˆ64MBå¤§å°çš„åŒºå—ï¼Œæ¯å—å¤åˆ¶è‹¥å¹²ä»½ï¼ˆé€šå¸¸ä¸º3ä»½ï¼‰å­˜å‚¨åˆ°ä¸åŒçš„æœºå™¨ä¸Šã€‚MapReduceä¸»èŠ‚ç‚¹ä¼šæŠŠè¾“å…¥æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯è€ƒè™‘è¿›å»ï¼Œå¹¶å°è¯•å°†mapä»»åŠ¡åˆ†é…åˆ°ä¿å­˜æœ‰ç›¸åº”è¾“å…¥æ•°æ®çš„æœºå™¨ä¸Šã€‚å¦‚æœå¤±è´¥çš„è¯ï¼Œå®ƒä¼šè¯•å›¾å°†mapä»»åŠ¡è°ƒåº¦åˆ°ä¸´è¿‘è¿™äº›æ•°æ®çš„æœºå™¨ä¸Šï¼ˆä¾‹å¦‚ä¸ä¿å­˜è¾“å…¥æ•°æ®çš„æœºå™¨å¤„äºåŒä¸€ç½‘å…³çš„å·¥ä½œèŠ‚ç‚¹ï¼‰ã€‚å½“åœ¨ä¸€ä¸ªé›†ç¾¤çš„ç›¸å½“ä¸€éƒ¨åˆ†èŠ‚ç‚¹ä¸Šè¿è¡ŒMapReduceæ“ä½œæ—¶ï¼Œå¤§å¤šæ•°è¾“å…¥æ•°æ®éƒ½æ˜¯æœ¬åœ°è¯»å–ï¼Œå¹¶ä¸æ¶ˆè€—ç½‘ç»œå¸¦å®½ã€‚</p>
<h4 id="3-5-ä»»åŠ¡ç²’åº¦"><a class="header-anchor" href="#3-5-ä»»åŠ¡ç²’åº¦">Â¶</a>3.5  ä»»åŠ¡ç²’åº¦</h4>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°†mapé˜¶æ®µåˆ†æˆMä»½ï¼Œå°†reduceé˜¶æ®µåˆ†æˆRä»½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒMå’ŒRåº”è¯¥æ¯”å·¥ä½œèŠ‚ç‚¹æœºå™¨çš„æ•°é‡å¤§å¾ˆå¤šã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹å¤„ç†å¾ˆå¤šä¸åŒçš„ä»»åŠ¡ï¼Œå¯ä»¥å¢å¼ºåŠ¨æ€è´Ÿè´£å‡è¡¡èƒ½åŠ›ï¼Œä¹Ÿèƒ½åŠ é€Ÿæœ‰å·¥ä½œèŠ‚ç‚¹å¤±è´¥æ—¶çš„æ¢å¤æƒ…å†µï¼šå¤±è´¥èŠ‚ç‚¹å·²ç»å®Œæˆçš„mapä»»åŠ¡æœ‰å¾ˆå¤šçš„æ—¶å€™ä¹Ÿèƒ½ä¼ é€’ç»™å…¶å®ƒæ‰€æœ‰å·¥ä½œèŠ‚ç‚¹æ¥å®Œæˆã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å®ç°ä¸­Må’ŒRçš„æ•°é‡æœ‰ä¸€ä¸ªå®é™…çš„ä¸Šé™ï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œä¸»èŠ‚ç‚¹å¿…é¡»åšO(M+R)çš„è°ƒåº¦å†³å®šä»¥åŠåœ¨å†…å­˜ä¸­ä¿æŒO(M<em>R)ä¸ªçŠ¶æ€ã€‚ï¼ˆä½†æ˜¯å†…å­˜ä½¿ç”¨çš„å¸¸æ•°é¡¹å¾ˆå°ï¼šO(M</em>R)ä¸ªçŠ¶æ€ä¸­æ¯ä¸ªmap/reduceä»»åŠ¡å¯¹åªéœ€è¦å·®ä¸å¤š1å­—èŠ‚æ•°æ®ã€‚ï¼‰</p>
<p>è¿›ä¸€æ­¥åˆ†æï¼ŒRé€šå¸¸ç”±ç”¨æˆ·æŒ‡å®šï¼Œå› ä¸ºæ¯ä¸ªreduceä»»åŠ¡éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªç‹¬ç«‹çš„è¾“å‡ºæ–‡ä»¶ã€‚åœ¨å®è·µä¸­æˆ‘ä»¬å€¾å‘äºè¿™æ ·é€‰æ‹©Mï¼Œå³å¯ä»¥å°†æ¯ä¸ªå•ç‹¬çš„ä»»åŠ¡åˆ†æˆ16-64MBå¤§çš„è¾“å…¥æ•°æ®ï¼ˆæ­¤æ—¶ä¸Šé¢æ‰€è¯´çš„å±€éƒ¨æ€§ä¼˜åŒ–æ•ˆæœæœ€å¥½ï¼‰ï¼ŒåŒæ—¶æˆ‘ä»¬ä»¤Rä¸ºå¾…ä½¿ç”¨çš„å·¥ä½œèŠ‚ç‚¹æ•°é‡è¾ƒå°çš„æ•´æ•°å€ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨M=200000ï¼ŒR=5000ï¼Œä½¿ç”¨2000å°æœºå™¨æ¥è¿è¡ŒMapReduceè®¡ç®—ã€‚</p>
<h4 id="3-6-å¤‡ç”¨ä»»åŠ¡"><a class="header-anchor" href="#3-6-å¤‡ç”¨ä»»åŠ¡">Â¶</a>3.6  å¤‡ç”¨ä»»åŠ¡</h4>
<p>å¯¼è‡´MapReduceæ“ä½œç”¨æ—¶å»¶é•¿çš„ä¸€ä¸ªå¸¸è§åŸå› æ˜¯å‡ºç°äº†â€œè½åè€…â€ï¼šæŸå°æœºå™¨åœ¨å®Œæˆæœ€åçš„ä¸€ä¸ªmapæˆ–reduceä»»åŠ¡æ—¶èŠ±è´¹äº†åå¸¸çš„æ¼«é•¿æ—¶é—´ã€‚å¾ˆå¤šåŸå› éƒ½ä¼šå¯¼è‡´è½åè€…çš„äº§ç”Ÿã€‚ä¾‹å¦‚ï¼Œä¸€å°ç£ç›˜æŸåçš„æœºå™¨å¯èƒ½ä¼šé­é‡é¢‘ç¹çš„å¯æ ¡æ­£é”™è¯¯ï¼Œå¯¼è‡´å®ƒçš„è¯»å–æ€§èƒ½ä»30MB/sé™è‡³1MB/sã€‚é›†ç¾¤è°ƒåº¦ç³»ç»Ÿå¯èƒ½å·²ç»è°ƒåº¦äº†å…¶å®ƒä»»åŠ¡åˆ°è¿™å°æœºå™¨ï¼Œå¯¼è‡´å®ƒåœ¨æ‰§è¡ŒMapReduceä»£ç æ—¶å› ä¸ºCPUã€å†…å­˜ã€æœ¬åœ°ç£ç›˜æˆ–ç½‘ç»œå¸¦å®½çš„ç«äº‰è€Œæ›´åŠ ç¼“æ…¢ã€‚æœ€è¿‘æˆ‘ä»¬é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯æœºå™¨çš„åˆå§‹åŒ–ä»£ç æœ‰ä¸€ä¸ªbugï¼Œå¯¼è‡´å¤„ç†å™¨ç¼“å­˜è¢«ç¦ç”¨ï¼šå—å½±å“çš„æœºå™¨ä¸Šçš„è®¡ç®—é€Ÿåº¦ä¸‹é™äº†è¶…è¿‡100å€ã€‚</p>
<p>æˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨çš„æœºåˆ¶æ¥å‡è½»è½åè€…é—®é¢˜ã€‚å½“MapReduceæ“ä½œæ¥è¿‘å®Œæˆæ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†ä»åœ¨å¤„ç†ä¸­çš„å‰©ä½™ä»»åŠ¡è°ƒåº¦ç»™å…¶å®ƒæœºå™¨ä½œå¤‡ç”¨æ‰§è¡Œã€‚åŸæœ¬çš„æ‰§è¡Œå’Œå¤‡ç”¨æ‰§è¡Œä¸­çš„ä»»ä¸€ä¸ªå®Œæˆæ—¶éƒ½ä¼šå°†å¯¹åº”ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚æˆ‘ä»¬å·²ç»è°ƒæ•´è¿‡è¿™ä¸ªæœºåˆ¶ï¼Œä½¿å®ƒå› è¿™ä¸ªæœºåˆ¶è€Œå¢åŠ çš„è®¡ç®—èµ„æºæ¶ˆè€—é€šå¸¸åªæœ‰ä¸€ç‚¹ç‚¹ã€‚æˆ‘ä»¬å·²ç»è§‚å¯Ÿåˆ°è¿™ä¸€æœºåˆ¶æœ‰æ•ˆåœ°å‡å°‘äº†å¤§å‹MapReduceæ“ä½œèŠ±è´¹çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œ5.3èŠ‚ä¸­çš„æ’åºç¨‹åºåœ¨ç¦ç”¨è¿™ä¸€æœºåˆ¶æ—¶è¦å¤šèŠ±è´¹44%çš„æ—¶é—´ã€‚</p>
<h3 id="4-æŠ€å·§"><a class="header-anchor" href="#4-æŠ€å·§">Â¶</a>4 æŠ€å·§</h3>
<p>å°½ç®¡ä»…ä»…ç”¨mapå’Œreduceå‡½æ•°æä¾›çš„åŸºæœ¬åŠŸèƒ½å°±è¶³å¤Ÿè§£å†³å¤§å¤šæ•°éœ€æ±‚äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯å‘ç°äº†ä¸€äº›å¾ˆæœ‰ç”¨çš„æ‰©å±•ã€‚è¿™äº›æ‰©å±•å°†åœ¨æœ¬èŠ‚è¿›è¡Œæè¿°ã€‚</p>
<h4 id="4-1-åˆ’åˆ†å‡½æ•°"><a class="header-anchor" href="#4-1-åˆ’åˆ†å‡½æ•°">Â¶</a>4.1  åˆ’åˆ†å‡½æ•°</h4>
<p>MapReduceçš„ç”¨æˆ·æŒ‡å®šä»–ä»¬æƒ³è¦çš„reduceä»»åŠ¡/è¾“å‡ºæ–‡ä»¶çš„æ•°é‡ã€‚é€šè¿‡åˆ’åˆ†å‡½æ•°å¯ä»¥å°†æ•°æ®æŒ‰ä¸­é—´keyåˆ’åˆ†ç»™å„ä¸ªreduceä»»åŠ¡ã€‚æˆ‘ä»¬é»˜è®¤æä¾›äº†æ•£åˆ—å‡½æ•°å½“ä½œé»˜è®¤çš„åˆ’åˆ†å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œhash(key) mod R)ã€‚é€šå¸¸è¿™å°±èƒ½å¾—å‡ºå¾ˆå¹³è¡¡çš„åˆ’åˆ†ç»“æœäº†ã€‚ä½†åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œç”¨keyçš„å…¶å®ƒä¿¡æ¯æ¥åˆ’åˆ†æ•°æ®ä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚æœ‰æ—¶è¾“å‡ºçš„keyéƒ½æ˜¯URLï¼Œè€Œæˆ‘ä»¬æƒ³è®©æ‰€æœ‰æ¥è‡ªåŒä¸€ä¸»æœºçš„é¡¹æœ€åéƒ½åœ¨åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚ä¸ºäº†æ”¯æŒç±»ä¼¼è¿™æ ·çš„æƒ…å†µï¼ŒMapReduceçš„ç”¨æˆ·å¯ä»¥æä¾›ä¸€ä¸ªç‰¹æ®Šçš„åˆ’åˆ†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œhash(ä¸»æœºå(urlkey)) mod Râ€æ¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚</p>
<h4 id="4-2-é¡ºåºä¿è¯"><a class="header-anchor" href="#4-2-é¡ºåºä¿è¯">Â¶</a>4.2  é¡ºåºä¿è¯</h4>
<p>æˆ‘ä»¬ä¿è¯åœ¨ç»™å®šçš„åˆ’åˆ†ä¸­ï¼Œä¸­é—´key/valueå¯¹æ˜¯æŒ‰å¢åºæ’åˆ—çš„ã€‚è¿™ä¸ªé¡ºåºä¿è¯ä½¿æ¯ä¸ªåˆ’åˆ†äº§ç”Ÿä¸€ä¸ªæœ‰åºçš„è¾“å‡ºæ–‡ä»¶å˜å¾—å¾ˆå®¹æ˜“ï¼Œå½“è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼éœ€è¦æ”¯æŒé«˜æ•ˆçš„æŒ‰keyéšæœºè®¿é—®ï¼Œæˆ–ç”¨æˆ·éœ€è¦è¾“å‡ºæ•°æ®æœ‰åºæ—¶ï¼Œè¿™ä¸€æ€§è´¨ä¼šéå¸¸æœ‰ç”¨ã€‚</p>
<h4 id="4-3-åˆå¹¶å‡½æ•°"><a class="header-anchor" href="#4-3-åˆå¹¶å‡½æ•°">Â¶</a>4.3  åˆå¹¶å‡½æ•°</h4>
<p>æŸäº›æƒ…å†µä¸­ï¼Œä¸åŒçš„mapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´keyé‡å¤ç‡éå¸¸é«˜ï¼Œè€Œä¸”ç”¨æˆ·æŒ‡å®šçš„reduceå‡½æ•°å¯è¿›è¡Œäº¤æ¢ç»„åˆã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯2.1èŠ‚ä¸­çš„å•è¯ç»Ÿè®¡ã€‚å•è¯é¢‘ç‡ç¬¦åˆé½å¤«åˆ†å¸ƒï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰ï¼Œå› æ­¤æ¯ä¸ªmapä»»åŠ¡éƒ½ä¼šäº§ç”Ÿéå¸¸å¤šçš„&lt;the, 1&gt;è¿™æ ·çš„è®°å½•ã€‚æ‰€æœ‰è¿™äº›è®°å½•éƒ½ä¼šé€šè¿‡ç½‘ç»œè¢«å‘é€ç»™ä¸€ä¸ªreduceä»»åŠ¡ï¼Œç„¶åå†é€šè¿‡reduceå‡½æ•°å°†å®ƒä»¬ç›¸åŠ ï¼Œäº§ç”Ÿç»“æœã€‚æˆ‘ä»¬å…è®¸ç”¨æˆ·æŒ‡å®šä¸€ä¸ªå¯é€‰çš„åˆå¹¶å‡½æ•°ï¼Œåœ¨æ•°æ®è¢«å‘é€ä¹‹å‰è¿›è¡Œå±€éƒ¨åˆå¹¶ã€‚</p>
<p>åˆå¹¶å‡½æ•°ç”±æ¯ä¸ªæ‰§è¡Œmapä»»åŠ¡çš„æœºå™¨è°ƒç”¨ã€‚é€šå¸¸åˆå¹¶å‡½æ•°ä¸reduceå‡½æ•°çš„å®ç°ä»£ç æ˜¯ç›¸åŒçš„ã€‚å®ƒä»¬å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯MapReduceåº“å¤„ç†å‡½æ•°è¾“å‡ºçš„æ–¹å¼ã€‚reduceå‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œè€Œåˆå¹¶å‡½æ•°çš„è¾“å‡ºä¼šå†™åˆ°ä¸­é—´æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨éšåå‘é€ç»™ä¸€ä¸ªreduceä»»åŠ¡ã€‚</p>
<h4 id="4-4-è¾“å…¥å’Œè¾“å‡ºç±»å‹"><a class="header-anchor" href="#4-4-è¾“å…¥å’Œè¾“å‡ºç±»å‹">Â¶</a>4.4  è¾“å…¥å’Œè¾“å‡ºç±»å‹</h4>
<p>MapReduceåº“æ”¯æŒå¤šç§ä¸åŒæ ¼å¼è¾“å…¥æ•°æ®çš„è¯»å–ã€‚ä¾‹å¦‚ï¼Œâ€œtextâ€æ¨¡å¼å°†æ¯è¡Œè¾“å…¥å½“ä½œä¸€ä¸ªkey/valueå¯¹ï¼škeyæ˜¯æ–‡ä»¶ä¸­çš„åç§»ï¼Œè€Œvalueåˆ™æ˜¯è¯¥è¡Œçš„å†…å®¹ã€‚å¦ä¸€ç§æ”¯æŒçš„å¸¸è§æ ¼å¼å°†key/valueå¯¹æŒ‰keyæ’åºåè¿ç»­å­˜å‚¨åœ¨ä¸€èµ·ã€‚æ¯ç§è¾“å…¥ç±»å‹çš„å®ç°éƒ½çŸ¥é“å¦‚ä½•å°†å®ƒæœ¬èº«åˆ†æˆæœ‰æ„ä¹‰çš„åŒºé—´ä»è€Œèƒ½åˆ†æˆç‹¬ç«‹çš„mapä»»åŠ¡è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚textæ¨¡å¼çš„åŒºé—´åˆ’åˆ†ä¿è¯äº†åˆ’åˆ†ç‚¹åªå‡ºç°åœ¨è¡Œè¾¹ç•Œå¤„ï¼‰ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä¸€ä¸ªç®€å•çš„readeræ¥å£æ¥æä¾›å¯¹æ–°çš„è¾“å…¥ç±»å‹çš„æ”¯æŒï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·åªæ˜¯ä½¿ç”¨ä¸ºæ•°ä¸å¤šçš„å‡ ç§é¢„å®šä¹‰è¾“å…¥ç±»å‹ä¸­çš„ä¸€ç§ã€‚</p>
<p>readerçš„å®ç°ä¸ä¸€å®šè¦æä¾›ä»æ–‡ä»¶ä¸­è¯»æ•°æ®çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å®šä¹‰ä¸€ä¸ªä»æ•°æ®åº“è¯»è®°å½•çš„readerï¼Œæˆ–æ˜¯ä»æ˜ å°„åœ¨å†…å­˜ä¸­çš„æŸç§æ•°æ®ç»“æ„ä¸­ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒä¸€ç»„è¾“å‡ºç±»å‹æ¥äº§ç”Ÿä¸åŒæ ¼å¼çš„æ•°æ®ï¼Œè€Œç”¨æˆ·æä¾›ä»£ç å»æ”¯æŒæ–°çš„è¾“å‡ºç±»å‹ä¹Ÿä¸éš¾ã€‚</p>
<h4 id="4-5-è¾¹ç•Œæ•ˆåº”"><a class="header-anchor" href="#4-5-è¾¹ç•Œæ•ˆåº”">Â¶</a>4.5  è¾¹ç•Œæ•ˆåº”</h4>
<p>æœ‰äº›æƒ…å†µä¸‹ï¼ŒMapReduceçš„ç”¨æˆ·å‘ç°ä»ä»–ä»¬çš„mapæˆ–reduceæ“ä½œä¸­äº§ç”Ÿä¸€äº›é¢å¤–çš„è¾…åŠ©æ–‡ä»¶å¾ˆæœ‰å¸®åŠ©ã€‚æˆ‘ä»¬ä¾èµ–äºåº”ç”¨ä½œè€…æ¥ç¡®ä¿è¿™æ ·çš„è¾¹ç•Œæ•ˆåº”æ˜¯åŸå­ä¸”å¹‚ç­‰çš„ã€‚é€šå¸¸åº”ç”¨ä¼šå†™ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ç”Ÿæˆå®Œæ¯•æ—¶å°†å…¶åŸå­çš„æ›´åã€‚</p>
<p>æˆ‘ä»¬ä¸æä¾›åœ¨å•ä¸€ä»»åŠ¡äº§ç”Ÿçš„å¤šä¸ªè¾“å‡ºæ–‡ä»¶ä¸­åŸå­çš„ä¸¤æ®µæäº¤ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªä»»åŠ¡äº§ç”Ÿå¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä¸”è¦æ±‚æœ‰è·¨æ–‡ä»¶çš„ä¸€è‡´æ€§ï¼Œå®ƒå¿…é¡»æ˜¯ç¡®å®šæ€§çš„ã€‚è¿™ä¸ªé™åˆ¶åœ¨å®è·µä¸­è¿˜æ²¡æœ‰å¼•èµ·è¿‡é—®é¢˜ã€‚</p>
<h4 id="4-6-ç•¥è¿‡åè®°å½•"><a class="header-anchor" href="#4-6-ç•¥è¿‡åè®°å½•">Â¶</a>4.6  ç•¥è¿‡åè®°å½•</h4>
<p>æœ‰æ—¶ç”¨æˆ·ä»£ç ä¸­çš„bugä¼šå¯¼è‡´mapæˆ–reduceå‡½æ•°ä¸€é‡åˆ°ç‰¹å®šçš„è®°å½•å°±å´©æºƒã€‚è¿™äº›bugä¼šå¯¼è‡´MapReduceæ“ä½œæ— æ³•å®Œæˆã€‚é€šå¸¸çš„åº”ç”¨æªæ–½æ˜¯ä¿®å¤è¿™äº›bugï¼Œä½†æœ‰æ—¶éš¾ä»¥å®ç°ï¼šä¹Ÿè®¸bugå­˜åœ¨äºå¾—ä¸åˆ°æºä»£ç çš„ç¬¬ä¸‰æ–¹åº“ä¸­ã€‚åŒæ ·åœ°ï¼Œæœ‰æ—¶å¿½ç•¥ä¸€äº›è®°å½•æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªå¤§æ•°æ®é›†ä¸Šåšç»Ÿè®¡åˆ†ææ—¶ã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯é€‰çš„æ‰§è¡Œæ¨¡å¼ï¼Œåœ¨MapReduceåº“æ£€æµ‹åˆ°ç¡®å®šä¼šå¯¼è‡´å´©æºƒçš„è®°å½•æ—¶è·¯è¿‡å®ƒä»¬ä»è€Œç»§ç»­è¿›åº¦ã€‚</p>
<p>æ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½è¦å®‰è£…ä¸€ä¸ªä¿¡å·å¤„ç†ç¨‹åºæ¥æ•æ‰è¿è§„æ“ä½œå’Œæ€»çº¿é”™è¯¯ã€‚åœ¨è°ƒç”¨ç”¨æˆ·çš„mapæˆ–reduceæ“ä½œå‰ï¼ŒMapReduceåº“å°†ç”¨äºéªŒè¯çš„åºåˆ—å·ä¿å­˜åœ¨å…¨å±€å˜é‡ä¸­ã€‚å¦‚æœç”¨æˆ·ä»£ç äº§ç”Ÿäº†ä¿¡å·ï¼Œä¿¡å·å¤„ç†ç¨‹åºå°±å°†ä¸€ä¸ªåŒ…å«è¿™ä¸ªåºåˆ—å·çš„â€œæœ€åä¸€æ­¥â€UDPåŒ…å‘é€ç»™MapReduceä¸»èŠ‚ç‚¹ã€‚å½“ä¸»èŠ‚ç‚¹åœ¨æŸä¸ªè®°å½•ä¸Šå‘ç°äº†è¶…è¿‡ä¸€ä¸ªé”™è¯¯æ—¶ï¼Œå°±è¡¨æ˜ä¸‹ä¸€æ¬¡é‡æ‰§è¡Œç›¸åº”çš„mapæˆ–reduceä»»åŠ¡æ—¶è¦è·³è¿‡è¿™ä¸ªè®°å½•ã€‚</p>
<h4 id="4-7-æœ¬åœ°æ‰§è¡Œ"><a class="header-anchor" href="#4-7-æœ¬åœ°æ‰§è¡Œ">Â¶</a>4.7  æœ¬åœ°æ‰§è¡Œ</h4>
<p>mapæˆ–reduceå‡½æ•°çš„è°ƒè¯•é—®é¢˜å¸¸å¸¸ä»¤äººéš¾ä»¥æ‰æ‘¸ï¼Œå› ä¸ºå®é™…çš„è®¡ç®—è¿‡ç¨‹éƒ½å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šï¼Œç»å¸¸åŒ…å«æ•°åƒå°æœºå™¨ï¼Œè€Œå·¥ä½œåˆ†é…å†³ç­–éƒ½ç”±ä¸»èŠ‚ç‚¹åŠ¨æ€äº§ç”Ÿã€‚ä¸ºäº†å¸®åŠ©è°ƒè¯•ã€æ€§èƒ½åˆ†æã€å°èŒƒå›´æµ‹è¯•ï¼Œæˆ‘ä»¬å¼€å‘äº†MapReduceåº“çš„ä¸€ä¸ªæ›¿ä»£å®ç°ï¼Œå¯ä»¥å°†MapReduceæ“ä½œçš„å…¨éƒ¨å·¥ä½œåœ¨ä¸€å°æœ¬åœ°æœºå™¨ä¸Šé¡ºåºæ‰§è¡Œã€‚ç”¨æˆ·æ‹¥æœ‰æ§åˆ¶æƒï¼Œå› æ­¤è®¡ç®—å¯ä»¥è¢«é™åˆ¶åœ¨ç‰¹å®šçš„mapä»»åŠ¡ä¸­ã€‚ç”¨æˆ·è°ƒç”¨ä»–ä»¬çš„ç¨‹åºæ—¶åŠ ä¸Šä¸€ä¸ªç‰¹æ®Šæ ‡å¿—ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨ä»»ä½•æœ‰ç”¨çš„è°ƒè¯•æˆ–æµ‹è¯•å·¥å…·ã€‚</p>
<h4 id="4-8-çŠ¶æ€ä¿¡æ¯"><a class="header-anchor" href="#4-8-çŠ¶æ€ä¿¡æ¯">Â¶</a>4.8  çŠ¶æ€ä¿¡æ¯</h4>
<p>ä¸»èŠ‚ç‚¹å†…ç½®äº†ä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå¯ä»¥å°†å½“å‰çŠ¶æ€è¾“å‡ºä¸ºä¸€ç»„ç½‘é¡µä¾›ç”¨æˆ·ä½¿ç”¨ã€‚çŠ¶æ€ç½‘é¡µèƒ½æ˜¾ç¤ºè®¡ç®—çš„è¿›åº¦ï¼Œä¾‹å¦‚æœ‰å¤šå°‘ä»»åŠ¡è¢«å®Œæˆï¼Œå¤šå°‘æ­£åœ¨å¤„ç†ï¼Œè¾“å…¥æ•°æ®å¤§å°ï¼Œä¸­é—´æ•°æ®å¤§å°ï¼Œè¾“å‡ºæ•°æ®å¤§å°ï¼Œå¤„ç†é€Ÿåº¦ï¼Œç­‰ç­‰ã€‚è¿™äº›ç½‘é¡µè¿˜åŒ…å«æŒ‡å‘æ¯ä¸ªä»»åŠ¡çš„stdoutå’Œstderrè¾“å‡ºæ–‡ä»¶çš„é“¾æ¥ã€‚ç”¨æˆ·å¯ä»¥ç”¨è¿™äº›æ•°æ®æ¥é¢„æµ‹è®¡ç®—è¦èŠ±è´¹å¤šé•¿æ—¶é—´ï¼Œä»¥åŠæ˜¯å¦åº”è¯¥å¢åŠ è®¡ç®—ä½¿ç”¨çš„èµ„æºã€‚è¿™äº›ç½‘é¡µä¹Ÿèƒ½ç”¨äºåœ¨è®¡ç®—é€Ÿç‡æ¯”é¢„æœŸæ…¢å¾ˆå¤šæ—¶å‘ç°è¿™ä¸€æƒ…å†µã€‚</p>
<p>å¦å¤–ï¼Œé¡¶å±‚çš„çŠ¶æ€ç½‘é¡µè¿˜èƒ½æ˜¾ç¤ºå“ªäº›å·¥ä½œèŠ‚ç‚¹å¤±è´¥äº†ï¼Œå®ƒä»¬å¤±è´¥æ—¶æ­£åœ¨å¤„ç†å“ªäº›mapå’Œreduceä»»åŠ¡ã€‚å½“è¦åœ¨ç”¨æˆ·ä»£ç ä¸­ç¡®å®šbugæ—¶è¿™äº›æ—¶é—´éå¸¸æœ‰ç”¨ã€‚</p>
<h4 id="4-9-è®¡æ•°å™¨"><a class="header-anchor" href="#4-9-è®¡æ•°å™¨">Â¶</a>4.9  è®¡æ•°å™¨</h4>
<p>MapReduceåº“æä¾›äº†è®¡æ•°å™¨æœºåˆ¶ï¼Œå¯ä»¥ç»Ÿè®¡å¤šç§äº‹ä»¶çš„å‘ç”Ÿæ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ä»£ç å¯èƒ½æƒ³ç»Ÿè®¡å·²å¤„ç†çš„å•è¯æ€»æ•°ï¼Œæˆ–è¢«ç´¢å¼•çš„å¾·è¯­æ–‡çŒ®çš„æ•°é‡ç­‰ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨è¿™ä¸€æœºåˆ¶ï¼Œç”¨æˆ·ä»£ç éœ€è¦åˆ›å»ºä¸€ä¸ªæœ‰åçš„è®¡æ•°å™¨å¯¹è±¡ï¼Œå¹¶åœ¨mapå’Œreduceå‡½æ•°çš„é€‚å½“ä½ç½®å¢åŠ å®ƒçš„å€¼ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Counter *uppercase = GetCounter(<span class="string">"uppercase"</span>);</span><br><span class="line">    </span><br><span class="line"><span class="built_in">map</span>(<span class="keyword">String</span> name, <span class="keyword">String</span> contents):</span><br><span class="line">    <span class="keyword">for</span> each <span class="keyword">word</span> w in contents:</span><br><span class="line">        <span class="keyword">if</span> (IsCapitalized(w)):</span><br><span class="line">            uppercase-&gt;Increment();</span><br><span class="line">        EmitIntermediate(w, <span class="string">"1"</span>);</span><br></pre></td></tr></table></figure>
<p>å·¥ä½œèŠ‚ç‚¹ä¸Šçš„è®¡æ•°å™¨å€¼ä¼šå®šæœŸå‘é€ç»™ä¸»èŠ‚ç‚¹ï¼ˆé™„åœ¨pingçš„å›åº”é‡Œï¼‰ã€‚å½“MapReduceæ“ä½œå®Œæˆæ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå°†è¿è¡ŒæˆåŠŸçš„mapå’Œreduceä»»åŠ¡å‘æ¥çš„è®¡æ•°å™¨å€¼åˆå¹¶åè¿”å›ç»™ç”¨æˆ·ä»£ç ã€‚å½“å‰çš„è®¡æ•°å™¨å€¼ä¹Ÿä¼šæ˜¾ç¤ºåœ¨ä¸»èŠ‚ç‚¹çš„çŠ¶æ€ç½‘é¡µä¸Šï¼Œå…¶å®ƒäººå¯ä»¥çœ‹åˆ°å®æ—¶çš„è®¡ç®—è¿›åº¦ã€‚åœ¨åˆå¹¶è®¡æ•°å™¨å€¼æ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šå¿½ç•¥åŒä¸€ä¸ªmapæˆ–reduceä»»åŠ¡çš„é‡å¤çš„ç»“æœï¼Œä»è€Œé¿å…å¤šæ¬¡å åŠ ã€‚ï¼ˆé‡å¤æ‰§è¡Œå¯èƒ½å‘ç”Ÿåœ¨æˆ‘ä»¬çš„å¤‡ç”¨ä»»åŠ¡å’Œå¤±è´¥èŠ‚ç‚¹é‡æ‰§è¡Œä¸­ã€‚ï¼‰</p>
<p>æœ‰äº›è®¡æ•°å€¼æ˜¯ç”±MapReduceåº“è‡ªåŠ¨ç»´æŠ¤çš„ï¼Œä¾‹å¦‚è¾“å…¥key/valueå¯¹å·²å¤„ç†çš„æ•°é‡å’Œè¾“å‡ºkey/valueå¯¹äº§ç”Ÿçš„æ•°é‡ç­‰ã€‚</p>
<p>ç”¨æˆ·ä»¬è§‚å¯Ÿåˆ°è¿™ä¸€æœºåˆ¶åœ¨å¯¹MapReduceæ“ä½œçš„æ™ºèƒ½æ£€æŸ¥ä¸Šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€äº›MapReduceæ“ä½œä¸­ï¼Œç”¨æˆ·ä»£ç å¯èƒ½æƒ³è¦ç¡®è®¤äº§ç”Ÿçš„è¾“å‡ºå¯¹çš„æ•°é‡æ°å¥½ä¸è¾“å…¥å¯¹çš„æ•°é‡ç›¸ç­‰ï¼Œæˆ–æ˜¯å·²å¤„ç†çš„å¾·è¯­æ–‡çŒ®å å¤„ç†æ–‡çŒ®æ€»æ•°çš„æ¯”ä¾‹æ˜¯åœ¨æ¥å—èŒƒå›´å†…çš„ã€‚</p>
<h3 id="5-æ€§èƒ½"><a class="header-anchor" href="#5-æ€§èƒ½">Â¶</a>5 æ€§èƒ½</h3>
<p>æœ¬èŠ‚ä¸­æˆ‘ä»¬ä¼šåœ¨ä¸€ä¸ªå¤§å‹é›†ç¾¤ä¸Šæµ‹é‡MapReduceåœ¨ä¸¤ä¸ªè®¡ç®—ä¸Šçš„æ€§èƒ½ã€‚ä¸€ä¸ªè®¡ç®—æ˜¯åœ¨å·®ä¸å¤š1TBçš„æ•°æ®ä¸­æŸ¥æ‰¾æŒ‡å®šçš„æ¨¡å¼ã€‚å¦ä¸€ä¸ªè®¡ç®—åˆ™æ˜¯æ’åº1TBçš„æ•°æ®ã€‚</p>
<p>è¿™ä¸¤ä¸ªç¨‹åºèƒ½ä»£è¡¨å¤§é‡çœŸå®çš„MapReduceç¨‹åºâ€”â€”ä¸€ç±»ç¨‹åºæ˜¯å°†æ•°æ®ä»ä¸€ç§è¡¨ç¤ºå½¢å¼è½¬æ¢ä¸ºå¦ä¸€ç§ï¼Œå¦ä¸€ç±»ç¨‹åºåˆ™æ˜¯ä»å¾ˆå¤§æ•°é‡çš„æ•°æ®é›†ä¸­æå–å‡ºä¸€å°éƒ¨åˆ†æ„Ÿå…´è¶£çš„æ•°æ®ã€‚</p>
<h4 id="5-1-é›†ç¾¤é…ç½®"><a class="header-anchor" href="#5-1-é›†ç¾¤é…ç½®">Â¶</a>5.1  é›†ç¾¤é…ç½®</h4>
<p>æ‰€æœ‰çš„ç¨‹åºéƒ½è¿è¡Œåœ¨ç”±1800å°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šã€‚æ¯å°æœºå™¨é…æœ‰ï¼š2GHzçš„Intel Xeonå¤„ç†å™¨ä¸”æ”¯æŒè¶…çº¿ç¨‹ï¼Œ4GBå†…å­˜ï¼Œ2å—160GBçš„IDEç¡¬ç›˜ï¼Œå’Œ1GBä»¥å¤ªç½‘è¿æ¥ã€‚æ‰€æœ‰æœºå™¨éƒ½å®‰æ’åœ¨2å±‚æ ‘ç»“æ„çš„ç½‘å…³å†…ï¼Œæ ¹èŠ‚ç‚¹çš„å¯ç”¨å¸¦å®½åŠ èµ·æ¥æœ‰100-200Gbpsã€‚æ‰€æœ‰çš„æœºå™¨éƒ½å¤„äºç›¸åŒçš„æ‰˜ç®¡è®¾æ–½ä¸‹ï¼Œå› æ­¤ä»»æ„ä¸¤å°æœºå™¨é—´çš„å¾€è¿”é€šä¿¡æ—¶é—´éƒ½å°‘äº1msã€‚</p>
<p>é™¤äº†4GBçš„å†…å­˜ï¼Œè¿˜æœ‰1-1.5GBçš„å†…å­˜ä¿ç•™ç»™äº†é›†ç¾¤ä¸Šè¿è¡Œçš„å…¶å®ƒä»»åŠ¡ã€‚ç¨‹åºè¿è¡Œçš„æ—¶é—´æ˜¯ä¸€ä¸ªå‘¨æœ«çš„ä¸‹åˆï¼Œæ­¤æ—¶å¤§å¤šæ•°CPUã€ç£ç›˜å’Œç½‘ç»œèµ„æºéƒ½ç©ºé—²ä¸­ã€‚</p>
<h4 id="5-2-Grep"><a class="header-anchor" href="#5-2-Grep">Â¶</a>5.2  Grep</h4>
<p>grepç¨‹åºè¦æ‰«æ1010ä¸ªé•¿åº¦ä¸º100å­—èŠ‚çš„è®°å½•æ¥å¯»æ‰¾ä¸€ä¸ªç›¸å½“ç½•è§çš„ä¸‰å­—ç¬¦æ¨¡å¼ï¼ˆè¿™ä¸ªæ¨¡å¼å‡ºç°äº92337ä¸ªè®°å½•ä¸­ï¼‰ã€‚è¾“å…¥è¢«åˆ‡åˆ†æˆ64MBå¤§å°çš„éƒ¨åˆ†ï¼ˆM = 15000ï¼‰ï¼Œæ•´ä¸ªè¾“å‡ºä¸ºä¸€ä¸ªæ–‡ä»¶ï¼ˆR = 1ï¼‰ã€‚</p>
<p><img src="/.io//transfer.png" alt="transfer"></p>
<p>å›¾2æ˜¾ç¤ºäº†éšæ—¶é—´å˜åŒ–çš„è®¡ç®—è¿›åº¦ã€‚Yè½´æ˜¯è¾“å…¥æ•°æ®æ‰«æçš„é€Ÿç‡ã€‚è¿™ä¸ªé€Ÿç‡é€æ¸æå‡ä»£è¡¨æ›´å¤šçš„æœºå™¨è¢«åˆ†é…ç»™MapReduceè®¡ç®—ï¼Œå¹¶åœ¨åˆ†é…çš„æœºå™¨æ•°è¾¾åˆ°1764å°æ—¶è¶…è¿‡äº†30GB/sã€‚éšç€mapä»»åŠ¡çš„ç»“æŸï¼Œè¿™ä¸ªé€Ÿç‡å¼€å§‹ä¸‹é™ï¼Œå¹¶åœ¨è®¡ç®—å¼€å§‹å80sæ—¶é™è‡³0ã€‚æ•´ä¸ªè®¡ç®—è¿‡ç¨‹å…±èŠ±è´¹çº¦150sã€‚è¿™åŒ…æ‹¬äº†å¤§çº¦1åˆ†é’Ÿçš„å¯åŠ¨å¼€é”€ã€‚å¯åŠ¨å¼€é”€æ˜¯ç”±äºè¦æŠŠç¨‹åºä¼ æ’­åˆ°æ‰€æœ‰å·¥ä½œæœºå™¨ä¸Šï¼Œè¿˜åŒ…æ‹¬GFSè¦æ‰“å¼€1000ä¸ªè¾“å…¥æ–‡ä»¶å’Œè·å–å±€éƒ¨ä¼˜åŒ–æ‰€éœ€ä¿¡æ¯è€Œå¯¼è‡´çš„å»¶è¿Ÿã€‚</p>
<h4 id="5-3-æ’åº"><a class="header-anchor" href="#5-3-æ’åº">Â¶</a>5.3  æ’åº</h4>
<p>æ’åºç¨‹åºè¦å¯¹10100ä¸ª100å­—èŠ‚çš„è®°å½•è¿›è¡Œæ’åºï¼ˆå·®ä¸å¤š1TBæ•°æ®ï¼‰ã€‚è¿™ä¸ªç¨‹åºæ¨¡ä»¿äº†TeraSortæµ‹è¯•ç¨‹åºã€‚</p>
<p>æ’åºç¨‹åºåªåŒ…æ‹¬ä¸åˆ°50è¡Œçš„ç”¨æˆ·ä»£ç ã€‚mapå‡½æ•°ä¸€å…±3è¡Œï¼Œå®ƒä»ä¸€ä¸ªæ–‡æœ¬è¡Œä¸­æå–å‡º10å­—èŠ‚çš„æ’åºkeyï¼Œå†å°†keyå’ŒåŸå§‹æ–‡æœ¬è¡Œè¾“å‡ºä¸ºä¸­é—´key/valueå¯¹ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå†…ç½®çš„Identityå‡½æ•°ä½œä¸ºreduceå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä¼šå°†æœªæ›´æ”¹çš„ä¸­é—´key/valueè¾“å‡ºä¸ºç»“æœã€‚æœ€ç»ˆçš„æ’åºåè¾“å‡ºè¢«å‡ºåˆ°ä¸€ç»„2è·¯å¤åˆ¶çš„GFSæ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œè¿™ä¸ªç¨‹åºçš„è¾“å‡ºè¦å†™2TBçš„æ•°æ®ï¼‰ã€‚</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œè¾“å…¥æ•°æ®è¢«åˆ†æˆè‹¥å¹²ä¸ª64MBå¤§å°çš„éƒ¨åˆ†ï¼ˆM = 15000ï¼‰ã€‚æˆ‘ä»¬å°†å·²æ’åºçš„è¾“å‡ºåˆ†æˆ4000ä¸ªæ–‡ä»¶ï¼ˆR = 4000ï¼‰ã€‚åˆ’åˆ†å‡½æ•°ä½¿ç”¨keyçš„é¦–å­—èŠ‚æ¥å°†å®ƒåˆ†åˆ°Rä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªã€‚</p>
<p>æ­¤æ¬¡æµ‹è¯•ä¸­æˆ‘ä»¬çš„åˆ’åˆ†å‡½æ•°ä½¿ç”¨äº†keyåˆ†å¸ƒçš„å†…å»ºçŸ¥è¯†ã€‚åœ¨ä¸€ä¸ªä¸€èˆ¬çš„æ’åºç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¼šé¢„å…ˆåŠ ä¸€è½®MapReduceæ“ä½œï¼Œæ”¶é›†keyçš„æ ·æœ¬ï¼Œå¹¶ä½¿ç”¨keyæŠ½æ ·çš„åˆ†å¸ƒæ¥è®¡ç®—æœ€ç»ˆè¾“å‡ºæ–‡ä»¶çš„åˆ’åˆ†ç‚¹ã€‚</p>
<p><img src="/.io//rates.png" alt="rates"></p>
<p>å›¾3(a)æ˜¯æ’åºç¨‹åºçš„æ­£å¸¸æ‰§è¡Œè¿‡ç¨‹ã€‚ä¸Šè¾¹çš„å›¾æ˜¾ç¤ºäº†è¾“å…¥è¯»å–çš„é€Ÿåº¦ã€‚è¾“å…¥é€Ÿåº¦çš„å³°å€¼ä¸º13GB/sï¼Œå¹¶åœ¨200ç§’åæ‰€æœ‰çš„mapä»»åŠ¡éƒ½å®Œæˆæ—¶è¿…é€Ÿä¸‹é™è‡³0ã€‚å¯ä»¥æ³¨æ„åˆ°è¿™ä¸ªé€Ÿåº¦è¦æ¯”grepçš„é€Ÿåº¦å°ã€‚è¿™æ˜¯å› ä¸ºæ’åºçš„mapä»»åŠ¡è¦åœ¨å‘æœ¬åœ°ç£ç›˜å†™ä¸­é—´æ–‡ä»¶ä¸ŠèŠ±è´¹å¤§çº¦ä¸€åŠçš„æ—¶é—´å’ŒI/Oå¸¦å®½ã€‚è€Œgrepä¸­ç›¸åº”çš„ä¸­é—´è¾“å‡ºåˆ™å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p>
<p>ä¸­é—´çš„å›¾æ˜¾ç¤ºäº†æ•°æ®ä»mapèŠ‚ç‚¹é€šè¿‡ç½‘ç»œå‘reduceèŠ‚ç‚¹å‘é€çš„é€Ÿåº¦ã€‚è¿™ä¸ªç§»åŠ¨å¼€å§‹äºç¬¬ä¸€ä¸ªmapä»»åŠ¡å®Œæˆã€‚å›¾ä¸­çš„ç¬¬ä¸€ä¸ªé©¼å³°å‡ºç°åœ¨reduceä»»åŠ¡ç¬¬ä¸€æ¬¡è¾¾åˆ°1700ä¸ªæ—¶ï¼ˆæ•´ä¸ªMapReduceå…±åˆ†é…åˆ°1700å°æœºå™¨ï¼Œæ¯å°æœºå™¨åŒæ—¶æœ€å¤šåªè¿è¡Œä¸€ä¸ªreduceä»»åŠ¡ï¼‰ã€‚è®¡ç®—å¼€å§‹å·®ä¸å¤š300ç§’æ—¶ï¼Œç¬¬ä¸€æ‰¹reduceä»»åŠ¡å·²ç»æœ‰éƒ¨åˆ†å®Œæˆï¼Œæˆ‘ä»¬å¼€å§‹å‘å‰©ä½™çš„reduceä»»åŠ¡ä¼ é€æ•°æ®ã€‚æ‰€æœ‰ä¼ é€è¿‡ç¨‹åœ¨è®¡ç®—å¼€å§‹600ç§’åç»“æŸã€‚</p>
<p>ä¸‹é¢çš„å›¾æ˜¯reduceä»»åŠ¡å‘æœ€ç»ˆçš„è¾“å‡ºæ–‡ä»¶å†™å…¥å·²æ’åºæ•°æ®çš„é€Ÿåº¦ã€‚åœ¨ç¬¬ä¸€ä¸ªä¼ è¾“å‘¨æœŸçš„ç»“æŸä¸å†™å…¥å‘¨æœŸçš„å¼€å§‹ä¹‹é—´æœ‰ä¸€ä¸ªå»¶è¿Ÿï¼Œå› ä¸ºæ­¤æ—¶æœºå™¨æ­£åœ¨æ’åºä¸­é—´æ•°æ®ã€‚å†™å…¥é€Ÿåº¦åœ¨2-4GB/sä¸‹æŒç»­äº†ä¸€æ®µæ—¶é—´ã€‚æ‰€æœ‰çš„å†™æ“ä½œåœ¨è®¡ç®—å¼€å§‹å850ç§’å·¦å³ç»“æŸã€‚åŒ…æ‹¬å¯åŠ¨å¼€é”€çš„è¯ï¼Œæ•´ä¸ªè®¡ç®—èŠ±è´¹äº†891ç§’ã€‚è¿™ä¸TeraSortä¸Šç›®å‰å…¬å¸ƒçš„æœ€ä½³è®°å½•1057ç§’å¾ˆæ¥è¿‘ã€‚</p>
<p>ä¸€äº›è¦æ³¨æ„çš„äº‹ï¼šå› ä¸ºæˆ‘ä»¬çš„å±€éƒ¨æ€§ä¼˜åŒ–ï¼Œè¾“å…¥é€Ÿåº¦è¦æ¯”ä¼ æ’­é€Ÿåº¦å’Œè¾“å‡ºé€Ÿåº¦éƒ½å¿«â€”â€”å¤§å¤šæ•°æ•°æ®éƒ½è¯»è‡ªæœ¬åœ°ç£ç›˜ï¼Œç»•å¼€äº†æˆ‘ä»¬å¸¦å®½ç›¸å½“æœ‰é™çš„ç½‘ç»œã€‚ä¼ æ’­é€Ÿåº¦è¦æ¯”è¾“å‡ºé€Ÿåº¦é«˜ï¼Œå› ä¸ºè¾“å‡ºé˜¶æ®µè¦å†™ä¸¤ä»½å·²æ’åºçš„æ•°æ®ï¼ˆå› ä¸ºå¯é æ€§å’Œå®ç”¨æ€§çš„è€ƒè™‘ï¼‰ã€‚æˆ‘ä»¬å†™ä¸¤ä»½è¾“å‡ºæ˜¯å› ä¸ºè¿™æ˜¯æˆ‘ä»¬çš„åº•å±‚æ–‡ä»¶ç³»ç»Ÿé’ˆå¯¹å¯é æ€§å’Œå®ç”¨æ€§æä¾›çš„æœºåˆ¶ã€‚å¦‚æœåº•å±‚æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æ“¦é™¤ä»£ç è€Œä¸æ˜¯å¤åˆ¶ï¼Œé‚£ä¹ˆå†™æ•°æ®éœ€è¦çš„ç½‘ç»œå¸¦å®½å°±ä¼šå‡å°‘ã€‚</p>
<h4 id="5-4-å¤‡ç”¨ä»»åŠ¡çš„å½±å“"><a class="header-anchor" href="#5-4-å¤‡ç”¨ä»»åŠ¡çš„å½±å“">Â¶</a>5.4  å¤‡ç”¨ä»»åŠ¡çš„å½±å“</h4>
<p>åœ¨å›¾3(b)ä¸­æ˜¾ç¤ºçš„æ˜¯ç¦ç”¨äº†å¤‡ç”¨ä»»åŠ¡æƒ…å†µä¸‹æ’åºç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚è¿™ç§æƒ…å†µä¸‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸å›¾3(a)ä¸­çš„å¾ˆç›¸ä¼¼ï¼Œä½†åœ¨æœ«å°¾å¤„æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´å‡ ä¹æ²¡æœ‰ä»»ä½•çš„å†™æ“ä½œå‘ç”Ÿã€‚åœ¨960ç§’åï¼Œåªæœ‰5ä¸ªreduceä»»åŠ¡è¿˜æ²¡æœ‰å®Œæˆã€‚ä½†è¿™æœ€åçš„å‡ ä¸ªä»»åŠ¡ç›´åˆ°300ç§’åæ‰ç»“æŸã€‚æ•´ä¸ªè®¡ç®—èŠ±è´¹äº†1283ç§’ï¼Œæ¯”æ­£å¸¸æƒ…å†µå¤šèŠ±è´¹44%çš„æ—¶é—´ã€‚</p>
<h4 id="5-5-æœºå™¨å¤±è´¥"><a class="header-anchor" href="#5-5-æœºå™¨å¤±è´¥">Â¶</a>5.5  æœºå™¨å¤±è´¥</h4>
<p>åœ¨å›¾3Â©ä¸­æ˜¾ç¤ºäº†æœ‰æœºå™¨å¤±è´¥æƒ…å†µä¸‹çš„æ’åºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨è®¡ç®—å¼€å§‹å‡ åˆ†é’Ÿåï¼Œæˆ‘ä»¬æœ‰æ„çš„æ€æ‰äº†1746ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸­çš„200ä¸ªã€‚åº•å±‚é›†ç¾¤è°ƒåº¦å™¨ç«‹å³åœ¨è¿™äº›æœºå™¨ä¸Šé‡å¯äº†æ–°çš„å·¥ä½œè¿›ç¨‹ï¼ˆåªæœ‰è¿›ç¨‹è¢«æ€æ‰äº†ï¼Œæœºå™¨è¿˜åœ¨æ­£å¸¸è¿è¡Œä¸­ï¼‰ã€‚</p>
<p>å·¥ä½œèŠ‚ç‚¹çš„æ­»äº¡æ˜¾ç¤ºä¸ºä¸€ä¸ªè´Ÿçš„è¾“å…¥é€Ÿåº¦ï¼Œå› ä¸ºä¸€äº›å·²ç»å®Œæˆçš„mapä»»åŠ¡æ¶ˆå¤±äº†ï¼ˆå› ä¸ºå¯¹åº”çš„mapèŠ‚ç‚¹è¢«æ€æ‰äº†ï¼‰éœ€è¦é‡æ–°å®Œæˆã€‚è¿™äº›mapä»»åŠ¡çš„é‡æ‰§è¡Œå¾ˆå¿«å°±ä¼šå‘ç”Ÿã€‚æ•´ä¸ªè®¡ç®—è¿‡ç¨‹åœ¨933ç§’åç»“æœï¼ŒåŒ…æ‹¬äº†å¯åŠ¨å¼€é”€ï¼ˆç›¸æ¯”æ­£å¸¸æ‰§è¡Œæ—¶é—´åªå¢åŠ äº†5%ï¼‰ã€‚</p>
<h3 id="6-ç»éªŒ"><a class="header-anchor" href="#6-ç»éªŒ">Â¶</a>6 ç»éªŒ</h3>
<p>æˆ‘ä»¬åœ¨2003å¹´2æœˆå†™å‡ºäº†MapReduceåº“çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¹¶åœ¨2003å¹´8æœˆè¿›è¡Œäº†éå¸¸å¤§çš„æ”¹è¿›ï¼ŒåŒ…æ‹¬äº†å±€éƒ¨æ€§ä¼˜åŒ–ã€å„å·¥ä½œæœºå™¨ä¸Šä»»åŠ¡æ‰§è¡Œçš„åŠ¨æ€è´Ÿè½½å¹³è¡¡ç­‰ã€‚ä»é‚£æ—¶å¼€å§‹ï¼Œæˆ‘ä»¬æ„‰å¿«åœ°æƒŠè®¶äºMapReduceè¢«å¦‚æ­¤å¹¿æ³›åœ°åº”ç”¨åœ¨æˆ‘ä»¬å·¥ä½œä¸­é‡åˆ°é—®é¢˜ä¸Šã€‚å®ƒå·²è¢«ç”¨äºGoogleçš„å¾ˆå¤šé¢†åŸŸä¸­ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å¤§è§„æ¨¡æœºå™¨å­¦ä¹ é—®é¢˜ï¼›</p>
</li>
<li>
<p>é’ˆå¯¹Google Newså’ŒFroogleäº§å“çš„é›†ç¾¤é—®é¢˜ï¼›</p>
</li>
<li>
<p>ç”¨äºäº§ç”Ÿæµè¡Œéœ€æ±‚æŠ¥å‘Šçš„æ•°æ®æå–ï¼ˆä¾‹å¦‚Google Zeitgeistï¼‰ï¼›</p>
</li>
<li>
<p>é’ˆå¯¹æ–°çš„å°è¯•å’Œäº§å“çš„ç½‘é¡µå±æ€§æå–ï¼ˆä¾‹å¦‚ï¼Œä»å¤§é‡çš„å®šä½æœç´¢ä¸­æå–å‡ºåœ°ç†ä½ç½®ä¿¡æ¯ï¼‰ï¼›</p>
</li>
<li>
<p>å¤§è§„æ¨¡çš„å›¾è®¡ç®—ã€‚</p>
</li>
</ul>
<p><img src="/.io//instances.png" alt="instances"></p>
<p>å›¾4æ˜¾ç¤ºäº†åœ¨æˆ‘ä»¬çš„æºä»£ç ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œäº†ç™»è®°çš„MapReduceç¨‹åºçš„æ•°é‡éšæ—¶é—´çš„æ˜¾è‘—å¢é•¿ï¼Œä»2003å¹´åˆçš„0åˆ°2004å¹´9æœˆåº•çš„æ¥è¿‘900ä¸ªä¸åŒç‰ˆæœ¬ã€‚MapReduceå–å¾—å¦‚æ­¤æˆåŠŸçš„åŸå› æ˜¯å®ƒä»¤èŠ±åŠå°æ—¶æ—¶é—´å†™å‡ºä¸€ä¸ªç®€å•çš„ç¨‹åºå¹¶è¿è¡Œåœ¨ä¸€åƒå°æœºå™¨ä¸Šæˆä¸ºäº†å¯èƒ½ï¼Œè¿™æå¤§åœ°åŠ é€Ÿäº†å¼€å‘å’ŒåŸå‹å®ç°å¾ªç¯ã€‚è¿›ä¸€æ­¥è¯´ï¼Œå®ƒå…è®¸æ²¡æœ‰åˆ†å¸ƒå¼ä¸å¹¶è¡Œç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿèƒ½è½»æ¾åœ°åˆ©ç”¨å¤§é‡çš„èµ„æºã€‚</p>
<p><img src="/.io//jobs.png" alt="jobs"></p>
<p>åœ¨æ¯é¡¹ä½œä¸šçš„ç»“å°¾ï¼ŒMapReduceåº“ä¼šå°†ä½œä¸šèŠ±è´¹çš„è®¡ç®—èµ„æºç»Ÿè®¡å†™å…¥æ—¥å¿—ã€‚åœ¨è¡¨1ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°Googleåœ¨2004å¹´8æœˆè¿è¡Œçš„MapReduceä½œä¸šçš„ä¸€éƒ¨åˆ†ç»Ÿè®¡æƒ…å†µã€‚</p>
<h4 id="6-1-å¤§è§„æ¨¡ç´¢å¼•"><a class="header-anchor" href="#6-1-å¤§è§„æ¨¡ç´¢å¼•">Â¶</a>6.1  å¤§è§„æ¨¡ç´¢å¼•</h4>
<p>è¿„ä»Šä¸ºæ­¢æˆ‘ä»¬çš„ä¸€ä¸ªæœ€é‡è¦çš„MapReduceåº”ç”¨æ˜¯å®Œå…¨é‡å†™äº†ç”Ÿäº§ç´¢å¼•ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£äº§ç”Ÿç”¨äºGoogleç½‘ç»œæœç´¢æœåŠ¡çš„æ•°æ®ç»“æ„ã€‚ç´¢å¼•ç³»ç»ŸæŠŠç”±æˆ‘ä»¬çš„çˆ¬å–ç³»ç»Ÿæ£€ç´¢çš„ä¸€ä¸ªå¤§çš„æ–‡æ¡£é›†åˆä½œä¸ºè¾“å…¥ï¼Œå¹¶å­˜å‚¨ä¸ºä¸€ç»„GFSæ–‡ä»¶ã€‚è¿™äº›æ–‡æ¡£çš„åŸå§‹æ–‡æœ¬æ•°æ®è¶…è¿‡äº†20TBã€‚ç´¢å¼•è¿›ç¨‹åˆ†æˆäº†5-10ä¸ªMapReduceæ“ä½œè¿è¡Œã€‚ä½¿ç”¨MapReduceï¼ˆè€Œä¸æ˜¯ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨çš„ad-hocåˆ†å¸ƒç³»ç»Ÿï¼‰æä¾›äº†è®¸å¤šå¥½å¤„ï¼š</p>
<ul>
<li>
<p>ç´¢å¼•ä»£ç æ›´ç®€å•ï¼Œæ›´å°ï¼Œä¹Ÿæ›´æ˜“æ‡‚ï¼Œå› ä¸ºå¤„ç†å®¹é”™æ€§å’Œåˆ†å¸ƒä¸å¹¶è¡Œçš„ä»£ç éƒ½è¢«éšè—åœ¨MapReduceåº“ä¸­äº†ã€‚ä¾‹å¦‚ï¼Œå…¶ä¸­ä¸€ä¸ªé˜¶æ®µçš„è®¡ç®—åœ¨ä½¿ç”¨äº†MapReduceåä»å·®ä¸å¤š3800è¡ŒC++ä»£ç é™åˆ°äº†700è¡Œä»£ç ã€‚</p>
</li>
<li>
<p>MapReduceåº“çš„æ€§èƒ½è¶³å¤Ÿå¥½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»¤æ¦‚å¿µä¸Šæ— å…³çš„è®¡ç®—è¿‡ç¨‹ç›¸äº’åˆ†ç¦»ï¼Œè€Œä¸éœ€è¦ä¸ºäº†é¿å…é¢å¤–çš„æ•°æ®å¤„ç†è€Œå°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ã€‚è¿™å‡å°äº†ä¿®æ”¹ç´¢å¼•è¿›ç¨‹çš„éš¾åº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æ—§ç´¢å¼•ç³»ç»Ÿä¸­è¿›è¡Œä¸€ä¸ªä¿®æ”¹è¦èŠ±è´¹å‡ ä¸ªæœˆæ—¶é—´ï¼Œè€Œåœ¨æ–°ç³»ç»Ÿä¸­åªéœ€è¦å‡ å¤©æ—¶é—´ã€‚</p>
</li>
<li>
<p>ç´¢å¼•è¿›ç¨‹æ›´å®¹æ˜“å»æ“ä½œï¼Œå› ä¸ºå¤§å¤šæ•°ç”±æœºå™¨å¤±è´¥ã€éƒ¨åˆ†æœºå™¨ç¼“æ…¢å’Œç½‘ç»œæš‚æ—¶ä¸­æ–­å¼•èµ·çš„é—®é¢˜éƒ½ç”±MapReduceåº“è‡ªåŠ¨å¤„ç†äº†ï¼Œä¸éœ€è¦æ“ä½œè€…å¹²é¢„ã€‚æ­¤å¤–ï¼Œé€šè¿‡å‘é›†ç¾¤ä¸­å¢åŠ æœºå™¨ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å¢å¼ºç´¢å¼•è¿›ç¨‹çš„æ€§èƒ½ã€‚</p>
</li>
</ul>
<h3 id="7-ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#7-ç›¸å…³å·¥ä½œ">Â¶</a>7 ç›¸å…³å·¥ä½œ</h3>
<p>è®¸å¤šç³»ç»Ÿéƒ½æä¾›äº†çº¦æŸå¥½çš„ç¨‹åºæ¨¡å‹ï¼Œå¹¶åˆ©ç”¨è¿™äº›çº¦æŸè‡ªåŠ¨çš„è¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç»„åˆå‡½æ•°å¯ä»¥åœ¨Nä¸ªå¤„ç†å™¨ä¸Šä½¿ç”¨å¹¶è¡Œå‰ç¼€è®¡ç®—ç”¨log Nçš„æ—¶é—´è®¡ç®—å‡ºåŒ…å«Nä¸ªå…ƒç´ çš„æ•°ç»„çš„æ‰€æœ‰å‰ç¼€ã€‚MapReduceå¯ä»¥è¢«è®¤ä¸ºæ˜¯åŸºäºæ¥è‡ªæˆ‘ä»¬åœ¨çœŸå®ä¸–ç•Œä¸­çš„å¤§å‹è®¡ç®—çš„ç»éªŒï¼Œå¯¹è¿™äº›æ¨¡å‹çš„ç®€å•åŒ–å’Œæç‚¼ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬æä¾›äº†å¯ä»¥æ‰©å±•åˆ°ä¸Šåƒä¸ªå¤„ç†å™¨ä¸Šä½¿ç”¨çš„å®¹é”™æœºåˆ¶ã€‚ä½œä¸ºå¯¹æ¯”ï¼Œå¤§å¤šæ•°å¹¶è¡Œå¤„ç†ç³»ç»Ÿåªèƒ½åœ¨å°è§„æ¨¡ä¸‹å®ç°ï¼Œå¹¶å°†å¤„ç†æœºå™¨é”™è¯¯çš„ç»†èŠ‚ç•™ç»™ç¨‹åºå‘˜å»å®Œæˆã€‚</p>
<p>Bulk Synchronous Programmingå’Œä¸€äº›MPIåŸè¯­æä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ï¼Œæ›´å®¹æ˜“å†™å‡ºå¹¶è¡Œç¨‹åºã€‚è¿™äº›ç³»ç»Ÿå’ŒMapReduceçš„ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯MapReduceåˆ©ç”¨äº†ä¸€ä¸ªå—çº¦æŸçš„ç¨‹åºæ¨¡å‹å»è‡ªåŠ¨å¹¶è¡ŒåŒ–ç”¨æˆ·ç¨‹åºï¼Œå¹¶æä¾›é€æ˜çš„å®¹é”™æœºåˆ¶ã€‚</p>
<p>æˆ‘ä»¬çš„å±€éƒ¨æ€§ä¼˜åŒ–å—åˆ°äº†è¯¸å¦‚æ´»åŠ¨ç£ç›˜ç­‰æŠ€æœ¯çš„å¯å‘ï¼Œå³å°†è®¡ç®—æ¨ç»™é è¿‘æœ¬åœ°ç£ç›˜çš„å¤„ç†å•å…ƒï¼Œæ¥å‡å°‘è¦è·¨è¿‡I/Oå­ç³»ç»Ÿæˆ–ç½‘ç»œå‘é€çš„æ•°æ®æ€»é‡ã€‚æˆ‘ä»¬ç”¨è¿è¡Œåœ¨ç›´æ¥è¿æ¥äº†å°‘é‡ç£ç›˜çš„å•†ç”¨å¤„ç†å™¨ä¸Šæ›¿ä»£äº†ç›´æ¥è¿è¡Œåœ¨ç£ç›˜æ§åˆ¶å¤„ç†å™¨ä¸Šï¼Œä½†é€šç”¨çš„æ–¹æ³•æ˜¯ç›¸ä¼¼çš„ã€‚</p>
<p>æˆ‘ä»¬çš„å¤‡ç”¨ä»»åŠ¡æœºåˆ¶ä¸Charlotteç³»ç»Ÿä¸Šçš„eagerè°ƒåº¦æœºåˆ¶ç±»ä¼¼ã€‚ç®€å•çš„eagerè°ƒåº¦ç³»ç»Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœæŸä¸ªä»»åŠ¡å¯¼è‡´äº†å¤šæ¬¡å¤±è´¥ï¼Œæ•´ä¸ªè®¡ç®—éƒ½ä¼šå¤±è´¥ã€‚æˆ‘ä»¬é€šè¿‡è‡ªå·±çš„ç•¥è¿‡åè®°å½•çš„æœºåˆ¶è§£å†³äº†ä¸€äº›è¿™ç±»é—®é¢˜ã€‚</p>
<p>MapReduceçš„å®ç°ä¾èµ–äºä¸€ä¸ªå†…éƒ¨çš„é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£åœ¨ä¸€ç»„æ•°é‡å¾ˆå¤šçš„å…±äº«æœºå™¨ä¸Šåˆ†å¸ƒè¿è¡Œç”¨æˆ·ä»»åŠ¡ã€‚å°½ç®¡ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œè¿™ä¸ªé›†ç¾¤ç®¡ç†ç³»ç»Ÿä¸Condorç­‰å…¶å®ƒç³»ç»Ÿåœ¨åŸç†ä¸Šæ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>æ’åºæœºåˆ¶ä½œä¸ºMapReduceåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸NOW-Sortæ“ä½œæ˜¯ç±»ä¼¼çš„ã€‚æºæœºå™¨ï¼ˆmapèŠ‚ç‚¹ï¼‰åˆ‡åˆ†å¾…æ’åºçš„æ•°æ®å¹¶å°†å…¶å‘é€ç»™Rä¸ªreduceèŠ‚ç‚¹ã€‚æ¯ä¸ªreduceèŠ‚ç‚¹åœ¨æœ¬åœ°æ’åºå®ƒçš„æ•°æ®ï¼ˆå°½é‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼‰ã€‚å½“ç„¶NOW-Sortæ²¡æœ‰ç”¨æˆ·å®šä¹‰çš„mapå’Œreduceå‡½æ•°ï¼Œè¿™äº›ä½¿æˆ‘ä»¬çš„åº“è¢«å¹¿æ³›åº”ç”¨ã€‚</p>
<p>Riveræä¾›äº†ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹ï¼Œé€šè¿‡åœ¨åˆ†å¸ƒå¼é˜Ÿåˆ—ä¸Šå‘é€æ•°æ®æ¥å¤„ç†é€šä¿¡ã€‚ç±»ä¼¼äºMapReduceï¼ŒRiverç³»ç»Ÿè¯•å›¾æä¾›æä¾›å¥½çš„å¹³å‡æƒ…å†µæ€§èƒ½ï¼Œå³ä½¿å­˜åœ¨å› ä¸ç»Ÿä¸€çš„ç¡¬ä»¶æˆ–ç³»ç»Ÿæ‰°åŠ¨è€Œå¯¼è‡´çš„ä¸ä¸€è‡´æ€§ã€‚Riveré€šè¿‡å°å¿ƒçš„è°ƒåº¦ç£ç›˜å’Œç½‘ç»œä¼ è¾“æ¥å®ç°å¹³è¡¡çš„å®Œæˆæ—¶é—´ï¼Œä»è€Œè¾¾åˆ°è¿™ä¸€ç›®æ ‡ã€‚MapReduceä½¿ç”¨äº†ä¸åŒçš„æ–¹æ³•ã€‚é€šè¿‡çº¦æŸç¼–ç¨‹æ¨¡å‹ï¼ŒMapReduceæ¡†æ¶èƒ½å¤Ÿå°†é—®é¢˜åˆ’åˆ†æˆå¤§é‡ç»†ç²’åº¦çš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡è¢«åŠ¨æ€è°ƒåº¦ç»™å¯ç”¨çš„å·¥ä½œèŠ‚ç‚¹ï¼Œå› æ­¤æ›´å¿«çš„èŠ‚ç‚¹ä¼šå¤„ç†æ›´å¤šçš„ä»»åŠ¡ã€‚è¿™ä¸ªçº¦æŸçš„ç¼–ç¨‹æ¨¡å‹åŒæ ·å…è®¸æˆ‘ä»¬åœ¨ä¸´è¿‘ä½œä¸šç»“æŸæ—¶å°†å‰©ä½™çš„ä»»åŠ¡é‡å¤è°ƒåº¦æ‰§è¡Œï¼Œè¿™æ˜¾è‘—çš„å‡å°‘äº†å­˜åœ¨ä¸ä¸€è‡´æ—¶ï¼ˆä¾‹å¦‚æœ‰ç¼“å†²æˆ–åœé¡¿çš„æœºå™¨ï¼‰çš„å®Œæˆæ—¶é—´ã€‚</p>
<p>BAD-FSæœ‰ç€ä¸MapReduceéå¸¸ä¸åŒçš„ç¼–ç¨‹æ¨¡å‹ï¼Œè€Œä¸”ä¸åƒMapReduceï¼Œå®ƒé¢å‘è·¨è¶Šå¹¿åŸŸç½‘çš„ä½œä¸šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå®ƒä¸MapReduceæœ‰ç€ä¸¤ä¸ªæœ¬è´¨ä¸Šçš„ç›¸åŒç‚¹ï¼š</p>
<p>ä¸¤ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨äº†å¤‡ç”¨æ‰§è¡Œæ¥æ¢å¤å› é”™è¯¯è€Œå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ã€‚</p>
<p>ä¸¤ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨äº†å±€éƒ¨æ„ŸçŸ¥è°ƒåº¦æ¥å‡å°‘åœ¨æ‹¥å µçš„ç½‘ç»œè¿æ¥ä¸Šå‘é€çš„æ•°æ®é‡ã€‚</p>
<p>TACCè¢«è®¾è®¡ä¸ºä¸€ä¸ªé«˜åº¦å¯ç”¨çš„ç½‘ç»œæœåŠ¡çš„ç®€åŒ–ç»“æ„ç³»ç»Ÿã€‚ç±»ä¼¼äºMapReduceï¼Œå®ƒä¾èµ–äºé‡æ‰§è¡Œæœºåˆ¶æ¥å®ç°å®¹é”™æ€§ã€‚</p>
<h3 id="8-ç»“è®º"><a class="header-anchor" href="#8-ç»“è®º">Â¶</a>8 ç»“è®º</h3>
<p>MapReduceç¼–ç¨‹æ¨¡å‹å·²ç»æˆåŠŸçš„ç”¨äºGoogleçš„è®¸å¤šä¸åŒçš„ç”¨é€”ä¸­ã€‚æˆ‘ä»¬å°†å®ƒçš„æˆåŠŸå½’åŠŸäºå‡ ä¸ªåŸå› ã€‚é¦–å…ˆï¼Œè¯¥æ¨¡å‹å³ä½¿æ˜¯å¯¹äºæ²¡æœ‰å¹¶è¡Œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿæ˜¯å¾ˆæ˜“äºä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒéšè—äº†å¹¶è¡ŒåŒ–ã€å®¹é”™æœºåˆ¶ã€å±€éƒ¨æ€§ä¼˜åŒ–ã€ä»¥åŠè´Ÿè½½å¹³è¡¡çš„ç»†èŠ‚ã€‚å…¶æ¬¡ï¼Œå¾ˆå¤šç§ç±»çš„é—®é¢˜éƒ½å¾ˆå®¹æ˜“è¡¨ç¤ºæˆMapReduceè®¡ç®—ã€‚ä¾‹å¦‚ï¼ŒMapReduceè¢«ç”¨äºä¸ºGoogleçš„ç½‘ç»œæœç´¢æœåŠ¡çš„æ•°æ®äº§ç”Ÿã€æ’åºã€æ•°æ®æŒ–æ˜ã€æœºå™¨å­¦ä¹ ã€ä»¥åŠè®¸å¤šå…¶å®ƒç³»ç»Ÿã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬å·²ç»å¼€å‘äº†ä¸€ä¸ªMapReduceçš„å®ç°ï¼Œå¯ä»¥æ‰©å±•åˆ°åŒ…å«ä¸Šåƒå°æœºå™¨çš„å¤§å‹é›†ç¾¤ã€‚è¯¥å®ç°å¯ä»¥é«˜æ•ˆä½¿ç”¨è¿™äº›æœºå™¨çš„èµ„æºï¼Œå› æ­¤é€‚åˆäºGoogleé‡åˆ°çš„å¾ˆå¤šå¤§å‹è®¡ç®—é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬ä»è¿™é¡¹å·¥ä½œä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆï¼Œçº¦æŸè¿™ä¸ªç¼–ç¨‹æ¨¡å‹ä»¤å¹¶è¡Œå’Œåˆ†å¸ƒå¼è®¡ç®—ï¼Œä»¥åŠä»¤è¿™äº›è®¡ç®—å¯å®¹é”™ï¼Œå˜å¾—ç®€å•äº†ã€‚å…¶æ¬¡ï¼Œç½‘ç»œå¸¦å®½æ˜¯ä¸€ç§ç¨€ç¼ºèµ„æºã€‚æˆ‘ä»¬ç³»ç»Ÿä¸­çš„å¾ˆå¤šä¼˜åŒ–éƒ½å› æ­¤é’ˆå¯¹å‡å°‘é€šè¿‡ç½‘ç»œå‘é€çš„æ•°æ®æ€»é‡ï¼šå±€éƒ¨æ€§ä¼˜åŒ–å…è®¸æˆ‘ä»¬ä»æœ¬åœ°ç£ç›˜è¯»ï¼ŒåŒæ—¶å°†ä¸­é—´æ–‡ä»¶å†™å…¥æœ¬åœ°ç£ç›˜ä¹ŸèŠ‚çœäº†ç½‘ç»œå¸¦å®½ã€‚ç¬¬ä¸‰ï¼Œå¤‡ç”¨æ‰§è¡Œå¯ä»¥ç”¨äºå‡å°ç¼“æ…¢çš„æœºå™¨çš„å½±å“ï¼ŒåŠåº”å¯¹æœºå™¨å¤±è´¥å’Œæ•°æ®ä¸¢å¤±ã€‚</p>
<h3 id="é™„å½•A-è¯é¢‘ç»Ÿè®¡æºä»£ç "><a class="header-anchor" href="#é™„å½•A-è¯é¢‘ç»Ÿè®¡æºä»£ç ">Â¶</a>é™„å½•A è¯é¢‘ç»Ÿè®¡æºä»£ç </h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mapreduce/mapreduce.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// User's map fuction</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordCounter</span>:</span> <span class="keyword">public</span> Mapper &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Map</span><span class="params">(<span class="keyword">const</span> MapInput &amp;input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> &amp;<span class="built_in">text</span> = input.value();</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = <span class="built_in">text</span>.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ) &#123;</span><br><span class="line">            <span class="comment">// Skip past leading whitespace</span></span><br><span class="line">            <span class="keyword">while</span> ((i &lt; n) &amp;&amp; <span class="built_in">isspace</span>(<span class="built_in">text</span>[i]))</span><br><span class="line">                ++i;</span><br><span class="line">             </span><br><span class="line">            <span class="comment">// Find word end</span></span><br><span class="line">            <span class="keyword">int</span> start = i;</span><br><span class="line">            <span class="keyword">while</span> ((i &lt; n) &amp;&amp; !<span class="built_in">isspace</span>(<span class="built_in">text</span>[i]))</span><br><span class="line">                ++i;</span><br><span class="line">                 </span><br><span class="line">            <span class="keyword">if</span> (start &lt; i)</span><br><span class="line">                Emit(<span class="built_in">text</span>.substr(start, i-start), <span class="string">"1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">REGISTER_MAPPER(WordCounter);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// User's reduce function</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adder</span>:</span> <span class="keyword">public</span> Reducer &#123;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Reduce</span><span class="params">(ReduceInput *input)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Iterate over all entries with the</span></span><br><span class="line">        <span class="comment">// same key and add the values</span></span><br><span class="line">        <span class="keyword">int64_t</span> value = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!input-&gt;done()) &#123;</span><br><span class="line">            value += StringToInt(input-&gt;value());</span><br><span class="line">            input-&gt;NextValue();</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// Emit sum for input-&gt;key()</span></span><br><span class="line">        Emit(IntToString(value));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">REGISTER_REDUCER(Adder);</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    ParseCommandLineFlags(argc, argv);</span><br><span class="line">     </span><br><span class="line">    MapReduceSpecification spec;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Store list of input files into "spec"</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; argc; ++i) &#123;</span><br><span class="line">        MapReduceInput *input = spec.add_input();</span><br><span class="line">        input-&gt;set_format(<span class="string">"text"</span>);</span><br><span class="line">        input-&gt;set_filepattern(argv[i]);</span><br><span class="line">        input-&gt;set_mapper_class(<span class="string">"WordCounter"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Specify the output files:</span></span><br><span class="line">    <span class="comment">//    /gfs/test/freq-00000-of-00100</span></span><br><span class="line">    <span class="comment">//    /gfs/test/freq-00001-of-00100</span></span><br><span class="line">    <span class="comment">//    ...</span></span><br><span class="line">    MapReduceOutput *out = spec.output();</span><br><span class="line">    out-&gt;set_filebase(<span class="string">"/gfs/test/freq"</span>);</span><br><span class="line">    out-&gt;set_num_tasks(<span class="number">100</span>);</span><br><span class="line">    out-&gt;set_format(<span class="string">"text"</span>);</span><br><span class="line">    out-&gt;set_reducer_class(<span class="string">"Adder"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Optional: do partial sums within map</span></span><br><span class="line">    <span class="comment">// tasks to save network bandwidth</span></span><br><span class="line">    out-&gt;set_combine_class(<span class="string">"Adder"</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Tuning parameters: use at most 2000</span></span><br><span class="line">    <span class="comment">// machines and 100MB of memory per task</span></span><br><span class="line">    spec.set_machines(<span class="number">2000</span>);</span><br><span class="line">    spec.set_map_megabytes(<span class="number">100</span>);</span><br><span class="line">    spec.set_reduce_megabytes(<span class="number">100</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// Now run it</span></span><br><span class="line">    MapReduceResult result;</span><br><span class="line">    <span class="keyword">if</span> (!MapReduce(spec, &amp;result))</span><br><span class="line">        <span class="built_in">abort</span>();</span><br><span class="line">         </span><br><span class="line">    <span class="comment">// Done: 'result' structure contains info</span></span><br><span class="line">    <span class="comment">// about counters, time taken, number of</span></span><br><span class="line">    <span class="comment">// machines used, etc.</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaåå°„</title>
    <url>/2020/03/04/Java%E5%8F%8D%E5%B0%84/</url>
    <content><![CDATA[<p>åå°„reflectionæ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡ŒæœŸå¯ä»¥æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">String <span class="title">getFullName</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    Person p = (Person) obj;</span><br><span class="line">    <span class="keyword">return</span> p.getFirstName() + <span class="string">" "</span> + p.getLastName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¼ºåˆ¶è½¬å‹ä»ç„¶éœ€è¦å¼•ç”¨personç±»ï¼Œå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</p>
<h1>Classç±»</h1>
<p>class(åŒ…æ‹¬interface)çš„æœ¬è´¨æ˜¯typeï¼Œæ˜¯ç”±JVMåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åŠ è½½çš„ã€‚ç¬¬ä¸€æ¬¡è¯»å–åˆ°classç±»ï¼Œåˆ™åŠ è½½è¿›å†…å­˜ã€‚æ¯åŠ è½½ä¸€ç§classï¼ŒJVMåˆ™ä¸ºå…¶åˆ›å»ºä¸€ä¸ªClassç±»å‹çš„å®ä¾‹å¹¶å…³è”èµ·æ¥ã€‚egï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//classç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Class</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Class</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//æ„é€ æ–¹æ³•æ˜¯privateï¼Œåªæœ‰JVMèƒ½åˆ›å»º</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŠ è½½Stringç±»æ—¶å…³è”</span></span><br><span class="line">Class cls = <span class="keyword">new</span> Class(String)</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªClasså®ä¾‹åŒ…å«äº†è¯¥classçš„æ‰€æœ‰å®Œæ•´ä¿¡æ¯ï¼šname, packageâ€¦<br>
æ‰€ä»¥è·å–äº†æŸä¸ªClasså®ä¾‹ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªå®ä¾‹è·å–åˆ°è¯¥å®ä¾‹å¯¹åº”çš„classçš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºåå°„(Reflection)ã€‚<br>
æ–¹æ³•ç”±ä¸‰ä¸ªï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ–¹æ³•ä¸€ï¼šé€šè¿‡classçš„é™æ€å˜é‡è·å–</span></span><br><span class="line">Class cls = String<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"><span class="comment">//æ–¹æ³•äºŒï¼šé€šè¿‡å®ä¾‹å˜é‡çš„getClass()</span></span><br><span class="line">String s = <span class="string">"Hello"</span>;</span><br><span class="line">Class cls = s.getClass();</span><br><span class="line"><span class="comment">//æ–¹æ³•ä¸‰ï¼šçŸ¥é“classçš„å®Œæ•´ç±»åï¼Œé€šè¿‡é™æ€æ–¹æ³•Class.forName()</span></span><br><span class="line">Class cls = Class.forName(<span class="string">"java.lang.String"</span>);</span><br></pre></td></tr></table></figure>
<h5 id="åˆ¤æ–­ç±»å‹"><a class="header-anchor" href="#åˆ¤æ–­ç±»å‹">Â¶</a>åˆ¤æ–­ç±»å‹</h5>
<p>instanceofå¯ä»¥åŒ¹é…æŒ‡å®šç±»å‹çš„å­ç±»ï¼Œ==æ˜¯ç²¾ç¡®åˆ¤æ–­æ˜¯ä¸æ˜¯æŸä¸€ä¸ªç±»ã€‚<br>
JVMä¸ºåŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿåˆ›å»ºäº†Classï¼Œint.classæ¥è®¿é—®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer n = <span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b1 = n <span class="keyword">instanceof</span> Integer; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Integerç±»å‹</span></span><br><span class="line"><span class="keyword">boolean</span> b2 = n <span class="keyword">instanceof</span> Number; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Numberç±»å‹çš„å­ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> b3 = n.getClass() == Integer<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// trueï¼Œå› ä¸ºn.getClass()è¿”å›Integer.class</span></span><br><span class="line"><span class="keyword">boolean</span> b4 = n.getClass() == Number<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// falseï¼Œå› ä¸ºInteger.class!=Number.class</span></span><br></pre></td></tr></table></figure>
<h5 id="æ‰“å°ä¿¡æ¯"><a class="header-anchor" href="#æ‰“å°ä¿¡æ¯">Â¶</a>æ‰“å°ä¿¡æ¯</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">"Class name: "</span> + cls.getName());</span><br><span class="line">System.out.println(<span class="string">"Simple name: "</span> + cls.getSimpleName());</span><br><span class="line"><span class="keyword">if</span> (cls.getPackage() != <span class="keyword">null</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">"Package name: "</span> + cls.getPackage().getName());</span><br><span class="line">    &#125;</span><br><span class="line">System.out.println(<span class="string">"is interface: "</span> + cls.isInterface());</span><br><span class="line">System.out.println(<span class="string">"is enum: "</span> + cls.isEnum());</span><br><span class="line">System.out.println(<span class="string">"is array: "</span> + cls.isArray());</span><br><span class="line">System.out.println(<span class="string">"is primitive: "</span> + cls.isPrimitive());</span><br></pre></td></tr></table></figure>
<h2 id="åŠ¨æ€åŠ è½½"><a class="header-anchor" href="#åŠ¨æ€åŠ è½½">Â¶</a>åŠ¨æ€åŠ è½½</h2>
<p>newåˆ›å»ºå¯¹è±¡çš„æ–¹å¼ç§°ä½œä¸ºé™æ€åŠ è½½ï¼Œè€Œä½¿ç”¨Class.forName(â€œXXXâ€)ç§°ä½œä¸ºåŠ¨æ€åŠ è½½ï¼Œå®ƒä»¬ä¿©æœ¬è´¨çš„åŒºåˆ«åœ¨äºé™æ€åŠ è½½çš„ç±»çš„æºç¨‹åºåœ¨ç¼–è¯‘æ—¶æœŸåŠ è½½ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰ï¼Œè€ŒåŠ¨æ€åŠ è½½çš„ç±»åœ¨ç¼–è¯‘æ—¶æœŸå¯ä»¥ç¼ºå¸­ï¼ˆæºç¨‹åºä¸å¿…å­˜åœ¨ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Commons Loggingä¼˜å…ˆä½¿ç”¨Log4j:</span></span><br><span class="line">LogFactory factory = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span> (isClassPresent(<span class="string">"org.apache.logging.log4j.Logger"</span>)) &#123;</span><br><span class="line">    factory = createLog4j();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory = createJdkLog();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isClassPresent</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Class.forName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Main.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            create(args[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">create</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æ‰§è¡ŒMain.javaæ—¶ï¼Œç”±äºç”¨åˆ°äº†Mainï¼Œå› æ­¤ï¼ŒJVMé¦–å…ˆä¼šæŠŠMain.classåŠ è½½åˆ°å†…å­˜ã€‚ç„¶è€Œï¼Œå¹¶ä¸ä¼šåŠ è½½Person.classï¼Œé™¤éç¨‹åºæ‰§è¡Œåˆ°create()æ–¹æ³•ï¼ŒJVMå‘ç°éœ€è¦åŠ è½½Personç±»æ—¶ï¼Œæ‰ä¼šé¦–æ¬¡åŠ è½½Person.classã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œcreate()æ–¹æ³•ï¼Œé‚£ä¹ˆPerson.classæ ¹æœ¬å°±ä¸ä¼šè¢«åŠ è½½ã€‚<br>
åˆ©ç”¨JVMåŠ¨æ€åŠ è½½classçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨è¿è¡ŒæœŸæ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„å®ç°ç±»ã€‚</p>
<h1>è®¿é—®å­—æ®µ</h1>
<pre><code>è·å–å­—æ®µçš„field
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¸€å®šè¦throws Exception</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class stdClass = Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        <span class="comment">// è·å–publicå­—æ®µ"score": getfields()åˆ™æ˜¯è·å–æ‰€æœ‰å­—æ®µçš„field</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">"score"</span>));</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicå­—æ®µ"name":</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">"name"</span>));</span><br><span class="line">        <span class="comment">// è·å–privateå­—æ®µ"grade":</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredField(<span class="string">"grade"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªFieldå¯¹è±¡åŒ…å«äº†ä¸€ä¸ªå­—æ®µçš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<p>getName()ï¼šè¿”å›å­—æ®µåç§°ï¼Œä¾‹å¦‚ï¼Œâ€œnameâ€ï¼›<br>
getType()ï¼šè¿”å›å­—æ®µç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªClasså®ä¾‹ï¼Œä¾‹å¦‚ï¼ŒString.classï¼›<br>
getModifiers()ï¼šè¿”å›å­—æ®µçš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªintï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–å­—æ®µä¿¡æ¯</span></span><br><span class="line">Field f = String.class.getDeclaredField("value");</span><br><span class="line">f.getName(); <span class="comment">// "value"</span></span><br><span class="line">f.getType(); <span class="comment">// class [B è¡¨ç¤ºbyte[]ç±»å‹</span></span><br><span class="line"><span class="keyword">int</span> m = f.getModifiers();</span><br><span class="line">Modifier.isFinal(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isPublic(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isProtected(m); <span class="comment">// false</span></span><br><span class="line">Modifier.isPrivate(m); <span class="comment">// true</span></span><br><span class="line">Modifier.isStatic(m); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å¾—å­—æ®µçš„å€¼"><a class="header-anchor" href="#è·å¾—å­—æ®µçš„å€¼">Â¶</a>è·å¾—å­—æ®µçš„å€¼</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>); <span class="comment">//å°†privateæ”¹æˆpublic</span></span><br><span class="line">        Object value = f.get(p);</span><br><span class="line">        System.out.println(value); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å…ˆè·å–Classå®ä¾‹ï¼Œå†è·å–Fieldå®ä¾‹ï¼Œç„¶åï¼Œç”¨Field.get(Object)è·å–æŒ‡å®šå®ä¾‹çš„æŒ‡å®šå­—æ®µçš„å€¼ã€‚nameè¢«å®šä¹‰ä¸ºä¸€ä¸ªprivateå­—æ®µï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒMainç±»æ— æ³•è®¿é—®Personç±»çš„privateå­—æ®µã€‚è¦ä¿®å¤é”™è¯¯ï¼Œå¯ä»¥å°†privateæ”¹ä¸ºpublicï¼Œæˆ–è€…ï¼Œåœ¨è°ƒç”¨Object value = f.getÂ§;å‰ï¼šè°ƒç”¨Field.setAccessible(true)ã€‚</p>
<h3 id="è®¾ç½®å­—æ®µçš„å€¼"><a class="header-anchor" href="#è®¾ç½®å­—æ®µçš„å€¼">Â¶</a>è®¾ç½®å­—æ®µçš„å€¼</h3>
<p>é€šè¿‡Field.set(Object, Object)å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Ming"</span></span><br><span class="line">        Class c = p.getClass();</span><br><span class="line">        Field f = c.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">        f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®å­—æ®µå€¼</span></span><br><span class="line">        f.set(p, <span class="string">"Xiao Hong"</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Xiao Hong"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è°ƒç”¨æ–¹æ³•</h1>
<h3 id="è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰"><a class="header-anchor" href="#è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰">Â¶</a>è·å–æ–¹æ³•ï¼ˆåˆ›å»ºMethodå¯¹è±¡ï¼‰</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class stdClass = Student<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        <span class="comment">// è·å–publicæ–¹æ³•getScoreï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getScore"</span>, String<span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicæ–¹æ³•getNameï¼Œæ— å‚æ•°:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">"getName"</span>));</span><br><span class="line">        <span class="comment">// è·å–privateæ–¹æ³•getGradeï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredMethod(<span class="string">"getGrade"</span>, <span class="keyword">int</span><span class="class">.<span class="keyword">class</span>))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getGrade</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªMethodå¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<pre><code>getName()ï¼šè¿”å›æ–¹æ³•åç§°ï¼Œä¾‹å¦‚ï¼š&quot;getScore&quot;ï¼›
getReturnType()ï¼šè¿”å›æ–¹æ³•è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªClasså®ä¾‹ï¼Œä¾‹å¦‚ï¼šString.classï¼›
getParameterTypes()ï¼šè¿”å›æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªClassæ•°ç»„ï¼Œä¾‹å¦‚ï¼š{String.class, int.class}ï¼›
getModifiers()ï¼šè¿”å›æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªintï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰
</code></pre>
<h3 id="è°ƒç”¨æ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨æ–¹æ³•">Â¶</a>è°ƒç”¨æ–¹æ³•</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// Stringå¯¹è±¡:</span></span><br><span class="line">        String s = <span class="string">"Hello world"</span>;</span><br><span class="line">        <span class="comment">// è·å–String substring(int)æ–¹æ³•ï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        Method m = String.class.getMethod("substring", int.class);</span><br><span class="line">        <span class="comment">// åœ¨så¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        String r = (String) m.invoke(s, <span class="number">6</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹Methodå®ä¾‹è°ƒç”¨invokeå°±ç›¸å½“äºè°ƒç”¨è¯¥æ–¹æ³•ï¼Œinvokeçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®ä¾‹ï¼Œå³åœ¨å“ªä¸ªå®ä¾‹ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåé¢çš„å¯å˜å‚æ•°è¦ä¸æ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œå¦åˆ™å°†æŠ¥é”™ã€‚</p>
<h3 id="è°ƒç”¨é™æ€æ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨é™æ€æ–¹æ³•">Â¶</a>è°ƒç”¨é™æ€æ–¹æ³•</h3>
<p>å¦‚æœè·å–åˆ°çš„Methodè¡¨ç¤ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œç”±äºæ— éœ€æŒ‡å®šå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥invokeæ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œä¸ºnullã€‚æˆ‘ä»¬ä»¥Integer.parseInt(String)ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–Integer.parseInt(String)æ–¹æ³•ï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        Method m = Integer.class.getMethod("parseInt", String.class);</span><br><span class="line">        <span class="comment">// è°ƒç”¨è¯¥é™æ€æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        Integer n = (Integer) m.invoke(<span class="keyword">null</span>, <span class="string">"12345"</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨épublicæ–¹æ³•"><a class="header-anchor" href="#è°ƒç”¨épublicæ–¹æ³•">Â¶</a>è°ƒç”¨épublicæ–¹æ³•</h3>
<p>ä¸ºäº†è°ƒç”¨épublicæ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡Method.setAccessible(true)å…è®¸å…¶è°ƒç”¨ã€‚</p>
<h3 id="å¤šæ€"><a class="header-anchor" href="#å¤šæ€">Â¶</a>å¤šæ€</h3>
<p>ä½¿ç”¨åå°„è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä»ç„¶éµå¾ªå¤šæ€åŸåˆ™ï¼šå³æ€»æ˜¯è°ƒç”¨å®é™…ç±»å‹çš„è¦†å†™æ–¹æ³•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–Personçš„helloæ–¹æ³•:</span></span><br><span class="line">        Method h = Person.class.getMethod("hello");</span><br><span class="line">        <span class="comment">// å¯¹Studentå®ä¾‹è°ƒç”¨helloæ–¹æ³•:</span></span><br><span class="line">        h.invoke(<span class="keyword">new</span> Student());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Person:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Student:hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>è°ƒç”¨æ„é€ æ–¹æ³•</h1>
<p>ä½¿ç”¨relect.Constructor:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(int):</span></span><br><span class="line">        Constructor cons1 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ„é€ æ–¹æ³•:</span></span><br><span class="line">        Integer n1 = (Integer) cons1.newInstance(<span class="number">123</span>);</span><br><span class="line">        System.out.println(n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(String)</span></span><br><span class="line">        Constructor cons2 = Integer<span class="class">.<span class="keyword">class</span>.<span class="title">getConstructor</span>(<span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        Integer n2 = (Integer) cons2.newInstance(<span class="string">"456"</span>);</span><br><span class="line">        System.out.println(n2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Javaçš„åå°„APIæä¾›äº†Constructorå¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚<br>
é€šè¿‡Classå®ä¾‹è·å–Constructorçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>getConstructor(Class...)ï¼šè·å–æŸä¸ªpublicçš„Constructorï¼›
getDeclaredConstructor(Class...)ï¼šè·å–æŸä¸ªConstructorï¼›
getConstructors()ï¼šè·å–æ‰€æœ‰publicçš„Constructorï¼›
getDeclaredConstructors()ï¼šè·å–æ‰€æœ‰Constructorã€‚
æ³¨æ„Constructoræ€»æ˜¯å½“å‰ç±»å®šä¹‰çš„æ„é€ æ–¹æ³•ï¼Œå’Œçˆ¶ç±»æ— å…³ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šæ€çš„é—®é¢˜ã€‚
</code></pre>
<p>è°ƒç”¨épublicçš„Constructoræ—¶ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡setAccessible(true)è®¾ç½®å…è®¸è®¿é—®ã€‚setAccessible(true)å¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<h1>è·å–ç»§æ‰¿å…³ç³»</h1>
<h3 id="è·å–çˆ¶ç±»çš„class"><a class="header-anchor" href="#è·å–çˆ¶ç±»çš„class">Â¶</a>è·å–çˆ¶ç±»çš„class</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class i = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class n = i.getSuperclass();</span><br><span class="line">        System.out.println(n);</span><br><span class="line">        Class o = n.getSuperclass();</span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(o.getSuperclass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒIntegerçš„çˆ¶ç±»ç±»å‹æ˜¯Numberï¼ŒNumberçš„çˆ¶ç±»æ˜¯Objectï¼ŒObjectçš„çˆ¶ç±»æ˜¯nullã€‚é™¤Objectå¤–ï¼Œå…¶ä»–ä»»ä½•éinterfaceçš„Classéƒ½å¿…å®šå­˜åœ¨ä¸€ä¸ªçˆ¶ç±»ç±»å‹ã€‚</p>
<h3 id="è·å–interface"><a class="header-anchor" href="#è·å–interface">Â¶</a>è·å–interface</h3>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼šgetInterfaces()åªè¿”å›å½“å‰ç±»ç›´æ¥å®ç°çš„æ¥å£ç±»å‹ï¼Œå¹¶ä¸åŒ…æ‹¬å…¶çˆ¶ç±»å®ç°çš„æ¥å£ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class s = Integer<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Class[] is = s.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class i : is) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œå¯¹æ‰€æœ‰interfaceçš„Classè°ƒç”¨getSuperclass()è¿”å›çš„æ˜¯nullï¼Œè·å–æ¥å£çš„çˆ¶æ¥å£è¦ç”¨getInterfaces()ã€‚å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•interfaceï¼Œé‚£ä¹ˆgetInterfaces()è¿”å›ç©ºæ•°ç»„ã€‚</p>
<h3 id="ç»§æ‰¿å…³ç³»"><a class="header-anchor" href="#ç»§æ‰¿å…³ç³»">Â¶</a>ç»§æ‰¿å…³ç³»</h3>
<p>å¦‚æœæ˜¯ä¸¤ä¸ªClasså®ä¾‹ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬å‹æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥è°ƒç”¨isAssignableFrom()ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Integer</span></span><br><span class="line"><span class="comment">// Number n = ?</span></span><br><span class="line">Number<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Number</span></span><br><span class="line"><span class="comment">// Object o = ?</span></span><br><span class="line">Object<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Integer</span>.<span class="title">class</span>)</span>; <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Object</span></span><br><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer<span class="class">.<span class="keyword">class</span>.<span class="title">isAssignableFrom</span>(<span class="title">Number</span>.<span class="title">class</span>)</span>; <span class="comment">// falseï¼Œå› ä¸ºNumberä¸èƒ½èµ‹å€¼ç»™Integer</span></span><br></pre></td></tr></table></figure>
<h1>åŠ¨æ€ä»£ç†Dynamic Proxy</h1>
<p>Javaæ ‡å‡†åº“æä¾›äº†ä¸€ç§åŠ¨æ€ä»£ç†ï¼ˆDynamic Proxyï¼‰çš„æœºåˆ¶ï¼šå¯ä»¥åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºæŸä¸ªinterfaceçš„å®ä¾‹ã€‚<br>
å…ˆå®šä¹‰äº†æ¥å£Helloï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å»ç¼–å†™å®ç°ç±»ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡JDKæä¾›çš„ä¸€ä¸ªProxy.newProxyInstance()åˆ›å»ºäº†ä¸€ä¸ªHelloæ¥å£å¯¹è±¡ã€‚è¿™ç§æ²¡æœ‰å®ç°ç±»ä½†æ˜¯åœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºäº†ä¸€ä¸ªæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¸ºåŠ¨æ€ä»£ç ã€‚JDKæä¾›çš„åŠ¨æ€åˆ›å»ºæ¥å£å¯¹è±¡çš„æ–¹å¼ï¼Œå°±å«åŠ¨æ€ä»£ç†ã€‚<br>
åŠ¨æ€ä»£ç†å®é™…ä¸Šæ˜¯JDKåœ¨è¿è¡ŒæœŸåŠ¨æ€åˆ›å»ºclasså­—èŠ‚ç å¹¶åŠ è½½çš„è¿‡ç¨‹.</p>
]]></content>
      <tags>
        <tag>åå°„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ä¸­æ‰¾åˆ°é‡å¤çš„æ•°ï½œã€Šå‰‘æŒ‡offerã€‹</title>
    <url>/2020/03/04/%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE%EF%BD%9C%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B/</url>
    <content><![CDATA[<pre><code>é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨0åˆ°n-1çš„èŒƒå›´å†…ã€‚ æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—æ˜¯é‡å¤çš„ã€‚ä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥é•¿åº¦ä¸º7çš„æ•°ç»„{2,3,1,0,2,5,3}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯ç¬¬ä¸€ä¸ªé‡å¤çš„æ•°å­—2ã€‚
</code></pre>
<a id="more"></a>
<ul>
<li>é¢˜ç›®è¯´æ˜äº†æ•°å­—çš„å¤§å°èŒƒå›´å’Œæ•°ç»„çš„é•¿åº¦ï¼Œå³æ¯ä¸ªæ•°å­—å€¼çš„å¤§å°ä¸€å®šåœ¨æ•°ç»„çš„ä¸‹æ ‡èŒƒå›´å†…ã€‚</li>
</ul>
<h2 id="è§£æ³•ï¼š"><a class="header-anchor" href="#è§£æ³•ï¼š">Â¶</a>è§£æ³•ï¼š</h2>
<h3 id="ä¸æ”¹å˜åŸæ•°ç»„ï¼š"><a class="header-anchor" href="#ä¸æ”¹å˜åŸæ•°ç»„ï¼š">Â¶</a>ä¸æ”¹å˜åŸæ•°ç»„ï¼š</h3>
<ol>
<li>
<p>æ’åºåæ‰«ææ•°ç»„: æ—¶é—´å¤æ‚åº¦O(nlogn)ã€‚</p>
</li>
<li>
<p>hashè¡¨ï¼šæ—¶é—´å¤æ‚åº¦O(n),ç©ºé—´å¤æ‚åº¦O(n)ã€‚<br>
ç±»ä¼¼å“ˆå¸Œè¡¨ï¼š</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[], <span class="keyword">int</span> length, <span class="keyword">int</span>[] duplication)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[] k = <span class="keyword">new</span> <span class="keyword">boolean</span>[length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k[numbers[i]] == <span class="keyword">true</span>) &#123;</span><br><span class="line">            duplication[<span class="number">0</span>] = numbers[i];</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        k[numbers[i]] = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(1) booleanä¸æ˜¯å 1ä½ï¼Œè®¡ç®—æœºå¤„ç†å¤„ç†æ•°æ®çš„æœ€å°å•å…ƒæ˜¯1å­—èŠ‚ï¼Œä¸€èˆ¬1ä½çš„è¯ï¼Œå…¶ä½™7ä½ä¼šè¢«0è¡¥é½ã€‚<br>
(2) åœ¨javaè™šæ‹Ÿæœºè§„èŒƒä¸­ï¼ŒJVMæ²¡æœ‰ç”¨äºæ“ä½œbooleançš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåœ¨ç¼–è¯‘åç”¨intçš„æ•°æ®ç±»å‹ä»£æ›¿booleanï¼Œæ­¤æ—¶booleanå 4å­—èŠ‚ã€‚<br>
(3) boolean[]æ•°ç»„ç¼–è¯‘åä¼šè¢«byte[]æ•°ç»„ä»£æ›¿ï¼Œæ­¤æ—¶çš„booleanå 1å­—èŠ‚ã€‚<br>
æ€»ç»“:booleanå•ç‹¬å­˜åœ¨å 4å­—èŠ‚ï¼Œåœ¨boolean[]ä¸­å 1å­—èŠ‚!</p>
<ol start="3">
<li>é¢å¤–æ•°ç»„ï¼šæ—¶é—´å¤æ‚åº¦O(n),ç©ºé—´å¤æ‚åº¦O(n)<br>
åˆ›å»ºä¸€ä¸ªn+1é•¿åº¦çš„æ•°ç»„ï¼Œæ‰«æåŸæ•°ç»„ï¼Œæ•°å­—ä¸ºmçš„å…ƒç´ æ”¾å…¥ä¸‹æ ‡må¤„å³å¯å‘ç°æ˜¯å¦ä¸ºé‡å¤æ•°å­—ã€‚</li>
</ol>
<h3 id="æ”¹å˜åŸæ•°ç»„ï¼š"><a class="header-anchor" href="#æ”¹å˜åŸæ•°ç»„ï¼š">Â¶</a>æ”¹å˜åŸæ•°ç»„ï¼š</h3>
<p><b>æ–¹æ³•ä¸€ï¼š</b>å¯ä»¥åˆ©ç”¨ç°æœ‰æ•°ç»„è®¾ç½®æ ‡å¿—ï¼Œå½“ä¸€ä¸ªæ•°å­—Numbers[i]è®¿é—®è¿‡ï¼Œåˆ™è®©å¯¹åº”ä½ç½®çš„Numbers[Numbers[i]]åŠ lengthï¼Œå†é‡åˆ°ç›¸åŒçš„æ•°æ—¶ï¼Œå¤§äºlengthï¼Œåˆ™ä¸ºé‡å¤çš„æ•°ã€‚</p>
<h4 id="code"><a class="header-anchor" href="#code">Â¶</a>code</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Parameters:</span></span><br><span class="line">    <span class="comment">//    numbers:     an array of integers</span></span><br><span class="line">    <span class="comment">//    length:      the length of array numbers</span></span><br><span class="line">    <span class="comment">//    duplication: (Output) the duplicated number in the array number,length of duplication array is 1,so using duplication[0] = ? in implementation;</span></span><br><span class="line">    <span class="comment">//                  Here duplication like pointor in C/C++, duplication[0] equal *duplication in C/C++</span></span><br><span class="line">    <span class="comment">//    è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„~è¿”å›ä»»æ„é‡å¤çš„ä¸€ä¸ªï¼Œèµ‹å€¼duplication[0]</span></span><br><span class="line">    <span class="comment">// Return value:       true if the input is valid, and there are some duplications in the array number</span></span><br><span class="line">    <span class="comment">//                     otherwise false</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[],<span class="keyword">int</span> length,<span class="keyword">int</span> [] duplication)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥è¾“å…¥</span></span><br><span class="line">        <span class="keyword">if</span>(numbers == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i:numbers)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= length| i&lt;<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ­£å¼æ£€æµ‹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            <span class="comment">//å–ä½™å¤„ç†è®¿é—®è¾¹ç•Œ</span></span><br><span class="line">            <span class="keyword">int</span> index=numbers[i]%length;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(numbers[index]&gt;=length)&#123;</span><br><span class="line">                duplication[<span class="number">0</span>] = index;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            numbers[index] = numbers[index] + length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><b>æ–¹æ³•äºŒï¼š</b>å¯¹æ•°ç»„é‡æ’ï¼Œè®¿é—®æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œå¦‚æœi=numbers[i]ï¼Œåˆ™è®¿é—®ä¸‹ä¸€ä¸ªï¼›å¦‚æœä¸æ˜¯ï¼Œæ‹¿å®ƒå’Œnumbers[numbers[i]]æ¯”è¾ƒã€‚ç›¸ç­‰,åˆ™æ‰¾åˆ°é‡å¤æ•°å­—ï¼Œä¸ç­‰ï¼Œåˆ™äº¤æ¢ã€‚</p>
<h5 id="æµ‹è¯•ç”¨ä¾‹ï¼š"><a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹ï¼š">Â¶</a>æµ‹è¯•ç”¨ä¾‹ï¼š</h5>
<ol>
<li>ä¸åŒ…å«é‡å¤çš„æ•°ç»„</li>
<li>ç©ºæ•°ç»„</li>
<li>é•¿åº¦ä¸ºnçš„æ•°ç»„é‡ŒåŒ…å«1ä¸ªæˆ–å¤šä¸ªé‡å¤æ•°å­—ã€‚</li>
</ol>
]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>ã€Šå‰‘æŒ‡offerã€‹</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaLog</title>
    <url>/2020/03/03/JavaLog/</url>
    <content><![CDATA[<h5 id="Javaå†…ç½®loggingåŒ…"><a class="header-anchor" href="#Javaå†…ç½®loggingåŒ…">Â¶</a>Javaå†…ç½®loggingåŒ…</h5>
<p>æ—¥å¿—ä¼šè‡ªåŠ¨æ‰“å°äº†æ—¶é—´ã€è°ƒç”¨ç±»ã€è°ƒç”¨æ–¹æ³•ç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// logging</span></span><br><span class="line"><span class="keyword">import</span> java.util.logging.Level;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Logger logger = Logger.getGlobal();</span><br><span class="line">        logger.info(<span class="string">"start process..."</span>);</span><br><span class="line">        logger.warning(<span class="string">"memory is running out..."</span>);</span><br><span class="line">        logger.fine(<span class="string">"ignored."</span>);</span><br><span class="line">        logger.severe(<span class="string">"process will be terminated..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»ä¸¥é‡åˆ°æ™®é€šï¼š<br>
SEVEREï¼ŒWARNINGï¼ŒINFOï¼ŒCONFIGï¼ŒFINEï¼ŒFINERï¼ŒFINEST<br>
å› ä¸ºé»˜è®¤çº§åˆ«æ˜¯INFOï¼Œå› æ­¤ï¼ŒINFOçº§åˆ«ä»¥ä¸‹çš„æ—¥å¿—ï¼Œä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚<br>
å…¶å±€é™åœ¨äºLoggingç³»ç»Ÿåœ¨JVMå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶å¹¶å®Œæˆåˆå§‹åŒ–ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œmain()æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®ï¼›<br>
é…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•° -Djava.util.logging.config.file=<config-file-name>ã€‚</config-file-name></p>
<ul>
<li>æ€»ç»“ï¼šä¸å¥½ç”¨ï¼</li>
</ul>
<h1>Commons logging</h1>
<p>ä¸€ä¸ªApacheå¼€å‘çš„æ—¥å¿—æ¥å£ï¼Œè‡ªåŠ¨æœç´ Log4jï¼Œæ²¡æ‰¾åˆ°åˆ™ä½¿ç”¨JDKLoggingã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Log log = LogFactory.getLog(Main<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        log.info(<span class="string">"start..."</span>);</span><br><span class="line">        log.warn(<span class="string">"end."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ–¹åº“æ¥çš„ï¼Œéœ€è¦ç¼–è¯‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ”¾å…¥work path</span></span><br><span class="line"><span class="comment">#javacç¼–è¯‘</span></span><br><span class="line">javac -cp commons-logging-1.2.jar Main.java</span><br><span class="line"><span class="comment">#æ‰§è¡Œè¿™ä¸ªMain.classï¼Œä½¿ç”¨javaå‘½ä»¤ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šclasspath</span></span><br><span class="line">java -cp .:commons-logging-1.2.jar Main</span><br></pre></td></tr></table></figure>
<p>Commons Loggingå®šä¹‰äº†6ä¸ªæ—¥å¿—çº§åˆ«ï¼šFATAL,ERROR,WARNING,INFO,DEBUG,TRACEã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Log log = LogFactory.getLog(Main<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"foo"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> Log log = LogFactory.getLog(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"foo"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»å®ä¾‹åŒ–çš„log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"bar"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿˜é‡è½½äº†Info(â€œstringâ€,Throwable)æä¾›æ‰“å°å¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    log.error(<span class="string">"got exception!"</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>Log4j</h1>
<p>é€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒã€‚<br>
ä»¥XMLé…ç½®ä¸ºä¾‹ï¼Œä½¿ç”¨Log4jçš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªlog4j2.xmlçš„æ–‡ä»¶æ”¾åˆ°classpathä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"log.pattern"</span>&gt;</span>%d&#123;MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125;%n%msg%n%n<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ–‡ä»¶åå˜é‡ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"file.err.filename"</span>&gt;</span>log/err.log<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"file.err.pattern"</span>&gt;</span>log/err.%i.log.gz<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰Appenderï¼Œå³ç›®çš„åœ° --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°å±å¹• --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—æ ¼å¼å¼•ç”¨ä¸Šé¢å®šä¹‰çš„log.pattern --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log.pattern&#125;"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°æ–‡ä»¶,æ–‡ä»¶åå¼•ç”¨ä¸Šé¢å®šä¹‰çš„file.err.filename --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"err"</span> <span class="attr">bufferedIO</span>=<span class="string">"true"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;file.err.filename&#125;"</span> <span class="attr">filePattern</span>=<span class="string">"$&#123;file.err.pattern&#125;"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"$&#123;log.pattern&#125;"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨åˆ‡å‰²æ—¥å¿— --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"1 MB"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¿ç•™æœ€è¿‘10ä»½ --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"10"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹infoçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°console --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"console"</span> <span class="attr">level</span>=<span class="string">"info"</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹errorçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°errï¼Œå³ä¸Šé¢å®šä¹‰çš„RollingFile --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"err"</span> <span class="attr">level</span>=<span class="string">"error"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¦æŠŠä»¥ä¸‹3ä¸ªjaråŒ…æ”¾åˆ°classpathä¸­ï¼š<br>
log4j-api-2.x.jar<br>
log4j-core-2.x.jar<br>
log4j-jcl-2.x.jar<br>
Commons Loggingä¼šè‡ªåŠ¨å‘ç°å¹¶ä½¿ç”¨Log4jï¼Œæ‰€ä»¥ï¼ŒæŠŠä¸Šä¸€èŠ‚ä¸‹è½½çš„commons-logging-1.2.jarä¹Ÿæ”¾åˆ°classpathä¸­ã€‚<br>
è¦æ‰“å°æ—¥å¿—ï¼Œåªéœ€è¦æŒ‰Commons Loggingçš„å†™æ³•å†™ï¼Œä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå°±å¯ä»¥å¾—åˆ°Log4jçš„æ—¥å¿—è¾“å‡ºã€‚</p>
<ul>
<li>æ€»ç»“ï¼š Commons Loggingæ¥å£æ¥å†™å…¥æ—¥å¿—ï¼Œå¹¶ä¸”å¼€å‘é˜¶æ®µæ— éœ€å¼•å…¥Log4jã€‚æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œ åªéœ€è¦æŠŠæ­£ç¡®çš„é…ç½®æ–‡ä»¶å’ŒLog4jç›¸å…³çš„jaråŒ…æ”¾å…¥classpathï¼Œå°±å¯ä»¥è‡ªåŠ¨æŠŠæ—¥å¿—åˆ‡æ¢æˆä½¿ç”¨Log4jå†™å…¥ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¼‚å¸¸å¤„ç†</title>
    <url>/2020/03/03/Java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<pre><code>ä¾¿äºè°ƒè¯•ï¼Œè¿è¡Œæ£€æµ‹ã€‚
</code></pre>
<a id="more"></a>
<h1>å¼‚å¸¸</h1>
<h2 id="Javaå¼‚å¸¸ç§ç±»"><a class="header-anchor" href="#Javaå¼‚å¸¸ç§ç±»">Â¶</a>Javaå¼‚å¸¸ç§ç±»</h2>
<ul>
<li>Error:<br>
OutOfMemoryErrorï¼šå†…å­˜è€—å°½<br>
NoClassDefFoundErrorï¼šæ— æ³•åŠ è½½æŸä¸ªClass<br>
StackOverflowErrorï¼šæ ˆæº¢å‡º</li>
<li>Exception:<br>
NumberFormatExceptionï¼šæ•°å€¼ç±»å‹çš„æ ¼å¼é”™è¯¯<br>
FileNotFoundExceptionï¼šæœªæ‰¾åˆ°æ–‡ä»¶<br>
SocketExceptionï¼šè¯»å–ç½‘ç»œå¤±è´¥<br>
NullPointerExceptionï¼šå¯¹æŸä¸ªnullçš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æˆ–å­—æ®µ<br>
IndexOutOfBoundsExceptionï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ</li>
<li>å¿…é¡»æ•è·çš„å¼‚å¸¸ï¼Œé™¤RuntimeExceptionä»¥å¤–çš„Exceptionï¼Œåˆç§°ä¸ºChecked Exceptionã€‚</li>
</ul>
<h2 id="æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch"><a class="header-anchor" href="#æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch">Â¶</a>æ•è·å¼‚å¸¸ï¼Œtryâ€¦catch</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bs = toGBK(<span class="string">"ä¸­æ–‡"</span>);</span><br><span class="line">            System.out.println(Arrays.toString(bs));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">byte</span>[] toGBK(String s) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:</span></span><br><span class="line">        <span class="keyword">return</span> s.getBytes(<span class="string">"GBK"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>åœ¨main()æ–¹æ³•ä¸­ï¼Œè°ƒç”¨toGBK()ï¼Œæ²¡æœ‰æ•è·å®ƒå£°æ˜çš„å¯èƒ½æŠ›å‡ºçš„UnsupportedEncodingException,åˆ™ä¼šæŠ¥é”™ã€‚
</code></pre>
<p>å¦‚æœä¸æƒ³å†™try,åˆ™å®šä¹‰ä¸ºthrows Exceptionï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] bs = toGBK(<span class="string">"ä¸­æ–‡"</span>);</span><br><span class="line">            System.out.println(Arrays.toString(bs));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">byte</span>[] toGBK(String s) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:</span></span><br><span class="line">        <span class="keyword">return</span> s.getBytes(<span class="string">"GBK"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ–¹æ³•æŠ›å‡ºäº†å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œå¯ä»¥ä¸å†™catchã€‚</p>
<h3 id="å¤šæ•è·å¼‚å¸¸"><a class="header-anchor" href="#å¤šæ•è·å¼‚å¸¸">Â¶</a>å¤šæ•è·å¼‚å¸¸</h3>
<p><img src="/.io//Exception.png" alt></p>
<p>å­ç±»ä¸€å®šè¦å†™åœ¨å‰é¢ï¼Œå¦åˆ™å­ç±»æ°¸è¿œæ•è·ä¸åˆ°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(string[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125;<span class="keyword">catch</span> (IOException e)(</span><br><span class="line">        System.out.println(<span class="string">"IO error"</span>);</span><br><span class="line">    ) <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123; <span class="comment">// æ°¸è¿œæ•è·ä¸åˆ°</span></span><br><span class="line">        System.out.println(<span class="string">"Bad encoding"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå¹¶å¼‚å¸¸å¤„ç†ï¼Œå¯ä»¥ç”¨ï½œï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException | NumberFormatException e) &#123; <span class="comment">// IOExceptionæˆ–NumberFormatException</span></span><br><span class="line">        System.out.println(<span class="string">"Bad input"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(<span class="string">"Unknown error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="finallyè¯­å¥"><a class="header-anchor" href="#finallyè¯­å¥">Â¶</a>finallyè¯­å¥</h3>
<p>finallyå¯ä»¥ä¿è¯æœ‰æ— é”™è¯¯éƒ½æ‰§è¡Œã€‚<br>
åœ¨tryæˆ–è€…catchè¯­å¥å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œfinallyä»ä¼šæ‰§è¡Œï¼Œå…ˆæ‰§è¡Œfinallyå†æŠ›å‡ºã€‚</p>
<h2 id="æŠ›å‡ºå¼‚å¸¸"><a class="header-anchor" href="#æŠ›å‡ºå¼‚å¸¸">Â¶</a>æŠ›å‡ºå¼‚å¸¸</h2>
<h3 id="å¼‚å¸¸çš„ä¼ æ’­"><a class="header-anchor" href="#å¼‚å¸¸çš„ä¼ æ’­">Â¶</a>å¼‚å¸¸çš„ä¼ æ’­</h3>
<p>å½“æŸä¸ªæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œå¦‚æœå½“å‰æ–¹æ³•æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸å°±ä¼šè¢«æŠ›åˆ°ä¸Šå±‚è°ƒç”¨æ–¹æ³•ï¼Œç›´åˆ°é‡åˆ°æŸä¸ªtry â€¦ catchè¢«æ•è·ä¸ºæ­¢</p>
<h3 id="e-printStackTrace-æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚"><a class="header-anchor" href="#e-printStackTrace-æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚">Â¶</a>e,printStackTrace()æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆã€‚</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            process1();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        process2();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Integer.parseInt(<span class="keyword">null</span>); <span class="comment">// ä¼šæŠ›å‡ºNumberFormatException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>java.lang.NumberFormatException: null<br>
at java.base/java.lang.Integer.parseInt(Integer.java:614)<br>
at java.base/java.lang.Integer.parseInt(Integer.java:770)<br>
at Main.process2(Main.java:16)<br>
at Main.process1(Main.java:12)<br>
at Main.main(Main.java:5)<br>
è¿”å›ç±»ä¼¼å¦‚æ­¤ï¼Œæ¯å±‚è°ƒç”¨éƒ½ç»™å‡ºäº†æºä»£ç çš„è¡Œå·ã€‚</p>
<h3 id="å¼‚å¸¸å±è”½-Suppressed-Exception"><a class="header-anchor" href="#å¼‚å¸¸å±è”½-Suppressed-Exception">Â¶</a>å¼‚å¸¸å±è”½ Suppressed Exception</h3>
<p>å¦‚æœfinallyæŠ›å‡ºå¼‚å¸¸ï¼Œcatchä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±ä¼šæ¶ˆå¤±ï¼Œå› ä¸ºåªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<h2 id="è‡ªå®šä¹‰å¼‚å¸¸"><a class="header-anchor" href="#è‡ªå®šä¹‰å¼‚å¸¸">Â¶</a>è‡ªå®šä¹‰å¼‚å¸¸</h2>
<p>å»ºç«‹ä¸€ä¸ªâ€œæ ¹å¼‚å¸¸â€BaseExceptionï¼Œå»ºè®®ä»RuntimeExceptionä¸­æ´¾ç”Ÿï¼Œå…¶ä»–ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸åˆ™ä»BaseExceptionä¸­æ´¾ç”Ÿï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¦æ”¯æŒå¤šä¸ªæ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(String message, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BaseException</span><span class="params">(Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰RuntimeExceptionï¼Œç¼–è¯‘æ—¶ä¸èƒ½æ£€æµ‹å‡ºè¯¥ç±»å¼‚å¸¸ã€‚<br>
è€Œæœªæ£€æµ‹å¼‚å¸¸å­˜åœ¨ä¸¤ç§æ¸…å½¢ï¼š<br>
â‘  å¦‚æœè¯¥å¼‚å¸¸è¢«æ•è·æˆ–æŠ›å‡ºï¼Œåˆ™ç¨‹åºç»§ç»­è¿è¡Œã€‚<br>
â‘¡ å¦‚æœå¼‚å¸¸æ²¡æœ‰è¢«æ•è·è¯¥çº¿ç¨‹å°†ä¼šåœæ­¢æ‰§è¡Œã€‚<br>
Thread.UncaughtExceptionHandleræ˜¯ç”¨äºå¤„ç†æœªæ•è·å¼‚å¸¸é€ æˆçº¿ç¨‹çªç„¶ä¸­æ–­æƒ…å†µçš„ä¸€ä¸ªå†…åµŒæ¥å£ã€‚å½“ä¸€ä¸ªæœªæ•è·å¼‚å¸¸å°†é€ æˆçº¿ç¨‹ä¸­æ–­çš„æ—¶å€™JVMä¼šä½¿ç”¨Thread.getUncaughtExceptionHandler()æ¥æŸ¥è¯¢çº¿ç¨‹çš„UncaughtExceptionHandlerï¼Œå¹¶å°†çº¿ç¨‹å’Œå¼‚å¸¸ä½œä¸ºå‚æ•°ä¼ é€’ç»™handlerçš„uncaughtException()æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
<h2 id="æ–­è¨€Assertion"><a class="header-anchor" href="#æ–­è¨€Assertion">Â¶</a>æ–­è¨€Assertion</h2>
<p>è°ƒè¯•å·¥å…·ï¼Œä¸€èˆ¬åœ¨å¼€å‘æµ‹è¯•æ—¶ä½¿ç”¨ã€‚æ–­è¨€å¤±è´¥ä¼šæŠ›å‡ºAssertionErrorï¼Œå¹¶å¯å¸¦ä¸Šå¯é€‰çš„æ–­è¨€æ¶ˆæ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">assert</span> x &gt;= <span class="number">0</span> : <span class="string">"x must &gt;= 0"</span>;</span><br></pre></td></tr></table></figure>
<p>æ–­è¨€å¤±è´¥ä¼šç›´æ¥å¯¼è‡´ç¨‹åºé€€å‡ºï¼Œå¯¹äºå¯æ¢å¤ç¨‹åºï¼Œä¸åº”è¯¥ä½¿ç”¨æ–­è¨€ï¼Œåº”è¯¥æŠ›å‡ºå¼‚å¸¸å¹¶åœ¨ä¸Šå±‚æ•è·ã€‚</p>
<ul>
<li>JVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œé‡åˆ°æ—¶ä¼šè‡ªåŠ¨å¿½ç•¥ã€‚è¦æ‰§è¡Œassertè¯­å¥ï¼Œå¿…é¡»ä¼ é€’ -enableassertionså‚æ•°ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -ea Main.java</span><br></pre></td></tr></table></figure>
<p>æœ€å¥½è¿˜æ˜¯ä½¿ç”¨å•å…ƒæµ‹è¯•ã€‚</p>
]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonçˆ¬å–å·å»–è€å¸ˆçš„Javaæ•™ç¨‹</title>
    <url>/2020/03/01/%E5%81%B7%E5%BB%96%E8%80%81%E5%B8%88%E7%9A%84Java%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<pre><code>ä»Šå¤©æƒ³å­¦ç‚¹Javaï¼Œè®¿é—®äº†ä¸€ä¸‹å»–è€å¸ˆçš„ç½‘ç«™ï¼Œç»“æœç½‘å¾ˆå¡ï¼Œå¯èƒ½å»–è€å¸ˆåœ¨æ›´æ–°ç½‘ç«™ï¼Œç„¶åçªç„¶æƒ³åˆ°å¯ä»¥å†™ä¸ªçˆ¬è™«ä¸€åŠ³æ°¸é€¸ã€‚åšè¿™ä¸ªçˆ¬è™«çš„ç›®çš„ä¹Ÿæ˜¯æ–¹ä¾¿å­¦ä¹ å»–é›ªå³°è€å¸ˆçš„Javaæ•™ç¨‹ï¼Œæ¯•ç«ŸæŠŠç½‘é¡µå­˜åœ¨æœ¬åœ°æ–¹ä¾¿æµè§ˆï¼Œå¹¶æ— ä»–æ„ã€‚
</code></pre>
<a id="more"></a>
<h1>Code</h1>
<p>ç”¨çš„æ˜¯requerstå’Œxpathï¼Œæ¨èç”¨Chromeä¸Šçš„xpath helperï¼ŒçœŸé¦™ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">##å¯¼å…¥åº“</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> lxml</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure>
<h2 id="å‘é€è¯·æ±‚"><a class="header-anchor" href="#å‘é€è¯·æ±‚">Â¶</a>å‘é€è¯·æ±‚</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#send request</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span><span class="params">(url, headers)</span>:</span></span><br><span class="line">    r = requests.get(url,headers=headers)</span><br><span class="line">    print(<span class="string">'çŠ¶æ€ç :'</span>,r.status_code)</span><br><span class="line">    <span class="keyword">return</span> r</span><br></pre></td></tr></table></figure>
<h2 id="æå–æ•°æ®"><a class="header-anchor" href="#æå–æ•°æ®">Â¶</a>æå–æ•°æ®</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#fetch data</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(domain,resp, headers)</span>:</span></span><br><span class="line">    selector = lxml.etree.HTML(resp.text)    <span class="comment">#generate object</span></span><br><span class="line">    titles = selector.xpath(<span class="string">'//a[@class="x-wiki-index-item"]/text()'</span>)<span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„å°æ ‡é¢˜ï¼Œæ¯”å¦‚ã€Šé¢å‘å¯¹è±¡ã€‹è¿™ç§      </span></span><br><span class="line">    uri = selector.xpath(<span class="string">'//a[@class="x-wiki-index-item"]/@href'</span>) <span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„urlçš„å‚æ•°</span></span><br><span class="line">    <span class="comment">#æ‰“åŒ…åˆ°ä¸€èµ·è¿”å›      </span></span><br><span class="line">    urls = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> uri:</span><br><span class="line">        urls.append(domain + i)    </span><br><span class="line">    <span class="keyword">return</span> titles, urls</span><br></pre></td></tr></table></figure>
<h1>ä¸‹è½½é¡µé¢</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(titles,urls)</span>:</span></span><br><span class="line">    <span class="comment">#è®¾ç½®ä¸‹è½½è·¯å¾„</span></span><br><span class="line">    cwd=os.getcwd()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML'</span>):</span><br><span class="line">        os.mkdir(cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML'</span>)</span><br><span class="line">    filepath = cwd + <span class="string">'/å»–é›ªå³°Javaæ•™ç¨‹HTML/'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> zip(titles, urls):</span><br><span class="line">        resp = requests.get(value,headers=headers)</span><br><span class="line">        selector = lxml.etree.HTML(resp.text)    </span><br><span class="line">        <span class="comment">#æ‹¿åˆ°å„ä¸ªé¡µé¢çš„æ­£æ–‡</span></span><br><span class="line">        html = selector.xpath(<span class="string">'//div[@class="uk-flex-item-1"]'</span>) </span><br><span class="line">        <span class="comment">#è½¬æ¢ç±»å‹</span></span><br><span class="line">        html = etree.tostring(html[<span class="number">0</span>], pretty_print = <span class="literal">True</span>, method = <span class="string">"html"</span>)</span><br><span class="line">        <span class="comment">#è®¾ç½®æ–‡ä»¶å</span></span><br><span class="line">        filename = filepath + <span class="string">"%d"</span> % titles.index(key) + key +<span class="string">'.html'</span></span><br><span class="line">        <span class="keyword">with</span> open(filename,<span class="string">'wb'</span>)<span class="keyword">as</span> f:</span><br><span class="line">            f.write(html)</span><br><span class="line">        <span class="comment">#åŠ ä¸€ä¸ªå»¶æ—¶ï¼Œåˆ«è®¿é—®å¤ªå¿«</span></span><br><span class="line">        time.sleep(<span class="number">0.3</span>)</span><br><span class="line">    print(<span class="string">"ä¸‹è½½å®Œæˆ"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸»å‡½æ•°"><a class="header-anchor" href="#ä¸»å‡½æ•°">Â¶</a>ä¸»å‡½æ•°</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#main</span></span><br><span class="line">headers = &#123;</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chro'</span></span><br><span class="line">                      <span class="string">'me/53.0.2785.104 Safari/537.36 Core/1.53.2372.400 QQBrowser/9.5.10548.400'</span></span><br><span class="line">&#125;</span><br><span class="line">domain = <span class="string">'http://www.liaoxuefeng.com'</span>           <span class="comment">#å»–é›ªå³°ç½‘ç«™çš„åŸŸå</span></span><br><span class="line">url =  <span class="string">"https://www.liaoxuefeng.com/wiki/1252599548343744"</span> <span class="comment">#Javaæ•™ç¨‹çš„url</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–Javaæ•™ç¨‹çš„é¡µé¢</span></span><br><span class="line">resp = send_request(url, headers)</span><br><span class="line"><span class="comment">#æå–æ‰€æœ‰çš„æ•°æ®å›æ¥ï¼ŒåŒ…æ‹¬æ ‡é¢˜å’Œurls</span></span><br><span class="line">titles, urls = fetch(domain, resp, headers)</span><br><span class="line"><span class="comment">#å¼€å§‹ä¸‹è½½</span></span><br><span class="line">download(titles,urls)</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaæ ¸å¿ƒç±»</title>
    <url>/2020/03/01/Java%E6%A0%B8%E5%BF%83%E7%B1%BB/</url>
    <content><![CDATA[<p>Javaå†…éƒ¨çš„æ ¸å¿ƒç±»ã€‚</p>
<a id="more"></a>
<h1>String</h1>
<p>Stringæœ¬èº«æ˜¯ä¸€ä¸ªclassï¼ŒJavaç¼–è¯‘å™¨å…è®¸å®ƒç”¨â€¦æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡char[]æ•°ç»„æ¥è¡¨ç¤ºçš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s2 = <span class="keyword">new</span> String(<span class="keyword">new</span> <span class="keyword">char</span>[] &#123;<span class="string">'H'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">'!'</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>Javaå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå…¶åŸç†æ˜¯ï¼š<br>
é€šè¿‡private final char[]å­—æ®µï¼Œä»¥åŠæ²¡æœ‰ä»»ä½•æ”¹å˜char[]çš„æ–¹æ³•æ¥å®ç°çš„ã€‚<br>
è€Œå­—ç¬¦ä¸²çš„æ”¹å˜ï¼Œå®é™…æ˜¯å¼€è¾Ÿäº†æ–°çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡å†…å­˜åœ°å€â€œæ–­å¼€-è¿æ¥â€å˜åŒ–ï¼Œæ”¹å˜æŒ‡å‘ã€‚</p>
<h2 id="å­—ç¬¦ä¸²æ“ä½œ"><a class="header-anchor" href="#å­—ç¬¦ä¸²æ“ä½œ">Â¶</a>å­—ç¬¦ä¸²æ“ä½œ</h2>
<h3 id="æ¯”è¾ƒ"><a class="header-anchor" href="#æ¯”è¾ƒ">Â¶</a>æ¯”è¾ƒ</h3>
<p>ç”¨a.equals(b)ï¼Œå¿½ç•¥å¤§å°å†™æ¯”è¾ƒï¼Œä½¿ç”¨equalsIgnoreCase()æ–¹æ³•ã€‚â€˜==â€™æ¯”è¾ƒçš„æ˜¯ä¸¤è€…çš„å¼•ç”¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="string">"hello"</span>;</span><br><span class="line">        String s2 = <span class="string">"HELLO"</span>.toLowerCase();</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœç´¢"><a class="header-anchor" href="#æœç´¢">Â¶</a>æœç´¢</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"Hello"</span>.contains(<span class="string">"ll"</span>); <span class="comment">//true</span></span><br><span class="line"><span class="string">"Hello"</span>.indexof(<span class="string">"l"</span>); <span class="comment">//2</span></span><br><span class="line"><span class="string">"Hello"</span>.lastIndexof(<span class="string">"l"</span>); <span class="comment">//3</span></span><br><span class="line"><span class="string">"Hello"</span>.startsWith(<span class="string">"He"</span>); <span class="comment">//ture</span></span><br><span class="line"><span class="string">"Hello"</span>.endWith(<span class="string">"lo"</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3 id="æå–"><a class="header-anchor" href="#æå–">Â¶</a>æå–</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"Hello"</span>.substring(<span class="number">2</span>); <span class="comment">//"llo"</span></span><br><span class="line"><span class="string">"Hello"</span>.substring(<span class="number">2</span>,<span class="number">4</span>) <span class="comment">//"llo"</span></span><br></pre></td></tr></table></figure>
<h3 id="å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦"><a class="header-anchor" href="#å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦">Â¶</a>å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦</h3>
<p>ä½¿ç”¨.trim()ï¼ŒåŒ…æ‹¬\t,\n,\r</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"  \tHello\r\n "</span>.trim(); <span class="comment">// "Hello"</span></span><br></pre></td></tr></table></figure>
<p>strip()åŒæ—¶è¿˜ä¼šç§»é™¤\u3000ï¼Œä¸­æ–‡ç©ºæ ¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">"\u3000Hello\u3000"</span>.strip(); <span class="comment">// "Hello"</span></span><br><span class="line"><span class="comment">//ç§»é™¤é¦–æˆ–å°¾</span></span><br><span class="line"><span class="string">" Hello "</span>.stripLeading(); <span class="comment">// "Hello "</span></span><br><span class="line"><span class="string">" Hello "</span>.stripTrailing(); <span class="comment">// " Hello"</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦"><a class="header-anchor" href="#åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦">Â¶</a>åˆ¤ç©ºå’Œç©ºç™½å­—ç¬¦</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">""</span>.isEmpty(); <span class="comment">// trueï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸º0</span></span><br><span class="line"><span class="string">"  "</span>.isEmpty(); <span class="comment">// falseï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0</span></span><br><span class="line"><span class="string">"  \n"</span>.isBlank(); <span class="comment">// trueï¼Œå› ä¸ºåªåŒ…å«ç©ºç™½å­—ç¬¦</span></span><br><span class="line"><span class="string">" Hello "</span>.isBlank(); <span class="comment">// falseï¼Œå› ä¸ºåŒ…å«éç©ºç™½å­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h3 id="æ›¿æ¢å­—ä¸²"><a class="header-anchor" href="#æ›¿æ¢å­—ä¸²">Â¶</a>æ›¿æ¢å­—ä¸²</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"hello"</span>;</span><br><span class="line">s.replace(<span class="string">'l'</span>, <span class="string">'w'</span>); <span class="comment">// "hewwo"ï¼Œæ‰€æœ‰å­—ç¬¦'l'è¢«æ›¿æ¢ä¸º'w'</span></span><br><span class="line">s.replace(<span class="string">"ll"</span>, <span class="string">"~~"</span>); <span class="comment">// "he~~o"ï¼Œæ‰€æœ‰å­ä¸²"ll"è¢«æ›¿æ¢ä¸º"~~"</span></span><br></pre></td></tr></table></figure>
<p>æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"A,,B;C ,D"</span>;</span><br><span class="line">s.replaceAll(<span class="string">"[\\,\\;\\s]+"</span>, <span class="string">","</span>); <span class="comment">// "A,B,C,D"</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ†å‰²åˆå¹¶"><a class="header-anchor" href="#åˆ†å‰²åˆå¹¶">Â¶</a>åˆ†å‰²åˆå¹¶</h3>
<h2 id="ï¿¼9"><a class="header-anchor" href="#ï¿¼9">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String s = <span class="string">"A,B,C,D"</span>;</span><br><span class="line"><span class="comment">//åˆ†å‰²</span></span><br><span class="line">String[] ss = s.split(<span class="string">"\\,"</span>); <span class="comment">// &#123;"A", "B", "C", "D"&#125;</span></span><br><span class="line"><span class="comment">//åˆå¹¶å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">String[] arr = &#123;<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>&#125;;</span><br><span class="line">String s = String.join(<span class="string">"***"</span>, arr); <span class="comment">// "A***B***C"</span></span><br></pre></td></tr></table></figure></h2>
<h1>ç±»å‹è½¬æ¢</h1>
<h3 id="è½¬æ¢æˆString"><a class="header-anchor" href="#è½¬æ¢æˆString">Â¶</a>è½¬æ¢æˆString()</h3>
<p>ç”¨é™æ€æ–¹æ³•valueof(),è¿™æ˜¯é‡è½½æ–¹æ³•ï¼Œè‡ªåŠ¨æ£€æµ‹ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String.valueOf(<span class="number">123</span>); <span class="comment">// "123"</span></span><br><span class="line">String.valueOf(<span class="number">45.67</span>); <span class="comment">// "45.67"</span></span><br><span class="line">String.valueOf(<span class="keyword">true</span>); <span class="comment">// "true"</span></span><br><span class="line">String.valueOf(<span class="keyword">new</span> Object()); <span class="comment">// ç±»ä¼¼java.lang.Object@636be97c</span></span><br></pre></td></tr></table></figure>
<h3 id="Stringè½¬æ¢æˆå…¶ä»–ç±»å‹"><a class="header-anchor" href="#Stringè½¬æ¢æˆå…¶ä»–ç±»å‹">Â¶</a>Stringè½¬æ¢æˆå…¶ä»–ç±»å‹</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è½¬æ¢æˆint</span></span><br><span class="line"><span class="keyword">int</span> n1 = Integer.parseInt(<span class="string">"123"</span>);</span><br><span class="line"><span class="keyword">int</span> n2 = Integer.parseInt(<span class="string">"ff"</span>, <span class="number">16</span>); <span class="comment">// æŒ‰åå…­è¿›åˆ¶è½¬æ¢ï¼Œ255</span></span><br><span class="line"><span class="comment">//Stringè½¬æ¢æˆboolean</span></span><br><span class="line"><span class="keyword">boolean</span> b1 = Boolean.parseBoolean(<span class="string">"true"</span>); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">boolean</span> b2 = Boolean.parseBoolean(<span class="string">"FALSE"</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼ŒIntegeræœ‰ä¸ªgetInteger(String)æ–¹æ³•ï¼Œå®ƒä¸æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºintï¼Œè€Œæ˜¯æŠŠè¯¥å­—ç¬¦ä¸²å¯¹åº”çš„ç³»ç»Ÿå˜é‡è½¬æ¢ä¸ºIntegerï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer.getInteger(<span class="string">"java.version"</span>); <span class="comment">// ç‰ˆæœ¬å·ï¼Œ11</span></span><br></pre></td></tr></table></figure>
<ul>
<li>énewç”Ÿæˆçš„Integerå˜é‡æŒ‡å‘çš„æ˜¯é™æ€å¸¸é‡æ± ä¸­cacheæ•°ç»„ä¸­å­˜å‚¨çš„æŒ‡å‘äº†å †ä¸­çš„Integerå¯¹è±¡ï¼Œè€Œnew Integer()ç”Ÿæˆçš„å˜é‡æŒ‡å‘å †ä¸­æ–°å»ºçš„å¯¹è±¡ï¼Œä¸¤è€…åœ¨å†…å­˜ä¸­çš„å¯¹è±¡å¼•ç”¨ï¼ˆåœ°å€ï¼‰ä¸åŒã€‚</li>
<li>å¯¹äºä¸¤ä¸ªénewç”Ÿæˆçš„Integerå¯¹è±¡ï¼Œè¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¦‚æœä¸¤ä¸ªå˜é‡çš„å€¼åœ¨åŒºé—´-128åˆ°127ä¹‹é—´ï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºtrueï¼Œå¦‚æœä¸¤ä¸ªå˜é‡çš„å€¼ä¸åœ¨æ­¤åŒºé—´ï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºfalseã€‚<br>
åŸå› ï¼š javaåœ¨ç¼–è¯‘Integer i = 100 ;æ—¶ï¼Œä¼šç¿»è¯‘æˆä¸ºInteger i = Integer.valueOf(100)ã€‚è€Œjava APIä¸­å¯¹Integerç±»å‹çš„valueOfçš„å®šä¹‰å¦‚ä¸‹ï¼Œå¯¹äº-128åˆ°127ä¹‹é—´çš„æ•°ï¼Œä¼šè¿›è¡Œç¼“å­˜ï¼ŒInteger i = 127æ—¶ï¼Œä¼šå°†127è¿™ä¸ªIntegerå¯¹è±¡è¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡å†å†™Integer j = 127æ—¶ï¼Œå°±ä¼šç›´æ¥ä»ç¼“å­˜ä¸­å–ï¼Œå°±ä¸ä¼šnewäº†ã€‚</li>
</ul>
<h3 id="ä¸char-ç›¸äº’è½¬æ¢"><a class="header-anchor" href="#ä¸char-ç›¸äº’è½¬æ¢">Â¶</a>ä¸char[]ç›¸äº’è½¬æ¢</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span>[] cs = <span class="string">"Hello"</span>.toCharArray(); <span class="comment">// String -&gt; char[]</span></span><br><span class="line">String s = <span class="keyword">new</span> String(cs); <span class="comment">// char[] -&gt; String</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¿®æ”¹äº†char[]æ•°ç»„ï¼ŒStringå¹¶ä¸ä¼šæ”¹å˜ã€‚è¿™æ˜¯å› ä¸ºé€šè¿‡new String(char[])åˆ›å»ºæ–°çš„Stringå®ä¾‹æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç›´æ¥å¼•ç”¨ä¼ å…¥çš„char[]æ•°ç»„ï¼Œè€Œæ˜¯ä¼šå¤åˆ¶ä¸€ä»½ã€‚</p>
<p>å¦‚æœç±»å†…éƒ¨ç›´æ¥å¼•ç”¨äº†å¤–éƒ¨ä¼ å…¥çš„int[]æ•°ç»„ï¼Œè€Œå¤–éƒ¨ä»£ç å¯¹int[]æ•°ç»„çš„ä¿®æ”¹ï¼Œä¼šå½±å“åˆ°Scoreç±»çš„å­—æ®µã€‚å¦‚æœå¤–éƒ¨ä»£ç ä¸å¯ä¿¡ï¼Œè¿™å°±ä¼šé€ æˆå®‰å…¨éšæ‚£ã€‚</p>
<h2 id="ï¿¼14"><a class="header-anchor" href="#ï¿¼14">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] scores = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">88</span>, <span class="number">77</span>, <span class="number">51</span>, <span class="number">66</span> &#125;;</span><br><span class="line">        Score s = <span class="keyword">new</span> Score(scores);</span><br><span class="line">        s.printScores();</span><br><span class="line">        scores[<span class="number">2</span>] = <span class="number">99</span>;</span><br><span class="line">        s.printScores();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Score</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] scores;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Score</span><span class="params">(<span class="keyword">int</span>[] scores)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨clone()æ–¹æ³•æ‹·è´å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å¤åˆ¶å¼•ç”¨</span></span><br><span class="line">        <span class="keyword">this</span>.scores = scores.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printScores</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Arrays.toString(scores));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h1>å­—ç¬¦ç¼–ç </h1>
<ul>
<li>ç»Ÿä¸€å…¨çƒçš„ç¼–ç Unicodeç¼–ç éœ€è¦ä¸¤ä¸ªæˆ–è€…æ›´å¤šå­—èŠ‚è¡¨ç¤ºï¼ŒASCIIä¸€ä¸ªå­—èŠ‚ã€GB2312ä¸¤ä¸ªå­—èŠ‚ã€‚</li>
<li>UTF-8æŠŠå›ºå®šé•¿åº¦çš„Unicodeç¼–ç å˜æˆ1ï½4å­—èŠ‚çš„å˜é•¿ç¼–ç ã€‚ç¼–ç ä¾é é«˜å­—èŠ‚ä½æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ç©¶ç«Ÿæ˜¯å‡ ä¸ªå­—èŠ‚ï¼Œç”¨æ¥ä½œä¸ºä¼ è¾“ç¼–ç ã€‚</li>
<li>è½¬æ¢ç¼–ç åï¼Œå°±ä¸å†æ˜¯charç±»å‹ï¼Œè€Œæ˜¯byteç±»å‹è¡¨ç¤ºçš„æ•°ç»„ã€‚</li>
</ul>
<h4 id="å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚"><a class="header-anchor" href="#å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚">Â¶</a>å§‹ç»ˆç‰¢è®°ï¼šJavaçš„Stringå’Œcharåœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] b1 = <span class="string">"Hello"</span>.getBytes(); <span class="comment">// æŒ‰ç³»ç»Ÿé»˜è®¤ç¼–ç è½¬æ¢ï¼Œä¸æ¨è</span></span><br><span class="line"><span class="keyword">byte</span>[] b2 = <span class="string">"Hello"</span>.getBytes(<span class="string">"UTF-8"</span>); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="keyword">byte</span>[] b2 = <span class="string">"Hello"</span>.getBytes(<span class="string">"GBK"</span>); <span class="comment">// æŒ‰GBKç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="keyword">byte</span>[] b3 = <span class="string">"Hello"</span>.getBytes(StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="comment">//å°†å­—èŠ‚ç è½¬å›Stringç±»å‹</span></span><br><span class="line"><span class="keyword">byte</span>[] b = ...</span><br><span class="line">String s1 = <span class="keyword">new</span> String(b, <span class="string">"GBK"</span>); <span class="comment">// æŒ‰GBKè½¬æ¢</span></span><br><span class="line">String s2 = <span class="keyword">new</span> String(b, StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8è½¬æ¢</span></span><br></pre></td></tr></table></figure>
<pre><code>è€Œè¾ƒæ–°çš„JDKç‰ˆæœ¬çš„Stringåˆ™ä»¥byte[]å­˜å‚¨ï¼šå¦‚æœStringä»…åŒ…å«ASCIIå­—ç¬¦ï¼Œåˆ™æ¯ä¸ªbyteå­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦åˆ™ï¼Œæ¯ä¸¤ä¸ªbyteå­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå› ä¸ºå¤§é‡çš„é•¿åº¦è¾ƒçŸ­çš„Stringé€šå¸¸ä»…åŒ…å«ASCIIå­—ç¬¦ï¼š
</code></pre>
<h2 id="ï¿¼16"><a class="header-anchor" href="#ï¿¼16">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span> coder; <span class="comment">// 0 = LATIN1, 1 = UTF16</span></span><br></pre></td></tr></table></figure></h2>
<h1>StringBuilder</h1>
<p>s = s + â€œ,â€ + i;å¯ä»¥ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œç„¶åæ‰”æ‰æ—§çš„å­—ç¬¦ä¸²ã€‚è¿™æ ·ï¼Œç»å¤§éƒ¨åˆ†å­—ç¬¦ä¸²éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¸ä½†æµªè´¹å†…å­˜ï¼Œè¿˜ä¼šå½±å“GCæ•ˆç‡ã€‚<br>
StringBuilderï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå¯ä»¥é¢„åˆ†é…ç¼“å†²åŒºï¼Œæ–°å¢å­—ç¬¦æ—¶ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ä¸´æ—¶å¯¹è±¡ï¼š</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">//ç”³è¯·ç¼“å†²åŒºç©ºé—´</span></span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="number">1024</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">    <span class="comment">//ç”¨appendå¢åŠ å­—ç¬¦ä¸²</span></span><br><span class="line">    sb.append(<span class="string">','</span>);</span><br><span class="line">    sb.append(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">String s = sb.toString();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥é“¾å¼æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder(<span class="number">1024</span>);</span><br><span class="line">        sb.append(<span class="string">"Mr "</span>)</span><br><span class="line">          .append(<span class="string">"Bob"</span>)</span><br><span class="line">          .append(<span class="string">"!"</span>)</span><br><span class="line">          .insert(<span class="number">0</span>, <span class="string">"Hello, "</span>);</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é“¾å¼æ“ä½œçš„å…³é”®æ˜¯ï¼Œappend()æ–¹æ³•ä¼šè¿”å›thisï¼Œä»è€Œä¸æ–­è°ƒç”¨è‡ªèº«ã€‚</p>
<p>æ³¨æ„ï¼šå¯¹äºæ™®é€šçš„å­—ç¬¦ä¸²+æ“ä½œï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬å°†å…¶æ”¹å†™ä¸ºStringBuilderï¼Œå› ä¸ºJavaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±è‡ªåŠ¨æŠŠå¤šä¸ªè¿ç»­çš„+æ“ä½œç¼–ç ä¸ºStringConcatFactoryçš„æ“ä½œã€‚åœ¨è¿è¡ŒæœŸï¼ŒStringConcatFactoryä¼šè‡ªåŠ¨æŠŠå­—ç¬¦ä¸²è¿æ¥æ“ä½œä¼˜åŒ–ä¸ºæ•°ç»„å¤åˆ¶æˆ–è€…StringBuilderæ“ä½œã€‚</p>
<h2 id="StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚"><a class="header-anchor" href="#StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚">Â¶</a>StringBuilderå’ŒStringBufferæ¥å£å®Œå…¨ç›¸åŒï¼ŒåŒæ­¥ä¼šå¸¦æ¥æ‰§è¡Œé€Ÿåº¦çš„ä¸‹é™ï¼Œç°åœ¨å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨StringBufferã€‚</h2>
<h1>StringJoiner</h1>
<p>è¿æ¥å­—ç¬¦ä¸²æ•°ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.StringJoiner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] names = &#123;<span class="string">"Bob"</span>, <span class="string">"Alice"</span>, <span class="string">"Grace"</span>&#125;;</span><br><span class="line">        <span class="keyword">var</span> sj = <span class="keyword">new</span> StringJoiner(<span class="string">", "</span>, <span class="string">"Hello "</span>, <span class="string">"!"</span>);</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            sj.add(name);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sj.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šè¿æ¥ç¬¦ï¼Œ å¼€å¤´ï¼Œç»“å°¾</span></span><br></pre></td></tr></table></figure>
<p>å…¶æºç å†…éƒ¨å°±æ˜¯ç”¨StringBuilderå®ç°çš„ã€‚<br>
String.join()ï¼šé™æ€æ–¹æ³•ï¼Œå…¶å†…éƒ¨æ˜¯ç”¨StringJoinerå®ç°çš„ï¼Œä½†æ˜¯ä¸èƒ½åŠ å¼€å¤´å’Œç»“å°¾ã€‚</p>
<h2 id="ï¿¼19"><a class="header-anchor" href="#ï¿¼19">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] names = &#123;<span class="string">"Bob"</span>, <span class="string">"Alice"</span>, <span class="string">"Grace"</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> s = String.join(<span class="string">", "</span>, names);</span><br></pre></td></tr></table></figure></h2>
<h1>åŒ…è£…ç±»å‹ Wrapper class</h1>
<p>Javaçš„æ•°æ®ç±»å‹åˆ†ä¸¤ç§ï¼š</p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼šbyteï¼Œshortï¼Œintï¼Œlongï¼Œbooleanï¼Œfloatï¼Œdoubleï¼Œchar</li>
<li>å¼•ç”¨ç±»å‹ï¼šæ‰€æœ‰classå’Œinterfaceç±»å‹<br>
å¼•ç”¨ç±»å‹å¯ä»¥ä¸ºnullï¼ŒåŸºæœ¬ç±»å‹ä¸è¡Œã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">100</span>;</span><br><span class="line">        <span class="comment">// é€šè¿‡newæ“ä½œç¬¦åˆ›å»ºIntegerå®ä¾‹(ä¸æ¨èä½¿ç”¨,ä¼šæœ‰ç¼–è¯‘è­¦å‘Š):</span></span><br><span class="line">        Integer n1 = <span class="keyword">new</span> Integer(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(int)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        Integer n2 = Integer.valueOf(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(String)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        Integer n3 = Integer.valueOf(<span class="string">"100"</span>);</span><br><span class="line">        System.out.println(n3.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Auto-Boxing"><a class="header-anchor" href="#Auto-Boxing">Â¶</a>Auto Boxing</h2>
<p>Javaç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åœ¨intå’ŒIntegerä¹‹é—´è½¬å‹(è‡ªåŠ¨åŒ…è£…ï¼Œè‡ªåŠ¨æ‹†ç®±)ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†intå˜ä¸ºIntegerèµ‹å€¼ï¼šauto boxing</span></span><br><span class="line">Integer n = <span class="number">100</span>; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.valueOf(int)</span></span><br><span class="line"><span class="keyword">int</span> x = n; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.intValue()</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è£…ç®±å’Œæ‹†ç®±ä¼šå½±å“ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºç¼–è¯‘åçš„classä»£ç æ˜¯ä¸¥æ ¼åŒºåˆ†åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„ã€‚</li>
<li>è‡ªåŠ¨æ‹†ç®±æ‰§è¡Œæ—¶å¯èƒ½ä¼šæŠ¥NullPointerExceptionã€‚å°†nullå€¼çš„Integerèµ‹å€¼ç»™intã€‚</li>
</ul>
<h2 id="æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»"><a class="header-anchor" href="#æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»">Â¶</a>æ‰€æœ‰åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»</h2>
<p>ä¸€æ—¦åˆ›å»ºäº†Integer()ç±»å‹å°±æ˜¯ç”¨ä¸å˜çš„ã€‚Integerå¿…é¡»ç”¨equals()æ¯”è¾ƒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer x = <span class="number">127</span>;</span><br><span class="line">        Integer y = <span class="number">127</span>;</span><br><span class="line">        Integer m = <span class="number">99999</span>;</span><br><span class="line">        Integer n = <span class="number">99999</span>;</span><br><span class="line">        System.out.println(<span class="string">"x == y: "</span> + (x==y)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">"m == n: "</span> + (m==n)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(<span class="string">"x.equals(y): "</span> + x.equals(y)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">"m.equals(n): "</span> + m.equals(n)); <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºIntegeræ˜¯ä¸å˜ç±»ï¼Œç¼–è¯‘å™¨æŠŠInteger x = 127;è‡ªåŠ¨å˜ä¸ºInteger x = Integer.valueOf(127);ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼ŒInteger.valueOf()å¯¹äºè¾ƒå°çš„æ•°ï¼Œå§‹ç»ˆè¿”å›ç›¸åŒçš„å®ä¾‹ï¼Œå› æ­¤ï¼Œ==æ¯”è¾ƒâ€œæ°å¥½â€ä¸ºtrueï¼Œä½†æˆ‘ä»¬ç»ä¸èƒ½å› ä¸ºJavaæ ‡å‡†åº“çš„Integerå†…éƒ¨æœ‰ç¼“å­˜ä¼˜åŒ–å°±ç”¨==æ¯”è¾ƒï¼Œå¿…é¡»ç”¨equals()æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªIntegerã€‚<br>
æ–¹æ³•1ï¼šInteger n = new Integer(100);<br>
æ–¹æ³•2ï¼šInteger n = Integer.valueOf(100);</p>
<ul>
<li>æ–¹æ³•2æ›´å¥½ï¼ŒInteger.valueOf()å°±æ˜¯é™æ€å·¥å‚æ–¹æ³•ï¼Œå®ƒå°½å¯èƒ½åœ°è¿”å›ç¼“å­˜çš„å®ä¾‹ä»¥èŠ‚çœå†…å­˜ã€‚</li>
<li>åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œå°½é‡ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨newæ“ä½œç¬¦ã€‚</li>
</ul>
<h2 id="è¿›åˆ¶è½¬æ¢"><a class="header-anchor" href="#è¿›åˆ¶è½¬æ¢">Â¶</a>è¿›åˆ¶è½¬æ¢</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Integerå°†Stringè§£ææˆæ•´æ•°</span></span><br><span class="line"><span class="keyword">int</span> x1 = Integer.parseInt(<span class="string">"100"</span>); <span class="comment">// 100</span></span><br><span class="line"><span class="keyword">int</span> x2 = Integer.parseInt(<span class="string">"100"</span>, <span class="number">16</span>); <span class="comment">// 256,å› ä¸ºæŒ‰16è¿›åˆ¶è§£æ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ•´æ•°æ ¼å¼åŒ–æˆç‰¹å®šå­—ç¬¦</span></span><br><span class="line">```java</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>)); <span class="comment">// "100",è¡¨ç¤ºä¸º10è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>, <span class="number">36</span>)); <span class="comment">// "2s",è¡¨ç¤ºä¸º36è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toHexString(<span class="number">100</span>)); <span class="comment">// "64",è¡¨ç¤ºä¸º16è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toOctalString(<span class="number">100</span>)); <span class="comment">// "144",è¡¨ç¤ºä¸º8è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toBinaryString(<span class="number">100</span>)); <span class="comment">// "1100100",è¡¨ç¤ºä¸º2è¿›åˆ¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜åœ¨ï¼Œæ¯”å¦‚intæ˜¯4å­—èŠ‚äºŒè¿›åˆ¶ã€‚<br>
System.out.println(n);æ˜¯ä¾é æ ¸å¿ƒåº“è‡ªåŠ¨æŠŠæ•´æ•°æ ¼å¼åŒ–ä¸º10è¿›åˆ¶è¾“å‡ºå¹¶æ˜¾ç¤ºã€‚</p>
<ul>
<li>ç¨‹åºè®¾è®¡çš„é‡è¦åŸåˆ™ï¼š å­˜å‚¨å’Œæ˜¾ç¤ºç›¸åˆ†ç¦»</li>
<li>æ‰€æœ‰çš„æ•´æ•°å’Œæµ®ç‚¹æ•°çš„åŒ…è£…ç±»å‹éƒ½ç»§æ‰¿è‡ªNumberï¼Œå› æ­¤ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç›´æ¥é€šè¿‡åŒ…è£…ç±»å‹è·å–å„ç§åŸºæœ¬ç±»å‹ã€‚</li>
</ul>
<h2 id="æ— ç¬¦å·æ•´å‹"><a class="header-anchor" href="#æ— ç¬¦å·æ•´å‹">Â¶</a>æ— ç¬¦å·æ•´å‹</h2>
<h2 id="ï¿¼24-è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚"><a class="header-anchor" href="#ï¿¼24-è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†byteè½¬ä¸ºæ— ç¬¦å·int</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span> x = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">byte</span> y = <span class="number">127</span>;</span><br><span class="line">        System.out.println(Byte.toUnsignedInt(x)); <span class="comment">// 255</span></span><br><span class="line">        System.out.println(Byte.toUnsignedInt(y)); <span class="comment">// 127</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>
è¿˜å¯ä»¥å°†intè½¬æˆæ— ç¬¦å·shortï¼Œshortè½¬æˆæ— ç¬¦å·longã€‚</h2>
<h1>JavaBean</h1>
<ul>
<li>classä¸­ï¼Œä¸€èˆ¬privateå®šä¹‰å­—æ®µï¼Œpublicæ–¹æ³•è®¿é—®å­—æ®µã€‚å¦‚æœclassçš„å±æ€§(property)è¯»(getter)å†™(setter)æ–¹æ³•æ»¡è¶³ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Type <span class="title">getXyz</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// å†™æ–¹æ³•:</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setXyz</span><span class="params">(Type value)</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§classå³ä¸ºJavaBeanã€‚</p>
<ul>
<li>booleanå­—æ®µæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„è¯»æ–¹æ³•ä¸€èˆ¬å‘½åä¸ºisXyz()ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isChild</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">// å†™æ–¹æ³•:</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChild</span><span class="params">(<span class="keyword">boolean</span> value)</span></span></span><br></pre></td></tr></table></figure>
<p>åªæœ‰setterç§°ä¸ºï¼ˆwrite-onlyï¼‰ï¼Œåªæœ‰getterç§°ä¸ºï¼ˆread-onlyï¼‰ã€‚</p>
<ul>
<li>ä½¿ç”¨Introspector.getBeanInfo()å¯ä»¥è·å–å±æ€§åˆ—è¡¨ã€‚</li>
</ul>
<h2 id="ï¿¼27"><a class="header-anchor" href="#ï¿¼27">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.beans.*;</span><br></pre></td></tr></table></figure></h2>
<h1>æšä¸¾ç±»</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Weekdays&#123;</span><br><span class="line">    SUN, MON, TUE, WED, THU, FRI, SAT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æšä¸¾ç±»æ—¶ï¼Œç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦åœ¨æšä¸¾çš„é›†åˆä¸­ã€‚</p>
<ul>
<li>å¯ä»¥æ£€æŸ¥å‡ºç±»å‹</li>
<li>ä¸å¯ä»¥å¼•ç”¨éæšä¸¾ç±»å‹çš„å€¼</li>
<li>ä¸åŒç±»å‹çš„æšä¸¾ä¸èƒ½äº’ç›¸æ¯”è¾ƒæˆ–è€…èµ‹å€¼</li>
</ul>
<h3 id="enumçš„æ¯”è¾ƒ"><a class="header-anchor" href="#enumçš„æ¯”è¾ƒ">Â¶</a>enumçš„æ¯”è¾ƒ</h3>
<p>å¼•ç”¨ç±»å‹åªèƒ½ç”¨equals()ï¼Œä½†æ˜¯enumå¯ä»¥ç”¨==ï¼Œå› ä¸ºenumçš„æ¯ä¸€ä¸ªå¸¸é‡åœ¨JVMåªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<h3 id="enumç±»å‹"><a class="header-anchor" href="#enumç±»å‹">Â¶</a>enumç±»å‹</h3>
<ul>
<li>enumç»§æ‰¿è‡ªJava.lang.Enumï¼Œä¸”æ— æ³•è¢«ç»§æ‰¿ã€‚</li>
<li>æ— æ³•é€šè¿‡newåˆ›å»ºenumçš„å®ä¾‹</li>
<li>enumå¯ä»¥ç”¨switch</li>
</ul>
<h3 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">Â¶</a>æ–¹æ³•</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å¸¸é‡å</span></span><br><span class="line">String s = Weekday.SUN.name(); <span class="comment">// "SUN"</span></span><br><span class="line"><span class="comment">//è¿”å›é¡ºåº</span></span><br><span class="line"><span class="keyword">int</span> n = Weekday.MON.ordinal(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç»™æšä¸¾ç±»å‹æ·»åŠ å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Weekday day = Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day.dayValue == <span class="number">6</span> || day.dayValue == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Work at home!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Work at office!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> Weekday &#123;</span><br><span class="line">    MON(<span class="number">1</span>), TUE(<span class="number">2</span>), WED(<span class="number">3</span>), THU(<span class="number">4</span>), FRI(<span class="number">5</span>), SAT(<span class="number">6</span>), SUN(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> dayValue;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Weekday</span><span class="params">(<span class="keyword">int</span> dayValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dayValue = dayValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è¦†å†™æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Weekday day = Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day.dayValue == <span class="number">6</span> || day.dayValue == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at home!"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at office!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Weekday &#123;</span><br><span class="line">    MON(<span class="number">1</span>, <span class="string">"æ˜ŸæœŸä¸€"</span>), TUE(<span class="number">2</span>, <span class="string">"æ˜ŸæœŸäºŒ"</span>), WED(<span class="number">3</span>, <span class="string">"æ˜ŸæœŸä¸‰"</span>), THU(<span class="number">4</span>, <span class="string">"æ˜ŸæœŸå››"</span>), FRI(<span class="number">5</span>, <span class="string">"æ˜ŸæœŸäº”"</span>), SAT(<span class="number">6</span>, <span class="string">"æ˜ŸæœŸå…­"</span>), SUN(<span class="number">0</span>, <span class="string">"æ˜ŸæœŸæ—¥"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> dayValue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String chinese;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Weekday</span><span class="params">(<span class="keyword">int</span> dayValue, String chinese)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dayValue = dayValue;</span><br><span class="line">        <span class="keyword">this</span>.chinese = chinese;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.chinese;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><b>æ³¨æ„ï¼Œåˆ¤æ–­æšä¸¾å¸¸é‡çš„åå­—ä¸€å®šè¦ç”¨name()ï¼Œä¸å¯ä»¥ç”¨toString()</b></p>
<h3 id="Switch"><a class="header-anchor" href="#Switch">Â¶</a>Switch</h3>
<h2 id="ï¿¼32-åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚"><a class="header-anchor" href="#ï¿¼32-åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(day) &#123;</span><br><span class="line">        <span class="keyword">case</span> MON:</span><br><span class="line">        <span class="keyword">case</span> TUE:</span><br><span class="line">        <span class="keyword">case</span> WED:</span><br><span class="line">        <span class="keyword">case</span> THU:</span><br><span class="line">        <span class="keyword">case</span> FRI:</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at office!"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SAT:</span><br><span class="line">        <span class="keyword">case</span> SUN:</span><br><span class="line">            System.out.println(<span class="string">"Today is "</span> + day + <span class="string">". Work at home!"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"cannot process "</span> + day);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><br>
åŠ ä¸Šdefaultè¯­å¥ï¼Œå¯ä»¥åœ¨æ¼å†™æŸä¸ªæšä¸¾å¸¸é‡æ—¶è‡ªåŠ¨æŠ¥é”™ï¼Œä»è€ŒåŠæ—¶å‘ç°é”™è¯¯ã€‚</h2>
<h1>BigInteger</h1>
<p>Cpuæœ€å¤§çš„èŒƒå›´æ˜¯64ä½longï¼Œå¯ä»¥é€šè¿‡CpuæŒ‡ä»¤ç›´æ¥è®¡ç®—ã€‚<br>
è¶…è¿‡longçš„èŒƒå›´ï¼Œç”¨java.math.BigIntegerç±»å‹ï¼Œå…¶å†…éƒ¨ç”¨ä¸€ä¸ªint[]æ¨¡æ‹Ÿéå¸¸å¤§çš„æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">BigInteger bi = <span class="keyword">new</span> BigInteger(<span class="string">"1234567890"</span>);</span><br><span class="line">System.out.println(bi.pow(<span class="number">5</span>)); <span class="comment">// 2867971860299718107233761438093672048294900000</span></span><br><span class="line"><span class="comment">//è¿ç®—æ—¶</span></span><br><span class="line">BigInteger i1 = <span class="keyword">new</span> BigInteger(<span class="string">"1234567890"</span>);</span><br><span class="line">BigInteger i2 = <span class="keyword">new</span> BigInteger(<span class="string">"12345678901234567890"</span>);</span><br><span class="line">BigInteger sum = i1.add(i2); <span class="comment">// 12345678902469135780</span></span><br><span class="line"><span class="comment">//è½¬æ¢ç±»å‹</span></span><br><span class="line">BigInteger i = <span class="keyword">new</span> BigInteger(<span class="string">"123456789000"</span>);</span><br><span class="line">System.out.println(i.longValue()); <span class="comment">// 123456789000</span></span><br><span class="line">System.out.println(i.multiply(i).longValueExact()); <span class="comment">// java.lang.ArithmeticException: BigInteger out of long range</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¹Ÿæ˜¯ä¸å˜ç±»ï¼Œç»§æ‰¿è‡ªnumberã€‚<br>
è½¬æ¢ä¸ºbyteï¼šbyteValue()<br>
è½¬æ¢ä¸ºshortï¼šshortValue()<br>
è½¬æ¢ä¸ºintï¼šintValue()<br>
è½¬æ¢ä¸ºlongï¼šlongValue()<br>
è½¬æ¢ä¸ºfloatï¼šfloatValue()<br>
è½¬æ¢ä¸ºdoubleï¼šdoubleValue()</p>
<h2 id="BigDecimal"><a class="header-anchor" href="#BigDecimal">Â¶</a>BigDecimal</h2>
<h2 id="ç”¨scale-è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0-ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚"><a class="header-anchor" href="#ç”¨scale-è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0-ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚">Â¶</a>ç”¨scale()è¡¨ç¤ºå°æ•°ä½æ•°ï¼Œè¿”å›è´Ÿæ•°åˆ™è¡¨ç¤ºæ˜¯æ•´æ•°ï¼Œå¤§å°ä¸ºåé¢æœ‰å‡ ä¸ª0.<br>
ä½¿ç”¨equalsä¹Ÿè¦æ³¨æ„scaleçš„å€¼ç›¸ç­‰æ‰è¡Œã€‚<br>
BigDecimalæ˜¯ç”¨ä¸€ä¸ªBigIntegerå’Œscaleè¡¨ç¤ºçš„ã€‚</h2>
<h1>å¸¸ç”¨å·¥å…·ç±»</h1>
<h2 id="math"><a class="header-anchor" href="#math">Â¶</a>math</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ±‚ç»å¯¹å€¼</span></span><br><span class="line">Math.abs(-<span class="number">100</span>)</span><br><span class="line"><span class="comment">//å–æœ€å¤§æœ€å°å€¼</span></span><br><span class="line">Math.max(<span class="number">100</span>, <span class="number">99</span>); <span class="comment">// 100</span></span><br><span class="line">Math.min(<span class="number">1.2</span>, <span class="number">2.3</span>); <span class="comment">// 1.2</span></span><br><span class="line"><span class="comment">//è®¡ç®—næ¬¡æ–¹</span></span><br><span class="line">Math.pow(<span class="number">2</span>, <span class="number">10</span>); <span class="comment">// 2çš„10æ¬¡æ–¹=1024</span></span><br><span class="line"><span class="comment">//è®¡ç®—æ ¹å·</span></span><br><span class="line">Math.sqrt(<span class="number">2</span>); <span class="comment">// 1.414...</span></span><br><span class="line"><span class="comment">//è®¡ç®—ä»¥eä¸ºåº•çš„å¯¹æ•°</span></span><br><span class="line">Math.log(<span class="number">4</span>); <span class="comment">// 1.386...</span></span><br><span class="line"><span class="comment">//ä»¥10ä¸ºåº•</span></span><br><span class="line">Math.log10(<span class="number">100</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">//ä¸‰è§’å‡½æ•°</span></span><br><span class="line">Math.sin(<span class="number">3.14</span>); <span class="comment">// 0.00159...</span></span><br><span class="line">Math.cos(<span class="number">3.14</span>); <span class="comment">// -0.9999...</span></span><br><span class="line">Math.tan(<span class="number">3.14</span>); <span class="comment">// -0.0015...</span></span><br><span class="line">Math.asin(<span class="number">1.0</span>); <span class="comment">// 1.57079...</span></span><br><span class="line">Math.acos(<span class="number">1.0</span>); <span class="comment">// 0.0</span></span><br><span class="line"><span class="comment">//æ•°å­¦å¸¸é‡</span></span><br><span class="line"><span class="keyword">double</span> pi = Math.PI; <span class="comment">// 3.14159...</span></span><br><span class="line"><span class="keyword">double</span> e = Math.E; <span class="comment">// 2.7182818...</span></span><br><span class="line">Math.sin(Math.PI / <span class="number">6</span>); <span class="comment">// sin(Ï€/6) = 0.5</span></span><br><span class="line"><span class="comment">//éšæœºæ•°</span></span><br><span class="line">Math.random();</span><br><span class="line"><span class="comment">//[Max,Minï¼‰èŒƒå›´çš„éšæœºæ•°</span></span><br><span class="line"><span class="comment">// åŒºé—´åœ¨[MIN, MAX)çš„éšæœºæ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> x = Math.random(); <span class="comment">// xçš„èŒƒå›´æ˜¯[0,1)</span></span><br><span class="line">        <span class="keyword">double</span> min = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">double</span> max = <span class="number">50</span>;</span><br><span class="line">        <span class="keyword">double</span> y = x * (max - min) + min; <span class="comment">// yçš„èŒƒå›´æ˜¯[10,50)</span></span><br><span class="line">        <span class="keyword">long</span> n = (<span class="keyword">long</span>) y; <span class="comment">// nçš„èŒƒå›´æ˜¯[10,50)çš„æ•´æ•°</span></span><br><span class="line">        System.out.println(y);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Random"><a class="header-anchor" href="#Random">Â¶</a>Random</h2>
<p>åˆ›å»ºä¼ªéšæœºæ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾å®šç§å­</span></span><br><span class="line">Random r = <span class="keyword">new</span> Random(<span class="number">1234</span>);</span><br><span class="line">r.nextInt(); <span class="comment">// 2071575453,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextInt(<span class="number">10</span>); <span class="comment">// 5,ç”Ÿæˆä¸€ä¸ª[0,10)ä¹‹é—´çš„int</span></span><br><span class="line">r.nextLong(); <span class="comment">// 8811649292570369305,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextFloat(); <span class="comment">// 0.54335...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„float</span></span><br><span class="line">r.nextDouble(); <span class="comment">// 0.3716...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„double</span></span><br></pre></td></tr></table></figure>
<p>Math.random()å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨äº†Randomç±»</p>
<h2 id="secureRandom"><a class="header-anchor" href="#secureRandom">Â¶</a>secureRandom</h2>
<p>çœŸéšæœºæ•°ï¼Œå®‰å…¨éšæœºæ•°ã€‚SecureRandomçš„å®‰å…¨æ€§æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„å®‰å…¨çš„éšæœºç§å­æ¥ç”Ÿæˆéšæœºæ•°ã€‚è¿™ä¸ªç§å­æ˜¯é€šè¿‡CPUçš„çƒ­å™ªå£°ã€è¯»å†™ç£ç›˜çš„å­—èŠ‚ã€ç½‘ç»œæµé‡ç­‰å„ç§éšæœºäº‹ä»¶äº§ç”Ÿçš„â€œç†µâ€ã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaé¢å‘å¯¹è±¡åŸºç¡€</title>
    <url>/2020/02/29/Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<pre><code>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæ²¡æœ‰å¯¹è±¡ï¼Œæ€ä¹ˆç¼–ç¨‹ï¼Ÿï¼ŸğŸ¤”
é¡ºæ‰‹æŠŠé¢å‘æŠ½è±¡ï¼Œé¢å‘æ¥å£ç»™å­¦äº†ã€‚
</code></pre>
<a id="more"></a>
<h2 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">Â¶</a>æ–¹æ³•</h2>
<h3 id="private"><a class="header-anchor" href="#private">Â¶</a>private</h3>
<ul>
<li>privateä¿®é¥°fieldå¯ä»¥æ‹’ç»å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å†…éƒ¨æ–¹æ³•æ¥é—´æ¥ä¿®æ”¹field</li>
<li>privateä¿®é¥°methodåˆ™æ‹’ç»å¤–éƒ¨è°ƒç”¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å†…éƒ¨æ–¹æ³•æ¥è°ƒç”¨</li>
</ul>
<h3 id="this"><a class="header-anchor" href="#this">Â¶</a>this</h3>
<p>éšå¼çš„å˜é‡ï¼Œé€šè¿‡this.fieldæ¥è®¿é—®å½“å‰instanceçš„fieldã€‚</p>
<h3 id="å¯å˜å‚æ•°"><a class="header-anchor" href="#å¯å˜å‚æ•°">Â¶</a>å¯å˜å‚æ•°</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String[] name;</span><br><span class="line">    <span class="comment">//String ... ç›¸å½“äºæ•°ç»„ç±»å‹</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String... name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Hello c = <span class="keyword">new</span> Hello();</span><br><span class="line">        <span class="comment">//æ•°ç»„ç±»å‹åˆ™è¦å…ˆå®šä¹‰å¥½ï¼Œå†ä¼ å…¥å‚æ•°</span></span><br><span class="line">		<span class="comment">//String[] name = &#123;"asdf", "casdf"&#125;;</span></span><br><span class="line">        <span class="comment">//å¯å˜å‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’å‚æ•°</span></span><br><span class="line">		c.setName(<span class="string">"asdf"</span>, <span class="string">"casdf"</span>); </span><br><span class="line">		System.out.println(Arrays.toString(c.name));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è°ƒç”¨æ–¹å¯ä»¥è°ƒç”¨nullï¼Œä½†æ˜¯å¯å˜å‚æ•°ä¸å¯ä»¥ï¼Œå› ä¸ºä¼ å…¥0ä¸ªå‚æ•°æ—¶ï¼Œå®é™…ä¼ å…¥çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚</li>
</ul>
<h3 id="å‚æ•°ç»‘å®š"><a class="header-anchor" href="#å‚æ•°ç»‘å®š">Â¶</a>å‚æ•°ç»‘å®š</h3>
<h4 id="åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’"><a class="header-anchor" href="#åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’">Â¶</a>åŸºæœ¬ç±»å‹å‚æ•°çš„ä¼ é€’</h4>
<p>ä¼ é€’çš„æ˜¯æ•°æ®çš„æ‹·è´ã€‚åŒæ–¹å„è‡ªçš„åç»­ä¿®æ”¹ï¼Œäº’ä¸å½±å“ã€‚</p>
<h4 id="å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’"><a class="header-anchor" href="#å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’">Â¶</a>å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’</h4>
<ol>
<li>ä¼ é€’çš„æ˜¯å¯¹è±¡åœ°å€çš„æ‹·è´ã€‚Javaçš„å‚æ•°æ˜¯ä»¥å€¼çš„å½¢å¼ä¼ å…¥æ–¹æ³•ä¸­ï¼Œè€Œä¸æ˜¯å¼•ç”¨ä¼ é€’ã€‚åœ¨å°†ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å¯¹è±¡çš„åœ°å€ä»¥å€¼çš„æ–¹å¼ä¼ é€’åˆ°å½¢å‚ä¸­ã€‚åœ¨æ–¹æ³•ä¸­æ”¹å˜å¯¹è±¡çš„å­—æ®µå€¼ä¼šæ”¹å˜åŸå¯¹è±¡è¯¥å­—æ®µå€¼ï¼Œå› ä¸ºå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</li>
<li>ä½†æ˜¯åœ¨æ–¹æ³•ä¸­å°†æŒ‡é’ˆå¼•ç”¨äº†å…¶å®ƒå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶æ–¹æ³•é‡Œå’Œæ–¹æ³•å¤–çš„ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒçš„å¯¹è±¡ï¼Œåœ¨ä¸€ä¸ªæŒ‡é’ˆæ”¹å˜å…¶æ‰€æŒ‡å‘å¯¹è±¡çš„å†…å®¹å¯¹å¦ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡æ²¡æœ‰å½±å“.</li>
</ol>
<h2 id="ï¿¼1"><a class="header-anchor" href="#ï¿¼1">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        String bob = <span class="string">"Bob"</span>;</span><br><span class="line">        p.setName(bob); <span class="comment">// ä¼ å…¥bobå˜é‡</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Bob"</span></span><br><span class="line">        bob = <span class="string">"Alice"</span>; <span class="comment">// bobæ”¹åä¸ºAlice</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// "Bob"è¿˜æ˜¯"Alice"?</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹"><a class="header-anchor" href="#æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹">Â¶</a>æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ–å®ä¾‹</h2>
<pre><code>æ„é€ æ–¹æ³•çš„å‚æ•°æ²¡æœ‰é™åˆ¶ï¼Œåœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¹Ÿå¯ä»¥ç¼–å†™ä»»æ„è¯­å¥ã€‚ä½†æ˜¯ï¼Œå’Œæ™®é€šæ–¹æ³•ç›¸æ¯”ï¼Œæ„é€ æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼ˆä¹Ÿæ²¡æœ‰voidï¼‰ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•ï¼Œå¿…é¡»ç”¨newæ“ä½œç¬¦ã€‚
</code></pre>
<ul>
<li>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºæ„é€ æ–¹æ³•ã€‚è‡ªå®šä¹‰äº†å°±ä¸ä¼šå†ç”Ÿæˆã€‚</li>
<li>æ²¡æœ‰åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–fieldæ—¶ï¼Œå¼•ç”¨ç±»å‹çš„fieldé»˜è®¤æ˜¯nullï¼Œæ•°å€¼ç±»å‹çš„fieldç”¨é»˜è®¤å€¼ï¼Œintç±»å‹é»˜è®¤å€¼æ˜¯0ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤å€¼æ˜¯false</li>
</ul>
<h3 id="å¤šæ„é€ æ–¹æ³•"><a class="header-anchor" href="#å¤šæ„é€ æ–¹æ³•">Â¶</a>å¤šæ„é€ æ–¹æ³•</h3>
<p>ç³»ç»Ÿä¼šè‡ªåŠ¨åŒ¹é…ã€‚æ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(name, <span class="number">18</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">"Unnamed"</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•é‡è½½overload"><a class="header-anchor" href="#æ–¹æ³•é‡è½½overload">Â¶</a>æ–¹æ³•é‡è½½overload</h3>
<pre><code>åŠŸèƒ½ç±»ä¼¼ï¼Œæ–¹æ³•åç›¸åŒï¼Œå‚æ•°ä¸åŒã€‚
</code></pre>
<hr>
<h2 id="ç»§æ‰¿"><a class="header-anchor" href="#ç»§æ‰¿">Â¶</a>ç»§æ‰¿</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”¨extendså…³é”®å­—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸è¦é‡å¤nameå’Œageå­—æ®µ/æ–¹æ³•,</span></span><br><span class="line">    <span class="comment">// åªéœ€è¦å®šä¹‰æ–°å¢scoreå­—æ®µ/æ–¹æ³•:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123; â€¦ &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">int</span> score)</span> </span>&#123; â€¦ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Personï¼šè¶…ç±»ï¼ˆsuper classï¼‰ï¼Œçˆ¶ç±»ï¼ˆparent classï¼‰ï¼ŒåŸºç±»ï¼ˆbase classï¼‰ã€‚<br>
Studentï¼šå­ç±»ï¼ˆsubclassï¼‰ï¼Œæ‰©å±•ç±»ï¼ˆextended classï¼‰ã€‚</p>
<h3 id="ç»§æ‰¿æ ‘"><a class="header-anchor" href="#ç»§æ‰¿æ ‘">Â¶</a>ç»§æ‰¿æ ‘</h3>
<p>åœ¨Javaä¸­ï¼Œæ²¡æœ‰æ˜ç¡®å†™extendsçš„ç±»éƒ½ä¼šè¢«è‡ªåŠ¨åŠ ä¸Šextends Objectã€‚ä¸€ä¸ªå­ç±»è‡ªèƒ½ç»§æ‰¿è‡ªä¸€ä¸ªçˆ¶ç±»ã€‚</p>
<h3 id="è®¿é—®æƒé™"><a class="header-anchor" href="#è®¿é—®æƒé™">Â¶</a>è®¿é—®æƒé™</h3>
<p>å­ç±»ä¸èƒ½è®¿é—®çˆ¶ç±»çš„private fieldså’Œmethodsã€‚<br>
protectedå¯ä»¥å­—æ®µå’Œæ–¹æ³•çš„è®¿é—®æƒé™æ§åˆ¶åœ¨ç»§æ‰¿æ ‘å†…éƒ¨ï¼Œä¸€ä¸ªprotectedå­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å…¶å­ç±»ï¼Œä»¥åŠå­ç±»çš„å­ç±»æ‰€è®¿é—®ã€‚</p>
<h3 id="super"><a class="header-anchor" href="#super">Â¶</a>super</h3>
<ul>
<li>å­ç±»å¼•ç”¨çˆ¶ç±»çš„fieldsæ—¶ç”¨ã€‚</li>
<li>å¦‚æœçˆ¶ç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼ˆçˆ¶ç±»æœ‰è‡ªå®šä¹‰æ„é€ æ–¹æ³•ï¼‰ï¼Œå­ç±»å°±å¿…é¡»æ˜¾å¼è°ƒç”¨super()å¹¶ç»™å‡ºå‚æ•°ä»¥ä¾¿è®©ç¼–è¯‘å™¨å®šä½åˆ°çˆ¶ç±»çš„ä¸€ä¸ªåˆé€‚çš„æ„é€ æ–¹æ³•ã€‚</li>
<li>å­ç±»ä¸ä¼šç»§æ‰¿ä»»ä½•çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å­ç±»é»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç»§æ‰¿çš„ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">int</span> score)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name, age); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è½¬å‹"><a class="header-anchor" href="#è½¬å‹">Â¶</a>è½¬å‹</h3>
<pre><code>å¼•ç”¨ç±»å‹çš„å£°æ˜å’Œå¯¹è±¡ç±»å‹å¯ä»¥ä¸åŒã€‚
å¯ä»¥upcastingä¸å¯ä»¥downcastingï¼Œå¯ä»¥å°†å­ç±»è½¬å‹æˆçˆ¶ç±»ï¼Œä¸å¯ä»¥å°†çˆ¶ç±»è½¬å‹æˆå­ç±»ï¼Œå¤šå‡ºæ¥çš„åŠŸèƒ½ä¸å¯èƒ½å‡­ç©ºå¢åŠ ã€‚
</code></pre>
<ul>
<li>è½¬å‹å¤±è´¥çš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºä¼šæŠ¥ClassCastExceptionã€‚</li>
<li>å¯ä»¥ç”¨instanceofå…ˆåˆ¤æ–­ï¼Œå…¶å®é™…ä¸Šåˆ¤æ–­ä¸€ä¸ªå˜é‡æ‰€æŒ‡å‘çš„å®ä¾‹æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹ï¼Œæˆ–è€…è¿™ä¸ªç±»å‹çš„å­ç±»ã€‚å¦‚æœä¸€ä¸ªå¼•ç”¨å˜é‡ä¸ºnullï¼Œé‚£ä¹ˆå¯¹ä»»ä½•instanceofçš„åˆ¤æ–­éƒ½ä¸ºfalse</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="keyword">if</span> (p <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰åˆ¤æ–­æˆåŠŸæ‰ä¼šå‘ä¸‹è½¬å‹:</span></span><br><span class="line">    Student s = (Student) p; <span class="comment">// ä¸€å®šä¼šæˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»§æ‰¿å’Œç»„åˆ"><a class="header-anchor" href="#ç»§æ‰¿å’Œç»„åˆ">Â¶</a>ç»§æ‰¿å’Œç»„åˆ</h3>
<p>studentç»§æ‰¿è‡ªpersonï¼Œå¯ä»¥æ‹¥æœ‰ä¸€ä¸ªbookå®ä¾‹ã€‚</p>
<h2 id="ï¿¼6"><a class="header-anchor" href="#ï¿¼6">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Book book;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="å¤šæ€"><a class="header-anchor" href="#å¤šæ€">Â¶</a>å¤šæ€</h2>
<h3 id="è¦†å†™override"><a class="header-anchor" href="#è¦†å†™override">Â¶</a>è¦†å†™override</h3>
<p>å­ç±»çš„æ–¹æ³•åï¼Œå‚æ•°ä¸çˆ¶ç±»çš„ç›¸åŒï¼Œè¿”å›å€¼ä¹Ÿç›¸åŒåˆ™æ˜¯overrideã€‚å¦åˆ™æ˜¯overloadã€‚@Overrideå¯ä»¥è®©ç¼–è¯‘å™¨å¸®åŠ©æ£€æŸ¥æ˜¯å¦è¿›è¡Œäº†æ­£ç¡®çš„è¦†å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// Compile error!</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String s)</span> </span>&#123;&#125; <span class="comment">//å‚æ•°åä¸åŒï¼Œoverload</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>é‚£ä¹ˆï¼Œä¸€ä¸ªå®é™…ç±»å‹ä¸ºStudentï¼Œå¼•ç”¨ç±»å‹ä¸ºPersonçš„å˜é‡ï¼Œè°ƒç”¨å…¶run()æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯Personè¿˜æ˜¯Studentçš„run()æ–¹æ³•ï¼Ÿ
è°ƒç”¨çš„ä¸ºå®é™…ç±»å‹Studentçš„æ–¹æ³•ã€‚
</code></pre>
<h3 id="å¤šæ€-v2"><a class="header-anchor" href="#å¤šæ€-v2">Â¶</a>å¤šæ€</h3>
<pre><code>å®šä¹‰ï¼šé’ˆå¯¹æŸä¸ªç±»å‹çš„æ–¹æ³•è°ƒç”¨ï¼Œå…¶çœŸæ­£æ‰§è¡Œçš„æ–¹æ³•å–å†³äºè¿è¡Œæ—¶æœŸå®é™…ç±»å‹çš„æ–¹æ³•ã€‚
å¤šæ€çš„ç‰¹æ€§å°±æ˜¯ï¼Œè¿è¡ŒæœŸæ‰èƒ½åŠ¨æ€å†³å®šè°ƒç”¨çš„å­ç±»æ–¹æ³•ã€‚å¯¹æŸä¸ªç±»å‹è°ƒç”¨æŸä¸ªæ–¹æ³•ï¼Œæ‰§è¡Œçš„å®é™…æ–¹æ³•å¯èƒ½æ˜¯æŸä¸ªå­ç±»çš„è¦†å†™æ–¹æ³•ã€‚
é€šè¿‡overrideï¼Œå…è®¸æ·»åŠ æ›´å¤šç±»å‹çš„å­ç±»å®ç°åŠŸèƒ½æ‰©å±•ï¼Œå´ä¸éœ€è¦ä¿®æ”¹åŸºäºçˆ¶ç±»çš„ä»£ç ã€‚
</code></pre>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç»™ä¸€ä¸ªæœ‰æ™®é€šæ”¶å…¥ã€å·¥èµ„æ”¶å…¥å’Œäº«å—å›½åŠ¡é™¢ç‰¹æ®Šæ´¥è´´çš„å°ä¼™ä¼´ç®—ç¨:</span></span><br><span class="line">        Income[] incomes = <span class="keyword">new</span> Income[] &#123;</span><br><span class="line">            <span class="keyword">new</span> Income(<span class="number">3000</span>),</span><br><span class="line">            <span class="keyword">new</span> Salary(<span class="number">7500</span>),</span><br><span class="line">            <span class="keyword">new</span> StateCouncilSpecialAllowance(<span class="number">15000</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(totalTax(incomes));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">totalTax</span><span class="params">(Income... incomes)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Income income: incomes) &#123;</span><br><span class="line">            total = total + income.getTax();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">double</span> income;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Income</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.income = income;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> income * <span class="number">0.1</span>; <span class="comment">// ç¨ç‡10%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salary</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Salary</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (income &lt;= <span class="number">5000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (income - <span class="number">5000</span>) * <span class="number">0.2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StateCouncilSpecialAllowance</span> <span class="keyword">extends</span> <span class="title">Income</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StateCouncilSpecialAllowance</span><span class="params">(<span class="keyword">double</span> income)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(income);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¦†å†™Objectæ–¹æ³•"><a class="header-anchor" href="#è¦†å†™Objectæ–¹æ³•">Â¶</a>è¦†å†™Objectæ–¹æ³•</h3>
<p>objectç±»ä¸­é‡è¦çš„æ–¹æ³•ï¼š<br>
.toString(): æŠŠinstanceè¾“å‡ºä¸ºString();<br>
.equals(): åˆ¤æ–­ä¸¤ä¸ªinstancesæ˜¯å¦é€»è¾‘ç›¸ç­‰;<br>
.hashCode(): è®¡ç®—ä¸€ä¸ªinstanceçš„å“ˆå¸Œå€¼;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæ›´æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person:name="</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å½“ä¸”ä»…å½“oä¸ºPersonç±»å‹:</span></span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">            Person p = (Person) o;</span><br><span class="line">            <span class="comment">// å¹¶ä¸”nameå­—æ®µç›¸åŒæ—¶ï¼Œè¿”å›true:</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.name.equals(p.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—hash:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨super"><a class="header-anchor" href="#è°ƒç”¨super">Â¶</a>è°ƒç”¨super</h3>
<p>åœ¨å­ç±»çš„è¦†å†™æ–¹æ³•ä¸­, è°ƒç”¨çˆ¶ç±»è¢«è¦†å†™çš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student extends Person &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„hello()æ–¹æ³•:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.hello() + <span class="string">"!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸é‡final"><a class="header-anchor" href="#å¸¸é‡final">Â¶</a>å¸¸é‡final</h3>
<p>çˆ¶ç±»çš„æ–¹æ³•ä¸å…è®¸overrideï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student extends Person &#123;</span><br><span class="line">    <span class="comment">// compile error: ä¸å…è®¸è¦†å†™</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>finalç”¨äºåˆå§‹åŒ–å€¼ï¼Œåˆ™è¿™ä¸ªå˜é‡ä¸å†å¯ä»¥ä¿®æ”¹ã€‚å¯ä»¥é€šè¿‡æ„é€ æ–¹æ³•æˆ–è€…ä»£ç å—æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ï¿¼13"><a class="header-anchor" href="#ï¿¼13">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> abc;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å±€éƒ¨å˜é‡ï¼Œåˆ™ä¸å¯ä¿®æ”¹ã€‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">        t = <span class="number">1</span>; <span class="comment">// error!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h2 id="æŠ½è±¡ç±»"><a class="header-anchor" href="#æŠ½è±¡ç±»">Â¶</a>æŠ½è±¡ç±»</h2>
<p>å¦‚æœçˆ¶ç±»çš„æ–¹æ³•æœ¬èº«ä¸éœ€è¦å®ç°ä»»ä½•åŠŸèƒ½ï¼Œä»…ä»…æ˜¯ä¸ºäº†å®šä¹‰æ–¹æ³•ç­¾åï¼Œç›®çš„æ˜¯è®©å­ç±»å»è¦†å†™å®ƒï¼Œåˆ™å¯ä»¥ç”¨abstractã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç±»ä¸­æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåˆ™è¿™ä¸ªç±»æ— æ³•è¢«å®ä¾‹åŒ–ï¼Œç¼–è¯‘å™¨ä¼šæ— æ³•ç¼–è¯‘è¿™ä¸ªç±»ã€‚é™¤épersonç±»ä¹Ÿå£°æ˜abstractã€‚</p>
<h3 id="æŠ½è±¡ç±»-v2"><a class="header-anchor" href="#æŠ½è±¡ç±»-v2">Â¶</a>æŠ½è±¡ç±»</h3>
<p>æŠ½è±¡ç±»æ— æ³•è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»çš„è®¾è®¡æœ¬èº«å°±æ˜¯è¢«ç»§æ‰¿ï¼ŒæŠ½è±¡ç±»å¼ºè¿«å­ç±»è¦†å†™å…¶å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Student();</span><br><span class="line">        p.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//abstractå£°æ˜</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Student.run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é¢å‘æŠ½è±¡ç¼–ç¨‹"><a class="header-anchor" href="#é¢å‘æŠ½è±¡ç¼–ç¨‹">Â¶</a>é¢å‘æŠ½è±¡ç¼–ç¨‹</h3>
<p>å°½é‡å¼•ç”¨é«˜å±‚ç±»å‹ï¼Œè€Œä¸å¼•ç”¨å­ç±»ã€‚</p>
<ul>
<li>ä¸Šå±‚ä»£ç åªå®šä¹‰è§„èŒƒï¼ˆä¾‹å¦‚ï¼šabstract class Personï¼‰ï¼›</li>
<li>ä¸éœ€è¦å­ç±»å°±å¯ä»¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆæ­£å¸¸ç¼–è¯‘ï¼‰ï¼›</li>
<li>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç”±ä¸åŒçš„å­ç±»å®ç°ï¼Œè°ƒç”¨è€…å¹¶ä¸å…³å¿ƒã€‚<br>
æŠ½è±¡æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯å®šä¹‰æ¥å£è§„èŒƒï¼šå³è§„å®šé«˜å±‚ç±»çš„æ¥å£ï¼Œä»è€Œä¿è¯æ‰€æœ‰å­ç±»éƒ½æœ‰ç›¸åŒçš„æ¥å£å®ç°</li>
</ul>
<hr>
<h1>æ¥å£</h1>
<pre><code>å¦‚æœä¸€ä¸ªæŠ½è±¡ç±»æ²¡æœ‰å­—æ®µï¼Œå…¨æ˜¯æŠ½è±¡çš„æ–¹æ³•ï¼Œåˆ™å¯ç”¨interfaceæ”¹å†™æˆæ¥å£ã€‚
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•é»˜è®¤éƒ½æ˜¯public abstractçš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ä¸éœ€è¦å†™å‡ºæ¥</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªclasså®ç°æ¥å£ï¼šç”¨implements(å®ç°)ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name + <span class="string">" run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šæ¥å£"><a class="header-anchor" href="#å¤šæ¥å£">Â¶</a>å¤šæ¥å£</h2>
<p>å¯ä»¥å®ç°å¤šä¸ªinterfaceï¼šæœ¬æ¥æ˜¯ä¸èƒ½ç»§æ‰¿å¤šä¸ªçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span>, <span class="title">Hello</span> </span>&#123; <span class="comment">// å®ç°äº†ä¸¤ä¸ªinterface</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¥å£ç»§æ‰¿"><a class="header-anchor" href="#æ¥å£ç»§æ‰¿">Â¶</a>æ¥å£ç»§æ‰¿</h2>
<p>ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€æ¥å£ï¼Œç”¨extendsã€‚</p>
<h2 id="ç»§æ‰¿å…³ç³»"><a class="header-anchor" href="#ç»§æ‰¿å…³ç³»">Â¶</a>ç»§æ‰¿å…³ç³»</h2>
<p>å……åˆ†çš„å¤ç”¨ä»£ç ï¼Œå‚è€ƒé›†åˆç±»å®šä¹‰çš„ä¸€ç»„æ¥å£ï¼š<br>
<img src="/.io//%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.png" alt="ç»§æ‰¿å…³ç³»"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ€»æ˜¯ç”¨æ›´æŠ½è±¡çš„ç±»æ¥å¼•ç”¨å®é™…ç±»å‹ã€‚</span></span><br><span class="line">List list = <span class="keyword">new</span> ArrayList(); <span class="comment">// ç”¨Listæ¥å£å¼•ç”¨å…·ä½“å­ç±»çš„å®ä¾‹</span></span><br><span class="line">Collection coll = list; <span class="comment">// å‘ä¸Šè½¬å‹ä¸ºCollectionæ¥å£</span></span><br><span class="line">Iterable it = coll; <span class="comment">// å‘ä¸Šè½¬å‹ä¸ºIterableæ¥å£</span></span><br></pre></td></tr></table></figure>
<h2 id="defaultæ–¹æ³•"><a class="header-anchor" href="#defaultæ–¹æ³•">Â¶</a>defaultæ–¹æ³•</h2>
<p>å®ç°ç±»å¯ä»¥ä¸å¿…å®ç°defaultæ–¹æ³•ã€‚å…¶ç›®çš„ï¼š<br>
ç»™æ¥å£æ–°å¢ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä¼šæ¶‰åŠåˆ°ä¿®æ”¹å…¨éƒ¨å­ç±»ã€‚å¦‚æœæ–°å¢çš„æ˜¯defaultæ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å°±ä¸å¿…å…¨éƒ¨ä¿®æ”¹ï¼Œåªéœ€è¦åœ¨éœ€è¦è¦†å†™çš„åœ°æ–¹å»è¦†å†™æ–°å¢æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Student(<span class="string">"Xiao Ming"</span>);</span><br><span class="line">        p.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">" run"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>defaultæ–¹æ³•å’ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚å› ä¸ºinterfaceæ²¡æœ‰å­—æ®µï¼Œdefaultæ–¹æ³•æ— æ³•è®¿é—®å­—æ®µï¼Œè€ŒæŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³•å¯ä»¥è®¿é—®å®ä¾‹å­—æ®µã€‚</li>
</ul>
<hr>
<h1>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•</h1>
<pre><code>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•æ˜¯å±äºclassè€Œä¸æ˜¯intancesçš„ã€‚
</code></pre>
<h2 id="é™æ€å­—æ®µ"><a class="header-anchor" href="#é™æ€å­—æ®µ">Â¶</a>é™æ€å­—æ®µ</h2>
<p>é™æ€å­—æ®µæ˜¯åŒä¸€ä¸ªclassæ‰€æœ‰å®ä¾‹å…±äº«çš„ï¼Œå®ä¾‹ä¸­å¹¶æ²¡æœ‰é™æ€å­—æ®µï¼Œä¸æ¨èç”¨ å®ä¾‹å.é™æ€å­—æ®µ æ¥è®¿é—®ï¼Œå› ä¸ºç¼–è¯‘å™¨æ˜¯æ ¹æ®å®ä¾‹ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºç±»å.é™æ€å­—æ®µæ¥è®¿é—®é™æ€å¯¹è±¡ã€‚</p>
<h2 id="é™æ€æ–¹æ³•"><a class="header-anchor" href="#é™æ€æ–¹æ³•">Â¶</a>é™æ€æ–¹æ³•</h2>
<p>è°ƒç”¨å®ä¾‹æ–¹æ³•å¿…é¡»é€šè¿‡ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œè€Œè°ƒç”¨é™æ€æ–¹æ³•åˆ™ä¸éœ€è¦å®ä¾‹å˜é‡ï¼Œé€šè¿‡ç±»åå°±å¯ä»¥è°ƒç”¨ã€‚</p>
<h2 id="ç”¨é€”"><a class="header-anchor" href="#ç”¨é€”">Â¶</a>ç”¨é€”</h2>
<ol>
<li>é™æ€æ–¹æ³•ç»å¸¸ç”¨äºå·¥å…·ç±»ã€‚ä¾‹å¦‚ï¼š<br>
Arrays.sort()<br>
Math.random()</li>
<li>é™æ€æ–¹æ³•ä¹Ÿç»å¸¸ç”¨äºè¾…åŠ©æ–¹æ³•ã€‚æ³¨æ„åˆ°Javaç¨‹åºçš„å…¥å£main()ä¹Ÿæ˜¯é™æ€æ–¹æ³•ã€‚</li>
</ol>
<h2 id="æ¥å£çš„é™æ€å­—æ®µ"><a class="header-anchor" href="#æ¥å£çš„é™æ€å­—æ®µ">Â¶</a>æ¥å£çš„é™æ€å­—æ®µ</h2>
<p>interfaceæ˜¯å¯ä»¥æœ‰é™æ€å­—æ®µçš„ï¼Œå¹¶ä¸”é™æ€å­—æ®µå¿…é¡»ä¸ºfinalç±»å‹ï¼š</p>
<h2 id="ï¿¼21"><a class="header-anchor" href="#ï¿¼21">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//static + final</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MALE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FEMALE = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//éƒ½å»æ‰ä¹Ÿå¯ä»¥ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¡¥ä¸Š</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Špublic statc final:</span></span><br><span class="line">    <span class="keyword">int</span> MALE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> FEMALE = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></h2>
<h1>åŒ…packages</h1>
<p>ä½¿ç”¨packageæ¥è§£å†³åå­—å†²çªã€‚JVMåªçœ‹å®Œæ•´ç±»åï¼Œå› æ­¤ï¼Œåªè¦åŒ…åä¸åŒï¼Œç±»å°±ä¸åŒã€‚</p>
<ul>
<li>åŒ…æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚java.utilå’Œjava.util.zipæ˜¯ä¸åŒçš„åŒ…ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•ç»§æ‰¿å…³ç³»ã€‚</li>
</ul>
<h2 id="åŒ…ä½œç”¨åŸŸ"><a class="header-anchor" href="#åŒ…ä½œç”¨åŸŸ">Â¶</a>åŒ…ä½œç”¨åŸŸ</h2>
<h2 id="åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚"><a class="header-anchor" href="#åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚">Â¶</a>åŒä¸€ä¸ªåŒ…ä¸­ï¼Œä¸ç”¨publicã€protectedã€privateä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚<br>
ä¸€èˆ¬ä½¿ç”¨å€’ç½®çš„åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚</h2>
<h1>ä½œç”¨åŸŸ</h1>
<ul>
<li>public: fieldã€methodå¯ä»¥è¢«å…¶ä»–ç±»è®¿é—®ï¼Œå‰ææ˜¯é¦–å…ˆæœ‰è®¿é—®classçš„æƒé™ã€‚</li>
<li>private: è®¿é—®æƒé™è¢«é™å®šåœ¨classçš„å†…éƒ¨ï¼Œè€Œä¸”ä¸æ–¹æ³•å£°æ˜é¡ºåºæ— å…³ã€‚æ¨èæŠŠprivateæ–¹æ³•æ”¾åˆ°åé¢ã€‚Javaæ”¯æŒåµŒå¥—ç±»ï¼Œå¦‚æœä¸€ä¸ªç±»å†…éƒ¨è¿˜å®šä¹‰äº†åµŒå¥—ç±»ï¼Œé‚£ä¹ˆï¼ŒåµŒå¥—ç±»æ‹¥æœ‰è®¿é—®privateçš„æƒé™ã€‚</li>
<li>protectedï¼šä½œç”¨äºç»§æ‰¿å…³ç³»ã€‚å®šä¹‰ä¸ºprotectedçš„å­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œä»¥åŠå­ç±»çš„å­ç±»</li>
</ul>
<ul>
<li>ä¸€ä¸ª.javaæ–‡ä»¶åªèƒ½åŒ…å«ä¸€ä¸ªpublicç±»ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªépublicç±»ã€‚å¦‚æœæœ‰publicç±»ï¼Œæ–‡ä»¶åå¿…é¡»å’Œpublicç±»çš„åå­—ç›¸åŒã€‚</li>
</ul>
<hr>
<h1>classpathå’Œjar</h1>
<h2 id="classpath"><a class="header-anchor" href="#classpath">Â¶</a>classpath</h2>
<pre><code>JVMç”¨åˆ°çš„ç¯å¢ƒå˜é‡ï¼Œç”¨äºæœç´¢classæ–‡ä»¶çš„ç›®å½•ã€‚
è¦åœ¨JVMå¯åŠ¨æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ²¡æœ‰è®¾ç½®åˆ™é»˜è®¤ä¸ºå½“å‰ç›®å½•ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -cp .;C:\work\project1\bin;C:\shared abc.xyz.Hello</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸è¦æŠŠä»»ä½•Javaæ ¸å¿ƒåº“æ·»åŠ åˆ°classpathä¸­ï¼JVMæ ¹æœ¬ä¸ä¾èµ–classpathåŠ è½½æ ¸å¿ƒåº“ï¼</li>
</ul>
<h2 id="jar"><a class="header-anchor" href="#jar">Â¶</a>jar</h2>
<pre><code>æŠŠpackageç»„ç»‡çš„ç›®å½•å±‚çº§ï¼Œä»¥åŠå„ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬.classæ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼‰éƒ½æ‰“æˆä¸€ä¸ªjaræ–‡ä»¶.
</code></pre>
<p>MANIFEST.MFæ–‡ä»¶å¯ä»¥æä¾›jaråŒ…çš„ä¿¡æ¯ï¼Œå¦‚Main-Classï¼Œè¿™æ ·å¯ä»¥ç›´æ¥è¿è¡ŒjaråŒ…ã€‚</p>
<h2 id="ï¿¼23-MANIFEST-MFæ–‡ä»¶é‡Œé…ç½®classpath"><a class="header-anchor" href="#ï¿¼23-MANIFEST-MFæ–‡ä»¶é‡Œé…ç½®classpath">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -jar hello.jar</span><br></pre></td></tr></table></figure><br>
MANIFEST.MFæ–‡ä»¶é‡Œé…ç½®classpath.</h2>
<h1>æ¨¡å—</h1>
<p>JVMè‡ªå¸¦çš„Javaæ ‡å‡†åº“ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä»¥jaræ–‡ä»¶å½¢å¼å­˜æ”¾çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å«rt.jarã€‚</p>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå…¥é—¨</title>
    <url>/2020/02/28/java%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<p>Cloud computingè¦ç”¨åˆ°Javaï¼Œæ­£å¥½æ‰“ç®—å­¦ä¹ åç«¯å¼€å‘ï¼Œå°±ä»Javaå¼€å§‹å…¥é—¨ï¼Œæ…¢æ…¢å­¦ï¼Œæ…¢æ…¢æ›´æ–°,å…ˆå¼€ä¸ªå‘ã€‚</p>
<a id="more"></a>
<h1>åŸºæœ¬çŸ¥è¯†</h1>
<h2 id="ä»£ç å—è§„èŒƒï¼š"><a class="header-anchor" href="#ä»£ç å—è§„èŒƒï¼š">Â¶</a>ä»£ç å—è§„èŒƒï¼š</h2>
<ul>
<li>ç±»åé¦–å­—æ¯è¦å¤§å†™</li>
<li>public static void main(String[] args){} æ–¹æ³•æ˜¯å›ºå®šå…¥å£</li>
<li>æ–¹æ³•çš„ä»£ç æ¯ä¸€è¡Œéƒ½è¦ä»¥ï¼›ç»“å°¾</li>
<li>ç±»åå’Œæ–‡ä»¶åå¿…é¡»ä¿æŒä¸€è‡´</li>
<li>åŒºåˆ†å¤§å°å†™ï¼</li>
</ul>
<h2 id="è¿è¡ŒåŸç†ï¼š"><a class="header-anchor" href="#è¿è¡ŒåŸç†ï¼š">Â¶</a>è¿è¡ŒåŸç†ï¼š</h2>
<pre><code>javacç¼–è¯‘å™¨å…ˆæŠŠ.javaæ–‡ä»¶ç¼–è¯‘æˆ.classçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åå‘javaè™šæ‹Ÿæœºä¼ é€’ç±»åï¼ŒæŸ¥æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ç„¶åè¿è¡Œã€‚
</code></pre>
<h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹">Â¶</a>åŸºæœ¬æ•°æ®ç±»å‹</h2>
<pre><code>æ•´æ•°ç±»å‹ï¼šbyte(ä¸€ä¸ªå­—èŠ‚)ï¼Œshortï¼ˆ2ï¼‰ï¼Œintï¼ˆ4ï¼‰ï¼Œlongï¼ˆ8ï¼‰
æµ®ç‚¹æ•°ç±»å‹ï¼šfloatï¼ˆfloatå‹åç¼€åŠ fï¼‰[æœ€å¤§å¯è¡¨ç¤º10^38]ï¼Œdouble[10^308]
å­—ç¬¦ç±»å‹ï¼šcharï¼ˆä½¿ç”¨å•å¼•å·ï¼‰
å¸ƒå°”ç±»å‹ï¼šboolean (åœ¨JVMé‡Œæ˜¯4å­—èŠ‚æ•´æ•°)
*å¸¸é‡*ï¼š ç±»å‹åå‰åŠ final, é¿å…é­”æœ¯æ•°å­—ï¼Œé€šå¸¸å…¨éƒ¨å¤§å†™
varå…³é”®å­—ï¼šç±»åå¤ªé•¿ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨åˆ¤æ–­å˜é‡ç±»å‹
</code></pre>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br></pre></td></tr></table></figure>
<ul>
<li>å˜é‡çš„ä½œç”¨åŸŸï¼š{}</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>; <span class="comment">// å˜é‡iä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">    ...</span><br><span class="line">    &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">1</span>; <span class="comment">// å˜é‡xä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">        ...</span><br><span class="line">        &#123;</span><br><span class="line">            ...</span><br><span class="line">            String s = <span class="string">"hello"</span>; <span class="comment">// å˜é‡sä»è¿™é‡Œå¼€å§‹å®šä¹‰</span></span><br><span class="line">            ...</span><br><span class="line">        &#125; <span class="comment">// å˜é‡sä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡sï¼Œå®ƒå’Œä¸Šé¢çš„å˜é‡åŒåï¼Œ</span></span><br><span class="line">        <span class="comment">// ä½†æ˜¯å› ä¸ºä½œç”¨åŸŸä¸åŒï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡:</span></span><br><span class="line">        String s = <span class="string">"hi"</span>;</span><br><span class="line">        ...</span><br><span class="line">    &#125; <span class="comment">// å˜é‡xå’Œsä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="comment">// å˜é‡iä½œç”¨åŸŸåˆ°æ­¤ç»“æŸ</span></span><br></pre></td></tr></table></figure>
<p>è¦éµå¾ªä½œç”¨åŸŸæœ€å°çš„åŸåˆ™ï¼Œä¸”å˜é‡ä¸ç”¨é‡åã€‚</p>
<h2 id="æ•´æ•°è¿ç®—"><a class="header-anchor" href="#æ•´æ•°è¿ç®—">Â¶</a>æ•´æ•°è¿ç®—</h2>
<p>%ï¼šå–ä½™</p>
<ul>
<li>ä½ç§»è¿ç®—ï¼šå³ç§»ï¼ˆç›¸å½“äºé™¤ä»¥2ï¼‰ &gt;&gt; ï¼ˆç¬¦å·ä½ä¸åŠ¨ï¼Œ&gt;&gt;&gt;ï¼ˆç¬¦å·ä½è·Ÿç€åŠ¨ï¼‰<br>
<em>è¦å°å¿ƒæº¢å‡ºï¼Œæ³¨æ„æ•°æ®ç±»å‹</em></li>
<li>ä½è¿ç®—ï¼š ä¸ï¼š&amp;ï¼Œ æˆ–ï¼šï½œï¼Œ éï¼šï½ å¼‚æˆ–ï¼š^ï¼Œä¸åŒä¸º1ï¼ŒåŒä¸ºã€‚<br>
æ•´æ•°çš„ä½è¿ç®—æ˜¯æŒ‰ä½å¯¹é½åšä½è¿ç®—ã€‚é€šè¿‡ä¸è¿ç®—å¯ä»¥å¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªIPæ˜¯å¦åœ¨åŒä¸€ä¸ªç½‘æ®µã€‚</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šï¼ˆshortï¼‰</li>
</ul>
<h2 id="æµ®ç‚¹å‹"><a class="header-anchor" href="#æµ®ç‚¹å‹">Â¶</a>æµ®ç‚¹å‹</h2>
<p>æµ®ç‚¹å‹çš„æ¯”è¾ƒï¼Œå°†ä¸¤æ•°çš„å·®çš„ç»å¯¹å€¼å°äºæŸä¸€èŒƒå›´ï¼Œå³å¯è®¤ä¸ºç›¸ç­‰ã€‚<br>
æµ®ç‚¹å‹å››èˆäº”å…¥æ—¶ï¼Œ+0.5ï¼Œå¦‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> d = <span class="number">2.6</span>;</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>) (d + <span class="number">0.5</span>);</span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•´å‹ç›¸é™¤æ—¶ï¼Œè¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦åˆ™ä¼šåªç•™ä¸‹æ•´æ•°ä½</li>
</ul>
<h2 id="å¸ƒå°”ç±»å‹"><a class="header-anchor" href="#å¸ƒå°”ç±»å‹">Â¶</a>å¸ƒå°”ç±»å‹</h2>
<p>è¿ç®—æœ‰ ä¸&amp;&amp;ï¼Œæˆ–||,éï¼ï¼Œæ³¨æ„è·Ÿæ•´å‹è¿ç®—çš„åŒºåˆ«ã€‚</p>
<h3 id="ä¸‰å…ƒè¿ç®—ç¬¦"><a class="header-anchor" href="#ä¸‰å…ƒè¿ç®—ç¬¦">Â¶</a>ä¸‰å…ƒè¿ç®—ç¬¦</h3>
<p>b ? x:y</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//x,yçš„ç±»å‹å¿…é¡»ç›¸åŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = -<span class="number">100</span>;</span><br><span class="line">        <span class="keyword">int</span> x = n &gt;= <span class="number">0</span> ? n : -n;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å­—ç¬¦å­—ç¬¦ä¸²"><a class="header-anchor" href="#å­—ç¬¦å­—ç¬¦ä¸²">Â¶</a>å­—ç¬¦å­—ç¬¦ä¸²</h2>
<ul>
<li>char: ä¿å­˜ä¸€ä¸ªunicodeå­—ç¬¦ï¼Œè‹±æ–‡å’Œä¸­æ–‡éƒ½å ç”¨2ä¸ªå­—èŠ‚ï¼Œâ€™â€™</li>
<li>Stringï¼š â€œâ€, å¯ä»¥ç”¨+è¿æ¥ä»»æ„å­—ç¬¦ä¸²å’Œå…¶ä»–æ•°æ®ç±»å‹ã€‚<br>
â€œâ€&quot;â€¦ â€œâ€&quot;è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¦ç”¨Java13ç‰¹æ€§ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼›</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac --<span class="built_in">source</span> 13 --<span class="built_in">enable</span>-preview Main.java</span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²ä¸å¯å˜ï¼šå­—ç¬¦ä¸²æ˜¯å¼•ç”¨ç±»å‹ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯ä¸å˜çš„ï¼Œå˜é‡çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</li>
<li>null: ç©ºå€¼ï¼ŒæŒ‡é’ˆæŒ‡å‘ç©º</li>
</ul>
<h2 id="æ•°ç»„ç±»å‹"><a class="header-anchor" href="#æ•°ç»„ç±»å‹">Â¶</a>æ•°ç»„ç±»å‹</h2>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">        <span class="keyword">int</span>[] ns = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">//è‡ªåŠ¨æ¨ç®—é•¿åº¦</span></span><br><span class="line">        <span class="keyword">int</span>[] ns1 = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">68</span>, <span class="number">79</span>, <span class="number">91</span>, <span class="number">85</span>, <span class="number">62</span> &#125;;</span><br><span class="line">        <span class="comment">//ç®€å†™</span></span><br><span class="line">        <span class="keyword">int</span>[] ns2 = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">        ns[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        System.out.println(ns.length); <span class="comment">//æŸ¥çœ‹æ•°ç»„é•¿åº¦</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ•°ç»„å¤§å°ä¸å¯å˜ï¼ŒåŒç†å­—ç¬¦ä¸²ï¼Œå˜é‡çš„æœ¬è´¨æ˜¯æŒ‡é’ˆ</li>
</ul>
<h3 id="å­—ç¬¦ä¸²æ•°ç»„"><a class="header-anchor" href="#å­—ç¬¦ä¸²æ•°ç»„">Â¶</a>å­—ç¬¦ä¸²æ•°ç»„</h3>
<p>æ•°ç»„çš„å…ƒç´ æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œ</p>
<h2 id="ï¿¼6"><a class="header-anchor" href="#ï¿¼6">Â¶</a><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] StrArray = &#123;<span class="string">"as"</span>,<span class="string">"asv"</span>&#125;;</span><br></pre></td></tr></table></figure></h2>
<h1>æµç¨‹æ§åˆ¶</h1>
<h2 id="è¾“å…¥è¾“å‡º"><a class="header-anchor" href="#è¾“å…¥è¾“å‡º">Â¶</a>è¾“å…¥è¾“å‡º</h2>
<h3 id="æ ¼å¼åŒ–è¾“å‡º-System-out-printf"><a class="header-anchor" href="#æ ¼å¼åŒ–è¾“å‡º-System-out-printf">Â¶</a>æ ¼å¼åŒ–è¾“å‡º: System.out.printf()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> d = <span class="number">3.1415926</span>;</span><br><span class="line">        System.out.printf(<span class="string">"%.2f\n"</span>, d); <span class="comment">// æ˜¾ç¤ºä¸¤ä½å°æ•°3.14</span></span><br><span class="line">        System.out.printf(<span class="string">"%.4f\n"</span>, d); <span class="comment">// æ˜¾ç¤º4ä½å°æ•°3.1416</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right">å ä½ç¬¦</th>
<th style="text-align:left">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">%d</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºæ•´æ•°</td>
</tr>
<tr>
<td style="text-align:right">%x</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºåå…­è¿›åˆ¶æ•´æ•°</td>
</tr>
<tr>
<td style="text-align:right">%f</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºæµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:right">%e</td>
<td style="text-align:left">æ ¼å¼åŒ–è¾“å‡ºç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„æµ®ç‚¹æ•°</td>
</tr>
<tr>
<td style="text-align:right">%s</td>
<td style="text-align:left">æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//16è¿›åˆ¶è¾“å‡ºç”¨0è¡¥è¶³8ä½</span></span><br><span class="line">System.out.printf(<span class="string">"n=%d, hex=%08x"</span>, n, n); <span class="comment">// æ³¨æ„ï¼Œä¸¤ä¸ª%å ä½ç¬¦å¿…é¡»ä¼ å…¥ä¸¤ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>
<h3 id="è¾“å…¥"><a class="header-anchor" href="#è¾“å…¥">Â¶</a>è¾“å…¥</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner; <span class="comment">//å¯¼å…¥æ§åˆ¶å°åº“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in); <span class="comment">// åˆ›å»ºScannerå¯¹è±¡</span></span><br><span class="line">        System.out.print(<span class="string">"Input your name: "</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        String name = scanner.nextLine(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.print(<span class="string">"Input your age: "</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="keyword">int</span> age = scanner.nextInt(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°</span></span><br><span class="line">        System.out.printf(<span class="string">"Hi, %s, you are %d\n"</span>, name, age); <span class="comment">// æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ifè¯­å¥"><a class="header-anchor" href="#ifè¯­å¥">Â¶</a>ifè¯­å¥</h2>
<ul>
<li>åˆ¤æ–­ç›¸ç­‰ä¸€å®šè¦èŒƒå›´ï¼Œå¦åˆ™æµ®ç‚¹å‹ä¸å‡†ç¡®ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> x = <span class="number">1</span> - <span class="number">9.0</span> / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (Math.abs(x - <span class="number">0.1</span>) &lt; <span class="number">0.00001</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"x is 0.1"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"x is NOT 0.1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¦åˆ¤æ–­å¼•ç”¨ç±»å‹çš„å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»ä½¿ç”¨equals()æ–¹æ³•ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s1 = <span class="string">"hello"</span>;</span><br><span class="line">        String s2 = <span class="string">"hello"</span>;</span><br><span class="line">        <span class="keyword">if</span> (s1 != <span class="keyword">null</span> &amp;&amp;s1.equals(s2)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ç›¸ç­‰"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"ä¸ç­‰"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå˜é‡s1ä¸ºnullï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¦&amp;&amp;ã€‚</p>
<h2 id="switch"><a class="header-anchor" href="#switch">Â¶</a>switch</h2>
<p>æ—§ç‰ˆçš„switchï¼šå…·æœ‰ç©¿é€æ€§ï¼Œåªè´Ÿè´£åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°†ç»§ç»­å‘ä¸‹åŒ¹é…ã€‚æ‰€ä»¥ä¸èƒ½æ¼æ³„breakï¼›<br>
æ–°ç‰ˆçš„switch: è‡ªåŠ¨breakï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String option = <span class="string">"apple"</span>;</span><br><span class="line">        <span class="keyword">int</span> opt = <span class="keyword">switch</span>(option)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"apple"</span> -&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"peer"</span>,<span class="string">"banana"</span> -&gt; <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//å¯ä»¥ç”¨&#123;&#125;æ¡†ä½ï¼Œæ‰§è¡Œå¤šæ¡è¯­å¥ã€‚</span></span><br><span class="line">            <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">int</span> code = fruit.hashCode();</span><br><span class="line">                yield code; <span class="comment">//è¿”å›codeå€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;; <span class="comment">//èµ‹å€¼è¯­å¥è¦ä»¥ï¼›ç»“æŸï¼Œ æ²¡èµ‹å€¼å°±ä¸ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>switchä¹Ÿæ˜¯java13çš„æ–°ç‰¹æ€§ï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac --<span class="built_in">source</span> 13 --<span class="built_in">enable</span>-preview Main.java</span><br></pre></td></tr></table></figure>
<h2 id="while"><a class="header-anchor" href="#while">Â¶</a>while</h2>
<ul>
<li>æ­»å¾ªç¯ä¸­ï¼Œintè‡ªå¢åˆ°æœ€å¤§å†åŠ ä¸€ä¼šå˜æˆè´Ÿæ•°ï¼Œä»è€Œè·³å‡ºå¾ªç¯ã€‚</li>
<li>do â€¦ whileæ˜¯å…ˆæ‰§è¡Œå†åˆ¤æ–­ï¼Œæ‰€ä»¥è‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚è¦æ³¨æ„è¾¹ç•Œé—®é¢˜ã€‚</li>
</ul>
<h2 id="for"><a class="header-anchor" href="#for">Â¶</a>for</h2>
<ul>
<li>æ³¨æ„ï¼šå¾ªç¯ä¸­å®šä¹‰çš„å˜é‡çš„ä½œç”¨åŸŸåªåœ¨å¾ªç¯ä¸­ï¼Œå¾ªç¯å¤–å°†æ— æ³•è®¿é—®ã€‚</li>
</ul>
<h3 id="for-each"><a class="header-anchor" href="#for-each">Â¶</a>for each</h3>
<p>ä¾¿äºéå†æ•°ç»„ï¼Œä½†æ˜¯æ— æ³•è·å¾—æ•°ç»„çš„ç´¢å¼•:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum;</span><br><span class="line">        <span class="keyword">int</span> ns[] = &#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="comment">//éå†æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> n:ns)&#123;</span><br><span class="line">            sum = sum +n;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>for eachèƒ½éå†æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬listï¼Œmapâ€¦</li>
</ul>
<h3 id="i-i"><a class="header-anchor" href="#i-i">Â¶</a>i++,++i</h3>
<p>åœ¨å¾ªç¯ä½“ä¸­ï¼Œi<ins>å’Œ</ins>içš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚<br>
è¿è¡Œæ—¶é—´çš„å·®åˆ«ã€‚åœ¨Javaä¸­i<ins>è¯­å¥æ˜¯éœ€è¦ä¸€ä¸ªä¸´æ—¶å˜é‡å–å­˜å‚¨è¿”å›è‡ªå¢å‰çš„å€¼ï¼Œè€Œ</ins>iä¸éœ€è¦ã€‚è¿™æ ·å°±å¯¼è‡´ä½¿ç”¨i++æ—¶ç³»ç»Ÿéœ€è¦å…ˆç”³è¯·ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œç„¶åå°†å€¼å¡å¦‚è¿›å»ï¼Œæœ€åä¸ç”¨äº†æ‰å»é‡Šæ”¾ã€‚å¤šäº†è¿™ä¹ˆä¸€ç³»åˆ—æ“ä½œæ—¶é—´ã€‚</p>
<h2 id="breakå’Œcontinue"><a class="header-anchor" href="#breakå’Œcontinue">Â¶</a>breakå’Œcontinue</h2>
<pre><code>breakï¼šè·³å‡ºä¸€å±‚å¾ªç¯ã€‚
continueï¼š æå‰ç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚
</code></pre>
<hr>
<h1>æ•°ç»„æ“ä½œ</h1>
<p>éå†æ•°ç»„å°±ä¸è¯´äº†ï¼Œéœ€è¦ç´¢å¼•ç”¨forï¼Œä¸éœ€è¦ç´¢å¼•ç”¨for eachã€‚</p>
<h2 id="æ‰“å°æ•°ç»„å†…å®¹"><a class="header-anchor" href="#æ‰“å°æ•°ç»„å†…å®¹">Â¶</a>æ‰“å°æ•°ç»„å†…å®¹</h2>
<p>ç›´æ¥æ‰“å°æ•°ç»„ï¼Œè·å¾—çš„æ˜¯JVMä¸­çš„å¼•ç”¨åœ°å€<br>
å¯ä»¥ç”¨for eachå¾ªç¯æ‰“å°ï¼Œä¹Ÿå¯ä»¥ç”¨Arrays.toString()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ns = &#123; <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span> &#125;;</span><br><span class="line">        System.out.println(Arrays.toString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„æ’åº"><a class="header-anchor" href="#æ•°ç»„æ’åº">Â¶</a>æ•°ç»„æ’åº</h2>
<p>ç”¨Arrays.sort()ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] ns = &#123; <span class="number">28</span>, <span class="number">12</span>, <span class="number">89</span>, <span class="number">73</span>, <span class="number">65</span>, <span class="number">18</span>, <span class="number">96</span>, <span class="number">50</span>, <span class="number">8</span>, <span class="number">36</span> &#125;;</span><br><span class="line">        Arrays.sort(ns); <span class="comment">//æ’åº</span></span><br><span class="line">        System.out.println(Arrays.toString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤šç»´æ•°ç»„"><a class="header-anchor" href="#å¤šç»´æ•°ç»„">Â¶</a>å¤šç»´æ•°ç»„</h2>
<p>æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œå°†å¼•ç”¨ç±»å‹åˆå­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå°±æˆäº†äºŒç»´æ•°ç»„ã€‚<br>
è®¿é—®äºŒç»´æ•°ç»„ï¼šarray[row][col]</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//äºŒç»´æ•°ç»„çš„å£°æ˜æ˜¯ä¸¤ä¸ªæ–¹æ‹¬å·</span></span><br><span class="line">        <span class="keyword">int</span>[][] ns = &#123;</span><br><span class="line">            &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;,</span><br><span class="line">            &#123; <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span> &#125;</span><br><span class="line">        &#125;; <span class="comment">//èµ‹å€¼åé¢è¦åŠ ï¼›</span></span><br><span class="line">        System.out.println(ns.length); <span class="comment">// 3</span></span><br><span class="line">        <span class="comment">//ç”¨Arrays.deepToString(ns)æ‰“å°æ•°ç»„</span></span><br><span class="line">        System.out.println(Arrays.deepToString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤è¡Œå‚æ•°"><a class="header-anchor" href="#å‘½ä»¤è¡Œå‚æ•°">Â¶</a>å‘½ä»¤è¡Œå‚æ•°</h2>
<p>Javaç¨‹åºçš„å…¥å£main()æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ª String[]æ•°ç»„ç±»å‹çš„å‘½ä»¤è¡Œå‚æ•°ã€‚<br>
è¿™ä¸ªå‘½ä»¤è¡Œå‚æ•°ç”±JVMæ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶ä¼ ç»™mainæ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java Main -version</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitä¸€æ–‡é€š</title>
    <url>/2020/02/26/Git_learning/</url>
    <content><![CDATA[<h1>Git</h1>
<pre><code>å…è´¹åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿã€‚ç›¸æ¯”äºé›†ä¸­å¼ç®¡ç†çš„CVSï¼ŒSVNï¼šä¸å¿…è”ç½‘ä¿®æ”¹ï¼Œå¼ºå¤§çš„åˆ†æ”¯ç®¡ç†ã€‚æ›´å…³é”®çš„æ˜¯ï¼šGitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå‡å°‘äº†ä¸Šä¼ é‡
</code></pre>
<a id="more"></a>
<h2 id="åˆ›å»ºç‰ˆæœ¬åº“"><a class="header-anchor" href="#åˆ›å»ºç‰ˆæœ¬åº“">Â¶</a>åˆ›å»ºç‰ˆæœ¬åº“</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># step 0: åˆå§‹åŒ–ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"><span class="comment"># step 1: å°†æ–‡ä»¶åŠ å…¥ä»“åº“</span></span><br><span class="line">git add file1.txt</span><br><span class="line">git add file2.txt file3.txt</span><br><span class="line"><span class="comment"># step 2ï¼šæäº¤ï¼ˆå¯ä»¥ä¸€æ¬¡æäº¤å¤šä¸ªæ–‡ä»¶ï¼‰ -mè¡¨ç¤ºæ·»åŠ è¯´æ˜</span></span><br><span class="line">git commit -m <span class="string">"add 3 files."</span></span><br></pre></td></tr></table></figure>
<h2 id="ç‰ˆæœ¬å›é€€"><a class="header-anchor" href="#ç‰ˆæœ¬å›é€€">Â¶</a>ç‰ˆæœ¬å›é€€</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment">#ä¸€å †ä¹±ä¹±çš„å­—ç¬¦æ˜¯åå…­è¿›åˆ¶çš„commit idï¼Œé˜²æ­¢å¤šäººåä½œç‰ˆæœ¬å·å†²çª</span></span><br><span class="line"><span class="comment">#ä¸€è¡Œæ˜¾ç¤º</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line"><span class="comment">#è¿”å›ä¸Šä¸€ä¸ªç‰ˆæœ¬ HEAD^ ä¸Šä¸Šä¸ªç‰ˆæœ¬ HEAD^^</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"><span class="comment">#å›åˆ°æœªæ¥çš„é‚£ä¸ªè¢«å»æ‰çš„ç‰ˆæœ¬ï¼Œæ‰¾åˆ°commit id</span></span><br><span class="line">git reset --hard 1094a</span><br><span class="line">git reflog <span class="comment">#å¯ä»¥æŸ¥çœ‹æ¯æ¬¡æ¯æ¬¡å‘½ä»¤ä»è€Œæ‰¾åˆ°commit id</span></span><br></pre></td></tr></table></figure>
<h2 id="å·¥ä½œåŒºå’Œæš‚å­˜åŒº"><a class="header-anchor" href="#å·¥ä½œåŒºå’Œæš‚å­˜åŒº">Â¶</a>å·¥ä½œåŒºå’Œæš‚å­˜åŒº</h2>
<pre><code>å·¥ä½œåŒºï¼šæ¯æ¬¡çš„working directory, æ¯”å¦‚/learngit
ç‰ˆæœ¬åº“ï¼šå·¥ä½œåŒºä¸­çš„éšè—ç›®å½• /learngit/.git
æš‚å­˜åŒºï¼šç‰ˆæœ¬åº“ä¸­çš„stage(index)ã€‚æš‚å­˜åŒºè‡ªåŠ¨åˆ›å»ºç¬¬ä¸€ä¸ªåˆ†æ”¯ masterï¼Œ å¹¶åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆheadæŒ‡å‘masterã€‚
å·¥ä½œæµç¨‹ï¼šgit addçš„æ—¶å€™å°†æ–‡ä»¶çš„ä¿®æ”¹å­˜å…¥æš‚å­˜åŒºï¼Œgit commitå°†æš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹stage</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œæ–‡ä»¶çš„ä¸åŒ</span></span><br><span class="line">git diff HEAD -- readme.txt</span><br></pre></td></tr></table></figure>
<h2 id="æ’¤é”€ä¿®æ”¹"><a class="header-anchor" href="#æ’¤é”€ä¿®æ”¹">Â¶</a>æ’¤é”€ä¿®æ”¹</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Level 1: è¿”å›åˆ°ä¿®æ”¹çš„ä¸Šä¸€ä¸ªçŠ¶æ€</span></span><br><span class="line">git checkout -- readme.txt</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸¤ç§æƒ…å†µï¼š<br>
ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›<br>
ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚<br>
ï¼ˆåç»­çš„åˆ†æ”¯ç®¡ç†ï¼Œä¹Ÿä¼šæœ‰check outï¼Œ <em>â€“</em> è¿™ä¸ªå¾ˆå…³é”®ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Level 2: å¯ä»¥ä»æš‚å­˜åŒºå›é€€è‡³å·¥ä½œåŒºï¼ŒHEADè¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">git reset HEAD readme.txt</span><br><span class="line"><span class="comment">#å†æ¥ä¸Š git checkout --readme.txt å½»åº•æ¶ˆå¤±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Level 3: ç‰ˆæœ¬å›é€€</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤æ–‡ä»¶"><a class="header-anchor" href="#åˆ é™¤æ–‡ä»¶">Â¶</a>åˆ é™¤æ–‡ä»¶</h2>
<ol>
<li>ç¡®å®åˆ é™¤æ–‡ä»¶</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨å·¥ä½œåŒºåˆ é™¤äº†æ–‡ä»¶</span></span><br><span class="line">rm test.txt</span><br><span class="line"><span class="comment">#git statusä¼šæ</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment">#åœ¨ç‰ˆæœ¬åº“é‡Œåˆ é™¤æ–‡ä»¶</span></span><br><span class="line">it rm test.txt</span><br><span class="line"><span class="comment">#ç¡®è®¤æäº¤</span></span><br><span class="line">git commit -m <span class="string">"remove test.txt"</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è¯¯åˆ äº†</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨è¿”å›ä¸Šä¸€ä¸ªçŠ¶æ€æ¥è¿˜åŸï¼Œå…¶å®æ˜¯ä»ç‰ˆæœ¬åº“ä¸­æ›¿æ¢å›æ¥</span></span><br><span class="line">git checkout -- test.txt</span><br></pre></td></tr></table></figure>
<h2 id="è¿œç¨‹ä»“åº“"><a class="header-anchor" href="#è¿œç¨‹ä»“åº“">Â¶</a>è¿œç¨‹ä»“åº“</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨gitåº“é‡Œæ·»åŠ sshkey</span></span><br><span class="line">ssh-add <span class="string">"ä½ çš„ id-rsa æ–‡ä»¶åœ°å€"</span></span><br><span class="line"><span class="comment">#å°†æœ¬åœ°å†…å®¹æ¨é€åˆ°è¿œç¨‹ è¿œç¨‹åº“åå­—ï¼šorigin</span></span><br><span class="line">git remote add origin git@github.com:noonett/learngit.git</span><br><span class="line"><span class="comment">#å°†githubä»“åº“çš„å†…å®¹git pullä¸‹æ¥</span></span><br><span class="line">git pull origin master --allow-unrelated-histories</span><br><span class="line"><span class="comment">#å°†æœ¬åœ°åº“masteråˆ†æ”¯æ¨é€åˆ°è¿œç«¯ï¼Œ </span></span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="comment">#-uæ˜¯å…³è”èµ·æ¥ï¼Œä¹‹åå°±å¯ä»¥ä¸å¸¦-uäº†</span></span><br></pre></td></tr></table></figure>
<h2 id="ï¿¼8"><a class="header-anchor" href="#ï¿¼8">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å…‹éš†ä»“åº“ä¸‹æ¥, æ”¯æŒhttpså’Œsshï¼Œsshæ˜¯åŸç”Ÿçš„é€Ÿåº¦æ›´å¿«</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;url&gt;</span><br></pre></td></tr></table></figure></h2>
<h2 id="åˆ†æ”¯ç®¡ç†"><a class="header-anchor" href="#åˆ†æ”¯ç®¡ç†">Â¶</a>åˆ†æ”¯ç®¡ç†</h2>
<pre><code>HEADæŒ‡å‘çš„æ˜¯å½“å‰åˆ†æ”¯ï¼Œmasteræ˜¯ä¸»åˆ†æ”¯ã€‚åˆ›å»ºæ–°åˆ†æ”¯å®é™…ä¸Šå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°æŒ‡é’ˆï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œè®©æŒ‡é’ˆå¾€å‰ä¸€æ­¥ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶æ²¡æœ‰æ”¹å˜ã€‚åˆå¹¶åˆ†æ”¯å®é™…å°±æ˜¯æŠŠæ–°åˆ†æ”¯è·Ÿmasteråˆå¹¶
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºæ–°åˆ†æ”¯ï¼Œ-bè¡¨ç¤ºåˆ‡æ¢åˆ°è¿™ä¸ªåˆ†æ”¯</span></span><br><span class="line">git checkout -b dev</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout master</span><br><span class="line"><span class="comment">#åˆå¹¶åˆ†æ”¯</span></span><br><span class="line">git merge dev</span><br><span class="line"><span class="comment">#åˆ é™¤åˆ†æ”¯ delete ï¼ˆå¼ºè¡Œåˆ é™¤ -Dï¼‰</span></span><br><span class="line">git branch -d dev</span><br></pre></td></tr></table></figure>
<pre><code>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™éœ€è¦ä¿®æ”¹æ–‡ä»¶ï¼Œå†é‡æ–°æäº¤ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹åˆå¹¶åˆ†æ”¯å›¾</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br></pre></td></tr></table></figure>
<h3 id="bugç®¡ç†"><a class="header-anchor" href="#bugç®¡ç†">Â¶</a>bugç®¡ç†</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¿å­˜å·¥ä½œç°åœº</span></span><br><span class="line">git stash</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å·¥ä½œç°åœº</span></span><br><span class="line">git stash list</span><br><span class="line"><span class="comment">#æ¢å¤å·¥ä½œç°åœº</span></span><br><span class="line">git stash apply</span><br><span class="line">git stash drop</span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line">git stash pop</span><br><span class="line"><span class="comment">#å¯ä»¥æ¢å¤æŒ‡å®šç°åœº</span></span><br><span class="line">git stash pop stash@&#123;&#125;</span><br><span class="line"><span class="comment">#å¤åˆ¶ä¸€ä¸ªä¿®æ”¹åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">git cherry-pick &lt;commit&gt;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šäººåˆä½œ"><a class="header-anchor" href="#å¤šäººåˆä½œ">Â¶</a>å¤šäººåˆä½œ</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹è¿œç¨‹åº“ -vè¯¦æƒ…</span></span><br><span class="line">git remote -vg</span><br><span class="line"><span class="comment">#åˆ›å»ºè¿œç¨‹çš„devåˆ†æ”¯åˆ°æœ¬åœ°</span></span><br><span class="line">git checkout -b dev origin/dev</span><br><span class="line"><span class="comment">#è¿œç¨‹ä»“åº“æœ‰æ–°çš„æäº¤èµ·äº†å†²çªåˆ™éœ€è¦pullä¸‹æ¥ï¼Œæœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çª</span></span><br><span class="line">git pull</span><br><span class="line"><span class="comment">#å¦‚æœæç¤ºno tracking informationåˆ™ï¼š</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæœ¬åœ°devåˆ†æ”¯ä¸è¿œç¨‹origin/devåˆ†æ”¯çš„é“¾æ¥ï¼Œå†pull</span></span><br><span class="line">git branch --<span class="built_in">set</span>-upstream-to=origin/dev dev</span><br></pre></td></tr></table></figure>
<h3 id="rebase"><a class="header-anchor" href="#rebase">Â¶</a>rebase</h3>
<ul>
<li>rebaseæ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼›</li>
<li>rebaseçš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹å†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ã€‚è¯•å¾—ç»´æŠ¤commitè®°å½•å˜å¾—ç®€å•æ¸…æ™°ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rebase</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿œç¨‹push masterï¼Œé‡åˆ°äº†å†²çªï¼Œå¯ä»¥rebaseæ¥é¿å…ä¸‰æ–¹åˆå¹¶ï¼Œå³å˜åŸºï¼š</li>
</ul>
<h2 id="ï¿¼14"><a class="header-anchor" href="#ï¿¼14">Â¶</a><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout feature</span><br><span class="line">git rebase master</span><br><span class="line"><span class="comment">#rebaseä¹‹åå°±ä¿®æ”¹å†²çªï¼Œç„¶åcontinueï¼ˆä¸ç”¨commitï¼‰</span></span><br><span class="line">git add readme.txt</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br><span class="line"><span class="comment">#åˆ‡æ¢å›masterå¿«é€Ÿåˆå¹¶</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge feature</span><br></pre></td></tr></table></figure></h2>
<h2 id="æ ‡ç­¾ç®¡ç†"><a class="header-anchor" href="#æ ‡ç­¾ç®¡ç†">Â¶</a>æ ‡ç­¾ç®¡ç†</h2>
<pre><code>ç»™commitæ‰“ä¸Šæ ‡ç­¾ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†ã€‚
</code></pre>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ æ ‡ç­¾ -aæŒ‡ä»£æ ‡ç­¾å -mç•™ä¸‹å¤‡æ³¨</span></span><br><span class="line">git tag -a v0.1 -m <span class="string">"version 0.1 released"</span> 1094adb</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ ‡ç­¾</span></span><br><span class="line">git tag</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯</span></span><br><span class="line">git show &lt;tagname&gt;</span><br><span class="line"><span class="comment">#åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">git tag -d v0.1</span><br><span class="line"><span class="comment">#æ¨é€æ ‡ç­¾åˆ°è¿œç«¯</span></span><br><span class="line">git push origin v1.0</span><br><span class="line">git push origin --tags  <span class="comment">#æ¨é€æ‰€æœ‰çš„æ ‡ç­¾</span></span><br><span class="line"><span class="comment">#åˆ é™¤è¿œç¨‹çš„æ ‡ç­¾</span></span><br><span class="line">git push origin :refs/tags/v0.9</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>ç‰ˆæœ¬ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ©é˜µä¸Numpy</title>
    <url>/2020/02/24/Math/</url>
    <content><![CDATA[<h1>çŸ©é˜µä¹˜æ³•å®ç°</h1>
<pre><code>è¿™ä¸ªå‡½æ•°è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå°±æ˜¯å¯¹åº”ä½ç½®ç›¸ä¹˜å°±å®Œäº‹äº†ï¼Œæœ€åå†ç”¨numpyæ¥ç¡®è®¤ä¸€ä¸‹å‡½æ•°çš„æ­£ç¡®æ€§ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Matrix_multiplication</span><span class="params">(A,B, data = [])</span>:</span></span><br><span class="line">    C = []</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">not</span> A) <span class="keyword">or</span> (<span class="keyword">not</span> B):</span><br><span class="line">        <span class="keyword">return</span> C</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(A)):</span><br><span class="line">        row = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(B[<span class="number">0</span>])):</span><br><span class="line">            temp = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> a,b <span class="keyword">in</span> zip(range(len(A[<span class="number">0</span>])),range(len(B))):</span><br><span class="line">                temp += A[i][a] * B[b][j]</span><br><span class="line">            row.append(temp)</span><br><span class="line">        C.append(row)</span><br><span class="line">    <span class="keyword">return</span> C</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">    row = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">7</span>):</span><br><span class="line">        row.append(i+j)</span><br><span class="line">    A.append(row)</span><br><span class="line">print(<span class="string">'A:'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> A:</span><br><span class="line">    print(row) </span><br><span class="line">    </span><br><span class="line">B = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>,<span class="number">9</span>):</span><br><span class="line">    row = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>):</span><br><span class="line">        row.append(i+j)</span><br><span class="line">    B.append(row)</span><br><span class="line">print(<span class="string">'B:'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> B:</span><br><span class="line">    print(row)</span><br></pre></td></tr></table></figure>
<pre><code>A:
[2, 3, 4, 5, 6, 7]
[3, 4, 5, 6, 7, 8]
[4, 5, 6, 7, 8, 9]
[5, 6, 7, 8, 9, 10]
[6, 7, 8, 9, 10, 11]
[7, 8, 9, 10, 11, 12]
B:
[3, 4, 5, 6, 7, 8]
[4, 5, 6, 7, 8, 9]
[5, 6, 7, 8, 9, 10]
[6, 7, 8, 9, 10, 11]
[7, 8, 9, 10, 11, 12]
[8, 9, 10, 11, 12, 13]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#A = []</span></span><br><span class="line">Matrix_multiplication(A,B)</span><br></pre></td></tr></table></figure>
<pre><code>[[166, 193, 220, 247, 274, 301],
 [199, 232, 265, 298, 331, 364],
 [232, 271, 310, 349, 388, 427],
 [265, 310, 355, 400, 445, 490],
 [298, 349, 400, 451, 502, 553],
 [331, 388, 445, 502, 559, 616]]
</code></pre>
<h1>Numpy</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([</span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>)])</span><br><span class="line">b = np.array([</span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>)])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#çŸ©é˜µä¹˜æ³•</span></span><br><span class="line">np.dot(a,b)</span><br></pre></td></tr></table></figure>
<pre><code>array([[166, 193, 220, 247, 274, 301],
       [199, 232, 265, 298, 331, 364],
       [232, 271, 310, 349, 388, 427],
       [265, 310, 355, 400, 445, 490],
       [298, 349, 400, 451, 502, 553],
       [331, 388, 445, 502, 559, 616]])
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#çŸ©é˜µåŠ å‡</span></span><br><span class="line">print(a + b)</span><br><span class="line"><span class="comment">#çŸ©é˜µå¹³æ–¹</span></span><br><span class="line">print(a**<span class="number">2</span>)</span><br><span class="line"><span class="comment">#çŸ©é˜µè½¬ç½®</span></span><br><span class="line">print(a.T)</span><br></pre></td></tr></table></figure>
<pre><code>[[ 5  7  9 11 13 15]
 [ 7  9 11 13 15 17]
 [ 9 11 13 15 17 19]
 [11 13 15 17 19 21]
 [13 15 17 19 21 23]
 [15 17 19 21 23 25]]
[[  4   9  16  25  36  49]
 [  9  16  25  36  49  64]
 [ 16  25  36  49  64  81]
 [ 25  36  49  64  81 100]
 [ 36  49  64  81 100 121]
 [ 49  64  81 100 121 144]]
[[ 2  3  4  5  6  7]
 [ 3  4  5  6  7  8]
 [ 4  5  6  7  8  9]
 [ 5  6  7  8  9 10]
 [ 6  7  8  9 10 11]
 [ 7  8  9 10 11 12]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿”å›é€†çŸ©é˜µ</span></span><br><span class="line">c = np.array([[<span class="number">1.0</span>, <span class="number">2.0</span>], [<span class="number">3.0</span>, <span class="number">4.0</span>]])</span><br><span class="line">print(np.linalg.inv(c))</span><br><span class="line"><span class="comment"># çŸ©é˜µçš„è¿¹</span></span><br><span class="line">print(np.trace(c))</span><br></pre></td></tr></table></figure>
<pre><code>[[-2.   1. ]
 [ 1.5 -0.5]]
5.0
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡</span></span><br><span class="line">eigenvalues, eigenvector = np.linalg.eig(c)</span><br><span class="line">print(eigenvalues)</span><br><span class="line">print(eigenvector)</span><br></pre></td></tr></table></figure>
<pre><code>[-0.37228132  5.37228132]
[[-0.82456484 -0.41597356]
 [ 0.56576746 -0.90937671]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>æ•°å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>çˆ¬å–è±†ç“£ç”µå½±å‰250çš„æ•°æ®</title>
    <url>/2020/02/23/douban_movie-3/</url>
    <content><![CDATA[<pre><code>çˆ¬ä¸€ä¸‹è±†ç“£top250çš„ç”µå½±åšä¸€ä¸‹ç»ƒä¹ ï¼Œä»Šå¤©æ•ˆç‡æ¯”è¾ƒä½åªåšäº†ä¸€ç‚¹ï¼Œæ˜å¤©åšå®Œå†é‡æ„ä¸€ä¸‹ä»£ç ï¼Œç”¨å¤šçº¿ç¨‹å®ç°ã€‚
2/24 å°è£…äº†å‡½æ•°ï¼Œæœ€è¿‘å¾—ä¸Šè¯¾ï¼Œæ…¢æ…¢æ›´æ–°äº†ã€‚
</code></pre>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯¼å…¥åº“</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> lxml</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure>
<h1>å‘é€è¯·æ±‚</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#send request</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_request</span><span class="params">(url, headers)</span>:</span></span><br><span class="line">    r = requests.get(url,headers=headers)</span><br><span class="line">    print(r.status_code)</span><br><span class="line">    <span class="keyword">return</span> r</span><br></pre></td></tr></table></figure>
<h1>æå–æ•°æ®</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#fetch data</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(resp, headers)</span>:</span></span><br><span class="line">    selector = lxml.etree.HTML(resp.text)    <span class="comment">#generate object</span></span><br><span class="line">    titles = selector.xpath(<span class="string">'//div[@class = "hd"]/a/span[1]/text()'</span>)<span class="comment">#fetching titles of movies       </span></span><br><span class="line">    urls = selector.xpath(<span class="string">'//div[@class = "hd"]/a/@href'</span>) <span class="comment">#fetching urls of description</span></span><br><span class="line">    <span class="comment">#visit the url to fetch the descriptions</span></span><br><span class="line">    movie_text = []</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        sub_r = requests.get(url,headers=headers)</span><br><span class="line">        selector = lxml.etree.HTML(sub_r.text)</span><br><span class="line">        url_text = <span class="string">' '</span>.join(selector.xpath(<span class="string">'//span[@property="v:summary"]/text()'</span>)).replace(<span class="string">' '</span>,<span class="string">''</span>).replace(<span class="string">'\n'</span>,<span class="string">''</span>).replace(<span class="string">'\u3000'</span>,<span class="string">''</span>)</span><br><span class="line">        movie_text.append(url_text)        </span><br><span class="line">    <span class="comment">#zip the content together</span></span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    data.update(zip(titles,movie_text))</span><br><span class="line">    <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>
<h1>å­˜å…¥æ–‡ä»¶ä¸­</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span><span class="params">(data)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        filepath = os.curdir</span><br><span class="line">        filename = <span class="string">'douban_top250.txt'</span>  </span><br><span class="line">        <span class="keyword">with</span> open(filename,<span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">'DouBan Movie--Top 250'</span>)</span><br><span class="line">            <span class="keyword">for</span> key,value <span class="keyword">in</span> data.items():</span><br><span class="line">                f.write(<span class="string">'\n\n'</span>)</span><br><span class="line">                f.write(key)</span><br><span class="line">                f.write(<span class="string">'\n'</span>)</span><br><span class="line">                f.write(value)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'Download error!!'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">'Download success!!'</span>)</span><br></pre></td></tr></table></figure>
<h1>ä¸»å‡½æ•°</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#main, å¾ªç¯å®ç°ç¿»é¡µ</span></span><br><span class="line">headers = &#123;</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chro'</span></span><br><span class="line">                      <span class="string">'me/53.0.2785.104 Safari/537.36 Core/1.53.2372.400 QQBrowser/9.5.10548.400'</span></span><br><span class="line">&#125;</span><br><span class="line">a = <span class="number">0</span></span><br><span class="line">data = &#123;&#125;</span><br><span class="line"><span class="keyword">while</span>(a != <span class="number">250</span>):</span><br><span class="line">    url =  <span class="string">"https://movie.douban.com/top250?start="</span>+ str(a) +<span class="string">"&amp;filter="</span></span><br><span class="line">    resp = send_request(url, headers)</span><br><span class="line">    data_chunk = fetch(resp, headers)</span><br><span class="line">    data.update(data_chunk)</span><br><span class="line">    a += <span class="number">25</span></span><br><span class="line">download(data)</span><br></pre></td></tr></table></figure>
<pre><code>200
200
200
200
200
200
200
200
200
200
Download success!!
</code></pre>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>beatiful-soupå’Œlxml</title>
    <url>/2020/02/20/beatiful-soup/</url>
    <content><![CDATA[<p>beautiful soupæ˜¯ä¸€ä¸ªä»htmlæˆ–xmlæ–‡ä»¶ä¸­æå–æ•°æ®çš„pythonåº“ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> beautifulsoup</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html_doc = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">soup = BeautifulSoup(html_doc, <span class="string">'html.parser'</span>) <span class="comment">#åˆ›å»ºä¸€ä¸ªsoupå¯¹è±¡</span></span><br><span class="line">print(soup.prettify()) <span class="comment">#æ ‡å‡†æ ¼å¼è¾“å‡º</span></span><br></pre></td></tr></table></figure>
<h2 id="æµè§ˆç»“æ„åŒ–æ•°æ®"><a class="header-anchor" href="#æµè§ˆç»“æ„åŒ–æ•°æ®">Â¶</a>æµè§ˆç»“æ„åŒ–æ•°æ®</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.title <span class="comment">#è·å–title</span></span><br><span class="line">soup.a.attrs <span class="comment">#å–å‡ºaæ ‡ç­¾çš„æ ‘å‹</span></span><br><span class="line">soup.find(id=<span class="string">'link3'</span>) <span class="comment">#</span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°æ‰€æœ‰aæ ‡ç­¾çš„é“¾æ¥ï¼Œfind_all('')è¿”å›çš„æ˜¯list</span></span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">'a'</span>):</span><br><span class="line">    print(link.get(<span class="string">'href'</span>))</span><br><span class="line">    <span class="comment"># http://example.com/elsie</span></span><br><span class="line">    <span class="comment"># http://example.com/lacie</span></span><br><span class="line">    <span class="comment"># http://example.com/tillie</span></span><br><span class="line">print(soup.get_text()) <span class="comment">#è·å–æ‰€æœ‰æ–‡å­—å†…å®¹</span></span><br></pre></td></tr></table></figure>
<h2 id="æ”¯æŒcssé€‰æ‹©å™¨"><a class="header-anchor" href="#æ”¯æŒcssé€‰æ‹©å™¨">Â¶</a>æ”¯æŒcssé€‰æ‹©å™¨</h2>
<h2 id="ï¿¼3"><a class="header-anchor" href="#ï¿¼3">Â¶</a><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup.select(<span class="string">'.story'</span>) <span class="comment">#æŸ¥æ‰¾ç±»åä¸ºstoryçš„ç±»æ ‡ç­¾</span></span><br><span class="line">soup.select(<span class="string">'#link'</span>) <span class="comment">#tag idæŸ¥æ‰¾ä¹Ÿå¯ä»¥</span></span><br></pre></td></tr></table></figure></h2>
<h1>lxml</h1>
<p>ç”¨lxmlä½œä¸ºè§£æçš„å¼•æ“ã€‚åº•å±‚æ˜¯cå†™çš„ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">soup_lxml = BeautifulSoup(html_doc, <span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="xpath"><a class="header-anchor" href="#xpath">Â¶</a>xpath</h2>
<p>xpathçš„æ€§èƒ½æŒºä¸é”™ï¼Œxmlæ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯çš„è¯­è¨€ã€‚</p>
<h3 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ">Â¶</a>æ¦‚å¿µ</h3>
<h4 id="Node-èŠ‚ç‚¹"><a class="header-anchor" href="#Node-èŠ‚ç‚¹">Â¶</a>Node: èŠ‚ç‚¹</h4>
<p>å…ƒç´ ï¼Œå±æ€§ï¼Œæ–‡æœ¬ï¼Œå‘½åç©ºé—´ï¼Œæ–‡æ¡£ï¼ˆæ ¹ï¼‰èŠ‚ç‚¹</p>
<h4 id="èŠ‚ç‚¹å…³ç³»"><a class="header-anchor" href="#èŠ‚ç‚¹å…³ç³»">Â¶</a>èŠ‚ç‚¹å…³ç³»</h4>
<p>Parent çˆ¶<br>
Children å­<br>
Siblingï¼šåŒèƒï¼Œå…±ç”¨parent<br>
Ancestorï¼šå…ˆè¾ˆ<br>
Descendantï¼šåä»£</p>
<h3 id="xpathè¯­æ³•"><a class="header-anchor" href="#xpathè¯­æ³•">Â¶</a>xpathè¯­æ³•</h3>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodename</td>
<td style="text-align:center">é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>//</td>
<td style="text-align:center">ä»ä»»æ„å­èŠ‚ç‚¹ä¸­é€‰å–æ–‡æœ¬</td>
</tr>
<tr>
<td>/</td>
<td style="text-align:center">ä»æ ¹èŠ‚ç‚¹ä¸­é€‰å–(å·²é€‰æ‹©çš„èŠ‚ç‚¹çš„èŠ‚ç‚¹ä¸­)</td>
</tr>
<tr>
<td>.</td>
<td style="text-align:center">è¡¨ç¤ºé€‰å–å½“å‰èŠ‚ç‚¹</td>
</tr>
<tr>
<td>â€¦</td>
<td style="text-align:center">è¡¨ç¤ºé€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</td>
</tr>
<tr>
<td>@</td>
<td style="text-align:center">é€‰å–å±æ€§</td>
</tr>
</tbody>
</table>
<h2 id="ï¿¼5"><a class="header-anchor" href="#ï¿¼5">Â¶</a><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">r = requests.get(<span class="string">'http://iguye.com/books.xml'</span>)</span><br><span class="line">se = etree.HTML(r.text) <span class="comment">#åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨å¯¹è±¡</span></span><br><span class="line">print(se.xpath(<span class="string">'//book'</span>)) <span class="comment">#//è¡¨ç¤ºä»ä»»æ„å­èŠ‚ç‚¹ä¸­é€‰å–</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book/author/text()'</span>)) <span class="comment">#é€‰å–ä¹¦åº—ä¸‹æ‰€æœ‰çš„ä¹¦æœ¬çš„ä½œè€…åå­—</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book/title/@lang'</span>))<span class="comment">#é€‰å–ä¹¦åº—ä¸‹æ‰€æœ‰çš„ä¹¦æœ¬çš„è¯­è¨€ä¿¡æ¯</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[1]/title/text()'</span>)) <span class="comment">#ç¬¬ä¸€æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[last()]/title/text()'</span>)) <span class="comment">#æœ€åä¸€æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[last()-1]/title/text()'</span>)) <span class="comment">#å€’æ•°ç¬¬äºŒæœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[position()&lt;3]/title/text()'</span>)) <span class="comment">#å‰ä¸¤æœ¬ä¹¦</span></span><br><span class="line">print(se.xpath(<span class="string">'//book[@category="web"]/title/text()'</span>))<span class="comment">#é€‰å–æ‰€æœ‰åˆ†ç±»ä¸ºwebçš„èŠ‚ç‚¹</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[price&gt;3]/price/text()'</span>))<span class="comment">#é€‰å–æ‰€æœ‰ä»·æ ¼å¤§äº30.0å…ƒçš„ä¹¦æœ¬</span></span><br><span class="line">print(se.xpath(<span class="string">'//bookstore/book[contains(@class,"book")]/@class/text()'</span>))<span class="comment">#ç±»åä¸­åŒ…å«bookçš„ä¹¦æœ¬</span></span><br></pre></td></tr></table></figure></h2>
<h1>è§£æå™¨æ¯”è¾ƒ</h1>
<p>reè™½ç„¶é€Ÿåº¦æœ€å¿«ï¼Œä½†æ˜¯å­¦ä¹ æˆæœ¬é«˜ã€‚beautifulsoupåˆ™è¾ƒæ…¢ã€‚æ‰€æœ‰æŠ˜ä¸­çš„æ–¹æ¡ˆé€‰æ‹©lxmlä¸ºä½³ã€‚</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>requests</title>
    <url>/2020/02/19/requests/</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import requests</span><br></pre></td></tr></table></figure>
<p>requestsæ¯”æ ‡å‡†åº“çš„urllibæ–¹ä¾¿å¾ˆå¤šï¼Œä»£ç ä¹Ÿå¾ˆç®€æ´æ˜äº†ã€‚</p>
<a id="more"></a>
<h1>å‘é€è¯·æ±‚</h1>
<h2 id="requestå‘é€getå’Œpostè¯·æ±‚"><a class="header-anchor" href="#requestå‘é€getå’Œpostè¯·æ±‚">Â¶</a>requestå‘é€getå’Œpostè¯·æ±‚</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'https://api.github.com/events'</span>) <span class="comment">#å‘é€getè¯·æ±‚</span></span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, data = &#123;<span class="string">'key'</span>:<span class="string">'value'</span>&#125;) <span class="comment">#å‘é€postè¯·æ±‚</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¼ é€’urlå‚æ•°"><a class="header-anchor" href="#ä¼ é€’urlå‚æ•°">Â¶</a>ä¼ é€’urlå‚æ•°</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: [<span class="string">'value2'</span>, <span class="string">'value3'</span>]&#125; <span class="comment">#å¯ä»¥æ·»åŠ ä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">r = requests.get(<span class="string">'https://api.github.com/events'</span>, params = payload) </span><br><span class="line">print(r.url) <span class="comment">#URLä¼šè¢«æ­£ç¡®ç¼–ç </span></span><br><span class="line"><span class="comment">#å­—å…¸ä¸­çš„Noneå€¼ä¸ä¼šè¢«æ·»åŠ åˆ°URLé‡Œ</span></span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, data = &#123;<span class="string">'key'</span>:<span class="string">'value'</span>&#125;) <span class="comment">#å‘é€postè¯·æ±‚</span></span><br><span class="line"><span class="comment">#http://httpbin.org/get?key1=value1&amp;key2=value2&amp;key2=value3</span></span><br></pre></td></tr></table></figure>
<h2 id="å“åº”å†…å®¹"><a class="header-anchor" href="#å“åº”å†…å®¹">Â¶</a>å“åº”å†…å®¹</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r.text    <span class="comment">#å“åº”æŠ¥æ–‡</span></span><br><span class="line">r.encoding <span class="comment">#æŸ¥çœ‹ç¼–ç æ–¹å¼</span></span><br><span class="line">r.encoding = <span class="string">'ISO-8859-1'</span> <span class="comment">#æ”¹å˜å“åº”æŠ¥æ–‡çš„ç¼–ç æ–¹å¼</span></span><br><span class="line">r.content <span class="comment">#åŸæœ¬çš„æŠ¥æ–‡</span></span><br><span class="line">r.json()  <span class="comment">#jsonè§£ç </span></span><br></pre></td></tr></table></figure>
<h2 id="å®šåˆ¶è¯·æ±‚å¤´"><a class="header-anchor" href="#å®šåˆ¶è¯·æ±‚å¤´">Â¶</a>å®šåˆ¶è¯·æ±‚å¤´</h2>
<h3 id="è‡ªå®šä¹‰user-agent"><a class="header-anchor" href="#è‡ªå®šä¹‰user-agent">Â¶</a>è‡ªå®šä¹‰user-agent</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ua = <span class="string">' Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Safari/605.1.15'</span></span><br><span class="line">headers = &#123;<span class="string">'user-agent'</span>:ua&#125;</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/headers'</span>, headers = headers)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="cookie"><a class="header-anchor" href="#cookie">Â¶</a>cookie</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cookies = dict(userid = <span class="string">'123456'</span>, token = <span class="string">'#####'</span>)</span><br><span class="line">r = requests.get(<span class="string">'http://httpbin.org/cookies'</span>, cookies = cookies)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="basic-authè®¤è¯"><a class="header-anchor" href="#basic-authè®¤è¯">Â¶</a>basic-authè®¤è¯</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/basic-auth/xxx/1123'</span>, auth = (<span class="string">'xxx'</span>,<span class="string">'1123'</span>))</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="çŠ¶æ€ç "><a class="header-anchor" href="#çŠ¶æ€ç ">Â¶</a>çŠ¶æ€ç </h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/status/404'</span>)</span><br><span class="line">r.status_code</span><br><span class="line">r.raise_for_status() <span class="comment">#æŠ›å‡ºå¼‚å¸¸ï¼Œ4xxå’Œ5xxçš„</span></span><br></pre></td></tr></table></figure>
<h3 id="sessionå¯¹è±¡"><a class="header-anchor" href="#sessionå¯¹è±¡">Â¶</a>sessionå¯¹è±¡</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#sessionå¯¹è±¡ä¼šä¿å­˜æœåŠ¡å™¨è¿”å›çš„set-cookieå¤´ä¿¡æ¯é‡Œçš„å†…å®¹</span></span><br><span class="line">s = requests.session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/userid/123456789'</span>)</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/token/######'</span>)</span><br><span class="line"><span class="comment">#ä¸‹ä¸€æ¬¡è¯·æ±‚ä¼šå°†æœ¬åœ°æ‰€æœ‰çš„cookiesä¿¡æ¯è‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´ä¿¡æ¯é‡Œ</span></span><br><span class="line">r = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨requestsä¸­ä½¿ç”¨ä»£ç†"><a class="header-anchor" href="#åœ¨requestsä¸­ä½¿ç”¨ä»£ç†">Â¶</a>åœ¨requestsä¸­ä½¿ç”¨ä»£ç†</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'ä¸ä½¿ç”¨ä»£ç†ï¼š'</span>, requests.get(<span class="string">'http://httpbin.org/ip'</span>).json())</span><br><span class="line">print(<span class="string">'ä½¿ç”¨ä»£ç†ï¼š'</span>,requests.get(<span class="string">'http://httpbin.org/ip'</span>, proxies=&#123;<span class="string">'http'</span>:<span class="string">'http://iguye.com:41801'</span>&#125;).json())</span><br></pre></td></tr></table></figure>
<h3 id="è¶…æ—¶æŠ¥é”™"><a class="header-anchor" href="#è¶…æ—¶æŠ¥é”™">Â¶</a>è¶…æ—¶æŠ¥é”™</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = requests.get(<span class="string">'http://httpbin.org/delay/5'</span>,timeout = <span class="number">5</span>)</span><br><span class="line">print(r.json())</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>urlç»“æ„</title>
    <url>/2020/02/19/url%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th style="text-align:right">scheme</th>
<th style="text-align:center">Domain</th>
<th style="text-align:center">port</th>
<th style="text-align:center">path</th>
<th style="text-align:center">pathinfo</th>
<th style="text-align:left">Query string</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">http:</td>
<td style="text-align:center"><a href="//localhost" target="_blank" rel="noopener">//localhost</a>:</td>
<td style="text-align:center">4000/</td>
<td style="text-align:center">2020/02/19/</td>
<td style="text-align:center">requests/</td>
<td style="text-align:left">#more</td>
</tr>
</tbody>
</table>
<center>urlç»“æ„</center>
<a id="more"></a>
ä»ä¸Šé¢çš„URLå¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªå®Œæ•´çš„URLåŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š
<p>1ã€åè®®éƒ¨åˆ†ï¼šè¯¥URLçš„åè®®éƒ¨åˆ†ä¸ºâ€œhttpï¼šâ€ï¼Œè¿™ä»£è¡¨ç½‘é¡µä½¿ç”¨çš„æ˜¯HTTPåè®®ã€‚åœ¨Internetä¸­å¯ä»¥ä½¿ç”¨å¤šç§åè®®ï¼Œå¦‚HTTPï¼ŒFTPç­‰ç­‰æœ¬ä¾‹ä¸­ä½¿ç”¨çš„æ˜¯HTTPåè®®ã€‚åœ¨&quot;HTTP&quot;åé¢çš„â€œ//â€ä¸ºåˆ†éš”ç¬¦</p>
<p>2ã€åŸŸåéƒ¨åˆ†ï¼šè¯¥URLçš„åŸŸåéƒ¨åˆ†ä¸ºâ€œ<a href="http://www.aspxfans.com" target="_blank" rel="noopener">www.aspxfans.com</a>â€ã€‚ä¸€ä¸ªURLä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨IPåœ°å€ä½œä¸ºåŸŸåä½¿ç”¨</p>
<p>3ã€ç«¯å£éƒ¨åˆ†ï¼šè·Ÿåœ¨åŸŸååé¢çš„æ˜¯ç«¯å£ï¼ŒåŸŸåå’Œç«¯å£ä¹‹é—´ä½¿ç”¨â€œ:â€ä½œä¸ºåˆ†éš”ç¬¦ã€‚ç«¯å£ä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ï¼Œå¦‚æœçœç•¥ç«¯å£éƒ¨åˆ†ï¼Œå°†é‡‡ç”¨é»˜è®¤ç«¯å£80</p>
<p>4ã€è™šæ‹Ÿç›®å½•éƒ¨åˆ†ï¼šä»åŸŸååçš„ç¬¬ä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°æœ€åä¸€ä¸ªâ€œ/â€ä¸ºæ­¢ï¼Œæ˜¯è™šæ‹Ÿç›®å½•éƒ¨åˆ†ã€‚è™šæ‹Ÿç›®å½•ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„è™šæ‹Ÿç›®å½•æ˜¯â€œ/news/â€</p>
<p>5ã€æ–‡ä»¶åéƒ¨åˆ†ï¼šä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°â€œï¼Ÿâ€ä¸ºæ­¢ï¼Œæ˜¯æ–‡ä»¶åéƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰â€œ?â€,åˆ™æ˜¯ä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°â€œ#â€ä¸ºæ­¢ï¼Œæ˜¯æ–‡ä»¶éƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰â€œï¼Ÿâ€å’Œâ€œ#â€ï¼Œé‚£ä¹ˆä»åŸŸååçš„æœ€åä¸€ä¸ªâ€œ/â€å¼€å§‹åˆ°ç»“æŸï¼Œéƒ½æ˜¯æ–‡ä»¶åéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„æ–‡ä»¶åæ˜¯â€œindex.aspâ€ã€‚æ–‡ä»¶åéƒ¨åˆ†ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†ï¼Œå¦‚æœçœç•¥è¯¥éƒ¨åˆ†ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å</p>
<p>6ã€é”šéƒ¨åˆ†ï¼šä»â€œ#â€å¼€å§‹åˆ°æœ€åï¼Œéƒ½æ˜¯é”šéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„é”šéƒ¨åˆ†æ˜¯â€œnameâ€ã€‚é”šéƒ¨åˆ†ä¹Ÿä¸æ˜¯ä¸€ä¸ªURLå¿…é¡»çš„éƒ¨åˆ†</p>
<p>7ã€å‚æ•°éƒ¨åˆ†ï¼šä»â€œï¼Ÿâ€å¼€å§‹åˆ°â€œ#â€ä¸ºæ­¢ä¹‹é—´çš„éƒ¨åˆ†ä¸ºå‚æ•°éƒ¨åˆ†ï¼Œåˆç§°æœç´¢éƒ¨åˆ†ã€æŸ¥è¯¢éƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­çš„å‚æ•°éƒ¨åˆ†ä¸ºâ€œboardID=5&amp;ID=24618&amp;page=1â€ã€‚å‚æ•°å¯ä»¥å…è®¸æœ‰å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¸å‚æ•°ä¹‹é—´ç”¨â€œ&amp;â€ä½œä¸ºåˆ†éš”ç¬¦ã€‚</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>curlå’Œwget</title>
    <url>/2020/02/18/curl%E5%92%8Cwget%E4%BA%86%E8%A7%A3/</url>
    <content><![CDATA[<h1>curl</h1>
<p>curlæ˜¯ç³»ç»Ÿè‡ªå¸¦çš„cåº“ï¼Œç®€å•è¿‡ä¸€ä¸‹ï¼Œè®°å½•ä¸€ä¸‹å‚æ•°ã€‚<br>
ä¸å¸¦å‚æ•°å°±æ˜¯ï¼ŒGETè¯·æ±‚ã€‚</p>
<a id="more"></a>
<h2 id="A"><a class="header-anchor" href="#A">Â¶</a>-A</h2>
<p>æŒ‡å®šå®¢æˆ·ç«¯çš„ä»£ç†æ ‡å¤´</p>
<h2 id="B"><a class="header-anchor" href="#B">Â¶</a>-B</h2>
<p>å‘é€cookie</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -b <span class="string">'foo1=bar;foo2=bar2'</span> https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="X"><a class="header-anchor" href="#X">Â¶</a>-X</h2>
<p>ç”¨æŒ‡å®šæ–¹å¼è¯·æ±‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -X Post https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="d"><a class="header-anchor" href="#d">Â¶</a>-d</h2>
<p>ç”¨Postè¯·æ±‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -d <span class="string">"a=1&amp;b=1"</span> https://google.com</span><br></pre></td></tr></table></figure>
<h2 id="L"><a class="header-anchor" href="#L">Â¶</a>-L</h2>
<p>è·ŸéšæœåŠ¡å™¨é‡å®šå‘</p>
<h2 id="H"><a class="header-anchor" href="#H">Â¶</a>-H</h2>
<p>è®¾ç½®httpè¯·æ±‚å¤´ä¿¡æ¯</p>
<h2 id="k"><a class="header-anchor" href="#k">Â¶</a>-k</h2>
<p>è·³è¿‡sslæ£€æµ‹(https)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -k https://www.example.com</span><br></pre></td></tr></table></figure>
<h2 id="O"><a class="header-anchor" href="#O">Â¶</a>-O</h2>
<p>ä»¥è¿œç¨‹çš„æ–‡ä»¶åä¸‹è½½ä¿å­˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -O https://httpbin.org/image/jpeg</span><br></pre></td></tr></table></figure>
<h2 id="o"><a class="header-anchor" href="#o">Â¶</a>-o</h2>
<p>ä»¥è‡ªå®šçš„æ–‡ä»¶åä¸‹è½½ä¿å­˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -o wolf.jpeg https://httpbin.org/image/jpeg</span><br></pre></td></tr></table></figure>
<h2 id="s"><a class="header-anchor" href="#s">Â¶</a>-s</h2>
<p>ä¸æ˜¾ç¤ºæ— å…³ä¿¡æ¯</p>
<h2 id="v"><a class="header-anchor" href="#v">Â¶</a>-v</h2>
<p>æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯</p>
<hr>
<h1>wget</h1>
<p>ç³»ç»Ÿè‡ªå¸¦çš„ä¸‹è½½æ–‡ä»¶çš„å·¥å…·ã€‚</p>
<h2 id="O-v2"><a class="header-anchor" href="#O-v2">Â¶</a>-O</h2>
<p>ä»¥æŒ‡å®šæ–‡ä»¶åå­˜æ–‡ä»¶</p>
<h2 id="â€“limit-rate"><a class="header-anchor" href="#â€“limit-rate">Â¶</a>â€“limit-rate=</h2>
<p>é™é€Ÿ</p>
<h2 id="c"><a class="header-anchor" href="#c">Â¶</a>-c</h2>
<p>æ–­ç‚¹ç»­ä¼ </p>
<h2 id="b"><a class="header-anchor" href="#b">Â¶</a>-b</h2>
<p>åå°ä¸‹è½½</p>
<h2 id="U"><a class="header-anchor" href="#U">Â¶</a>-U</h2>
<p>è®¾ç½®user-agent</p>
<h2 id="mirror"><a class="header-anchor" href="#mirror">Â¶</a>-mirror</h2>
<p>é•œåƒæŸä¸ªç½‘ç«™</p>
<h2 id="p"><a class="header-anchor" href="#p">Â¶</a>-p</h2>
<p>ä¸‹è½½ç½‘é¡µçš„æ‰€æœ‰å†…å®¹</p>
<h2 id="r"><a class="header-anchor" href="#r">Â¶</a>-r</h2>
<p>é€’å½’ä¸‹è½½æ‰€æœ‰ç½‘é¡µä¸­æ‰€æœ‰é“¾æ¥</p>
]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>http(è¶…æ–‡æœ¬ä¼ è¾“åè®®)</title>
    <url>/2020/02/17/http%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<pre><code>åŸºäºTCP/IPçš„åº”ç”¨å±‚åè®®ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ•°æ®ä¼ è¾“çš„æ ¼å¼ï¼Œé»˜è®¤ç«¯å£ï¼š80ã€‚ åŸºäºè¯·æ±‚ä¸å“åº”æ¨¡å¼ï¼Œæ— çŠ¶æ€ã€‚
</code></pre>
<a id="more"></a>
<h1>http header</h1>
<h2 id="è¯·æ±‚æŠ¥æ–‡"><a class="header-anchor" href="#è¯·æ±‚æŠ¥æ–‡">Â¶</a>è¯·æ±‚æŠ¥æ–‡</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST &#x2F;test.php HTTP&#x2F;1.1               &#x2F;&#x2F;è¯·æ±‚è¡Œ</span><br><span class="line">HOSTï¼šwww.test.com                    &#x2F;&#x2F;è¯·æ±‚å¤´</span><br><span class="line">User-Agentï¼šMozilla&#x2F;5.0 ï¼ˆwindows NT 6.1ï¼›rvï¼š15.0ï¼‰Gecko&#x2F;20100101 Firefox&#x2F;15.0        </span><br><span class="line">                                    &#x2F;&#x2F;ç©ºç™½è¡Œï¼Œä»£è¡¨è¯·æ±‚å¤´ç»“æŸ</span><br><span class="line">Username&#x3D;admin&amp;password&#x3D;admin       &#x2F;&#x2F;è¯·æ±‚æ­£æ–‡</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚è¡Œï¼šè¯·æ±‚æ–¹å¼ + è¯·æ±‚èµ„æºè·¯å¾„ + ç‰ˆæœ¬<br>
è¯·æ±‚å¤´ï¼šå‘èµ·è¯·æ±‚çš„ä¸»æœºä¿¡æ¯<br>
æ­£æ–‡ï¼š  optional</p>
<h3 id="è¯·æ±‚å¤´"><a class="header-anchor" href="#è¯·æ±‚å¤´">Â¶</a>è¯·æ±‚å¤´</h3>
<ul>
<li>Host è¯·æ±‚æŠ¥å¤´åŸŸä¸»è¦ç”¨äºæŒ‡å®šè¢«è¯·æ±‚èµ„æºçš„Internetä¸»æœºå’Œç«¯å£ã€‚</li>
<li>User-Agent è¯·æ±‚æŠ¥å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å°†å®ƒçš„æ“ä½œç³»ç»Ÿã€æµè§ˆå™¨å’Œå…¶ä»–å±æ€§å‘Šè¯‰æœåŠ¡å™¨ã€‚</li>
<li>Referer åŒ…å«ä¸€ä¸ªURLï¼Œä»£è¡¨å½“å‰è®¿é—®URLçš„ä¸Šä¸€ä¸ªURLï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·æ˜¯ä»ä»€ä¹ˆåœ°æ–¹æ¥åˆ°æœ¬é¡µé¢ã€‚å½“å‰è¯·æ±‚çš„åŸå§‹URLåœ°å€ã€‚</li>
<li>Cookie æ˜¯éå¸¸é‡è¦çš„è¯·æ±‚å¤´ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºè¯·æ±‚è€…çš„èº«ä»½ç­‰ã€‚</li>
<li>Accept è¿™ä¸ªæ¶ˆæ¯å¤´ç”¨äºå‘Šè¯‰æœåŠ¡å™¨å®¢æˆ·ç«¯æ„¿æ„æ¥å—é‚£äº›å†…å®¹ï¼Œæ¯”å¦‚å›¾åƒç±»ï¼ŒåŠå…¬æ–‡æ¡£æ ¼å¼ç­‰ç­‰ã€‚</li>
</ul>
<h3 id="è¯·æ±‚æ–¹å¼"><a class="header-anchor" href="#è¯·æ±‚æ–¹å¼">Â¶</a>è¯·æ±‚æ–¹å¼</h3>
<p><img src="http%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F.png" alt="httpè¯·æ±‚æ–¹å¼"></p>
<hr>
<h2 id="å“åº”æŠ¥æ–‡"><a class="header-anchor" href="#å“åº”æŠ¥æ–‡">Â¶</a>å“åº”æŠ¥æ–‡</h2>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK   					 &#x2F;&#x2F;å“åº”è¡Œ</span><br><span class="line">Date: Sun, 15 Nov 2015 11:02:04 GMT    &#x2F;&#x2F;å“åº”å¤´</span><br><span class="line">Server: bfe&#x2F;1.0.8.9</span><br><span class="line">Content-Length: 2605</span><br><span class="line">Content-Type: application&#x2F;javascript</span><br><span class="line">Cache-Control: max-age&#x3D;315360000</span><br><span class="line">Expires: Fri, 13 Jun 2025 09:54:00 GMT</span><br><span class="line">Content-Encoding: gzip</span><br><span class="line">Set-Cookie: H_PS_PSSID&#x3D;2022_1438_1944_1788; path&#x3D;&#x2F;; domain&#x3D;test.com</span><br><span class="line">Connection: keep-alive</span><br><span class="line">					      &#x2F;&#x2F;ç©ºç™½è¡Œï¼Œä»£è¡¨å“åº”å¤´ç»“æŸ</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt; Index.html &lt;&#x2F;title&gt;&lt;&#x2F;head&gt;  &#x2F;&#x2F;å“åº”æ­£æ–‡æ¶ˆæ¯ä¸»é¢˜</span><br></pre></td></tr></table></figure>
<p>å“åº”è¡Œï¼šç‰ˆæœ¬+çŠ¶æ€ç <br>
å“åº”å¤´ï¼šæœåŠ¡ç«¯çš„ä¿¡æ¯</p>
<h3 id="å“åº”å¤´"><a class="header-anchor" href="#å“åº”å¤´">Â¶</a>å“åº”å¤´</h3>
<p><img src="http%E5%93%8D%E5%BA%94%E5%A4%B4.png" alt="httpå“åº”å¤´"></p>
<h3 id="çŠ¶æ€ç "><a class="header-anchor" href="#çŠ¶æ€ç ">Â¶</a>çŠ¶æ€ç </h3>
<p>å¸¸è§çš„çŠ¶æ€ç æè¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>200ï¼šå®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>302ï¼šé‡å®šå‘ã€‚</li>
<li>404ï¼šè¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>400ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ã€‚</li>
<li>401ï¼šè¯·æ±‚æœªç»æˆæƒã€‚</li>
<li>403ï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚</li>
<li>500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ˜¯æœ€å¸¸è§çš„çŠ¶æ€ã€‚</li>
<li>503ï¼šæœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
</ul>
<hr>
<h2 id="Q-A"><a class="header-anchor" href="#Q-A">Â¶</a>Q&amp;A</h2>
<ul>
<li>
<p>getå’Œpostçš„åŒºåˆ«<br>
getè¯·æ±‚çš„å‚æ•°åœ¨urlåé¢æ·»åŠ <br>
poståœ¨è¯·æ±‚ä½“ä¸­é—´</p>
</li>
<li>
<p>httpsåŠ ssl, tsl, è¯ä¹¦</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>åè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘çš„åšå®¢æ˜¯æ€ä¹ˆåˆ›å»ºçš„</title>
    <url>/2020/02/16/%E5%8D%9A%E5%AE%A2%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<p>ç®€å•è®°å½•ä¸€ä¸‹ï¼Œåšå®¢çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h2 id="å®‰è£…ç¯å¢ƒ"><a class="header-anchor" href="#å®‰è£…ç¯å¢ƒ">Â¶</a>å®‰è£…ç¯å¢ƒ</h2>
<pre><code>åœ¨åˆ›å»ºåšå®¢ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰Githubè´¦å·ï¼Œè¿˜æœ‰ç¡®ä¿ç³»ç»Ÿé‡Œæœ‰gitå·¥å…·ã€‚
</code></pre>
<hr>
<h4 id="ä¸‹è½½hexo"><a class="header-anchor" href="#ä¸‹è½½hexo">Â¶</a>ä¸‹è½½hexo</h4>
<ol>
<li>ç›´æ¥å»nodejs.orgå®˜ç½‘ä¸‹è½½node.js</li>
<li>æ‰“å¼€terminalä¸‹è½½hexoéœ€è¦ç”¨åˆ°node.jsçš„npmå®‰è£…åŒ…ç®¡ç†å™¨:</li>
</ol>
<h2 id="ï¿¼0"><a class="header-anchor" href="#ï¿¼0">Â¶</a><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo su                     ##è·å–æœ€é«˜æƒé™</span><br><span class="line">npm install -g cnpm --registry&#x3D;&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org </span><br><span class="line">                            ##æ·˜å®çš„é•œåƒæºï¼Œç”¨cnpmä¸‹è½½æ¯”è¾ƒå¿«</span><br><span class="line">cnpm intall -g hexo-cli     ##å¼€å§‹ä¸‹è½½hexo</span><br></pre></td></tr></table></figure></h2>
<h2 id="åˆ›å»ºåšå®¢"><a class="header-anchor" href="#åˆ›å»ºåšå®¢">Â¶</a>åˆ›å»ºåšå®¢</h2>
<h4 id="åˆå§‹åŒ–åšå®¢"><a class="header-anchor" href="#åˆå§‹åŒ–åšå®¢">Â¶</a>åˆå§‹åŒ–åšå®¢</h4>
<p>åˆ›å»ºåšå®¢çš„ä»£ç ä¹Ÿå¾ˆç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir blog</span><br><span class="line">cd blog                     ##åˆ›ä¸ªæ–‡ä»¶å¤¹å¥½ç®¡ç†</span><br><span class="line">sudo hexo init              ##åˆå§‹åŒ–hexo</span><br><span class="line">hexo s                      ##å¯ä»¥åœ¨æœ¬åœ°çœ‹ä¸€ä¸‹ï¼Œblogçš„æ¨¡ç‰ˆï¼Œåç»­æ·»åŠ äº†å†…å®¹ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæŒ‡ä»¤å»é¢„è§ˆ</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ–°æ–‡ç« "><a class="header-anchor" href="#åˆ›å»ºæ–°æ–‡ç« ">Â¶</a>åˆ›å»ºæ–°æ–‡ç« </h3>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new æ–‡ç« å.md</span><br></pre></td></tr></table></figure>
<p>ä¸€è¡Œä»£ç å³åˆ›å»ºmarkdownæ ¼å¼çš„æ–‡ç« ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç›´æ¥åˆ›å»ºï¼Œä¸€èˆ¬å­˜åœ¨ /blog/source/_posts çš„è·¯å¾„ä¸‹ã€‚</p>
<hr>
<h2 id="é…ç½®åˆ°è¿œç«¯ä»“åº“"><a class="header-anchor" href="#é…ç½®åˆ°è¿œç«¯ä»“åº“">Â¶</a>é…ç½®åˆ°è¿œç«¯ä»“åº“</h2>
<h4 id="åˆ›å»ºgithubä»“åº“"><a class="header-anchor" href="#åˆ›å»ºgithubä»“åº“">Â¶</a>åˆ›å»ºgithubä»“åº“</h4>
<p>è¿™ä¸€æ­¥å°±æ˜¯åœ¨githubé‡Œé¢åˆ›å»ºä¸€ä¸ªrepositoryï¼Œå°±æ˜¯å­˜blogæ–‡ä»¶çš„ï¼Œrepositoryçš„nameä¸€å®šè¦æ˜¯ github name + .github.io, <a href="http://xn--noonett-i22mo3ry3qkvkl5qky6a.github.io" target="_blank" rel="noopener">æ¯”å¦‚æˆ‘çš„å°±æ˜¯noonett.github.io</a></p>
<h4 id="ä¿®è¿‡é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#ä¿®è¿‡é…ç½®æ–‡ä»¶">Â¶</a>ä¿®è¿‡é…ç½®æ–‡ä»¶</h4>
<p>åœ¨/blog/ è·¯å¾„ä¸‹æœ‰ä¸€ä¸ª _config.yml æ–‡ä»¶ï¼Œè¿›å…¥ä¿®æ”¹ï¼Œæ‰¾åˆ°deployä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">type: git</span><br><span class="line">repo: https:&#x2F;&#x2F;github.com&#x2F;noonett&#x2F;noonett.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„repoå°±æ˜¯repositoryä»“åº“çš„åœ°å€ã€‚</p>
<h4 id="éƒ¨ç½²è‡³ä»“åº“"><a class="header-anchor" href="#éƒ¨ç½²è‡³ä»“åº“">Â¶</a>éƒ¨ç½²è‡³ä»“åº“</h4>
<p>å°†æœ¬åœ°ç°æœ‰çš„blogéƒ¨ç½²è‡³è¿œç«¯ä»“åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æœ‰è‡ªå·±çš„åšå®¢å•¦ï¼š å°±æ˜¯ä½ çš„repositoryåå­—ã€‚</p>
<h4 id="ä¸»é¢˜çš„æ›´æ¢"><a class="header-anchor" href="#ä¸»é¢˜çš„æ›´æ¢">Â¶</a>ä¸»é¢˜çš„æ›´æ¢</h4>
<p>ä¸»é¢˜çš„æ›´æ¢ä¹Ÿå¾ˆç®€å•æ–¹ä¾¿ï¼Œç½‘ä¸Šæ‰¾åˆ°ä¸»é¢˜ï¼Œcloneåˆ°è‡ªå·±çš„ä»“åº“é‡Œï¼Œç„¶åä¿®æ”¹ymlé‡Œçš„themeæ”¹æˆä¸»é¢˜çš„åå­—å³å¯ï¼Œç™¾åº¦ä¸Šï¼ŒçŸ¥ä¹ä¸ŠæŒºå¤šçš„ã€‚</p>
<hr>
<h2 id="ç»“æŸè¯­"><a class="header-anchor" href="#ç»“æŸè¯­">Â¶</a>ç»“æŸè¯­</h2>
<p>ç½‘ä¸Šå…¶å®æœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±æ˜¯è®°å½•ä¸€ä¸‹æˆ‘çš„åšå®¢æ˜¯å¦‚ä½•åˆ›å»ºçš„</p>
<hr>
<h2 id="å‚è€ƒæ–‡çŒ®"><a class="header-anchor" href="#å‚è€ƒæ–‡çŒ®">Â¶</a>å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://www.bilibili.com/video/av44544186?from=search&amp;seid=16653039335337070050" target="_blank" rel="noopener">https://www.bilibili.com/video/av44544186?from=search&amp;seid=16653039335337070050</a>  æ‰‹æŠŠæ‰‹æ•™ä½ ä»0å¼€å§‹æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ |æ— å‘ç‰ˆè§†é¢‘æ•™ç¨‹| hexo</p>
]]></content>
      <tags>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆ‘æ¥ç½‘ä¸Šå†²æµªäº†</title>
    <url>/2020/02/16/%E6%88%91%E6%9D%A5%E7%BD%91%E4%B8%8A%E5%86%B2%E6%B5%AA%E4%BA%86/</url>
    <content><![CDATA[<h1>hello world</h1>
<p>æ‘é€šç½‘äº†ã€‚</p>
<a id="more"></a>
<h1>Overview</h1>
<p>è¿‘æœŸåŸºäºgithubå’Œhexoåˆ›å»ºäº†è¿™ä¸ªblogï¼Œç”¨nextä¸»é¢˜ç¾åŒ–ã€‚</p>
<h2 id="ç›®çš„"><a class="header-anchor" href="#ç›®çš„">Â¶</a>ç›®çš„</h2>
<p>è®°å½•ä¸€ä¸‹å­¦ä¹ ç¬”è®°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è®°å½•ä¸€ä¸‹ç”Ÿæ´»ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªç¬”è®°æœ¬å§ã€‚</p>
<h2 id="æ¥ä¸‹æ¥"><a class="header-anchor" href="#æ¥ä¸‹æ¥">Â¶</a>æ¥ä¸‹æ¥</h2>
<p>æ¥ä¸‹æ¥å¯èƒ½ä¼šåšä¸€ç¯‡blogåˆ›å»ºçš„ç®€å•æ•™ç¨‹</p>
]]></content>
      <tags>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
</search>
